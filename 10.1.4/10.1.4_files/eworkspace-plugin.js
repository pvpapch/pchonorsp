parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"aSor":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=F,exports.hydrate=H,exports.h=exports.createElement=f,exports.Fragment=h,exports.createRef=d,exports.Component=v,exports.cloneElement=O,exports.createContext=R,exports.toChildArray=b,exports.__u=M,exports.options=exports.isValidElement=void 0;var e,t,n,_,l,o,r,u={},i=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,t){for(var n in t)e[n]=t[n];return e}function c(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n){var _,l,o,r=arguments,u={};for(o in t)"key"==o?_=t[o]:"ref"==o?l=t[o]:u[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(r[o]);if(null!=n&&(u.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===u[o]&&(u[o]=e.defaultProps[o]);return a(e,u,_,l,null)}function a(t,n,_,l,o){var r={type:t,props:n,key:_,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o};return null==o&&(r.__v=r),null!=e.vnode&&e.vnode(r),r}function d(){return{current:null}}function h(e){return e.children}function v(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function m(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return m(e)}}function g(t){(!t.__d&&(t.__d=!0)&&n.push(t)&&!k.__r++||l!==e.debounceRendering)&&((l=e.debounceRendering)||_)(k)}function k(){for(var e;k.__r=n.length;)e=n.sort(function(e,t){return e.__v.__b-t.__v.__b}),n=[],e.some(function(e){var t,n,_,l,o,r,u;e.__d&&(r=(o=(t=e).__v).__e,(u=t.__P)&&(n=[],(_=p({},o)).__v=_,l=A(u,o,_,t.__n,void 0!==u.ownerSVGElement,null!=o.__h?[r]:null,n,null==r?y(o):r,o.__h),D(n,o),l!=r&&m(o)))})}function x(e,t,n,_,l,o,r,s,p,f){var d,v,m,g,k,x,b,w=_&&_.__k||i,S=w.length;for(p==u&&(p=null!=r?r[0]:S?y(_,0):null),n.__k=[],d=0;d<t.length;d++)if(null!=(g=n.__k[d]=null==(g=t[d])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g?a(null,g,null,null,g):Array.isArray(g)?a(h,{children:g},null,null,null):null!=g.__e||null!=g.__c?a(g.type,g.props,g.key,null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(m=w[d])||m&&g.key==m.key&&g.type===m.type)w[d]=void 0;else for(v=0;v<S;v++){if((m=w[v])&&g.key==m.key&&g.type===m.type){w[v]=void 0;break}m=null}k=A(e,g,m=m||u,l,o,r,s,p,f),(v=g.ref)&&m.ref!=v&&(b||(b=[]),m.ref&&b.push(m.ref,null,g),b.push(v,g.__c||k,g)),null!=k?(null==x&&(x=k),p=C(e,g,m,w,r,k,p),f||"option"!=n.type?"function"==typeof n.type&&(n.__d=p):e.value=""):p&&m.__e==p&&p.parentNode!=e&&(p=y(m))}if(n.__e=x,null!=r&&"function"!=typeof n.type)for(d=r.length;d--;)null!=r[d]&&c(r[d]);for(d=S;d--;)null!=w[d]&&M(w[d],w[d]);if(b)for(d=0;d<b.length;d++)L(b[d],b[++d],b[++d])}function b(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some(function(e){b(e,t)}):t.push(e)),t}function C(e,t,n,_,l,o,r){var u,i,s;if(void 0!==t.__d)u=t.__d,t.__d=void 0;else if(l==n||o!=r||null==o.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(o),u=null;else{for(i=r,s=0;(i=i.nextSibling)&&s<_.length;s+=2)if(i==o)break e;e.insertBefore(o,r),u=r}return void 0!==u?u:o.nextSibling}function w(e,t,n,_,l){var o;for(o in n)"children"===o||"key"===o||o in t||P(e,o,null,n[o],_);for(o in t)l&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||P(e,o,t[o],n[o],_)}function S(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||s.test(t)?n:n+"px"}function P(e,t,n,_,l){var o,r,u;if(l&&"className"==t&&(t="class"),"style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof _&&(e.style.cssText=_=""),_)for(t in _)n&&t in n||S(e.style,t,"");if(n)for(t in n)_&&n[t]===_[t]||S(e.style,t,n[t])}else"o"===t[0]&&"n"===t[1]?(o=t!==(t=t.replace(/Capture$/,"")),(r=t.toLowerCase())in e&&(t=r),t=t.slice(2),e.l||(e.l={}),e.l[t+o]=n,u=o?N:E,n?_||e.addEventListener(t,u,o):e.removeEventListener(t,u,o)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&"download"!==t&&"href"!==t&&!l&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function E(t){this.l[t.type+!1](e.event?e.event(t):t)}function N(t){this.l[t.type+!0](e.event?e.event(t):t)}function U(e,t,n){var _,l;for(_=0;_<e.__k.length;_++)(l=e.__k[_])&&(l.__=e,l.__e&&("function"==typeof l.type&&l.__k.length>1&&U(l,t,n),t=C(n,l,l,e.__k,null,l.__e,t),"function"==typeof e.type&&(e.__d=t)))}function A(t,n,_,l,o,r,u,i,s){var c,f,a,d,y,m,g,k,b,C,w,S=n.type;if(void 0!==n.constructor)return null;null!=_.__h&&(s=_.__h,i=n.__e=_.__e,n.__h=null,r=[i]),(c=e.__b)&&c(n);try{e:if("function"==typeof S){if(k=n.props,b=(c=S.contextType)&&l[c.__c],C=c?b?b.props.value:c.__:l,_.__c?g=(f=n.__c=_.__c).__=f.__E:("prototype"in S&&S.prototype.render?n.__c=f=new S(k,C):(n.__c=f=new v(k,C),f.constructor=S,f.render=W),b&&b.sub(f),f.props=k,f.state||(f.state={}),f.context=C,f.__n=l,a=f.__d=!0,f.__h=[]),null==f.__s&&(f.__s=f.state),null!=S.getDerivedStateFromProps&&(f.__s==f.state&&(f.__s=p({},f.__s)),p(f.__s,S.getDerivedStateFromProps(k,f.__s))),d=f.props,y=f.state,a)null==S.getDerivedStateFromProps&&null!=f.componentWillMount&&f.componentWillMount(),null!=f.componentDidMount&&f.__h.push(f.componentDidMount);else{if(null==S.getDerivedStateFromProps&&k!==d&&null!=f.componentWillReceiveProps&&f.componentWillReceiveProps(k,C),!f.__e&&null!=f.shouldComponentUpdate&&!1===f.shouldComponentUpdate(k,f.__s,C)||n.__v===_.__v){f.props=k,f.state=f.__s,n.__v!==_.__v&&(f.__d=!1),f.__v=n,n.__e=_.__e,n.__k=_.__k,f.__h.length&&u.push(f),U(n,i,t);break e}null!=f.componentWillUpdate&&f.componentWillUpdate(k,f.__s,C),null!=f.componentDidUpdate&&f.__h.push(function(){f.componentDidUpdate(d,y,m)})}f.context=C,f.props=k,f.state=f.__s,(c=e.__r)&&c(n),f.__d=!1,f.__v=n,f.__P=t,c=f.render(f.props,f.state,f.context),f.state=f.__s,null!=f.getChildContext&&(l=p(p({},l),f.getChildContext())),a||null==f.getSnapshotBeforeUpdate||(m=f.getSnapshotBeforeUpdate(d,y)),w=null!=c&&c.type==h&&null==c.key?c.props.children:c,x(t,Array.isArray(w)?w:[w],n,_,l,o,r,u,i,s),f.base=n.__e,n.__h=null,f.__h.length&&u.push(f),g&&(f.__E=f.__=null),f.__e=!1}else null==r&&n.__v===_.__v?(n.__k=_.__k,n.__e=_.__e):n.__e=T(_.__e,n,_,l,o,r,u,s);(c=e.diffed)&&c(n)}catch(t){n.__v=null,(s||null!=r)&&(n.__e=i,n.__h=!!s,r[r.indexOf(i)]=null),e.__e(t,n,_)}return n.__e}function D(t,n){e.__c&&e.__c(n,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(e){e.call(n)})}catch(t){e.__e(t,n.__v)}})}function T(e,t,n,_,l,o,r,s){var p,c,f,a,d,h=n.props,v=t.props;if(l="svg"===t.type||l,null!=o)for(p=0;p<o.length;p++)if(null!=(c=o[p])&&((null===t.type?3===c.nodeType:c.localName===t.type)||e==c)){e=c,o[p]=null;break}if(null==e){if(null===t.type)return document.createTextNode(v);e=l?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,v.is&&{is:v.is}),o=null,s=!1}if(null===t.type)h===v||s&&e.data===v||(e.data=v);else{if(null!=o&&(o=i.slice.call(e.childNodes)),f=(h=n.props||u).dangerouslySetInnerHTML,a=v.dangerouslySetInnerHTML,!s){if(null!=o)for(h={},d=0;d<e.attributes.length;d++)h[e.attributes[d].name]=e.attributes[d].value;(a||f)&&(a&&(f&&a.__html==f.__html||a.__html===e.innerHTML)||(e.innerHTML=a&&a.__html||""))}w(e,v,h,l,s),a?t.__k=[]:(p=t.props.children,x(e,Array.isArray(p)?p:[p],t,n,_,"foreignObject"!==t.type&&l,o,r,u,s)),s||("value"in v&&void 0!==(p=v.value)&&(p!==e.value||"progress"===t.type&&!p)&&P(e,"value",p,h.value,!1),"checked"in v&&void 0!==(p=v.checked)&&p!==e.checked&&P(e,"checked",p,h.checked,!1))}return e}function L(t,n,_){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,_)}}function M(t,n,_){var l,o,r;if(e.unmount&&e.unmount(t),(l=t.ref)&&(l.current&&l.current!==t.__e||L(l,null,n)),_||"function"==typeof t.type||(_=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(l=t.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(t){e.__e(t,n)}l.base=l.__P=null}if(l=t.__k)for(r=0;r<l.length;r++)l[r]&&M(l[r],n,_);null!=o&&c(o)}function W(e,t,n){return this.constructor(e,n)}function F(t,n,_){var l,r,s;e.__&&e.__(t,n),r=(l=_===o)?null:_&&_.__k||n.__k,t=f(h,null,[t]),s=[],A(n,(l?n:_||n).__k=t,r||u,u,void 0!==n.ownerSVGElement,_&&!l?[_]:r?null:n.childNodes.length?i.slice.call(n.childNodes):null,s,_||u,l),D(s,t)}function H(e,t){F(e,t,o)}function O(e,t,n){var _,l,o,r=arguments,u=p({},e.props);for(o in t)"key"==o?_=t[o]:"ref"==o?l=t[o]:u[o]=t[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(r[o]);return null!=n&&(u.children=n),a(e.type,u,_||e.key,l||e.ref,null)}function R(e,t){var n={__c:t="__cC"+r++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e,n,_){return this.getChildContext||(n=[],(_={})[t]=this,this.getChildContext=function(){return _},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.some(g)},this.sub=function(e){n.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n.splice(n.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}exports.isValidElement=t,exports.options=e,exports.options=e={__e:function(e,t){for(var n,_,l,o=t.__h;t=t.__;)if((n=t.__c)&&!n.__)try{if((_=n.constructor)&&null!=_.getDerivedStateFromError&&(n.setState(_.getDerivedStateFromError(e)),l=n.__d),null!=n.componentDidCatch&&(n.componentDidCatch(e),l=n.__d),l)return t.__h=o,n.__E=n}catch(t){e=t}throw e}},exports.isValidElement=t=function(e){return null!=e&&void 0===e.constructor},v.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},n),this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),g(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},v.prototype.render=h,n=[],_="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,k.__r=0,o=u,r=0;
},{}],"wGr0":[function(require,module,exports) {
"use strict";var e=require("./eworkspace-plugin");function n(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var o=document.cookie.replace(/(?:(?:^|.*;\s*)cpm-sso-token\s*=\s*([^;]*).*$)|^.*$/,"$1"),r=function r(a,s){var c=this;n(this,r),t(this,"getSubmissions",function(){var n="".concat(e.EWORKSPACE_API_URL_BASE,"/student/ebook/").concat(c.eBookId,"/lesson/").concat(c.lessonId);return new Promise(function(e,t){$.ajax({type:"GET",url:n,dataType:"json",cache:"false",headers:{Authorization:"Bearer "+o}}).done(function(n,t,o){e(n)}).fail(function(e,n,o){console.error("AJAX error: Unable to retrieve eWorkspace submissions ::",n,o),t(o)})})}),t(this,"postSubmission",function(n,t,r){var a="".concat(e.EWORKSPACE_API_URL_BASE,"/student/ebook/").concat(c.eBookId,"/lesson/").concat(c.lessonId,"/problem/").concat(n);return new Promise(function(e,n){$.ajax({type:"POST",url:a,data:JSON.stringify({entryType:"STUDENT_ANSWER",mediaContentType:t,mediaContent:r}),contentType:"application/json; charset=utf-8",dataType:"json",cache:"false",headers:{Authorization:"Bearer "+o}}).then(function(n,t,o){e(n)},function(e,t,o){console.error("AJAX error: Unable to post eWorkspace entry ::",t,o),n(o)})})}),t(this,"postEntry",function(n,t,r){var a="".concat(e.EWORKSPACE_API_URL_BASE,"/student/submission/").concat(n,"/entries");return new Promise(function(e,n){$.ajax({type:"POST",url:a,data:JSON.stringify({entryType:"STUDENT_ANSWER",mediaContentType:t,mediaContent:r}),contentType:"application/json; charset=utf-8",dataType:"json",cache:"false",headers:{Authorization:"Bearer "+o}}).then(function(n,t,o){e(n)},function(e,t,o){console.error("AJAX error: Unable to post eWorkspace entry ::",t,o),n(o)})})}),t(this,"archiveEntry",function(n){var t="".concat(e.EWORKSPACE_API_URL_BASE,"/student/entry/").concat(n,"/archive");return new Promise(function(e,n){$.ajax({type:"PATCH",url:t,dataType:"json",cache:"false",headers:{Authorization:"Bearer "+o}}).then(function(n,t,o){e(n)},function(e,t,o){console.error("AJAX error: Unable to archive eWorkspace entry ::",t,o),n(o)})})}),this.eBookId=a,this.lessonId=s};module.exports={EWorkspaceAPI:r};
},{"./eworkspace-plugin":"rPlX"}],"MwGB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.useState=a,exports.useReducer=p,exports.useEffect=h,exports.useLayoutEffect=m,exports.useRef=v,exports.useImperativeHandle=l,exports.useMemo=H,exports.useCallback=x,exports.useContext=d,exports.useDebugValue=y,exports.useErrorBoundary=E;var _,n,t,o=require("preact"),e=0,u=[],r=o.options.__r,i=o.options.diffed,c=o.options.__c,s=o.options.unmount;function f(_,t){o.options.__h&&o.options.__h(n,_,e||t),e=0;var u=n.__H||(n.__H={__:[],__h:[]});return _>=u.__.length&&u.__.push({}),u.__[_]}function a(_){return e=1,p(F,_)}function p(t,o,e){var u=f(_++,2);return u.t=t,u.__c||(u.__=[e?e(o):F(void 0,o),function(_){var n=u.t(u.__[0],_);u.__[0]!==n&&(u.__=[n,u.__[1]],u.__c.setState({}))}],u.__c=n),u.__}function h(t,e){var u=f(_++,3);!o.options.__s&&D(u.__H,e)&&(u.__=t,u.__H=e,n.__H.__h.push(u))}function m(t,e){var u=f(_++,4);!o.options.__s&&D(u.__H,e)&&(u.__=t,u.__H=e,n.__h.push(u))}function v(_){return e=5,H(function(){return{current:_}},[])}function l(_,n,t){e=6,m(function(){"function"==typeof _?_(n()):_&&(_.current=n())},null==t?t:t.concat(_))}function H(n,t){var o=f(_++,7);return D(o.__H,t)&&(o.__=n(),o.__H=t,o.__h=n),o.__}function x(_,n){return e=8,H(function(){return _},n)}function d(t){var o=n.context[t.__c],e=f(_++,9);return e.__c=t,o?(null==e.__&&(e.__=!0,o.sub(n)),o.props.value):t.__}function y(_,n){o.options.useDebugValue&&o.options.useDebugValue(n?n(_):_)}function E(t){var o=f(_++,10),e=a();return o.__=t,n.componentDidCatch||(n.componentDidCatch=function(_){o.__&&o.__(_),e[1](_)}),[e[0],function(){e[1](void 0)}]}function g(){u.some(function(_){if(_.__P)try{_.__H.__h.forEach(q),_.__H.__h.forEach(A),_.__H.__h=[]}catch(n){return _.__H.__h=[],o.options.__e(n,_.__v),!0}}),u=[]}o.options.__r=function(t){r&&r(t),_=0;var o=(n=t.__c).__H;o&&(o.__h.forEach(q),o.__h.forEach(A),o.__h=[])},o.options.diffed=function(_){i&&i(_);var n=_.__c;n&&n.__H&&n.__H.__h.length&&(1!==u.push(n)&&t===o.options.requestAnimationFrame||((t=o.options.requestAnimationFrame)||function(_){var n,t=function(){clearTimeout(o),b&&cancelAnimationFrame(n),setTimeout(_)},o=setTimeout(t,100);b&&(n=requestAnimationFrame(t))})(g))},o.options.__c=function(_,n){n.some(function(_){try{_.__h.forEach(q),_.__h=_.__h.filter(function(_){return!_.__||A(_)})}catch(t){n.some(function(_){_.__h&&(_.__h=[])}),n=[],o.options.__e(t,_.__v)}}),c&&c(_,n)},o.options.unmount=function(_){s&&s(_);var n=_.__c;if(n&&n.__H)try{n.__H.__.forEach(q)}catch(_){o.options.__e(_,n.__v)}};var b="function"==typeof requestAnimationFrame;function q(_){"function"==typeof _.u&&_.u()}function A(_){_.u=_.__()}function D(_,n){return!_||_.length!==n.length||n.some(function(n,t){return n!==_[t]})}function F(_,n){return"function"==typeof n?n(_):n}
},{"preact":"aSor"}],"AQ6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={version:!0,Children:!0,render:!0,hydrate:!0,unmountComponentAtNode:!0,createPortal:!0,createFactory:!0,cloneElement:!0,isValidElement:!0,findDOMNode:!0,PureComponent:!0,memo:!0,forwardRef:!0,unstable_batchedUpdates:!0,StrictMode:!0,Suspense:!0,SuspenseList:!0,lazy:!0,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:!0,createElement:!0,createContext:!0,createRef:!0,Fragment:!0,Component:!0};exports.render=k,exports.hydrate=S,exports.unmountComponentAtNode=$,exports.createPortal=x,exports.createFactory=M,exports.cloneElement=j,exports.isValidElement=W,exports.findDOMNode=z,exports.PureComponent=u,exports.memo=i,exports.forwardRef=_,exports.Suspense=m,exports.SuspenseList=y,exports.lazy=v,Object.defineProperty(exports,"createElement",{enumerable:!0,get:function(){return n.createElement}}),Object.defineProperty(exports,"createContext",{enumerable:!0,get:function(){return n.createContext}}),Object.defineProperty(exports,"createRef",{enumerable:!0,get:function(){return n.createRef}}),Object.defineProperty(exports,"Fragment",{enumerable:!0,get:function(){return n.Fragment}}),Object.defineProperty(exports,"Component",{enumerable:!0,get:function(){return n.Component}}),exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=exports.StrictMode=exports.unstable_batchedUpdates=exports.Children=exports.version=exports.default=void 0;var t=require("preact/hooks");Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(exports,n,{enumerable:!0,get:function(){return t[n]}}))});var n=require("preact");function r(e,t){for(var n in t)e[n]=t[n];return e}function o(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function u(e){this.props=e}function i(e,t){function r(e){var n=this.props.ref,r=n==e.ref;return!r&&n&&(n.call?n(null):n.current=null),t?!t(this.props,e)||!r:o(this.props,e)}function u(t){return this.shouldComponentUpdate=r,(0,n.createElement)(e,t)}return u.displayName="Memo("+(e.displayName||e.name)+")",u.prototype.isReactComponent=!0,u.__f=!0,u}(u.prototype=new n.Component).isPureReactComponent=!0,u.prototype.shouldComponentUpdate=function(e,t){return o(this.props,e)||o(this.state,t)};var a=n.options.__b;n.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),a&&a(e)};var l="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _(e){function t(t,n){var o=r({},t);return delete o.ref,e(o,(n=t.ref||n)&&("object"!=typeof n||"current"in n)?n:null)}return t.$$typeof=l,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var c=function(e,t){return null==e?null:(0,n.toChildArray)((0,n.toChildArray)(e).map(t))},p={map:c,forEach:c,count:function(e){return e?(0,n.toChildArray)(e).length:0},only:function(e){var t=(0,n.toChildArray)(e);if(1!==t.length)throw"Children.only";return t[0]},toArray:n.toChildArray},s=n.options.__e;function f(e){return e&&((e=r({},e)).__c=null,e.__k=e.__k&&e.__k.map(f)),e}function d(e){return e&&(e.__v=null,e.__k=e.__k&&e.__k.map(d)),e}function m(){this.__u=0,this.t=null,this.__b=null}function h(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function v(e){var t,r,o;function u(u){if(t||(t=e()).then(function(e){r=e.default||e},function(e){o=e}),o)throw o;if(!r)throw t;return(0,n.createElement)(r,u)}return u.displayName="Lazy",u.__f=!0,u}function y(){this.u=null,this.o=null}exports.Children=p,n.options.__e=function(e,t,n){if(e.then)for(var r,o=t;o=o.__;)if((r=o.__c)&&r.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),r.__c(e,t.__c);s(e,t,n)},(m.prototype=new n.Component).__c=function(e,t){var n=this;null==n.t&&(n.t=[]),n.t.push(t);var r=h(n.__v),o=!1,u=function(){o||(o=!0,t.componentWillUnmount=t.__c,r?r(i):i())};t.__c=t.componentWillUnmount,t.componentWillUnmount=function(){u(),t.__c&&t.__c()};var i=function(){var e;if(!--n.__u)for(n.__v.__k[0]=d(n.state.__e),n.setState({__e:n.__b=null});e=n.t.pop();)e.forceUpdate()},a=n.__v;a&&!0===a.__h||n.__u++||n.setState({__e:n.__b=n.__v.__k[0]}),e.then(u,u)},m.prototype.componentWillUnmount=function(){this.t=[]},m.prototype.render=function(e,t){this.__b&&(this.__v.__k&&(this.__v.__k[0]=f(this.__b)),this.__b=null);var r=t.__e&&(0,n.createElement)(n.Fragment,null,e.fallback);return r&&(r.__h=null),[(0,n.createElement)(n.Fragment,null,t.__e?null:e.children),r]};var b=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function C(e){return this.getChildContext=function(){return e.context},e.children}function E(e){var t=this,r=e.i,o=(0,n.createElement)(C,{context:t.context},e.__v);t.componentWillUnmount=function(){var e=t.l.parentNode;e&&e.removeChild(t.l),(0,n.__u)(t.s)},t.i&&t.i!==r&&(t.componentWillUnmount(),t.h=!1),e.__v?t.h?(r.__k=t.__k,(0,n.render)(o,r),t.__k=r.__k):(t.l=document.createTextNode(""),t.__k=r.__k,(0,n.hydrate)("",r),r.appendChild(t.l),t.h=!0,t.i=r,(0,n.render)(o,r,t.l),r.__k=t.__k,t.__k=t.l.__k):t.h&&t.componentWillUnmount(),t.s=o}function x(e,t){return(0,n.createElement)(E,{__v:e,i:t})}(y.prototype=new n.Component).__e=function(e){var t=this,n=h(t.__v),r=t.o.get(e);return r[0]++,function(o){var u=function(){t.props.revealOrder?(r.push(o),b(t,e,r)):o()};n?n(u):u()}},y.prototype.render=function(e){this.u=null,this.o=new Map;var t=(0,n.toChildArray)(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},y.prototype.componentDidUpdate=y.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,n){b(e,n,t)})};var O="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,R=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,g="undefined"!=typeof Symbol?/fil|che|rad/i:/fil|che|ra/i;function k(e,t,r){return null==t.__k&&(t.textContent=""),(0,n.render)(e,t),"function"==typeof r&&r(),e?e.__c:null}function S(e,t,r){return(0,n.hydrate)(e,t),"function"==typeof r&&r(),e?e.__c:null}n.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(n.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var N=n.options.event;function U(){}function P(){return this.cancelBubble}function A(){return this.defaultPrevented}n.options.event=function(e){return N&&(e=N(e)),e.persist=U,e.isPropagationStopped=P,e.isDefaultPrevented=A,e.nativeEvent=e};var L,w={configurable:!0,get:function(){return this.class}},F=n.options.vnode;n.options.vnode=function(e){var t=e.type,r=e.props,o=r;if("string"==typeof t){for(var u in o={},r){var i=r[u];"defaultValue"===u&&"value"in r&&null==r.value?u="value":"download"===u&&!0===i?i="":/ondoubleclick/i.test(u)?u="ondblclick":/^onchange(textarea|input)/i.test(u+t)&&!g.test(r.type)?u="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(u)?u=u.toLowerCase():R.test(u)?u=u.replace(/[A-Z0-9]/,"-$&").toLowerCase():null===i&&(i=void 0),o[u]=i}"select"==t&&o.multiple&&Array.isArray(o.value)&&(o.value=(0,n.toChildArray)(r.children).forEach(function(e){e.props.selected=-1!=o.value.indexOf(e.props.value)})),e.props=o}t&&r.class!=r.className&&(w.enumerable="className"in r,null!=r.className&&(o.class=r.className),Object.defineProperty(o,"className",w)),e.$$typeof=O,F&&F(e)};var D=n.options.__r;n.options.__r=function(e){D&&D(e),L=e.__c};var T={ReactCurrentDispatcher:{current:{readContext:function(e){return L.__n[e.__c].props.value}}}},I="16.8.0";function M(e){return n.createElement.bind(null,e)}function W(e){return!!e&&e.$$typeof===O}function j(e){return W(e)?n.cloneElement.apply(null,arguments):e}function $(e){return!!e.__k&&((0,n.render)(null,e),!0)}function z(e){return e&&(e.base||1===e.nodeType&&e)||null}exports.version=I,exports.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T;var B=function(e,t){return e(t)},V=n.Fragment;exports.StrictMode=V,exports.unstable_batchedUpdates=B;var Y={useState:t.useState,useReducer:t.useReducer,useEffect:t.useEffect,useLayoutEffect:t.useLayoutEffect,useRef:t.useRef,useImperativeHandle:t.useImperativeHandle,useMemo:t.useMemo,useCallback:t.useCallback,useContext:t.useContext,useDebugValue:t.useDebugValue,version:"16.8.0",Children:p,render:k,hydrate:S,unmountComponentAtNode:$,createPortal:x,createElement:n.createElement,createContext:n.createContext,createFactory:M,cloneElement:j,createRef:n.createRef,Fragment:n.Fragment,isValidElement:W,findDOMNode:z,Component:n.Component,PureComponent:u,memo:i,forwardRef:_,unstable_batchedUpdates:B,StrictMode:n.Fragment,Suspense:m,SuspenseList:y,lazy:v,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:T};exports.default=Y;
},{"preact/hooks":"MwGB","preact":"aSor"}],"jSb2":[function(require,module,exports) {
var define;
var e;!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("react")):"function"==typeof e&&e.amd?e(["react"],i):"object"==typeof exports?exports.ProseMirror=i(require("react")):t.ProseMirror=i(t.React)}(self,function(e){return function(){"use strict";var t={207:function(e,t,i){i.r(t),i.d(t,{default:function(){return Xp}});var n=i(698),r=i.n(n);function o(e){this.content=e}o.prototype={constructor:o,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return-1==t?void 0:this.content[t+1]},update:function(e,t,i){var n=i&&i!=e?this.remove(i):this,r=n.find(e),s=n.content.slice();return-1==r?s.push(i||e,t):(s[r+1]=t,i&&(s[r]=i)),new o(s)},remove:function(e){var t=this.find(e);if(-1==t)return this;var i=this.content.slice();return i.splice(t,2),new o(i)},addToStart:function(e,t){return new o([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var i=this.remove(e).content.slice();return i.push(e,t),new o(i)},addBefore:function(e,t,i){var n=this.remove(t),r=n.content.slice(),s=n.find(e);return r.splice(-1==s?r.length:s,0,t,i),new o(r)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return(e=o.from(e)).size?new o(e.content.concat(this.subtract(e).content)):this},append:function(e){return(e=o.from(e)).size?new o(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=o.from(e);for(var i=0;i<e.content.length;i+=2)t=t.remove(e.content[i]);return t},get size(){return this.content.length>>1}},o.from=function(e){if(e instanceof o)return e;var t=[];if(e)for(var i in e)t.push(i,e[i]);return new o(t)};var s=o;var a=function(e,t){if(this.content=e,this.size=t||0,null==t)for(var i=0;i<e.length;i++)this.size+=e[i].nodeSize},l={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};a.prototype.nodesBetween=function(e,t,i,n,r){void 0===n&&(n=0);for(var o=0,s=0;s<t;o++){var a=this.content[o],l=s+a.nodeSize;if(l>e&&!1!==i(a,n+s,r,o)&&a.content.size){var c=s+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,t-c),i,n+c)}s=l}},a.prototype.descendants=function(e){this.nodesBetween(0,this.size,e)},a.prototype.textBetween=function(e,t,i,n){var r="",o=!0;return this.nodesBetween(e,t,function(s,a){s.isText?(r+=s.text.slice(Math.max(e,a)-a,t-a),o=!i):s.isLeaf&&n?(r+=n,o=!i):!o&&s.isBlock&&(r+=i,o=!0)},0),r},a.prototype.append=function(e){if(!e.size)return this;if(!this.size)return e;var t=this.lastChild,i=e.firstChild,n=this.content.slice(),r=0;for(t.isText&&t.sameMarkup(i)&&(n[n.length-1]=t.withText(t.text+i.text),r=1);r<e.content.length;r++)n.push(e.content[r]);return new a(n,this.size+e.size)},a.prototype.cut=function(e,t){if(null==t&&(t=this.size),0==e&&t==this.size)return this;var i=[],n=0;if(t>e)for(var r=0,o=0;o<t;r++){var s=this.content[r],l=o+s.nodeSize;l>e&&((o<e||l>t)&&(s=s.isText?s.cut(Math.max(0,e-o),Math.min(s.text.length,t-o)):s.cut(Math.max(0,e-o-1),Math.min(s.content.size,t-o-1))),i.push(s),n+=s.nodeSize),o=l}return new a(i,n)},a.prototype.cutByIndex=function(e,t){return e==t?a.empty:0==e&&t==this.content.length?this:new a(this.content.slice(e,t))},a.prototype.replaceChild=function(e,t){var i=this.content[e];if(i==t)return this;var n=this.content.slice(),r=this.size+t.nodeSize-i.nodeSize;return n[e]=t,new a(n,r)},a.prototype.addToStart=function(e){return new a([e].concat(this.content),this.size+e.nodeSize)},a.prototype.addToEnd=function(e){return new a(this.content.concat(e),this.size+e.nodeSize)},a.prototype.eq=function(e){if(this.content.length!=e.content.length)return!1;for(var t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0},l.firstChild.get=function(){return this.content.length?this.content[0]:null},l.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},l.childCount.get=function(){return this.content.length},a.prototype.child=function(e){var t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t},a.prototype.maybeChild=function(e){return this.content[e]},a.prototype.forEach=function(e){for(var t=0,i=0;t<this.content.length;t++){var n=this.content[t];e(n,i,t),i+=n.nodeSize}},a.prototype.findDiffStart=function(e,t){return void 0===t&&(t=0),function e(t,i,n){for(var r=0;;r++){if(r==t.childCount||r==i.childCount)return t.childCount==i.childCount?null:n;var o=t.child(r),s=i.child(r);if(o!=s){if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)n++;return n}if(o.content.size||s.content.size){var l=e(o.content,s.content,n+1);if(null!=l)return l}n+=o.nodeSize}else n+=o.nodeSize}}(this,e,t)},a.prototype.findDiffEnd=function(e,t,i){return void 0===t&&(t=this.size),void 0===i&&(i=e.size),function e(t,i,n,r){for(var o=t.childCount,s=i.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:r};var a=t.child(--o),l=i.child(--s),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:r};if(a.isText&&a.text!=l.text){for(var d=0,p=Math.min(a.text.length,l.text.length);d<p&&a.text[a.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(a.content.size||l.content.size){var h=e(a.content,l.content,n-1,r-1);if(h)return h}n-=c,r-=c}else n-=c,r-=c}}(this,e,t,i)},a.prototype.findIndex=function(e,t){if(void 0===t&&(t=-1),0==e)return d(0,e);if(e==this.size)return d(this.content.length,e);if(e>this.size||e<0)throw new RangeError("Position "+e+" outside of fragment ("+this+")");for(var i=0,n=0;;i++){var r=n+this.child(i).nodeSize;if(r>=e)return r==e||t>0?d(i+1,r):d(i,n);n=r}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map(function(e){return e.toJSON()}):null},a.fromJSON=function(e,t){if(!t)return a.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(t.map(e.nodeFromJSON))},a.fromArray=function(e){if(!e.length)return a.empty;for(var t,i=0,n=0;n<e.length;n++){var r=e[n];i+=r.nodeSize,n&&r.isText&&e[n-1].sameMarkup(r)?(t||(t=e.slice(0,n)),t[t.length-1]=r.withText(t[t.length-1].text+r.text)):t&&t.push(r)}return new a(t||e,i)},a.from=function(e){if(!e)return a.empty;if(e instanceof a)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new a([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(a.prototype,l);var c={index:0,offset:0};function d(e,t){return c.index=e,c.offset=t,c}function p(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var i=Array.isArray(e);if(Array.isArray(t)!=i)return!1;if(i){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!p(e[n],t[n]))return!1}else{for(var r in e)if(!(r in t&&p(e[r],t[r])))return!1;for(var o in t)if(!(o in e))return!1}return!0}a.empty=new a([],0);var h=function(e,t){this.type=e,this.attrs=t};function u(e){var t=Error.call(this,e);return t.__proto__=u.prototype,t}h.prototype.addToSet=function(e){for(var t,i=!1,n=0;n<e.length;n++){var r=e[n];if(this.eq(r))return e;if(this.type.excludes(r.type))t||(t=e.slice(0,n));else{if(r.type.excludes(this.type))return e;!i&&r.type.rank>this.type.rank&&(t||(t=e.slice(0,n)),t.push(this),i=!0),t&&t.push(r)}}return t||(t=e.slice()),i||t.push(this),t},h.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e},h.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1},h.prototype.eq=function(e){return this==e||this.type==e.type&&p(this.attrs,e.attrs)},h.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return e},h.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");var i=e.marks[t.type];if(!i)throw new RangeError("There is no mark type "+t.type+" in this schema");return i.create(t.attrs)},h.sameSet=function(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].eq(t[i]))return!1;return!0},h.setFrom=function(e){if(!e||0==e.length)return h.none;if(e instanceof h)return[e];var t=e.slice();return t.sort(function(e,t){return e.type.rank-t.type.rank}),t},h.none=[],u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,u.prototype.name="ReplaceError";var m=function(e,t,i){this.content=e,this.openStart=t,this.openEnd=i},f={size:{configurable:!0}};function g(e,t,i){if(i.openStart>e.depth)throw new u("Inserted content deeper than insertion position");if(e.depth-i.openStart!=t.depth-i.openEnd)throw new u("Inconsistent open depths");return function e(t,i,n,r){var o=t.index(r),s=t.node(r);if(o==i.index(r)&&r<t.depth-n.openStart){var l=e(t,i,n,r+1);return s.copy(s.content.replaceChild(o,l))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||i.depth!=r){var c=function(e,t){for(var i=t.depth-e.openStart,n=t.node(i).copy(e.content),r=i-1;r>=0;r--)n=t.node(r).copy(a.from(n));return{start:n.resolveNoCache(e.openStart+i),end:n.resolveNoCache(n.content.size-e.openEnd-i)}}(n,t);return k(s,function e(t,i,n,r,o){var s=t.depth>o&&v(t,i,o+1),l=r.depth>o&&v(n,r,o+1),c=[];return x(null,t,o,c),s&&l&&i.index(o)==n.index(o)?(y(s,l),b(k(s,e(t,i,n,r,o+1)),c)):(s&&b(k(s,_(t,i,o+1)),c),x(i,n,o,c),l&&b(k(l,_(n,r,o+1)),c)),x(r,null,o,c),new a(c)}(t,c.start,c.end,i,r))}var d=t.parent,p=d.content;return k(d,p.cut(0,t.parentOffset).append(n.content).append(p.cut(i.parentOffset)))}return k(s,_(t,i,r))}(e,t,i,0)}function y(e,t){if(!t.type.compatibleContent(e.type))throw new u("Cannot join "+t.type.name+" onto "+e.type.name)}function v(e,t,i){var n=e.node(i);return y(n,t.node(i)),n}function b(e,t){var i=t.length-1;i>=0&&e.isText&&e.sameMarkup(t[i])?t[i]=e.withText(t[i].text+e.text):t.push(e)}function x(e,t,i,n){var r=(t||e).node(i),o=0,s=t?t.index(i):r.childCount;e&&(o=e.index(i),e.depth>i?o++:e.textOffset&&(b(e.nodeAfter,n),o++));for(var a=o;a<s;a++)b(r.child(a),n);t&&t.depth==i&&t.textOffset&&b(t.nodeBefore,n)}function k(e,t){if(!e.type.validContent(t))throw new u("Invalid content for node "+e.type.name);return e.copy(t)}function _(e,t,i){var n=[];return x(null,e,i,n),e.depth>i&&b(k(v(e,t,i+1),_(e,t,i+1)),n),x(t,null,i,n),new a(n)}f.size.get=function(){return this.content.size-this.openStart-this.openEnd},m.prototype.insertAt=function(e,t){var i=function e(t,i,n,r){var o=t.findIndex(i),s=o.index,a=o.offset,l=t.maybeChild(s);if(a==i||l.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,i).append(n).append(t.cut(i));var c=e(l.content,i-a-1,n);return c&&t.replaceChild(s,l.copy(c))}(this.content,e+this.openStart,t,null);return i&&new m(i,this.openStart,this.openEnd)},m.prototype.removeBetween=function(e,t){return new m(function e(t,i,n){var r=t.findIndex(i),o=r.index,s=r.offset,a=t.maybeChild(o),l=t.findIndex(n),c=l.index,d=l.offset;if(s==i||a.isText){if(d!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,i).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,a.copy(e(a.content,i-s-1,n-s-1)))}(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)},m.prototype.eq=function(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd},m.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},m.prototype.toJSON=function(){if(!this.content.size)return null;var e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e},m.fromJSON=function(e,t){if(!t)return m.empty;var i=t.openStart||0,n=t.openEnd||0;if("number"!=typeof i||"number"!=typeof n)throw new RangeError("Invalid input for Slice.fromJSON");return new m(a.fromJSON(e,t.content),i,n)},m.maxOpen=function(e,t){void 0===t&&(t=!0);for(var i=0,n=0,r=e.firstChild;r&&!r.isLeaf&&(t||!r.type.spec.isolating);r=r.firstChild)i++;for(var o=e.lastChild;o&&!o.isLeaf&&(t||!o.type.spec.isolating);o=o.lastChild)n++;return new m(e,i,n)},Object.defineProperties(m.prototype,f),m.empty=new m(a.empty,0,0);var w=function(e,t,i){this.pos=e,this.path=t,this.depth=t.length/3-1,this.parentOffset=i},M={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};w.prototype.resolveDepth=function(e){return null==e?this.depth:e<0?this.depth+e:e},M.parent.get=function(){return this.node(this.depth)},M.doc.get=function(){return this.node(0)},w.prototype.node=function(e){return this.path[3*this.resolveDepth(e)]},w.prototype.index=function(e){return this.path[3*this.resolveDepth(e)+1]},w.prototype.indexAfter=function(e){return e=this.resolveDepth(e),this.index(e)+(e!=this.depth||this.textOffset?1:0)},w.prototype.start=function(e){return 0==(e=this.resolveDepth(e))?0:this.path[3*e-1]+1},w.prototype.end=function(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size},w.prototype.before=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]},w.prototype.after=function(e){if(!(e=this.resolveDepth(e)))throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[3*e-1]+this.path[3*e].nodeSize},M.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},M.nodeAfter.get=function(){var e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;var i=this.pos-this.path[this.path.length-1],n=e.child(t);return i?e.child(t).cut(i):n},M.nodeBefore.get=function(){var e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):0==e?null:this.parent.child(e-1)},w.prototype.posAtIndex=function(e,t){t=this.resolveDepth(t);for(var i=this.path[3*t],n=0==t?0:this.path[3*t-1]+1,r=0;r<e;r++)n+=i.child(r).nodeSize;return n},w.prototype.marks=function(){var e=this.parent,t=this.index();if(0==e.content.size)return h.none;if(this.textOffset)return e.child(t).marks;var i=e.maybeChild(t-1),n=e.maybeChild(t);if(!i){var r=i;i=n,n=r}for(var o=i.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||n&&o[s].isInSet(n.marks)||(o=o[s--].removeFromSet(o));return o},w.prototype.marksAcross=function(e){var t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;for(var i=t.marks,n=e.parent.maybeChild(e.index()),r=0;r<i.length;r++)!1!==i[r].type.spec.inclusive||n&&i[r].isInSet(n.marks)||(i=i[r--].removeFromSet(i));return i},w.prototype.sharedDepth=function(e){for(var t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0},w.prototype.blockRange=function(e,t){if(void 0===e&&(e=this),e.pos<this.pos)return e.blockRange(this);for(var i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!t||t(this.node(i))))return new C(this,e,i)},w.prototype.sameParent=function(e){return this.pos-this.parentOffset==e.pos-e.parentOffset},w.prototype.max=function(e){return e.pos>this.pos?e:this},w.prototype.min=function(e){return e.pos<this.pos?e:this},w.prototype.toString=function(){for(var e="",t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset},w.resolve=function(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");for(var i=[],n=0,r=t,o=e;;){var s=o.content.findIndex(r),a=s.index,l=s.offset,c=r-l;if(i.push(o,a,n+l),!c)break;if((o=o.child(a)).isText)break;r=c-1,n+=l+1}return new w(t,i,r)},w.resolveCached=function(e,t){for(var i=0;i<z.length;i++){var n=z[i];if(n.pos==t&&n.doc==e)return n}var r=z[S]=w.resolve(e,t);return S=(S+1)%L,r},Object.defineProperties(w.prototype,M);var z=[],S=0,L=12,C=function(e,t,i){this.$from=e,this.$to=t,this.depth=i},A={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};A.start.get=function(){return this.$from.before(this.depth+1)},A.end.get=function(){return this.$to.after(this.depth+1)},A.parent.get=function(){return this.$from.node(this.depth)},A.startIndex.get=function(){return this.$from.index(this.depth)},A.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(C.prototype,A);var D=Object.create(null),T=function(e,t,i,n){this.type=e,this.attrs=t,this.content=i||a.empty,this.marks=n||h.none},$={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};$.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},$.childCount.get=function(){return this.content.childCount},T.prototype.child=function(e){return this.content.child(e)},T.prototype.maybeChild=function(e){return this.content.maybeChild(e)},T.prototype.forEach=function(e){this.content.forEach(e)},T.prototype.nodesBetween=function(e,t,i,n){void 0===n&&(n=0),this.content.nodesBetween(e,t,i,n,this)},T.prototype.descendants=function(e){this.nodesBetween(0,this.content.size,e)},$.textContent.get=function(){return this.textBetween(0,this.content.size,"")},T.prototype.textBetween=function(e,t,i,n){return this.content.textBetween(e,t,i,n)},$.firstChild.get=function(){return this.content.firstChild},$.lastChild.get=function(){return this.content.lastChild},T.prototype.eq=function(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)},T.prototype.sameMarkup=function(e){return this.hasMarkup(e.type,e.attrs,e.marks)},T.prototype.hasMarkup=function(e,t,i){return this.type==e&&p(this.attrs,t||e.defaultAttrs||D)&&h.sameSet(this.marks,i||h.none)},T.prototype.copy=function(e){return void 0===e&&(e=null),e==this.content?this:new this.constructor(this.type,this.attrs,e,this.marks)},T.prototype.mark=function(e){return e==this.marks?this:new this.constructor(this.type,this.attrs,this.content,e)},T.prototype.cut=function(e,t){return 0==e&&t==this.content.size?this:this.copy(this.content.cut(e,t))},T.prototype.slice=function(e,t,i){if(void 0===t&&(t=this.content.size),void 0===i&&(i=!1),e==t)return m.empty;var n=this.resolve(e),r=this.resolve(t),o=i?0:n.sharedDepth(t),s=n.start(o),a=n.node(o).content.cut(n.pos-s,r.pos-s);return new m(a,n.depth-o,r.depth-o)},T.prototype.replace=function(e,t,i){return g(this.resolve(e),this.resolve(t),i)},T.prototype.nodeAt=function(e){for(var t=this;;){var i=t.content.findIndex(e),n=i.index,r=i.offset;if(!(t=t.maybeChild(n)))return null;if(r==e||t.isText)return t;e-=r+1}},T.prototype.childAfter=function(e){var t=this.content.findIndex(e),i=t.index,n=t.offset;return{node:this.content.maybeChild(i),index:i,offset:n}},T.prototype.childBefore=function(e){if(0==e)return{node:null,index:0,offset:0};var t=this.content.findIndex(e),i=t.index,n=t.offset;if(n<e)return{node:this.content.child(i),index:i,offset:n};var r=this.content.child(i-1);return{node:r,index:i-1,offset:n-r.nodeSize}},T.prototype.resolve=function(e){return w.resolveCached(this,e)},T.prototype.resolveNoCache=function(e){return w.resolve(this,e)},T.prototype.rangeHasMark=function(e,t,i){var n=!1;return t>e&&this.nodesBetween(e,t,function(e){return i.isInSet(e.marks)&&(n=!0),!n}),n},$.isBlock.get=function(){return this.type.isBlock},$.isTextblock.get=function(){return this.type.isTextblock},$.inlineContent.get=function(){return this.type.inlineContent},$.isInline.get=function(){return this.type.isInline},$.isText.get=function(){return this.type.isText},$.isLeaf.get=function(){return this.type.isLeaf},$.isAtom.get=function(){return this.type.isAtom},T.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),N(this.marks,e)},T.prototype.contentMatchAt=function(e){var t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t},T.prototype.canReplace=function(e,t,i,n,r){void 0===i&&(i=a.empty),void 0===n&&(n=0),void 0===r&&(r=i.childCount);var o=this.contentMatchAt(e).matchFragment(i,n,r),s=o&&o.matchFragment(this.content,t);if(!s||!s.validEnd)return!1;for(var l=n;l<r;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0},T.prototype.canReplaceWith=function(e,t,i,n){if(n&&!this.type.allowsMarks(n))return!1;var r=this.contentMatchAt(e).matchType(i),o=r&&r.matchFragment(this.content,t);return!!o&&o.validEnd},T.prototype.canAppend=function(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)},T.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(e){return e.check()})},T.prototype.toJSON=function(){var e={type:this.type.name};for(var t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(e){return e.toJSON()})),e},T.fromJSON=function(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");var i=null;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=t.marks.map(e.markFromJSON)}if("text"==t.type){if("string"!=typeof t.text)throw new RangeError("Invalid text node in JSON");return e.text(t.text,i)}var n=a.fromJSON(e,t.content);return e.nodeType(t.type).create(t.attrs,n,i)},Object.defineProperties(T.prototype,$);var O=function(e){function t(t,i,n,r){if(e.call(this,t,i,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={textContent:{configurable:!0},nodeSize:{configurable:!0}};return t.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):N(this.marks,JSON.stringify(this.text))},i.textContent.get=function(){return this.text},t.prototype.textBetween=function(e,t){return this.text.slice(e,t)},i.nodeSize.get=function(){return this.text.length},t.prototype.mark=function(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)},t.prototype.withText=function(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)},t.prototype.cut=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.text.length),0==e&&t==this.text.length?this:this.withText(this.text.slice(e,t))},t.prototype.eq=function(e){return this.sameMarkup(e)&&this.text==e.text},t.prototype.toJSON=function(){var t=e.prototype.toJSON.call(this);return t.text=this.text,t},Object.defineProperties(t.prototype,i),t}(T);function N(e,t){for(var i=e.length-1;i>=0;i--)t=e[i].type.name+"("+t+")";return t}var E=function(e){this.validEnd=e,this.next=[],this.wrapCache=[]},q={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};E.parse=function(e,t){var i=new K(e,t);if(null==i.next)return E.empty;var n=P(i);i.next&&i.err("Unexpected trailing text");var r,o,s=(r=function(e){var t=[[]];return r(function e(t,o){if("choice"==t.type)return t.exprs.reduce(function(t,i){return t.concat(e(i,o))},[]);if("seq"==t.type)for(var s=0;;s++){var a=e(t.exprs[s],o);if(s==t.exprs.length-1)return a;r(a,o=i())}else{if("star"==t.type){var l=i();return n(o,l),r(e(t.expr,l),l),[n(l)]}if("plus"==t.type){var c=i();return r(e(t.expr,o),c),r(e(t.expr,c),c),[n(c)]}if("opt"==t.type)return[n(o)].concat(e(t.expr,o));if("range"==t.type){for(var d=o,p=0;p<t.min;p++){var h=i();r(e(t.expr,d),h),d=h}if(-1==t.max)r(e(t.expr,d),d);else for(var u=t.min;u<t.max;u++){var m=i();n(d,m),r(e(t.expr,d),m),d=m}return[n(d)]}if("name"==t.type)return[n(o,null,t.value)]}}(e,0),i()),t;function i(){return t.push([])-1}function n(e,i,n){var r={term:n,to:i};return t[e].push(r),r}function r(e,t){e.forEach(function(e){return e.to=t})}}(n),o=Object.create(null),function e(t){var i=[];t.forEach(function(e){r[e].forEach(function(e){var t=e.term,n=e.to;if(t){var o=i.indexOf(t),s=o>-1&&i[o+1];j(r,n).forEach(function(e){s||i.push(t,s=[]),-1==s.indexOf(e)&&s.push(e)})}})});for(var n=o[t.join(",")]=new E(t.indexOf(r.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(W);n.next.push(i[s],o[a.join(",")]||e(a))}return n}(j(r,0)));return function(e,t){for(var i=0,n=[e];i<n.length;i++){for(var r=n[i],o=!r.validEnd,s=[],a=0;a<r.next.length;a+=2){var l=r.next[a],c=r.next[a+1];s.push(l.name),!o||l.isText||l.hasRequiredAttrs()||(o=!1),-1==n.indexOf(c)&&n.push(c)}o&&t.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(s,i),s},E.prototype.matchType=function(e){for(var t=0;t<this.next.length;t+=2)if(this.next[t]==e)return this.next[t+1];return null},E.prototype.matchFragment=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=e.childCount);for(var n=this,r=t;n&&r<i;r++)n=n.matchType(e.child(r).type);return n},q.inlineContent.get=function(){var e=this.next[0];return!!e&&e.isInline},q.defaultType.get=function(){for(var e=0;e<this.next.length;e+=2){var t=this.next[e];if(!t.isText&&!t.hasRequiredAttrs())return t}},E.prototype.compatible=function(e){for(var t=0;t<this.next.length;t+=2)for(var i=0;i<e.next.length;i+=2)if(this.next[t]==e.next[i])return!0;return!1},E.prototype.fillBefore=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=0);var n=[this];return function r(o,s){var l=o.matchFragment(e,i);if(l&&(!t||l.validEnd))return a.from(s.map(function(e){return e.createAndFill()}));for(var c=0;c<o.next.length;c+=2){var d=o.next[c],p=o.next[c+1];if(!d.isText&&!d.hasRequiredAttrs()&&-1==n.indexOf(p)){n.push(p);var h=r(p,s.concat(d));if(h)return h}}}(this,[])},E.prototype.findWrapping=function(e){for(var t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];var i=this.computeWrapping(e);return this.wrapCache.push(e,i),i},E.prototype.computeWrapping=function(e){for(var t=Object.create(null),i=[{match:this,type:null,via:null}];i.length;){var n=i.shift(),r=n.match;if(r.matchType(e)){for(var o=[],s=n;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<r.next.length;a+=2){var l=r.next[a];l.isLeaf||l.hasRequiredAttrs()||l.name in t||n.type&&!r.next[a+1].validEnd||(i.push({match:l.contentMatch,type:l,via:n}),t[l.name]=!0)}}},q.edgeCount.get=function(){return this.next.length>>1},E.prototype.edge=function(e){var t=e<<1;if(t>=this.next.length)throw new RangeError("There's no "+e+"th edge in this content match");return{type:this.next[t],next:this.next[t+1]}},E.prototype.toString=function(){var e=[];return function t(i){e.push(i);for(var n=1;n<i.next.length;n+=2)-1==e.indexOf(i.next[n])&&t(i.next[n])}(this),e.map(function(t,i){for(var n=i+(t.validEnd?"*":" ")+" ",r=0;r<t.next.length;r+=2)n+=(r?", ":"")+t.next[r].name+"->"+e.indexOf(t.next[r+1]);return n}).join("\n")},Object.defineProperties(E.prototype,q),E.empty=new E(!0);var K=function(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()},B={next:{configurable:!0}};function P(e){var t=[];do{t.push(R(e))}while(e.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function R(e){var t=[];do{t.push(I(e))}while(e.next&&")"!=e.next&&"|"!=e.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function I(e){for(var t=function(e){if(e.eat("(")){var t=P(e);return e.eat(")")||e.err("Missing closing paren"),t}if(!/\W/.test(e.next)){var i=function(e,t){var i=e.nodeTypes,n=i[t];if(n)return[n];var r=[];for(var o in i){var s=i[o];s.groups.indexOf(t)>-1&&r.push(s)}return 0==r.length&&e.err("No node type or group '"+t+"' found"),r}(e,e.next).map(function(t){return null==e.inline?e.inline=t.isInline:e.inline!=t.isInline&&e.err("Mixing inline and block content"),{type:"name",value:t}});return e.pos++,1==i.length?i[0]:{type:"choice",exprs:i}}e.err("Unexpected token '"+e.next+"'")}(e);;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else{if(!e.eat("{"))break;t=V(e,t)}return t}function F(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");var t=Number(e.next);return e.pos++,t}function V(e,t){var i=F(e),n=i;return e.eat(",")&&(n="}"!=e.next?F(e):-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:i,max:n,expr:t}}function W(e,t){return t-e}function j(e,t){var i=[];return function t(n){var r=e[n];if(1==r.length&&!r[0].term)return t(r[0].to);i.push(n);for(var o=0;o<r.length;o++){var s=r[o],a=s.term,l=s.to;a||-1!=i.indexOf(l)||t(l)}}(t),i.sort(W)}function H(e){var t=Object.create(null);for(var i in e){var n=e[i];if(!n.hasDefault)return null;t[i]=n.default}return t}function U(e,t){var i=Object.create(null);for(var n in e){var r=t&&t[n];if(void 0===r){var o=e[n];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+n);r=o.default}i[n]=r}return i}function X(e){var t=Object.create(null);if(e)for(var i in e)t[i]=new G(e[i]);return t}B.next.get=function(){return this.tokens[this.pos]},K.prototype.eat=function(e){return this.next==e&&(this.pos++||!0)},K.prototype.err=function(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")},Object.defineProperties(K.prototype,B);var Z=function(e,t,i){this.name=e,this.schema=t,this.spec=i,this.groups=i.group?i.group.split(" "):[],this.attrs=X(i.attrs),this.defaultAttrs=H(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==e),this.isText="text"==e},J={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};J.isInline.get=function(){return!this.isBlock},J.isTextblock.get=function(){return this.isBlock&&this.inlineContent},J.isLeaf.get=function(){return this.contentMatch==E.empty},J.isAtom.get=function(){return this.isLeaf||this.spec.atom},Z.prototype.hasRequiredAttrs=function(){for(var e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1},Z.prototype.compatibleContent=function(e){return this==e||this.contentMatch.compatible(e.contentMatch)},Z.prototype.computeAttrs=function(e){return!e&&this.defaultAttrs?this.defaultAttrs:U(this.attrs,e)},Z.prototype.create=function(e,t,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new T(this,this.computeAttrs(e),a.from(t),h.setFrom(i))},Z.prototype.createChecked=function(e,t,i){if(t=a.from(t),!this.validContent(t))throw new RangeError("Invalid content for node "+this.name);return new T(this,this.computeAttrs(e),t,h.setFrom(i))},Z.prototype.createAndFill=function(e,t,i){if(e=this.computeAttrs(e),(t=a.from(t)).size){var n=this.contentMatch.fillBefore(t);if(!n)return null;t=n.append(t)}var r=this.contentMatch.matchFragment(t).fillBefore(a.empty,!0);return r?new T(this,e,t.append(r),h.setFrom(i)):null},Z.prototype.validContent=function(e){var t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(var i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0},Z.prototype.allowsMarkType=function(e){return null==this.markSet||this.markSet.indexOf(e)>-1},Z.prototype.allowsMarks=function(e){if(null==this.markSet)return!0;for(var t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0},Z.prototype.allowedMarks=function(e){if(null==this.markSet)return e;for(var t,i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?t&&t.push(e[i]):t||(t=e.slice(0,i));return t?t.length?t:h.empty:e},Z.compile=function(e,t){var i=Object.create(null);e.forEach(function(e,n){return i[e]=new Z(e,t,n)});var n=t.spec.topNode||"doc";if(!i[n])throw new RangeError("Schema is missing its top node type ('"+n+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(var r in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i},Object.defineProperties(Z.prototype,J);var G=function(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default},Y={isRequired:{configurable:!0}};Y.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(G.prototype,Y);var Q=function(e,t,i,n){this.name=e,this.schema=i,this.spec=n,this.attrs=X(n.attrs),this.rank=t,this.excluded=null;var r=H(this.attrs);this.instance=r&&new h(this,r)};Q.prototype.create=function(e){return!e&&this.instance?this.instance:new h(this,U(this.attrs,e))},Q.compile=function(e,t){var i=Object.create(null),n=0;return e.forEach(function(e,r){return i[e]=new Q(e,n++,t,r)}),i},Q.prototype.removeFromSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e.slice(0,t).concat(e.slice(t+1));return e},Q.prototype.isInSet=function(e){for(var t=0;t<e.length;t++)if(e[t].type==this)return e[t]},Q.prototype.excludes=function(e){return this.excluded.indexOf(e)>-1};var ee=function(e){for(var t in this.spec={},e)this.spec[t]=e[t];this.spec.nodes=s.from(e.nodes),this.spec.marks=s.from(e.marks),this.nodes=Z.compile(this.spec.nodes,this),this.marks=Q.compile(this.spec.marks,this);var i=Object.create(null);for(var n in this.nodes){if(n in this.marks)throw new RangeError(n+" can not be both a node and a mark");var r=this.nodes[n],o=r.spec.content||"",a=r.spec.marks;r.contentMatch=i[o]||(i[o]=E.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==a?null:a?te(this,a.split(" ")):""!=a&&r.inlineContent?null:[]}for(var l in this.marks){var c=this.marks[l],d=c.spec.excludes;c.excluded=null==d?[c]:""==d?[]:te(this,d.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function te(e,t){for(var i=[],n=0;n<t.length;n++){var r=t[n],o=e.marks[r],s=o;if(o)i.push(o);else for(var a in e.marks){var l=e.marks[a];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&i.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+t[n]+"'")}return i}ee.prototype.node=function(e,t,i,n){if("string"==typeof e)e=this.nodeType(e);else{if(!(e instanceof Z))throw new RangeError("Invalid node type: "+e);if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}return e.createChecked(t,i,n)},ee.prototype.text=function(e,t){var i=this.nodes.text;return new O(i,i.defaultAttrs,e,h.setFrom(t))},ee.prototype.mark=function(e,t){return"string"==typeof e&&(e=this.marks[e]),e.create(t)},ee.prototype.nodeFromJSON=function(e){return T.fromJSON(this,e)},ee.prototype.markFromJSON=function(e){return h.fromJSON(this,e)},ee.prototype.nodeType=function(e){var t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t};var ie=function(e,t){var i=this;this.schema=e,this.rules=t,this.tags=[],this.styles=[],t.forEach(function(e){e.tag?i.tags.push(e):e.style&&i.styles.push(e)}),this.normalizeLists=!this.tags.some(function(t){if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;var i=e.nodes[t.node];return i.contentMatch.matchType(i)})};ie.prototype.parse=function(e,t){void 0===t&&(t={});var i=new le(this,t,!1);return i.addAll(e,null,t.from,t.to),i.finish()},ie.prototype.parseSlice=function(e,t){void 0===t&&(t={});var i=new le(this,t,!0);return i.addAll(e,null,t.from,t.to),m.maxOpen(i.finish())},ie.prototype.matchTag=function(e,t,i){for(var n=i?this.tags.indexOf(i)+1:0;n<this.tags.length;n++){var r=this.tags[n];if(de(e,r.tag)&&(void 0===r.namespace||e.namespaceURI==r.namespace)&&(!r.context||t.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(e);if(!1===o)continue;r.attrs=o}return r}}},ie.prototype.matchStyle=function(e,t,i,n){for(var r=n?this.styles.indexOf(n)+1:0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(e)||o.context&&!i.matchesContext(o.context)||o.style.length>e.length&&(61!=o.style.charCodeAt(e.length)||o.style.slice(e.length+1)!=t))){if(o.getAttrs){var s=o.getAttrs(t);if(!1===s)continue;o.attrs=s}return o}}},ie.schemaRules=function(e){var t=[];function i(e){for(var i=null==e.priority?50:e.priority,n=0;n<t.length;n++){var r=t[n];if((null==r.priority?50:r.priority)<i)break}t.splice(n,0,e)}var n,r=function(t){var n=e.marks[t].spec.parseDOM;n&&n.forEach(function(e){i(e=pe(e)),e.mark=t})};for(var o in e.marks)r(o);for(var s in e.nodes)n=void 0,(n=e.nodes[s].spec.parseDOM)&&n.forEach(function(e){i(e=pe(e)),e.node=s});return t},ie.fromSchema=function(e){return e.cached.domParser||(e.cached.domParser=new ie(e,ie.schemaRules(e)))};var ne={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},re={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},oe={ol:!0,ul:!0};function se(e){return(e?1:0)|("full"===e?2:0)}var ae=function(e,t,i,n,r,o,s){this.type=e,this.attrs=t,this.solid=r,this.match=o||(4&s?null:e.contentMatch),this.options=s,this.content=[],this.marks=i,this.activeMarks=h.none,this.pendingMarks=n,this.stashMarks=[]};ae.prototype.findWrapping=function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(a.from(e));if(!t){var i,n=this.type.contentMatch;return(i=n.findWrapping(e.type))?(this.match=n,i):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)},ae.prototype.finish=function(e){if(!(1&this.options)){var t,i=this.content[this.content.length-1];i&&i.isText&&(t=/[ \t\r\n\u000c]+$/.exec(i.text))&&(i.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-t[0].length)))}var n=a.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n},ae.prototype.popFromStashMark=function(e){for(var t=this.stashMarks.length-1;t>=0;t--)if(e.eq(this.stashMarks[t]))return this.stashMarks.splice(t,1)[0]},ae.prototype.applyPending=function(e){for(var t=0,i=this.pendingMarks;t<i.length;t++){var n=i[t];(this.type?this.type.allowsMarkType(n.type):he(n.type,e))&&!n.isInSet(this.activeMarks)&&(this.activeMarks=n.addToSet(this.activeMarks),this.pendingMarks=n.removeFromSet(this.pendingMarks))}};var le=function(e,t,i){this.parser=e,this.options=t,this.isOpen=i;var n,r=t.topNode,o=se(t.preserveWhitespace)|(i?4:0);n=r?new ae(r.type,r.attrs,h.none,h.none,!0,t.topMatch||r.type.contentMatch,o):new ae(i?null:e.schema.topNodeType,null,h.none,h.none,!0,null,o),this.nodes=[n],this.open=0,this.find=t.findPositions,this.needsBlock=!1},ce={top:{configurable:!0},currentPos:{configurable:!0}};function de(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function pe(e){var t={};for(var i in e)t[i]=e[i];return t}function he(e,t){var i=t.schema.nodes,n=function(n){var r=i[n];if(r.allowsMarkType(e)){var o=[],s=function(e){o.push(e);for(var i=0;i<e.edgeCount;i++){var n=e.edge(i),r=n.type,a=n.next;if(r==t)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(r.contentMatch)?{v:!0}:void 0}};for(var r in i){var o=n(r);if(o)return o.v}}ce.top.get=function(){return this.nodes[this.open]},le.prototype.addDOM=function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),i=t?this.readStyles(function(e){for(var t,i=/\s*([\w-]+)\s*:\s*([^;]+)/g,n=[];t=i.exec(e);)n.push(t[1],t[2].trim());return n}(t)):null,n=this.top;if(null!=i)for(var r=0;r<i.length;r++)this.addPendingMark(i[r]);if(this.addElement(e),null!=i)for(var o=0;o<i.length;o++)this.removePendingMark(i[o],n)}},le.prototype.addTextNode=function(e){var t=e.nodeValue,i=this.top;if((i.type?i.type.inlineContent:i.content.length&&i.content[0].isInline)||/[^ \t\r\n\u000c]/.test(t)){if(1&i.options)2&i.options||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){var n=i.content[i.content.length-1],r=e.previousSibling;(!n||r&&"BR"==r.nodeName||n.isText&&/[ \t\r\n\u000c]$/.test(n.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)},le.prototype.addElement=function(e,t){var i,n=e.nodeName.toLowerCase();oe.hasOwnProperty(n)&&this.parser.normalizeLists&&function(e){for(var t=e.firstChild,i=null;t;t=t.nextSibling){var n=1==t.nodeType?t.nodeName.toLowerCase():null;n&&oe.hasOwnProperty(n)&&i?(i.appendChild(t),t=i):"li"==n?i=t:n&&(i=null)}}(e);var r=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(i=this.parser.matchTag(e,this,t));if(r?r.ignore:re.hasOwnProperty(n))this.findInside(e);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(e=r.skip);var o,s=this.top,a=this.needsBlock;if(ne.hasOwnProperty(n))o=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild)return void this.leafFallback(e);this.addAll(e),o&&this.sync(s),this.needsBlock=a}else this.addElementByRule(e,r,!1===r.consuming?i:null)},le.prototype.leafFallback=function(e){"BR"==e.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode("\n"))},le.prototype.readStyles=function(e){var t=h.none;e:for(var i=0;i<e.length;i+=2)for(var n=null;;){var r=this.parser.matchStyle(e[i],e[i+1],this,n);if(!r)continue e;if(r.ignore)return null;if(t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t),!1!==r.consuming)break;n=r}return t},le.prototype.addElementByRule=function(e,t,i){var n,r,o,s=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs))||this.leafFallback(e):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var a=this.top;if(r&&r.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return s.insertNode(e)});else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,n)}n&&(this.sync(a),this.open--),o&&this.removePendingMark(o,a)},le.prototype.addAll=function(e,t,i,n){for(var r=i||0,o=i?e.childNodes[i]:e.firstChild,s=null==n?null:e.childNodes[n];o!=s;o=o.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(o),t&&ne.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,r)},le.prototype.findPlace=function(e){for(var t,i,n=this.open;n>=0;n--){var r=this.nodes[n],o=r.findWrapping(e);if(o&&(!t||t.length>o.length)&&(t=o,i=r,!o.length))break;if(r.solid)break}if(!t)return!1;this.sync(i);for(var s=0;s<t.length;s++)this.enterInner(t[s],null,!1);return!0},le.prototype.insertNode=function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var i=this.top;i.applyPending(e.type),i.match&&(i.match=i.match.matchType(e.type));for(var n=i.activeMarks,r=0;r<e.marks.length;r++)i.type&&!i.type.allowsMarkType(e.marks[r].type)||(n=e.marks[r].addToSet(n));return i.content.push(e.mark(n)),!0}return!1},le.prototype.enter=function(e,t,i){var n=this.findPlace(e.create(t));return n&&this.enterInner(e,t,!0,i),n},le.prototype.enterInner=function(e,t,i,n){this.closeExtra();var r=this.top;r.applyPending(e),r.match=r.match&&r.match.matchType(e,t);var o=null==n?-5&r.options:se(n);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new ae(e,t,r.activeMarks,r.pendingMarks,i,null,o)),this.open++},le.prototype.closeExtra=function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}},le.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},le.prototype.sync=function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)},ce.currentPos.get=function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var i=this.nodes[t].content,n=i.length-1;n>=0;n--)e+=i[n].nodeSize;t&&e++}return e},le.prototype.findAtPoint=function(e,t){if(this.find)for(var i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==t&&(this.find[i].pos=this.currentPos)},le.prototype.findInside=function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)},le.prototype.findAround=function(e,t,i){if(e!=t&&this.find)for(var n=0;n<this.find.length;n++)null==this.find[n].pos&&1==e.nodeType&&e.contains(this.find[n].node)&&t.compareDocumentPosition(this.find[n].node)&(i?2:4)&&(this.find[n].pos=this.currentPos)},le.prototype.findInText=function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))},le.prototype.matchesContext=function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var i=e.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),o=-(n?n.depth+1:0)+(r?0:1),s=function(e,a){for(;e>=0;e--){var l=i[e];if(""==l){if(e==i.length-1||0==e)continue;for(;a>=o;a--)if(s(e-1,a))return!0;return!1}var c=a>0||0==a&&r?t.nodes[a].type:n&&a>=o?n.node(a-o).type:null;if(!c||c.name!=l&&-1==c.groups.indexOf(l))return!1;a--}return!0};return s(i.length-1,this.open)},le.prototype.textblockFromContext=function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var i=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(var n in this.parser.schema.nodes){var r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}},le.prototype.addPendingMark=function(e){var t=function(e,t){for(var i=0;i<t.length;i++)if(e.eq(t[i]))return t[i]}(e,this.top.pendingMarks);t&&this.top.stashMarks.push(t),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)},le.prototype.removePendingMark=function(e,t){for(var i=this.open;i>=0;i--){var n=this.nodes[i];if(n.pendingMarks.lastIndexOf(e)>-1)n.pendingMarks=e.removeFromSet(n.pendingMarks);else{n.activeMarks=e.removeFromSet(n.activeMarks);var r=n.popFromStashMark(e);r&&(n.activeMarks=r.addToSet(n.activeMarks))}if(n==t)break}},Object.defineProperties(le.prototype,ce);var ue=function(e,t){this.nodes=e||{},this.marks=t||{}};function me(e){var t={};for(var i in e){var n=e[i].spec.toDOM;n&&(t[i]=n)}return t}function fe(e){return e.document||window.document}ue.prototype.serializeFragment=function(e,t,i){var n=this;void 0===t&&(t={}),i||(i=fe(t).createDocumentFragment());var r=i,o=null;return e.forEach(function(e){if(o||e.marks.length){o||(o=[]);for(var i=0,s=0;i<o.length&&s<e.marks.length;){var a=e.marks[s];if(n.marks[a.type.name]){if(!a.eq(o[i])||!1===a.type.spec.spanning)break;i+=2,s++}else s++}for(;i<o.length;)r=o.pop(),o.pop();for(;s<e.marks.length;){var l=e.marks[s++],c=n.serializeMark(l,e.isInline,t);c&&(o.push(l,r),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(n.serializeNode(e,t))}),i},ue.prototype.serializeNode=function(e,t){void 0===t&&(t={});var i=ue.renderSpec(fe(t),this.nodes[e.type.name](e)),n=i.dom,r=i.contentDOM;if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");t.onContent?t.onContent(e,r,t):this.serializeFragment(e.content,t,r)}return n},ue.prototype.serializeNodeAndMarks=function(e,t){void 0===t&&(t={});for(var i=this.serializeNode(e,t),n=e.marks.length-1;n>=0;n--){var r=this.serializeMark(e.marks[n],e.isInline,t);r&&((r.contentDOM||r.dom).appendChild(i),i=r.dom)}return i},ue.prototype.serializeMark=function(e,t,i){void 0===i&&(i={});var n=this.marks[e.type.name];return n&&ue.renderSpec(fe(i),n(e,t))},ue.renderSpec=function(e,t,i){if(void 0===i&&(i=null),"string"==typeof t)return{dom:e.createTextNode(t)};if(null!=t.nodeType)return{dom:t};if(t.dom&&null!=t.dom.nodeType)return t;var n=t[0],r=n.indexOf(" ");r>0&&(i=n.slice(0,r),n=n.slice(r+1));var o=null,s=i?e.createElementNS(i,n):e.createElement(n),a=t[1],l=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var c in l=2,a)if(null!=a[c]){var d=c.indexOf(" ");d>0?s.setAttributeNS(c.slice(0,d),c.slice(d+1),a[c]):s.setAttribute(c,a[c])}for(var p=l;p<t.length;p++){var h=t[p];if(0===h){if(p<t.length-1||p>l)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var u=ue.renderSpec(e,h,i),m=u.dom,f=u.contentDOM;if(s.appendChild(m),f){if(o)throw new RangeError("Multiple content holes");o=f}}return{dom:s,contentDOM:o}},ue.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new ue(this.nodesFromSchema(e),this.marksFromSchema(e)))},ue.nodesFromSchema=function(e){var t=me(e.nodes);return t.text||(t.text=function(e){return e.text}),t},ue.marksFromSchema=function(e){return me(e.marks)};var ge=Math.pow(2,16);function ye(e){return 65535&e}var ve=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=null),this.pos=e,this.deleted=t,this.recover=i},be=function(e,t){void 0===t&&(t=!1),this.ranges=e,this.inverted=t};be.prototype.recover=function(e){var t=0,i=ye(e);if(!this.inverted)for(var n=0;n<i;n++)t+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*i]+t+function(e){return(e-(65535&e))/ge}(e)},be.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},be.prototype.map=function(e,t){return void 0===t&&(t=1),this._map(e,t,!0)},be.prototype._map=function(e,t,i){for(var n=0,r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>e)break;var l=this.ranges[s+r],c=this.ranges[s+o],d=a+l;if(e<=d){var p=a+n+((l?e==a?-1:e==d?1:t:t)<0?0:c);return i?p:new ve(p,t<0?e!=a:e!=d,e==(t<0?a:d)?null:s/3+(e-a)*ge)}n+=c-l}return i?e+n:new ve(e+n)},be.prototype.touches=function(e,t){for(var i=0,n=ye(t),r=this.inverted?2:1,o=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?i:0);if(a>e)break;var l=this.ranges[s+r];if(e<=a+l&&s==3*n)return!0;i+=this.ranges[s+o]-l}return!1},be.prototype.forEach=function(e){for(var t=this.inverted?2:1,i=this.inverted?1:2,n=0,r=0;n<this.ranges.length;n+=3){var o=this.ranges[n],s=o-(this.inverted?r:0),a=o+(this.inverted?0:r),l=this.ranges[n+t],c=this.ranges[n+i];e(s,s+l,a,a+c),r+=c-l}},be.prototype.invert=function(){return new be(this.ranges,!this.inverted)},be.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},be.offset=function(e){return 0==e?be.empty:new be(e<0?[0,-e,0]:[0,0,e])},be.empty=new be([]);var xe=function(e,t,i,n){this.maps=e||[],this.from=i||0,this.to=null==n?this.maps.length:n,this.mirror=t};function ke(e){var t=Error.call(this,e);return t.__proto__=ke.prototype,t}xe.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.maps.length),new xe(this.maps,this.mirror,e,t)},xe.prototype.copy=function(){return new xe(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},xe.prototype.appendMap=function(e,t){this.to=this.maps.push(e),null!=t&&this.setMirror(this.maps.length-1,t)},xe.prototype.appendMapping=function(e){for(var t=0,i=this.maps.length;t<e.maps.length;t++){var n=e.getMirror(t);this.appendMap(e.maps[t],null!=n&&n<t?i+n:null)}},xe.prototype.getMirror=function(e){if(this.mirror)for(var t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]},xe.prototype.setMirror=function(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)},xe.prototype.appendMappingInverted=function(e){for(var t=e.maps.length-1,i=this.maps.length+e.maps.length;t>=0;t--){var n=e.getMirror(t);this.appendMap(e.maps[t].invert(),null!=n&&n>t?i-n-1:null)}},xe.prototype.invert=function(){var e=new xe;return e.appendMappingInverted(this),e},xe.prototype.map=function(e,t){if(void 0===t&&(t=1),this.mirror)return this._map(e,t,!0);for(var i=this.from;i<this.to;i++)e=this.maps[i].map(e,t);return e},xe.prototype.mapResult=function(e,t){return void 0===t&&(t=1),this._map(e,t,!1)},xe.prototype._map=function(e,t,i){for(var n=!1,r=this.from;r<this.to;r++){var o=this.maps[r].mapResult(e,t);if(null!=o.recover){var s=this.getMirror(r);if(null!=s&&s>r&&s<this.to){r=s,e=this.maps[s].recover(o.recover);continue}}o.deleted&&(n=!0),e=o.pos}return i?e:new ve(e,n)},ke.prototype=Object.create(Error.prototype),ke.prototype.constructor=ke,ke.prototype.name="TransformError";var _e=function(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new xe},we={before:{configurable:!0},docChanged:{configurable:!0}};function Me(){throw new Error("Override me")}we.before.get=function(){return this.docs.length?this.docs[0]:this.doc},_e.prototype.step=function(e){var t=this.maybeStep(e);if(t.failed)throw new ke(t.failed);return this},_e.prototype.maybeStep=function(e){var t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t},we.docChanged.get=function(){return this.steps.length>0},_e.prototype.addStep=function(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t},Object.defineProperties(_e.prototype,we);var ze=Object.create(null),Se=function(){};Se.prototype.apply=function(e){return Me()},Se.prototype.getMap=function(){return be.empty},Se.prototype.invert=function(e){return Me()},Se.prototype.map=function(e){return Me()},Se.prototype.merge=function(e){return null},Se.prototype.toJSON=function(){return Me()},Se.fromJSON=function(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");var i=ze[t.stepType];if(!i)throw new RangeError("No step type "+t.stepType+" defined");return i.fromJSON(e,t)},Se.jsonID=function(e,t){if(e in ze)throw new RangeError("Duplicate use of step JSON ID "+e);return ze[e]=t,t.prototype.jsonID=e,t};var Le=function(e,t){this.doc=e,this.failed=t};Le.ok=function(e){return new Le(e,null)},Le.fail=function(e){return new Le(null,e)},Le.fromReplace=function(e,t,i,n){try{return Le.ok(e.replace(t,i,n))}catch(e){if(e instanceof u)return Le.fail(e.message);throw e}};var Ce=function(e){function t(t,i,n,r){e.call(this),this.from=t,this.to=i,this.slice=n,this.structure=!!r}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){return this.structure&&De(e,this.from,this.to)?Le.fail("Structure replace would overwrite content"):Le.fromReplace(e,this.from,this.to,this.slice)},t.prototype.getMap=function(){return new be([this.from,this.to-this.from,this.slice.size])},t.prototype.invert=function(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted?null:new t(i.pos,Math.max(i.pos,n.pos),this.slice)},t.prototype.merge=function(e){if(!(e instanceof t)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var i=this.slice.size+e.slice.size==0?m.empty:new m(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,i,this.structure)}var n=this.slice.size+e.slice.size==0?m.empty:new m(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(i.from,i.to,m.fromJSON(e,i.slice),!!i.structure)},t}(Se);Se.jsonID("replace",Ce);var Ae=function(e){function t(t,i,n,r,o,s,a){e.call(this),this.from=t,this.to=i,this.gapFrom=n,this.gapTo=r,this.slice=o,this.insert=s,this.structure=!!a}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){if(this.structure&&(De(e,this.from,this.gapFrom)||De(e,this.gapTo,this.to)))return Le.fail("Structure gap-replace would overwrite content");var t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Le.fail("Gap is not a flat range");var i=this.slice.insertAt(this.insert,t.content);return i?Le.fromReplace(e,this.from,this.to,i):Le.fail("Content does not fit in gap")},t.prototype.getMap=function(){return new be([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},t.prototype.invert=function(e){var i=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+i,this.from+this.insert,this.from+this.insert+i,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),o=e.map(this.gapTo,1);return i.deleted&&n.deleted||r<i.pos||o>n.pos?null:new t(i.pos,n.pos,r,o,this.slice,this.insert,this.structure)},t.prototype.toJSON=function(){var e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to||"number"!=typeof i.gapFrom||"number"!=typeof i.gapTo||"number"!=typeof i.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(i.from,i.to,i.gapFrom,i.gapTo,m.fromJSON(e,i.slice),i.insert,!!i.structure)},t}(Se);function De(e,t,i){for(var n=e.resolve(t),r=i-t,o=n.depth;r>0&&o>0&&n.indexAfter(o)==n.node(o).childCount;)o--,r--;if(r>0)for(var s=n.node(o).maybeChild(n.indexAfter(o));r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}return!1}function Te(e,t,i){return(0==t||e.canReplace(t,e.childCount))&&(i==e.childCount||e.canReplace(0,i))}function $e(e){for(var t=e.parent.content.cutByIndex(e.startIndex,e.endIndex),i=e.depth;;--i){var n=e.$from.node(i),r=e.$from.index(i),o=e.$to.indexAfter(i);if(i<e.depth&&n.canReplace(r,o,t))return i;if(0==i||n.type.spec.isolating||!Te(n,r,o))break}}function Oe(e,t,i,n){void 0===i&&(i=1);var r=e.resolve(t),o=r.depth-i,s=n&&n[n.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(var a=r.depth-1,l=i-2;a>o;a--,l--){var c=r.node(a),d=r.index(a);if(c.type.spec.isolating)return!1;var p=c.content.cutByIndex(d,c.childCount),h=n&&n[l]||c;if(h!=c&&(p=p.replaceChild(0,h.type.create(h.attrs))),!c.canReplace(d+1,c.childCount)||!h.type.validContent(p))return!1}var u=r.indexAfter(o),m=n&&n[0];return r.node(o).canReplaceWith(u,u,m?m.type:r.node(o+1).type)}function Ne(e,t){var i,n,r=e.resolve(t),o=r.index();return i=r.nodeBefore,n=r.nodeAfter,i&&n&&!i.isLeaf&&i.canAppend(n)&&r.parent.canReplace(o,o+1)}function Ee(e,t,i){for(var n=[],r=0;r<e.childCount;r++){var o=e.child(r);o.content.size&&(o=o.copy(Ee(o.content,t,o))),o.isInline&&(o=t(o,i,r)),n.push(o)}return a.fromArray(n)}Se.jsonID("replaceAround",Ae),_e.prototype.lift=function(e,t){for(var i=e.$from,n=e.$to,r=e.depth,o=i.before(r+1),s=n.after(r+1),l=o,c=s,d=a.empty,p=0,h=r,u=!1;h>t;h--)u||i.index(h)>0?(u=!0,d=a.from(i.node(h).copy(d)),p++):l--;for(var f=a.empty,g=0,y=r,v=!1;y>t;y--)v||n.after(y+1)<n.end(y)?(v=!0,f=a.from(n.node(y).copy(f)),g++):c++;return this.step(new Ae(l,c,o,s,new m(d.append(f),p,g),d.size-p,!0))},_e.prototype.wrap=function(e,t){for(var i=a.empty,n=t.length-1;n>=0;n--)i=a.from(t[n].type.create(t[n].attrs,i));var r=e.start,o=e.end;return this.step(new Ae(r,o,r,o,new m(i,0,0),t.length,!0))},_e.prototype.setBlockType=function(e,t,i,n){var r=this;if(void 0===t&&(t=e),!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var o=this.steps.length;return this.doc.nodesBetween(e,t,function(e,t){if(e.isTextblock&&!e.hasMarkup(i,n)&&function(e,t,i){var n=e.resolve(t),r=n.index();return n.parent.canReplaceWith(r,r+1,i)}(r.doc,r.mapping.slice(o).map(t),i)){r.clearIncompatible(r.mapping.slice(o).map(t,1),i);var s=r.mapping.slice(o),l=s.map(t,1),c=s.map(t+e.nodeSize,1);return r.step(new Ae(l,c,l+1,c-1,new m(a.from(i.create(n,null,e.marks)),0,0),1,!0)),!1}}),this},_e.prototype.setNodeMarkup=function(e,t,i,n){var r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at given position");t||(t=r.type);var o=t.create(i,null,n||r.marks);if(r.isLeaf)return this.replaceWith(e,e+r.nodeSize,o);if(!t.validContent(r.content))throw new RangeError("Invalid content for node type "+t.name);return this.step(new Ae(e,e+r.nodeSize,e+1,e+r.nodeSize-1,new m(a.from(o),0,0),1,!0))},_e.prototype.split=function(e,t,i){void 0===t&&(t=1);for(var n=this.doc.resolve(e),r=a.empty,o=a.empty,s=n.depth,l=n.depth-t,c=t-1;s>l;s--,c--){r=a.from(n.node(s).copy(r));var d=i&&i[c];o=a.from(d?d.type.create(d.attrs,o):n.node(s).copy(o))}return this.step(new Ce(e,e,new m(r.append(o),t,t),!0))},_e.prototype.join=function(e,t){void 0===t&&(t=1);var i=new Ce(e-t,e+t,m.empty,!0);return this.step(i)};var qe=function(e){function t(t,i,n){e.call(this),this.from=t,this.to=i,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,i=e.slice(this.from,this.to),n=e.resolve(this.from),r=n.node(n.sharedDepth(this.to)),o=new m(Ee(i.content,function(e,i){return e.isAtom&&i.type.allowsMarkType(t.mark.type)?e.mark(t.mark.addToSet(e.marks)):e},r),i.openStart,i.openEnd);return Le.fromReplace(e,this.from,this.to,o)},t.prototype.invert=function(){return new Ke(this.from,this.to,this.mark)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new t(i.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(i.from,i.to,e.markFromJSON(i.mark))},t}(Se);Se.jsonID("addMark",qe);var Ke=function(e){function t(t,i,n){e.call(this),this.from=t,this.to=i,this.mark=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.apply=function(e){var t=this,i=e.slice(this.from,this.to),n=new m(Ee(i.content,function(e){return e.mark(t.mark.removeFromSet(e.marks))}),i.openStart,i.openEnd);return Le.fromReplace(e,this.from,this.to,n)},t.prototype.invert=function(){return new qe(this.from,this.to,this.mark)},t.prototype.map=function(e){var i=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return i.deleted&&n.deleted||i.pos>=n.pos?null:new t(i.pos,n.pos,this.mark)},t.prototype.merge=function(e){if(e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from)return new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark)},t.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},t.fromJSON=function(e,i){if("number"!=typeof i.from||"number"!=typeof i.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(i.from,i.to,e.markFromJSON(i.mark))},t}(Se);function Be(e,t,i){return!i.openStart&&!i.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),i.content)}Se.jsonID("removeMark",Ke),_e.prototype.addMark=function(e,t,i){var n=this,r=[],o=[],s=null,a=null;return this.doc.nodesBetween(e,t,function(n,l,c){if(n.isInline){var d=n.marks;if(!i.isInSet(d)&&c.type.allowsMarkType(i.type)){for(var p=Math.max(l,e),h=Math.min(l+n.nodeSize,t),u=i.addToSet(d),m=0;m<d.length;m++)d[m].isInSet(u)||(s&&s.to==p&&s.mark.eq(d[m])?s.to=h:r.push(s=new Ke(p,h,d[m])));a&&a.to==p?a.to=h:o.push(a=new qe(p,h,i))}}}),r.forEach(function(e){return n.step(e)}),o.forEach(function(e){return n.step(e)}),this},_e.prototype.removeMark=function(e,t,i){var n=this;void 0===i&&(i=null);var r=[],o=0;return this.doc.nodesBetween(e,t,function(n,s){if(n.isInline){o++;var a=null;if(i instanceof Q){var l=i.isInSet(n.marks);l&&(a=[l])}else i?i.isInSet(n.marks)&&(a=[i]):a=n.marks;if(a&&a.length)for(var c=Math.min(s+n.nodeSize,t),d=0;d<a.length;d++){for(var p=a[d],h=void 0,u=0;u<r.length;u++){var m=r[u];m.step==o-1&&p.eq(r[u].style)&&(h=m)}h?(h.to=c,h.step=o):r.push({style:p,from:Math.max(s,e),to:c,step:o})}}}),r.forEach(function(e){return n.step(new Ke(e.from,e.to,e.style))}),this},_e.prototype.clearIncompatible=function(e,t,i){void 0===i&&(i=t.contentMatch);for(var n=this.doc.nodeAt(e),r=[],o=e+1,s=0;s<n.childCount;s++){var l=n.child(s),c=o+l.nodeSize,d=i.matchType(l.type,l.attrs);if(d){i=d;for(var p=0;p<l.marks.length;p++)t.allowsMarkType(l.marks[p].type)||this.step(new Ke(o,c,l.marks[p]))}else r.push(new Ce(o,c,m.empty));o=c}if(!i.validEnd){var h=i.fillBefore(a.empty,!0);this.replace(o,o,new m(h,0,0))}for(var u=r.length-1;u>=0;u--)this.step(r[u]);return this},_e.prototype.replace=function(e,t,i){void 0===t&&(t=e),void 0===i&&(i=m.empty);var n=function(e,t,i,n){if(void 0===i&&(i=t),void 0===n&&(n=m.empty),t==i&&!n.size)return null;var r=e.resolve(t),o=e.resolve(i);return Be(r,o,n)?new Ce(t,i,n):new Pe(r,o,n).fit()}(this.doc,e,t,i);return n&&this.step(n),this},_e.prototype.replaceWith=function(e,t,i){return this.replace(e,t,new m(a.from(i),0,0))},_e.prototype.delete=function(e,t){return this.replace(e,t,m.empty)},_e.prototype.insert=function(e,t){return this.replaceWith(e,e,t)};var Pe=function(e,t,i){this.$to=t,this.$from=e,this.unplaced=i,this.frontier=[];for(var n=0;n<=e.depth;n++){var r=e.node(n);this.frontier.push({type:r.type,match:r.contentMatchAt(e.indexAfter(n))})}this.placed=a.empty;for(var o=e.depth;o>0;o--)this.placed=a.from(e.node(o).copy(this.placed))},Re={depth:{configurable:!0}};function Ie(e,t,i){return 0==t?e.cutByIndex(i):e.replaceChild(0,e.firstChild.copy(Ie(e.firstChild.content,t-1,i)))}function Fe(e,t,i){return 0==t?e.append(i):e.replaceChild(e.childCount-1,e.lastChild.copy(Fe(e.lastChild.content,t-1,i)))}function Ve(e,t){for(var i=0;i<t;i++)e=e.firstChild.content;return e}function We(e,t,i){if(t<=0)return e;var n=e.content;return t>1&&(n=n.replaceChild(0,We(n.firstChild,t-1,1==n.childCount?i-1:0))),t>0&&(n=e.type.contentMatch.fillBefore(n).append(n),i<=0&&(n=n.append(e.type.contentMatch.matchFragment(n).fillBefore(a.empty,!0)))),e.copy(n)}function je(e,t,i,n,r){var o=e.node(t),s=r?e.indexAfter(t):e.index(t);if(s==o.childCount&&!i.compatibleContent(o.type))return null;var a=n.fillBefore(o.content,!0,s);return a&&!function(e,t,i){for(var n=s;n<t.childCount;n++)if(!e.allowsMarks(t.child(n).marks))return!0;return!1}(i,o.content)?a:null}function He(e,t,i,n,r){if(t<i){var o=e.firstChild;e=e.replaceChild(0,o.copy(He(o.content,t+1,i,n,o)))}if(t>n){var s=r.contentMatchAt(0),l=s.fillBefore(e).append(e);e=l.append(s.matchFragment(l).fillBefore(a.empty,!0))}return e}function Ue(e,t){for(var i=[],n=Math.min(e.depth,t.depth);n>=0;n--){var r=e.start(n);if(r<e.pos-(e.depth-n)||t.end(n)>t.pos+(t.depth-n)||e.node(n).type.spec.isolating||t.node(n).type.spec.isolating)break;r==t.start(n)&&i.push(n)}return i}Re.depth.get=function(){return this.frontier.length-1},Pe.prototype.fit=function(){for(;this.unplaced.size;){var e=this.findFittable();e?this.placeNodes(e):this.openMore()||this.dropNode()}var t=this.mustMoveInline(),i=this.placed.size-this.depth-this.$from.depth,n=this.$from,r=this.close(t<0?this.$to:n.doc.resolve(t));if(!r)return null;for(var o=this.placed,s=n.depth,a=r.depth;s&&a&&1==o.childCount;)o=o.firstChild.content,s--,a--;var l=new m(o,s,a);return t>-1?new Ae(n.pos,t,this.$to.pos,this.$to.end(),l,i):l.size||n.pos!=this.$to.pos?new Ce(n.pos,r.pos,l):void 0},Pe.prototype.findFittable=function(){for(var e=1;e<=2;e++)for(var t=this.unplaced.openStart;t>=0;t--)for(var i=void 0,n=(t?(i=Ve(this.unplaced.content,t-1).firstChild).content:this.unplaced.content).firstChild,r=this.depth;r>=0;r--){var o=this.frontier[r],s=o.type,l=o.match,c=void 0,d=void 0;if(1==e&&(n?l.matchType(n.type)||(d=l.fillBefore(a.from(n),!1)):s.compatibleContent(i.type)))return{sliceDepth:t,frontierDepth:r,parent:i,inject:d};if(2==e&&n&&(c=l.findWrapping(n.type)))return{sliceDepth:t,frontierDepth:r,parent:i,wrap:c};if(i&&l.matchType(i.type))break}},Pe.prototype.openMore=function(){var e=this.unplaced,t=e.content,i=e.openStart,n=e.openEnd,r=Ve(t,i);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new m(t,i+1,Math.max(n,r.size+i>=t.size-n?i+1:0)),0))},Pe.prototype.dropNode=function(){var e=this.unplaced,t=e.content,i=e.openStart,n=e.openEnd,r=Ve(t,i);if(r.childCount<=1&&i>0){var o=t.size-i<=i+r.size;this.unplaced=new m(Ie(t,i-1,1),i-1,o?i-1:n)}else this.unplaced=new m(Ie(t,i,1),i,n)},Pe.prototype.placeNodes=function(e){for(var t=e.sliceDepth,i=e.frontierDepth,n=e.parent,r=e.inject,o=e.wrap;this.depth>i;)this.closeFrontierNode();if(o)for(var s=0;s<o.length;s++)this.openFrontierNode(o[s]);var l=this.unplaced,c=n?n.content:l.content,d=l.openStart-t,p=0,h=[],u=this.frontier[i],f=u.match,g=u.type;if(r){for(var y=0;y<r.childCount;y++)h.push(r.child(y));f=f.matchFragment(r)}for(var v=c.size+t-(l.content.size-l.openEnd);p<c.childCount;){var b=c.child(p),x=f.matchType(b.type);if(!x)break;(++p>1||0==d||b.content.size)&&(f=x,h.push(We(b.mark(g.allowedMarks(b.marks)),1==p?d:0,p==c.childCount?v:-1)))}var k=p==c.childCount;k||(v=-1),this.placed=Fe(this.placed,i,a.from(h)),this.frontier[i].match=f,k&&v<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var _=0,w=c;_<v;_++){var M=w.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),w=M.content}this.unplaced=k?0==t?m.empty:new m(Ie(l.content,t-1,1),t-1,v<0?l.openEnd:t-1):new m(Ie(l.content,t,p),l.openStart,l.openEnd)},Pe.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var e,t=this.frontier[this.depth];if(!t.type.isTextblock||!je(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;for(var i=this.$to.depth,n=this.$to.after(i);i>1&&n==this.$to.end(--i);)++n;return n},Pe.prototype.findCloseLevel=function(e){e:for(var t=Math.min(this.depth,e.depth);t>=0;t--){var i=this.frontier[t],n=i.match,r=i.type,o=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=je(e,t,r,n,o);if(s){for(var a=t-1;a>=0;a--){var l=this.frontier[a],c=l.match,d=je(e,a,l.type,c,!0);if(!d||d.childCount)continue e}return{depth:t,fit:s,move:o?e.doc.resolve(e.after(t+1)):e}}}},Pe.prototype.close=function(e){var t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Fe(this.placed,t.depth,t.fit)),e=t.move;for(var i=t.depth+1;i<=e.depth;i++){var n=e.node(i),r=n.type.contentMatch.fillBefore(n.content,!0,e.index(i));this.openFrontierNode(n.type,n.attrs,r)}return e},Pe.prototype.openFrontierNode=function(e,t,i){var n=this.frontier[this.depth];n.match=n.match.matchType(e),this.placed=Fe(this.placed,this.depth,a.from(e.create(t,i))),this.frontier.push({type:e,match:e.contentMatch})},Pe.prototype.closeFrontierNode=function(){var e=this.frontier.pop().match.fillBefore(a.empty,!0);e.childCount&&(this.placed=Fe(this.placed,this.frontier.length,e))},Object.defineProperties(Pe.prototype,Re),_e.prototype.replaceRange=function(e,t,i){if(!i.size)return this.deleteRange(e,t);var n=this.doc.resolve(e),r=this.doc.resolve(t);if(Be(n,r,i))return this.step(new Ce(e,t,i));var o=Ue(n,this.doc.resolve(t));0==o[o.length-1]&&o.pop();var s=-(n.depth+1);o.unshift(s);for(var a=n.depth,l=n.pos-1;a>0;a--,l--){var c=n.node(a).type.spec;if(c.defining||c.isolating)break;o.indexOf(a)>-1?s=a:n.before(a)==l&&o.splice(1,0,-a)}for(var d=o.indexOf(s),p=[],h=i.openStart,u=i.content,f=0;;f++){var g=u.firstChild;if(p.push(g),f==i.openStart)break;u=g.content}h>0&&p[h-1].type.spec.defining&&n.node(d).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&n.node(d).type!=p[h-2].type&&(h-=2);for(var y=i.openStart;y>=0;y--){var v=(y+h+1)%(i.openStart+1),b=p[v];if(b)for(var x=0;x<o.length;x++){var k=o[(x+d)%o.length],_=!0;k<0&&(_=!1,k=-k);var w=n.node(k-1),M=n.index(k-1);if(w.canReplaceWith(M,M,b.type,b.marks))return this.replace(n.before(k),_?r.after(k):t,new m(He(i.content,0,i.openStart,v),v,i.openEnd))}}for(var z=this.steps.length,S=o.length-1;S>=0&&(this.replace(e,t,i),!(this.steps.length>z));S--){var L=o[S];S<0||(e=n.before(L),t=r.after(L))}return this},_e.prototype.replaceRangeWith=function(e,t,i){if(!i.isInline&&e==t&&this.doc.resolve(e).parent.content.size){var n=function(e,t,i){var n=e.resolve(t);if(n.parent.canReplaceWith(n.index(),n.index(),i))return t;if(0==n.parentOffset)for(var r=n.depth-1;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,i))return n.before(r+1);if(o>0)return null}if(n.parentOffset==n.parent.content.size)for(var s=n.depth-1;s>=0;s--){var a=n.indexAfter(s);if(n.node(s).canReplaceWith(a,a,i))return n.after(s+1);if(a<n.node(s).childCount)return null}}(this.doc,e,i.type);null!=n&&(e=t=n)}return this.replaceRange(e,t,new m(a.from(i),0,0))},_e.prototype.deleteRange=function(e,t){for(var i=this.doc.resolve(e),n=this.doc.resolve(t),r=Ue(i,n),o=0;o<r.length;o++){var s=r[o],a=o==r.length-1;if(a&&0==s||i.node(s).type.contentMatch.validEnd)return this.delete(i.start(s),n.end(s));if(s>0&&(a||i.node(s-1).canReplace(i.index(s-1),n.indexAfter(s-1))))return this.delete(i.before(s),n.after(s))}for(var l=1;l<=i.depth&&l<=n.depth;l++)if(e-i.start(l)==i.depth-l&&t>i.end(l)&&n.end(l)-t!=n.depth-l)return this.delete(i.before(l),t);return this.delete(e,t)};var Xe=Object.create(null),Ze=function(e,t,i){this.ranges=i||[new Ge(e.min(t),e.max(t))],this.$anchor=e,this.$head=t},Je={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};Je.anchor.get=function(){return this.$anchor.pos},Je.head.get=function(){return this.$head.pos},Je.from.get=function(){return this.$from.pos},Je.to.get=function(){return this.$to.pos},Je.$from.get=function(){return this.ranges[0].$from},Je.$to.get=function(){return this.ranges[0].$to},Je.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},Ze.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},Ze.prototype.replace=function(e,t){void 0===t&&(t=m.empty);for(var i=t.content.lastChild,n=null,r=0;r<t.openEnd;r++)n=i,i=i.lastChild;for(var o=e.steps.length,s=this.ranges,a=0;a<s.length;a++){var l=s[a],c=l.$from,d=l.$to,p=e.mapping.slice(o);e.replaceRange(p.map(c.pos),p.map(d.pos),a?m.empty:t),0==a&&ot(e,o,(i?i.isInline:n&&n.isTextblock)?-1:1)}},Ze.prototype.replaceWith=function(e,t){for(var i=e.steps.length,n=this.ranges,r=0;r<n.length;r++){var o=n[r],s=o.$from,a=o.$to,l=e.mapping.slice(i),c=l.map(s.pos),d=l.map(a.pos);r?e.deleteRange(c,d):(e.replaceRangeWith(c,d,t),ot(e,i,t.isInline?-1:1))}},Ze.findFrom=function(e,t,i){var n=e.parent.inlineContent?new Ye(e):rt(e.node(0),e.parent,e.pos,e.index(),t,i);if(n)return n;for(var r=e.depth-1;r>=0;r--){var o=t<0?rt(e.node(0),e.node(r),e.before(r+1),e.index(r),t,i):rt(e.node(0),e.node(r),e.after(r+1),e.index(r)+1,t,i);if(o)return o}},Ze.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new it(e.node(0))},Ze.atStart=function(e){return rt(e,e,0,0,1)||new it(e)},Ze.atEnd=function(e){return rt(e,e,e.content.size,e.childCount,-1)||new it(e)},Ze.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var i=Xe[t.type];if(!i)throw new RangeError("No selection type "+t.type+" defined");return i.fromJSON(e,t)},Ze.jsonID=function(e,t){if(e in Xe)throw new RangeError("Duplicate use of selection JSON ID "+e);return Xe[e]=t,t.prototype.jsonID=e,t},Ze.prototype.getBookmark=function(){return Ye.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(Ze.prototype,Je),Ze.prototype.visible=!0;var Ge=function(e,t){this.$from=e,this.$to=t},Ye=function(e){function t(t,i){void 0===i&&(i=t),e.call(this,t,i)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={$cursor:{configurable:!0}};return i.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},t.prototype.map=function(i,n){var r=i.resolve(n.map(this.head));if(!r.parent.inlineContent)return e.near(r);var o=i.resolve(n.map(this.anchor));return new t(o.parent.inlineContent?o:r,r)},t.prototype.replace=function(t,i){if(void 0===i&&(i=m.empty),e.prototype.replace.call(this,t,i),i==m.empty){var n=this.$from.marksAcross(this.$to);n&&t.ensureMarks(n)}},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head},t.prototype.getBookmark=function(){return new Qe(this.anchor,this.head)},t.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},t.fromJSON=function(e,i){if("number"!=typeof i.anchor||"number"!=typeof i.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(i.anchor),e.resolve(i.head))},t.create=function(e,t,i){void 0===i&&(i=t);var n=e.resolve(t);return new this(n,i==t?n:e.resolve(i))},t.between=function(i,n,r){var o=i.pos-n.pos;if(r&&!o||(r=o>=0?1:-1),!n.parent.inlineContent){var s=e.findFrom(n,r,!0)||e.findFrom(n,-r,!0);if(!s)return e.near(n,r);n=s.$head}return i.parent.inlineContent||(0==o||(i=(e.findFrom(i,-r,!0)||e.findFrom(i,r,!0)).$anchor).pos<n.pos!=o<0)&&(i=n),new t(i,n)},Object.defineProperties(t.prototype,i),t}(Ze);Ze.jsonID("text",Ye);var Qe=function(e,t){this.anchor=e,this.head=t};Qe.prototype.map=function(e){return new Qe(e.map(this.anchor),e.map(this.head))},Qe.prototype.resolve=function(e){return Ye.between(e.resolve(this.anchor),e.resolve(this.head))};var et=function(e){function t(t){var i=t.nodeAfter,n=t.node(0).resolve(t.pos+i.nodeSize);e.call(this,t,n),this.node=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(i,n){var r=n.mapResult(this.anchor),o=r.deleted,s=r.pos,a=i.resolve(s);return o?e.near(a):new t(a)},t.prototype.content=function(){return new m(a.from(this.node),0,0)},t.prototype.eq=function(e){return e instanceof t&&e.anchor==this.anchor},t.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},t.prototype.getBookmark=function(){return new tt(this.anchor)},t.fromJSON=function(e,i){if("number"!=typeof i.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(i.anchor))},t.create=function(e,t){return new this(e.resolve(t))},t.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},t}(Ze);et.prototype.visible=!1,Ze.jsonID("node",et);var tt=function(e){this.anchor=e};tt.prototype.map=function(e){var t=e.mapResult(this.anchor),i=t.deleted,n=t.pos;return i?new Qe(n,n):new tt(n)},tt.prototype.resolve=function(e){var t=e.resolve(this.anchor),i=t.nodeAfter;return i&&et.isSelectable(i)?new et(t):Ze.near(t)};var it=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.replace=function(t,i){if(void 0===i&&(i=m.empty),i==m.empty){t.delete(0,t.doc.content.size);var n=e.atStart(t.doc);n.eq(t.selection)||t.setSelection(n)}else e.prototype.replace.call(this,t,i)},t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return nt},t}(Ze);Ze.jsonID("all",it);var nt={map:function(){return this},resolve:function(e){return new it(e)}};function rt(e,t,i,n,r,o){if(t.inlineContent)return Ye.create(e,i);for(var s=n-(r>0?0:1);r>0?s<t.childCount:s>=0;s+=r){var a=t.child(s);if(a.isAtom){if(!o&&et.isSelectable(a))return et.create(e,i-(r<0?a.nodeSize:0))}else{var l=rt(e,a,i+r,r<0?a.childCount:0,r,o);if(l)return l}i+=a.nodeSize*r}}function ot(e,t,i){var n=e.steps.length-1;if(!(n<t)){var r,o=e.steps[n];(o instanceof Ce||o instanceof Ae)&&(e.mapping.maps[n].forEach(function(e,t,i,n){null==r&&(r=n)}),e.setSelection(Ze.near(e.doc.resolve(r),i)))}}var st=function(e){function t(t){e.call(this,t.doc),this.time=Date.now(),this.curSelection=t.selection,this.curSelectionFor=0,this.storedMarks=t.storedMarks,this.updated=0,this.meta=Object.create(null)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return i.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},t.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},i.selectionSet.get=function(){return(1&this.updated)>0},t.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=2,this},t.prototype.ensureMarks=function(e){return h.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this},t.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},t.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},i.storedMarksSet.get=function(){return(2&this.updated)>0},t.prototype.addStep=function(t,i){e.prototype.addStep.call(this,t,i),this.updated=-3&this.updated,this.storedMarks=null},t.prototype.setTime=function(e){return this.time=e,this},t.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},t.prototype.replaceSelectionWith=function(e,t){var i=this.selection;return!1!==t&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||h.none))),i.replaceWith(this,e),this},t.prototype.deleteSelection=function(){return this.selection.replace(this),this},t.prototype.insertText=function(e,t,i){void 0===i&&(i=t);var n=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(n.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,i);var r=this.storedMarks;if(!r){var o=this.doc.resolve(t);r=i==t?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(t,i,n.text(e,r)),this.selection.empty||this.setSelection(Ze.near(this.selection.$to)),this},t.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},t.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},i.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},t.prototype.scrollIntoView=function(){return this.updated|=4,this},i.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(t.prototype,i),t}(_e);function at(e,t){return t&&e?e.bind(t):e}var lt=function(e,t,i){this.name=e,this.init=at(t.init,i),this.apply=at(t.apply,i)},ct=[new lt("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new lt("selection",{init:function(e,t){return e.selection||Ze.atStart(t.doc)},apply:function(e){return e.selection}}),new lt("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,i,n){return n.selection.$cursor?e.storedMarks:null}}),new lt("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],dt=function(e,t){var i=this;this.schema=e,this.fields=ct.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(e){if(i.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");i.plugins.push(e),i.pluginsByKey[e.key]=e,e.spec.state&&i.fields.push(new lt(e.key,e.spec.state,e))})},pt=function(e){this.config=e},ht={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};ht.schema.get=function(){return this.config.schema},ht.plugins.get=function(){return this.config.plugins},pt.prototype.apply=function(e){return this.applyTransaction(e).state},pt.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var i=0;i<this.config.plugins.length;i++)if(i!=t){var n=this.config.plugins[i];if(n.spec.filterTransaction&&!n.spec.filterTransaction.call(n,e,this))return!1}return!0},pt.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],i=this.applyInner(e),n=null;;){for(var r=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=n?n[o].n:0,l=n?n[o].state:this,c=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,l,i);if(c&&i.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",e),!n){n=[];for(var d=0;d<this.config.plugins.length;d++)n.push(d<o?{state:i,n:t.length}:{state:this,n:0})}t.push(c),i=i.applyInner(c),r=!0}n&&(n[o]={state:i,n:t.length})}}if(!r)return{state:i,transactions:t}}},pt.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new pt(this.config),i=this.config.fields,n=0;n<i.length;n++){var r=i[n];t[r.name]=r.apply(e,this[r.name],this,t)}for(var o=0;o<ut.length;o++)ut[o](this,e,t);return t},ht.tr.get=function(){return new st(this)},pt.create=function(e){for(var t=new dt(e.schema||e.doc.type.schema,e.plugins),i=new pt(t),n=0;n<t.fields.length;n++)i[t.fields[n].name]=t.fields[n].init(e,i);return i},pt.prototype.reconfigure=function(e){for(var t=new dt(e.schema||this.schema,e.plugins),i=t.fields,n=new pt(t),r=0;r<i.length;r++){var o=i[r].name;n[o]=this.hasOwnProperty(o)?this[o]:i[r].init(e,n)}return n},pt.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var i in e){if("doc"==i||"selection"==i)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var n=e[i],r=n.spec.state;r&&r.toJSON&&(t[i]=r.toJSON.call(n,this[n.key]))}return t},pt.fromJSON=function(e,t,i){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");var n=new dt(e.schema,e.plugins),r=new pt(n);return n.fields.forEach(function(n){if("doc"==n.name)r.doc=T.fromJSON(e.schema,t.doc);else if("selection"==n.name)r.selection=Ze.fromJSON(r.doc,t.selection);else if("storedMarks"==n.name)t.storedMarks&&(r.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(i)for(var o in i){var s=i[o],a=s.spec.state;if(s.key==n.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(t,o))return void(r[n.name]=a.fromJSON.call(s,e,t[o],r))}r[n.name]=n.init(e,r)}}),r},pt.addApplyListener=function(e){ut.push(e)},pt.removeApplyListener=function(e){var t=ut.indexOf(e);t>-1&&ut.splice(t,1)},Object.defineProperties(pt.prototype,ht);var ut=[];var mt=function(e){this.props={},e.props&&function e(t,i,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(i):"handleDOMEvents"==r&&(o=e(o,i,{})),n[r]=o}return n}(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:gt("plugin")};mt.prototype.getState=function(e){return e[this.key]};var ft=Object.create(null);function gt(e){return e in ft?e+"$"+ ++ft[e]:(ft[e]=0,e+"$")}var yt=function(e){void 0===e&&(e="key"),this.key=gt(e)};yt.prototype.get=function(e){return e.config.pluginsByKey[this.key]},yt.prototype.getState=function(e){return e[this.key]};var vt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var bt=/Edge\/(\d+)/.exec(navigator.userAgent),xt=/MSIE \d/.test(navigator.userAgent),kt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);vt.mac=/Mac/.test(navigator.platform);var _t=vt.ie=!!(xt||kt||bt);vt.ie_version=xt?document.documentMode||6:kt?+kt[1]:bt?+bt[1]:null,vt.gecko=!_t&&/gecko\/(\d+)/i.test(navigator.userAgent),vt.gecko_version=vt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var wt=!_t&&/Chrome\/(\d+)/.exec(navigator.userAgent);vt.chrome=!!wt,vt.chrome_version=wt&&+wt[1],vt.safari=!_t&&/Apple Computer/.test(navigator.vendor),vt.ios=vt.safari&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),vt.android=/Android \d/.test(navigator.userAgent),vt.webkit="webkitFontSmoothing"in document.documentElement.style,vt.webkit_version=vt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Mt=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},zt=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},St=null,Lt=function(e,t,i){var n=St||(St=document.createRange());return n.setEnd(e,null==i?e.nodeValue.length:i),n.setStart(e,t||0),n},Ct=function(e,t,i,n){return i&&(Dt(e,t,i,n,-1)||Dt(e,t,i,n,1))},At=/^(img|br|input|textarea|hr)$/i;function Dt(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:Tt(e))){var o=e.parentNode;if(1!=o.nodeType||$t(e)||At.test(e.nodeName)||"false"==e.contentEditable)return!1;t=Mt(e)+(r<0?0:1),e=o}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?Tt(e):0}}}function Tt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function $t(e){for(var t,i=e;i&&!(t=i.pmViewDesc);i=i.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var Ot=function(e){var t=e.isCollapsed;return t&&vt.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function Nt(e,t){var i=document.createEvent("Event");return i.initEvent("keydown",!0,!0),i.keyCode=e,i.key=i.code=t,i}function Et(e){return{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function qt(e,t){return"number"==typeof e?e:e[t]}function Kt(e){var t=e.getBoundingClientRect();return{left:t.left,right:t.left+e.clientWidth,top:t.top,bottom:t.top+e.clientHeight}}function Bt(e,t,i){for(var n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,o=e.dom.ownerDocument,s=i||e.dom;s;s=zt(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,l=a?Et(o):Kt(s),c=0,d=0;if(t.top<l.top+qt(n,"top")?d=-(l.top-t.top+qt(r,"top")):t.bottom>l.bottom-qt(n,"bottom")&&(d=t.bottom-l.bottom+qt(r,"bottom")),t.left<l.left+qt(n,"left")?c=-(l.left-t.left+qt(r,"left")):t.right>l.right-qt(n,"right")&&(c=t.right-l.right+qt(r,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{var p=s.scrollLeft,h=s.scrollTop;d&&(s.scrollTop+=d),c&&(s.scrollLeft+=c);var u=s.scrollLeft-p,m=s.scrollTop-h;t={left:t.left-u,top:t.top-m,right:t.right-u,bottom:t.bottom-m}}if(a)break}}function Pt(e){for(var t=[],i=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=i);e=zt(e));return t}function Rt(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=n.dom,o=n.top,s=n.left;r.scrollTop!=o+t&&(r.scrollTop=o+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}var It=null;function Ft(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function Vt(e,t){var i,n,r,o,s=e.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(t.left,t.top);a&&(r=(i=a).offsetNode,o=i.offset)}catch(e){}if(!r&&s.caretRangeFromPoint){var l=s.caretRangeFromPoint(t.left,t.top);l&&(r=(n=l).startContainer,o=n.startOffset)}var c,d=s.elementFromPoint(t.left,t.top+1);if(!d||!e.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=e.dom.getBoundingClientRect();if(!Ft(t,p))return null;if(!(d=function e(t,i,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(i.top-n.top)/(n.bottom-n.top))-2)),s=o;;){var a=t.childNodes[s];if(1==a.nodeType)for(var l=a.getClientRects(),c=0;c<l.length;c++){var d=l[c];if(Ft(i,d))return e(a,i,d)}if((s=(s+1)%r)==o)break}return t}(e.dom,t,p)))return null}if(vt.safari&&d.draggable&&(r=o=null),d=function(e,t){var i=e.parentNode;return i&&/^li$/i.test(i.nodeName)&&t.left<e.getBoundingClientRect().left?i:e}(d,t),r){if(vt.gecko&&1==r.nodeType&&(o=Math.min(o,r.childNodes.length))<r.childNodes.length){var h,u=r.childNodes[o];"IMG"==u.nodeName&&(h=u.getBoundingClientRect()).right<=t.left&&h.bottom>t.top&&o++}r==e.dom&&o==r.childNodes.length-1&&1==r.lastChild.nodeType&&t.top>r.lastChild.getBoundingClientRect().bottom?c=e.state.doc.content.size:0!=o&&1==r.nodeType&&"BR"==r.childNodes[o-1].nodeName||(c=function(e,t,i,n){for(var r=-1,o=t;o!=e.dom;){var s=e.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=s.posAfter}}o=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,i)}(e,r,o,t))}null==c&&(c=function(e,t,i){var n=function e(t,i){for(var n,r,o=2e8,s=0,a=i.top,l=i.top,c=t.firstChild,d=0;c;c=c.nextSibling,d++){var p=void 0;if(1==c.nodeType)p=c.getClientRects();else{if(3!=c.nodeType)continue;p=Lt(c).getClientRects()}for(var h=0;h<p.length;h++){var u=p[h];if(u.top<=a&&u.bottom>=l){a=Math.max(u.bottom,a),l=Math.min(u.top,l);var m=u.left>i.left?u.left-i.left:u.right<i.left?i.left-u.right:0;if(m<o){n=c,o=m,r=m&&3==n.nodeType?{left:u.right<i.left?u.right:u.left,top:i.top}:i,1==c.nodeType&&m&&(s=d+(i.left>=(u.left+u.right)/2?1:0));continue}}!n&&(i.left>=u.right&&i.top>=u.top||i.left>=u.left&&i.top>=u.bottom)&&(s=d+1)}}return n&&3==n.nodeType?function(e,t){for(var i=e.nodeValue.length,n=document.createRange(),r=0;r<i;r++){n.setEnd(e,r+1),n.setStart(e,r);var o=Wt(n,1);if(o.top!=o.bottom&&Ft(t,o))return{node:e,offset:r+(t.left>=(o.left+o.right)/2?1:0)}}return{node:e,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:s}:e(n,r)}(d,i),r=n.node,o=n.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&i.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,o,s)}(e,0,t));var m=e.docView.nearestDesc(d,!0);return{pos:c,inside:m?m.posAtStart-m.border:-1}}function Wt(e,t){var i=e.getClientRects();return i.length?i[t<0?0:i.length-1]:e.getBoundingClientRect()}var jt=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ht(e,t,i){var n=e.docView.domFromPos(t,i<0?-1:1),r=n.node,o=n.offset,s=vt.webkit||vt.gecko;if(3==r.nodeType){if(!s||!jt.test(r.nodeValue)&&(i<0?o:o!=r.nodeValue.length)){var a=o,l=o,c=i<0?1:-1;return i<0&&!o?(l++,c=-1):i>=0&&o==r.nodeValue.length?(a--,c=1):i<0?a--:l++,Ut(Wt(Lt(r,a,l),c),c<0)}var d=Wt(Lt(r,o,o),i);if(vt.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var p=Wt(Lt(r,o-1,o-1),-1);if(p.top==d.top){var h=Wt(Lt(r,o,o+1),-1);if(h.top!=d.top)return Ut(h,h.left<p.left)}}return d}if(!e.state.doc.resolve(t).parent.inlineContent){if(o&&(i<0||o==Tt(r))){var u=r.childNodes[o-1];if(1==u.nodeType)return Xt(u.getBoundingClientRect(),!1)}if(o<Tt(r)){var m=r.childNodes[o];if(1==m.nodeType)return Xt(m.getBoundingClientRect(),!0)}return Xt(r.getBoundingClientRect(),i>=0)}if(o&&(i<0||o==Tt(r))){var f=r.childNodes[o-1],g=3==f.nodeType?Lt(f,Tt(f)-(s?0:1)):1!=f.nodeType||"BR"==f.nodeName&&f.nextSibling?null:f;if(g)return Ut(Wt(g,1),!1)}if(o<Tt(r)){var y=r.childNodes[o],v=3==y.nodeType?Lt(y,0,s?0:1):1==y.nodeType?y:null;if(v)return Ut(Wt(v,-1),!0)}return Ut(Wt(3==r.nodeType?Lt(r):r,-i),i>=0)}function Ut(e,t){if(0==e.width)return e;var i=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:i,right:i}}function Xt(e,t){if(0==e.height)return e;var i=t?e.top:e.bottom;return{top:i,bottom:i,left:e.left,right:e.right}}function Zt(e,t,i){var n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return i()}finally{n!=t&&e.updateState(n),r!=e.dom&&r&&r.focus()}}var Jt=/[\u0590-\u08ac]/,Gt=null,Yt=null,Qt=!1,ei=function(e,t,i,n){this.parent=e,this.children=t,this.dom=i,i.pmViewDesc=this,this.contentDOM=n,this.dirty=0},ti={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0},domAtom:{configurable:!0}};ei.prototype.matchesWidget=function(){return!1},ei.prototype.matchesMark=function(){return!1},ei.prototype.matchesNode=function(){return!1},ei.prototype.matchesHack=function(){return!1},ti.beforePosition.get=function(){return!1},ei.prototype.parseRule=function(){return null},ei.prototype.stopEvent=function(){return!1},ti.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},ti.border.get=function(){return 0},ei.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},ei.prototype.posBeforeChild=function(e){for(var t=0,i=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return i;i+=n.size}},ti.posBefore.get=function(){return this.parent.posBeforeChild(this)},ti.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ti.posAfter.get=function(){return this.posBefore+this.size},ti.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},ei.prototype.localPosFromDOM=function(e,t,i){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(i<0){var n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}var o,s;if(e==this.contentDOM)o=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!1;break}if(l.parentNode.firstChild!=l)break}if(null==a&&t==e.childNodes.length)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!0;break}if(c.parentNode.lastChild!=c)break}}return(null==a?i>0:a)?this.posAtEnd:this.posAtStart},ei.prototype.nearestDesc=function(e,t){for(var i=!0,n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!t||r.node)){if(!i||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;i=!1}}},ei.prototype.getDesc=function(e){for(var t=e.pmViewDesc,i=t;i;i=i.parent)if(i==this)return t},ei.prototype.posFromDOM=function(e,t,i){for(var n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,i)}return-1},ei.prototype.descAt=function(e){for(var t=0,i=0;t<this.children.length;t++){var n=this.children[t],r=i+n.size;if(i==e&&r!=i){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-i-n.border);i=r}},ei.prototype.domFromPos=function(e,t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var i=0,n=0,r=!0;;n++,r=!1){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)i+=this.children[n++].size;var o=n==this.children.length?null:this.children[n];if(i==e&&(0==t||!o||o.border||t<0&&r)||o&&o.domAtom&&e<i+o.size)return{node:this.contentDOM,offset:o?Mt(o.dom):this.contentDOM.childNodes.length};if(!o)throw new Error("Invalid position "+e);var s=i+o.size;if(!o.domAtom&&(t<0&&!o.border?s>=e:s>e))return o.domFromPos(e-i-o.border,t);i=s}},ei.prototype.parseRange=function(e,t,i){if(void 0===i&&(i=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,o=i,s=0;;s++){var a=this.children[s],l=o+a.size;if(-1==n&&e<=l){var c=o+a.border;if(e>=c&&t<=l-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,c);e=o;for(var d=s;d>0;d--){var p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){n=Mt(p.dom)+1;break}e-=p.size}-1==n&&(n=0)}if(n>-1&&(l>t||s==this.children.length-1)){t=l;for(var h=s+1;h<this.children.length;h++){var u=this.children[h];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=Mt(u.dom);break}t+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=l}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}},ei.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},ei.prototype.domAfterPos=function(e){var t=this.domFromPos(e,0),i=t.node,n=t.offset;if(1!=i.nodeType||n==i.childNodes.length)throw new RangeError("No node after pos "+e);return i.childNodes[n]},ei.prototype.setSelection=function(e,t,i,n){for(var r=Math.min(e,t),o=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var l=this.children[s],c=a+l.size;if(r>a&&o<c)return l.setSelection(e-a-l.border,t-a-l.border,i,n);a=c}var d=this.domFromPos(e,e?-1:1),p=t==e?d:this.domFromPos(t,t?-1:1),h=i.getSelection(),u=!1;if((vt.gecko||vt.safari)&&e==t)if(3==d.node.nodeType)u=d.offset&&"\n"==d.node.nodeValue[d.offset-1];else{var m=d.node.childNodes[d.offset-1];u=m&&("BR"==m.nodeName||"false"==m.contentEditable)}if(n||u&&vt.safari||!Ct(d.node,d.offset,h.anchorNode,h.anchorOffset)||!Ct(p.node,p.offset,h.focusNode,h.focusOffset)){var f=!1;if((h.extend||e==t)&&!u){h.collapse(d.node,d.offset);try{e!=t&&h.extend(p.node,p.offset),f=!0}catch(e){if(!(e instanceof DOMException))throw e}}if(!f){if(e>t){var g=d;d=p,p=g}var y=document.createRange();y.setEnd(p.node,p.offset),y.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(y)}}},ei.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},ti.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},ei.prototype.markDirty=function(e,t){for(var i=0,n=0;n<this.children.length;n++){var r=this.children[n],o=i+r.size;if(i==o?e<=o&&t>=i:e<o&&t>i){var s=i+r.border,a=o-r.border;if(e>=s&&t<=a)return this.dirty=e==i||t==o?2:1,void(e!=s||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-s,t-s):r.dirty=3);r.dirty=3}i=o}this.dirty=2},ei.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var i=1==e?2:1;t.dirty<i&&(t.dirty=i)}},ti.domAtom.get=function(){return!1},Object.defineProperties(ei.prototype,ti);var ii=[],ni=function(e){function t(t,i,n,r){var o,s=i.type.toDOM;if("function"==typeof s&&(s=s(n,function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:r})),!i.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ii,s,null),this.widget=i,o=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={beforePosition:{configurable:!0},domAtom:{configurable:!0}};return i.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return 0==this.dirty&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},i.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,i),t}(ei),ri=function(e){function t(t,i,n,r){e.call(this,t,ii,i,null),this.textDOM=n,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={size:{configurable:!0}};return i.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,i),t}(ei),oi=function(e){function t(t,i,n,r){e.call(this,t,[],n,r),this.mark=i}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.create=function(e,i,n,r){var o=r.nodeViews[i.type.name],s=o&&o(i,r,n);return s&&s.dom||(s=ue.renderSpec(document,i.type.spec.toDOM(i,n))),new t(e,i,s.dom,s.contentDOM||s.dom)},t.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},t.prototype.matchesMark=function(e){return 3!=this.dirty&&this.mark.eq(e)},t.prototype.markDirty=function(t,i){if(e.prototype.markDirty.call(this,t,i),0!=this.dirty){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=0}},t.prototype.slice=function(e,i,n){var r=t.create(this.parent,this.mark,!0,n),o=this.children,s=this.size;i<s&&(o=ki(o,i,s,n)),e>0&&(o=ki(o,0,e,n));for(var a=0;a<o.length;a++)o[a].parent=r;return r.children=o,r},t}(ei),si=function(e){function t(t,i,n,r,o,s,a,l,c){e.call(this,t,i.isLeaf?ii:[],o,s),this.nodeDOM=a,this.node=i,this.outerDeco=n,this.innerDeco=r,s&&this.updateChildren(l,c)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={size:{configurable:!0},border:{configurable:!0},domAtom:{configurable:!0}};return t.create=function(e,i,n,r,o,s){var a,l,c=o.nodeViews[i.type.name],d=c&&c(i,o,function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:s},n),p=d&&d.dom,h=d&&d.contentDOM;if(i.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(i.text);else p||(p=(a=ue.renderSpec(document,i.type.spec.toDOM(i))).dom,h=a.contentDOM);h||i.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),i.type.spec.draggable&&(p.draggable=!0));var u=p;return p=gi(p,n,i),d?l=new di(e,i,n,r,p,h,u,d,o,s+1):i.isText?new li(e,i,n,r,p,u,o):new t(e,i,n,r,p,h,u,o,s+1)},t.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var t={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(t.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?t.contentElement=this.contentDOM:t.getContent=function(){return e.contentDOM?a.empty:e.node.content},t},t.prototype.matchesNode=function(e,t,i){return 0==this.dirty&&e.eq(this.node)&&yi(t,this.outerDeco)&&i.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},t.prototype.updateChildren=function(e,t){var i=this,n=this.node.inlineContent,r=t,o=n&&e.composing&&this.localCompositionNode(e,t),s=new bi(this,o&&o.node);!function(e,t,i,n){var r=t.locals(e),o=0;if(0!=r.length)for(var s=0,a=[],l=null,c=0;;){if(s<r.length&&r[s].to==o){for(var d=r[s++],p=void 0;s<r.length&&r[s].to==o;)(p||(p=[d])).push(r[s++]);if(p){p.sort(xi);for(var h=0;h<p.length;h++)i(p[h],c,!!l)}else i(d,c,!!l)}var u=void 0,m=void 0;if(l)m=-1,u=l,l=null;else{if(!(c<e.childCount))break;m=c,u=e.child(c++)}for(var f=0;f<a.length;f++)a[f].to<=o&&a.splice(f--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)a.push(r[s++]);var g=o+u.nodeSize;if(u.isText){var y=g;s<r.length&&r[s].from<y&&(y=r[s].from);for(var v=0;v<a.length;v++)a[v].to<y&&(y=a[v].to);y<g&&(l=u.cut(y-o),u=u.cut(0,y-o),g=y,m=-1)}n(u,a.length?u.isInline&&!u.isLeaf?a.filter(function(e){return!e.inline}):a.slice():ii,t.forChild(o,u),m),o=g}else for(var b=0;b<e.childCount;b++){var x=e.child(b);n(x,r,t.forChild(o,x),b),o+=x.nodeSize}}(this.node,this.innerDeco,function(t,o,a){t.spec.marks?s.syncToMarks(t.spec.marks,n,e):t.type.side>=0&&!a&&s.syncToMarks(o==i.node.childCount?h.none:i.node.child(o).marks,n,e),s.placeWidget(t,e,r)},function(t,i,o,a){s.syncToMarks(t.marks,n,e),s.findNodeMatch(t,i,o,a)||s.updateNextNode(t,i,o,e,a)||s.addNode(t,i,o,e,r),r+=t.nodeSize}),s.syncToMarks(ii,n,e),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||2==this.dirty)&&(o&&this.protectLocalComposition(e,o),function e(t,i,n){for(var r=t.firstChild,o=!1,s=0;s<i.length;s++){var a=i[s],l=a.dom;if(l.parentNode==t){for(;l!=r;)r=vi(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(l,r);if(a instanceof oi){var c=r?r.previousSibling:t.lastChild;e(a.contentDOM,a.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=vi(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}(this.contentDOM,this.children,e),vt.ios&&function(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}(this.dom))},t.prototype.localCompositionNode=function(e,t){var i=e.state.selection,n=i.from,r=i.to;if(!(!(e.state.selection instanceof Ye)||n<t||r>t+this.node.content.size)){var o=e.root.getSelection(),s=function(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=Tt(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}(o.focusNode,o.focusOffset);if(s&&this.dom.contains(s.parentNode)){var a=s.nodeValue,l=function(e,t,i,n){for(var r=0,o=0;r<e.childCount&&o<=n;){var s=e.child(r++),a=o;if(o+=s.nodeSize,s.isText){for(var l=s.text;r<e.childCount;){var c=e.child(r++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=i){var d=l.lastIndexOf(t,n-a);if(d>=0&&d+t.length+a>=i)return a+d}}}return-1}(this.node.content,a,n-t,r-t);return l<0?null:{node:s,pos:l,text:a}}}},t.prototype.protectLocalComposition=function(e,t){var i=t.node,n=t.pos,r=t.text;if(!this.getDesc(i)){for(var o=i;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new ri(this,o,i,r);e.compositionNodes.push(s),this.children=ki(this.children,n,n+r.length,e,s)}},t.prototype.update=function(e,t,i,n){return!(3==this.dirty||!e.sameMarkup(this.node)||(this.updateInner(e,t,i,n),0))},t.prototype.updateInner=function(e,t,i,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=0},t.prototype.updateOuterDeco=function(e){if(!yi(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,i=this.dom;this.dom=mi(this.dom,this.nodeDOM,ui(this.outerDeco,this.node,t),ui(e,this.node,t)),this.dom!=i&&(i.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},t.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},t.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},i.domAtom.get=function(){return this.node.isAtom},Object.defineProperties(t.prototype,i),t}(ei);function ai(e,t,i,n,r){return gi(n,t,e),new si(null,e,t,i,n,n,n,r,0)}var li=function(e){function t(t,i,n,r,o,s,a){e.call(this,t,i,n,r,o,null,s,a)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){for(var e=this.nodeDOM.parentNode;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}},t.prototype.update=function(e,t,i,n){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!e.sameMarkup(this.node)||(this.updateOuterDeco(t),0==this.dirty&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text,n.trackWrites==this.nodeDOM&&(n.trackWrites=null)),this.node=e,this.dirty=0,0))},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,i,n){return t==this.nodeDOM?this.posAtStart+Math.min(i,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,i,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,i,n){var r=this.node.cut(e,i),o=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,o,o,n)},i.domAtom.get=function(){return!1},Object.defineProperties(t.prototype,i),t}(si),ci=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={domAtom:{configurable:!0}};return t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return 0==this.dirty},i.domAtom.get=function(){return!0},Object.defineProperties(t.prototype,i),t}(ei),di=function(e){function t(t,i,n,r,o,s,a,l,c,d){e.call(this,t,i,n,r,o,s,a,c,d),this.spec=l}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,i,n,r){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(t,i);return o&&this.updateInner(t,i,n,r),o}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,i,n,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,i,n,r){this.spec.setSelection?this.spec.setSelection(t,i,n):e.prototype.setSelection.call(this,t,i,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(si);function pi(e){e&&(this.nodeName=e)}pi.prototype=Object.create(null);var hi=[new pi];function ui(e,t,i){if(0==e.length)return hi;for(var n=i?hi[0]:new pi,r=[n],o=0;o<e.length;o++){var s=e[o].type.attrs;if(s)for(var a in s.nodeName&&r.push(n=new pi(s.nodeName)),s){var l=s[a];null!=l&&(i&&1==r.length&&r.push(n=new pi(t.isInline?"span":"div")),"class"==a?n.class=(n.class?n.class+" ":"")+l:"style"==a?n.style=(n.style?n.style+";":"")+l:"nodeName"!=a&&(n[a]=l))}}return r}function mi(e,t,i,n){if(i==hi&&n==hi)return t;for(var r=t,o=0;o<n.length;o++){var s=n[o],a=i[o];if(o){var l=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(l=r.parentNode)&&l.tagName.toLowerCase()==s.nodeName||((l=document.createElement(s.nodeName)).pmIsDeco=!0,l.appendChild(r),a=hi[0]),r=l}fi(r,a||hi[0],s)}return r}function fi(e,t,i){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in i||e.removeAttribute(n);for(var r in i)"class"!=r&&"style"!=r&&"nodeName"!=r&&i[r]!=t[r]&&e.setAttribute(r,i[r]);if(t.class!=i.class){for(var o=t.class?t.class.split(" "):ii,s=i.class?i.class.split(" "):ii,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&e.classList.remove(o[a]);for(var l=0;l<s.length;l++)-1==o.indexOf(s[l])&&e.classList.add(s[l])}if(t.style!=i.style){if(t.style)for(var c,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;c=d.exec(t.style);)e.style.removeProperty(c[1]);i.style&&(e.style.cssText+=i.style)}}function gi(e,t,i){return mi(e,e,hi,ui(t,i,1!=e.nodeType))}function yi(e,t){if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!e[i].type.eq(t[i].type))return!1;return!0}function vi(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var bi=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var i=function(e,t){for(var i=[],n=e.childCount,r=t.length-1;n>0&&r>=0;r--){var o=t[r],s=o.node;if(s){if(s!=e.child(n-1))break;i.push(o),--n}}return{nodes:i.reverse(),offset:n}}(e.node.content,e.children);this.preMatched=i.nodes,this.preMatchOffset=i.offset};function xi(e,t){return e.type.side-t.type.side}function ki(e,t,i,n,r){for(var o=[],s=0,a=0;s<e.length;s++){var l=e[s],c=a,d=a+=l.size;c>=i||d<=t?o.push(l):(c<t&&o.push(l.slice(0,t-c,n)),r&&(o.push(r),r=null),d>i&&o.push(l.slice(i-c,l.size,n)))}return o}function _i(e,t){var i=e.root.getSelection(),n=e.state.doc;if(!i.focusNode)return null;var r=e.docView.nearestDesc(i.focusNode),o=r&&0==r.size,s=e.docView.posFromDOM(i.focusNode,i.focusOffset);if(s<0)return null;var a,l,c=n.resolve(s);if(Ot(i)){for(a=c;r&&!r.node;)r=r.parent;if(r&&r.node.isAtom&&et.isSelectable(r.node)&&r.parent&&(!r.node.isInline||!function(e,t,i){for(var n=0==t,r=t==Tt(e);n||r;){if(e==i)return!0;var o=Mt(e);if(!(e=e.parentNode))return!1;n=n&&0==o,r=r&&o==Tt(e)}}(i.focusNode,i.focusOffset,r.dom))){var d=r.posBefore;l=new et(s==d?c:n.resolve(d))}}else{var p=e.docView.posFromDOM(i.anchorNode,i.anchorOffset);if(p<0)return null;a=n.resolve(p)}return l||(l=Di(e,a,c,"pointer"==t||e.state.selection.head<c.pos&&!o?1:-1)),l}function wi(e,t){var i=e.state.selection;if(Ci(e,i),e.editable?e.hasFocus():Ti(e)&&document.activeElement&&document.activeElement.contains(e.dom)){if(e.domObserver.disconnectSelection(),e.cursorWrapper)!function(e){var t=e.root.getSelection(),i=document.createRange(),n=e.cursorWrapper.dom,r="IMG"==n.nodeName;r?i.setEnd(n.parentNode,Mt(n)+1):i.setEnd(n,0),i.collapse(!1),t.removeAllRanges(),t.addRange(i),!r&&!e.state.selection.visible&&vt.ie&&vt.ie_version<=11&&(n.disabled=!0,n.disabled=!1)}(e);else{var n,r,o=i.anchor,s=i.head;!Mi||i instanceof Ye||(i.$from.parent.inlineContent||(n=zi(e,i.from)),i.empty||i.$from.parent.inlineContent||(r=zi(e,i.to))),e.docView.setSelection(o,s,e.root,t),Mi&&(n&&Li(n),r&&Li(r)),i.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var i=e.root.getSelection(),n=i.anchorNode,r=i.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){i.anchorNode==n&&i.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}bi.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},bi.prototype.destroyBetween=function(e,t){if(e!=t){for(var i=e;i<t;i++)this.top.children[i].destroy();this.top.children.splice(e,t-e),this.changed=!0}},bi.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},bi.prototype.syncToMarks=function(e,t,i){for(var n=0,r=this.stack.length>>1,o=Math.min(r,e.length);n<o&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var l=oi.create(this.top,e[r],t,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,r++}},bi.prototype.findNodeMatch=function(e,t,i,n){var r=-1,o=n<0?void 0:this.getPreMatch(n),s=this.top.children;if(o&&o.matchesNode(e,t,i))r=s.indexOf(o);else for(var a=this.index,l=Math.min(s.length,a+5);a<l;a++){var c=s[a];if(c.matchesNode(e,t,i)&&this.preMatched.indexOf(c)<0){r=a;break}}return!(r<0||(this.destroyBetween(this.index,r),this.index++,0))},bi.prototype.updateNextNode=function(e,t,i,n,r){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof si){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=r)return!1;var l=s.dom;if((!this.lock||!(l==this.lock||1==l.nodeType&&l.contains(this.lock.parentNode))||e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&3!=s.dirty&&yi(t,s.outerDeco))&&s.update(e,t,i,n))return this.destroyBetween(this.index,o),s.dom!=l&&(this.changed=!0),this.index++,!0;break}}return!1},bi.prototype.addNode=function(e,t,i,n,r){this.top.children.splice(this.index++,0,si.create(this.top,e,t,i,n,r)),this.changed=!0},bi.prototype.placeWidget=function(e,t,i){var n=this.index<this.top.children.length?this.top.children[this.index]:null;if(!n||!n.matchesWidget(e)||e!=n.widget&&n.widget.type.toDOM.parentNode){var r=new ni(this.top,e,t,i);this.top.children.splice(this.index++,0,r),this.changed=!0}else this.index++},bi.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof oi;)e=e.children[e.children.length-1];if(!e||!(e instanceof li)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new ci(this.top,ii,t,null)),this.changed=!0}};var Mi=vt.safari||vt.chrome&&vt.chrome_version<63;function zi(e,t){var i=e.docView.domFromPos(t,0),n=i.node,r=i.offset,o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(vt.safari&&o&&"false"==o.contentEditable)return Si(o);if(!(o&&"false"!=o.contentEditable||s&&"false"!=s.contentEditable)){if(o)return Si(o);if(s)return Si(s)}}function Si(e){return e.contentEditable="true",vt.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Li(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ci(e,t){if(t instanceof et){var i=e.docView.descAt(t.from);i!=e.lastSelectedViewDesc&&(Ai(e),i&&i.selectNode(),e.lastSelectedViewDesc=i)}else Ai(e)}function Ai(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Di(e,t,i,n){return e.someProp("createSelectionBetween",function(n){return n(e,t,i)})||Ye.between(t,i,n)}function Ti(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(e){return!1}}function $i(e,t){var i=e.selection,n=i.$anchor,r=i.$head,o=t>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?e.doc.resolve(t>0?o.after():o.before()):null:o;return s&&Ze.findFrom(s,t)}function Oi(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Ni(e,t,i){var n=e.state.selection;if(!(n instanceof Ye)){if(n instanceof et&&n.node.isInline)return Oi(e,new Ye(t>0?n.$to:n.$from));var r=$i(e.state,t);return!!r&&Oi(e,r)}if(!n.empty||i.indexOf("s")>-1)return!1;if(e.endOfTextblock(t>0?"right":"left")){var o=$i(e.state,t);return!!(o&&o instanceof et)&&Oi(e,o)}if(!(vt.mac&&i.indexOf("m")>-1)){var s,a=n.$head,l=a.textOffset?null:t<0?a.nodeBefore:a.nodeAfter;if(!l||l.isText)return!1;var c=t<0?a.pos-l.nodeSize:a.pos;return!!(l.isAtom||(s=e.docView.descAt(c))&&!s.contentDOM)&&(et.isSelectable(l)?Oi(e,new et(t<0?e.state.doc.resolve(a.pos-l.nodeSize):a)):!!vt.webkit&&Oi(e,new Ye(e.state.doc.resolve(t<0?c:c+l.nodeSize))))}}function Ei(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function qi(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ki(e){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i){var r,o,s=!1;for(vt.gecko&&1==i.nodeType&&n<Ei(i)&&qi(i.childNodes[n])&&(s=!0);;)if(n>0){if(1!=i.nodeType)break;var a=i.childNodes[n-1];if(qi(a))r=i,o=--n;else{if(3!=a.nodeType)break;n=(i=a).nodeValue.length}}else{if(Pi(i))break;for(var l=i.previousSibling;l&&qi(l);)r=i.parentNode,o=Mt(l),l=l.previousSibling;if(l)n=Ei(i=l);else{if((i=i.parentNode)==e.dom)break;n=0}}s?Ri(e,t,i,n):r&&Ri(e,t,r,o)}}function Bi(e){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i){for(var r,o,s=Ei(i);;)if(n<s){if(1!=i.nodeType)break;if(!qi(i.childNodes[n]))break;r=i,o=++n}else{if(Pi(i))break;for(var a=i.nextSibling;a&&qi(a);)r=a.parentNode,o=Mt(a)+1,a=a.nextSibling;if(a)n=0,s=Ei(i=a);else{if((i=i.parentNode)==e.dom)break;n=s=0}}r&&Ri(e,t,r,o)}}function Pi(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Ri(e,t,i,n){if(Ot(t)){var r=document.createRange();r.setEnd(i,n),r.setStart(i,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(i,n);e.domObserver.setCurSelection();var o=e.state;setTimeout(function(){e.state==o&&wi(e)},50)}function Ii(e,t,i){var n=e.state.selection;if(n instanceof Ye&&!n.empty||i.indexOf("s")>-1)return!1;if(vt.mac&&i.indexOf("m")>-1)return!1;var r=n.$from,o=n.$to;if(!r.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){var s=$i(e.state,t);if(s&&s instanceof et)return Oi(e,s)}if(!r.parent.inlineContent){var a=Ze.findFrom(t<0?r:o,t);return!a||Oi(e,a)}return!1}function Fi(e,t){if(!(e.state.selection instanceof Ye))return!0;var i=e.state.selection,n=i.$head,r=i.$anchor,o=i.empty;if(!n.sameParent(r))return!0;if(!o)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;var s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){var a=e.state.tr;return t<0?a.delete(n.pos-s.nodeSize,n.pos):a.delete(n.pos,n.pos+s.nodeSize),e.dispatch(a),!0}return!1}function Vi(e,t,i){e.domObserver.stop(),t.contentEditable=i,e.domObserver.start()}function Wi(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(vt.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var i=document.createElement("div");return i.appendChild(document.createElement("li")),{skip:i}}if(e.parentNode.lastChild==e||vt.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function ji(e,t,i){return Math.max(i.anchor,i.head)>t.content.size?null:Di(e,t.resolve(i.anchor),t.resolve(i.head))}function Hi(e,t,i){for(var n=e.depth,r=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(i)for(var o=e.node(n).maybeChild(e.indexAfter(n));o&&!o.isLeaf;)o=o.firstChild,r++;return r}function Ui(e,t){for(var i=[],n=t.content,r=t.openStart,o=t.openEnd;r>1&&o>1&&1==n.childCount&&1==n.firstChild.childCount;){r--,o--;var s=n.firstChild;i.push(s.type.name,s.attrs!=s.type.defaultAttrs?s.attrs:null),n=s.content}var a=e.someProp("clipboardSerializer")||ue.fromSchema(e.state.schema),l=Qi(),c=l.createElement("div");c.appendChild(a.serializeFragment(n,{document:l}));for(var d,p=c.firstChild;p&&1==p.nodeType&&(d=Gi[p.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var u=l.createElement(d[h]);c.firstChild;)u.appendChild(c.firstChild);c.appendChild(u)}p=c.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",r+" "+o+" "+JSON.stringify(i)),{dom:c,text:e.someProp("clipboardTextSerializer",function(e){return e(t)})||t.content.textBetween(0,t.content.size,"\n\n")}}function Xi(e,t,i,n,r){var o,s,l=r.parent.type.spec.code;if(!i&&!t)return null;var c=t&&(n||l||!i);if(c){if(e.someProp("transformPastedText",function(e){t=e(t,l||n)}),l)return new m(a.from(e.state.schema.text(t)),0,0);var d=e.someProp("clipboardTextParser",function(e){return e(t,r,n)});d?s=d:(o=document.createElement("div"),t.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){o.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){i=e(i)}),o=function(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var i,n=Qi().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),o=0;(i=r&&Gi[r[1].toLowerCase()])&&(e=i.map(function(e){return"<"+e+">"}).join("")+e+i.map(function(e){return"</"+e+">"}).reverse().join(""),o=i.length),n.innerHTML=e;for(var s=0;s<o;s++)n=n.firstChild;return n}(i);var p=o&&o.querySelector("[data-pm-slice]"),h=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!s){var u=e.someProp("clipboardParser")||e.someProp("domParser")||ie.fromSchema(e.state.schema);s=u.parseSlice(o,{preserveWhitespace:!(!c&&!h),context:r})}return s=h?function(e,t){if(!e.size)return e;var i,n=e.content.firstChild.type.schema;try{i=JSON.parse(t)}catch(t){return e}for(var r=e.content,o=e.openStart,s=e.openEnd,l=i.length-2;l>=0;l-=2){var c=n.nodes[i[l]];if(!c||c.hasRequiredAttrs())break;r=a.from(c.create(i[l+1],r)),o++,s++}return new m(r,o,s)}(function(e,t,i){return t<e.openStart&&(e=new m(Ji(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),i<e.openEnd&&(e=new m(Ji(e.content,1,i,e.openEnd,0,0),e.openStart,i)),e}(s,+h[1],+h[2]),h[3]):m.maxOpen(function(e,t){if(e.childCount<2)return e;for(var i=function(i){var n=t.node(i).contentMatchAt(t.index(i)),r=void 0,o=[];if(e.forEach(function(e){if(o){var t,i=n.findWrapping(e.type);if(!i)return o=null;if(t=o.length&&r.length&&function e(t,i,n,r,o){if(o<t.length&&o<i.length&&t[o]==i[o]){var s=e(t,i,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(a.from(Zi(n,t,o+1))))}}(i,r,e,o[o.length-1],0))o[o.length-1]=t;else{o.length&&(o[o.length-1]=function e(t,i){if(0==i)return t;var n=t.content.replaceChild(t.childCount-1,e(t.lastChild,i-1)),r=t.contentMatchAt(t.childCount).fillBefore(a.empty,!0);return t.copy(n.append(r))}(o[o.length-1],r.length));var s=Zi(e,i);o.push(s),n=n.matchType(s.type,s.attrs),r=i}}}),o)return{v:a.from(o)}},n=t.depth;n>=0;n--){var r=i(n);if(r)return r.v}return e}(s.content,r),!1),e.someProp("transformPasted",function(e){s=e(s)}),s}function Zi(e,t,i){void 0===i&&(i=0);for(var n=t.length-1;n>=i;n--)e=t[n].create(null,a.from(e));return e}function Ji(e,t,i,n,r,o){var s=t<0?e.firstChild:e.lastChild,l=s.content;return r<n-1&&(l=Ji(l,t,i,n,r+1,o)),r>=i&&(l=t<0?s.contentMatchAt(0).fillBefore(l,e.childCount>1||o<=r).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(a.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,s.copy(l))}var Gi={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Yi=null;function Qi(){return Yi||(Yi=document.implementation.createHTMLDocument("title"))}var en={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tn=vt.ie&&vt.ie_version<=11,nn=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};nn.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},nn.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var rn=function(e,t){var i=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)i.queue.push(e[t]);vt.ie&&vt.ie_version<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?i.flushSoon():i.flush()}),this.currentSelection=new nn,tn&&(this.onCharData=function(e){i.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),i.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};rn.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))},rn.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},rn.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,en),tn&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},rn.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var i=0;i<t.length;i++)this.queue.push(t[i]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}tn&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},rn.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},rn.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},rn.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)},rn.prototype.onSelectionChange=function(){if((!(e=this.view).editable||e.root.activeElement==e.dom)&&Ti(e)){var e;if(this.suppressingSelectionUpdates)return wi(this.view);if(vt.ie&&vt.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Ct(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},rn.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},rn.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,i=this.view.docView.nearestDesc(t);return i&&i.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},rn.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Ti(this.view)&&!this.ignoreSelectionChange(t),n=-1,r=-1,o=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var l=this.registerMutation(e[a],s);l&&(n=n<0?l.from:Math.min(l.from,n),r=r<0?l.to:Math.max(l.to,r),l.typeOver&&(o=!0))}if(vt.gecko&&s.length>1){var c=s.filter(function(e){return"BR"==e.nodeName});if(2==c.length){var d=c[0],p=c[1];d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}}(n>-1||i)&&(n>-1&&(this.view.docView.markDirty(n,r),h=this.view,on||(on=!0,"normal"==getComputedStyle(h.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))),this.handleDOMChange(n,r,o,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||wi(this.view))}var h},rn.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var i=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(i==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!i||i.ignoreMutation(e))return null;if("childList"==e.type){var n=e.previousSibling,r=e.nextSibling;if(vt.ie&&vt.ie_version<=11&&e.addedNodes.length)for(var o=0;o<e.addedNodes.length;o++){var s=e.addedNodes[o],a=s.previousSibling,l=s.nextSibling;(!a||Array.prototype.indexOf.call(e.addedNodes,a)<0)&&(n=a),(!l||Array.prototype.indexOf.call(e.addedNodes,l)<0)&&(r=l)}for(var c=n&&n.parentNode==e.target?Mt(n)+1:0,d=i.localPosFromDOM(e.target,c,-1),p=r&&r.parentNode==e.target?Mt(r):e.target.childNodes.length,h=0;h<e.addedNodes.length;h++)t.push(e.addedNodes[h]);return{from:d,to:i.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var on=!1,sn={},an={};function ln(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function cn(e){e.someProp("handleDOMEvents",function(t){for(var i in t)e.eventHandlers[i]||e.dom.addEventListener(i,e.eventHandlers[i]=function(t){return dn(e,t)})})}function dn(e,t){return e.someProp("handleDOMEvents",function(i){var n=i[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function pn(e){return{left:e.clientX,top:e.clientY}}function hn(e,t,i,n,r){if(-1==n)return!1;for(var o=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,function(t){return n>o.depth?t(e,i,o.nodeAfter,o.before(n),r,!0):t(e,i,o.node(n),o.before(n),r,!1)}))return{v:!0}},a=o.depth+1;a>0;a--){var l=s(a);if(l)return l.v}return!1}function un(e,t,i){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==i&&n.setMeta("pointer",!0),e.dispatch(n)}function mn(e){return kn(e)}an.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!yn(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!vt.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",function(i){return i(e,t)})||function(e,t){var i=t.keyCode,n=function(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}(t);return 8==i||vt.mac&&72==i&&"c"==n?Fi(e,-1)||Ki(e):46==i||vt.mac&&68==i&&"c"==n?Fi(e,1)||Bi(e):13==i||27==i||(37==i?Ni(e,-1,n)||Ki(e):39==i?Ni(e,1,n)||Bi(e):38==i?Ii(e,-1,n)||Ki(e):40==i?function(e){if(vt.safari&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),i=t.focusNode,n=t.focusOffset;if(i&&1==i.nodeType&&0==n&&i.firstChild&&"false"==i.firstChild.contentEditable){var r=i.firstChild;Vi(e,r,!0),setTimeout(function(){return Vi(e,r,!1)},20)}}}(e)||Ii(e,1,n)||Bi(e):n==(vt.mac?"m":"c")&&(66==i||73==i||89==i||90==i))}(e,t)?t.preventDefault():ln(e,"key");else{var i=Date.now();e.lastIOSEnter=i,e.lastIOSEnterFallbackTimeout=setTimeout(function(){e.lastIOSEnter==i&&(e.someProp("handleKeyDown",function(t){return t(e,Nt(13,"Enter"))}),e.lastIOSEnter=0)},200)}},an.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},an.keypress=function(e,t){if(!(yn(e,t)||!t.charCode||t.ctrlKey&&!t.altKey||vt.mac&&t.metaKey))if(e.someProp("handleKeyPress",function(i){return i(e,t)}))t.preventDefault();else{var i=e.state.selection;if(!(i instanceof Ye&&i.$from.sameParent(i.$to))){var n=String.fromCharCode(t.charCode);e.someProp("handleTextInput",function(t){return t(e,i.$from.pos,i.$to.pos,n)})||e.dispatch(e.state.tr.insertText(n).scrollIntoView()),t.preventDefault()}}};var fn=vt.mac?"metaKey":"ctrlKey";sn.mousedown=function(e,t){e.shiftKey=t.shiftKey;var i=mn(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&function(e,t){var i=t.x-e.clientX,n=t.y-e.clientY;return i*i+n*n<100}(t,e.lastClick)&&!t[fn]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var o=e.posAtCoords(pn(t));o&&("singleClick"==r?e.mouseDown=new gn(e,o,t,i):("doubleClick"==r?function(e,t,i,n){return hn(e,"handleDoubleClickOn",t,i,n)||e.someProp("handleDoubleClick",function(i){return i(e,t,n)})}:function(e,t,i,n){return hn(e,"handleTripleClickOn",t,i,n)||e.someProp("handleTripleClick",function(i){return i(e,t,n)})||function(e,t){var i=e.state.doc;if(-1==t)return!!i.inlineContent&&(un(e,Ye.create(i,0,i.content.size),"pointer"),!0);for(var n=i.resolve(t),r=n.depth+1;r>0;r--){var o=r>n.depth?n.nodeAfter:n.node(r),s=n.before(r);if(o.inlineContent)un(e,Ye.create(i,s+1,s+1+o.content.size),"pointer");else{if(!et.isSelectable(o))continue;un(e,et.create(i,s),"pointer")}return!0}}(e,i)})(e,o.pos,o.inside,t)?t.preventDefault():ln(e,"pointer"))};var gn=function(e,t,i,n){var r,o,s=this;if(this.view=e,this.startDoc=e.state.doc,this.pos=t,this.event=i,this.flushed=n,this.selectNode=i[fn],this.allowDefault=i.shiftKey,t.inside>-1)r=e.state.doc.nodeAt(t.inside),o=t.inside;else{var a=e.state.doc.resolve(t.pos);r=a.parent,o=a.depth?a.before():0}this.mightDrag=null;var l=n?null:i.target,c=l?e.docView.nearestDesc(l,!0):null;this.target=c?c.dom:null,(r.type.spec.draggable&&!1!==r.type.spec.selectable||e.state.selection instanceof et&&o==e.state.selection.from)&&(this.mightDrag={node:r,pos:o,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&vt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return s.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ln(e,"pointer")};function yn(e,t){return!!e.composing||!!(vt.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}gn.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},gn.prototype.up=function(e){if(this.done(),this.view.dom.contains(3==e.target.nodeType?e.target.parentNode:e.target)){var t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(pn(e))),this.allowDefault||!t?ln(this.view,"pointer"):function(e,t,i,n,r){return hn(e,"handleClickOn",t,i,n)||e.someProp("handleClick",function(i){return i(e,t,n)})||(r?function(e,t){if(-1==t)return!1;var i,n,r=e.state.selection;r instanceof et&&(i=r.node);for(var o=e.state.doc.resolve(t),s=o.depth+1;s>0;s--){var a=s>o.depth?o.nodeAfter:o.node(s);if(et.isSelectable(a)){n=i&&r.$from.depth>0&&s>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(s);break}}return null!=n&&(un(e,et.create(e.state.doc,n),"pointer"),!0)}(e,i):function(e,t){if(-1==t)return!1;var i=e.state.doc.resolve(t),n=i.nodeAfter;return!!(n&&n.isAtom&&et.isSelectable(n))&&(un(e,new et(i),"pointer"),!0)}(e,i))}(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():this.flushed||vt.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||vt.chrome&&!(this.view.state.selection instanceof Ye)&&(t.pos==this.view.state.selection.from||t.pos==this.view.state.selection.to)?(un(this.view,Ze.near(this.view.state.doc.resolve(t.pos)),"pointer"),e.preventDefault()):ln(this.view,"pointer")}},gn.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),ln(this.view,"pointer")},sn.touchdown=function(e){mn(e),ln(e,"pointer")},sn.contextmenu=function(e){return mn(e)};var vn=vt.android?5e3:-1;function bn(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return kn(e)},t))}function xn(e){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty()}function kn(e,t){if(e.domObserver.forceFlush(),xn(e),t||e.docView.dirty){var i=_i(e);return i&&!i.eq(e.state.selection)?e.dispatch(e.state.tr.setSelection(i)):e.updateState(e.state),!0}return!1}an.compositionstart=an.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,i=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!i.textOffset&&i.parentOffset&&i.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||i.marks(),kn(e,!0),e.markCursor=null;else if(kn(e),vt.gecko&&t.selection.empty&&i.parentOffset&&!i.textOffset&&i.nodeBefore.marks.length)for(var n=e.root.getSelection(),r=n.focusNode,o=n.focusOffset;r&&1==r.nodeType&&0!=o;){var s=o<0?r.lastChild:r.childNodes[o-1];if(!s)break;if(3==s.nodeType){n.collapse(s,s.nodeValue.length);break}r=s,o=-1}e.composing=!0}bn(e,vn)},an.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,bn(e,20))};var _n=vt.ie&&vt.ie_version<15||vt.ios&&vt.webkit_version<604;function wn(e,t,i,n){var r=Xi(e,t,i,e.shiftKey,e.state.selection.$from);if(e.someProp("handlePaste",function(t){return t(e,n,r||m.empty)}))return!0;if(!r)return!1;var o=function(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}(r),s=o?e.state.tr.replaceSelectionWith(o,e.shiftKey):e.state.tr.replaceSelection(r);return e.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}sn.copy=an.cut=function(e,t){var i=e.state.selection,n="cut"==t.type;if(!i.empty){var r=_n?null:t.clipboardData,o=Ui(e,i.content()),s=o.dom,a=o.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):function(e,t){if(e.dom.parentNode){var i=e.dom.parentNode.appendChild(document.createElement("div"));i.appendChild(t),i.style.cssText="position: fixed; left: -10000px; top: 10px";var n=getSelection(),r=document.createRange();r.selectNodeContents(t),e.dom.blur(),n.removeAllRanges(),n.addRange(r),setTimeout(function(){i.parentNode&&i.parentNode.removeChild(i),e.focus()},50)}}(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},an.paste=function(e,t){var i=_n?null:t.clipboardData;i&&wn(e,i.getData("text/plain"),i.getData("text/html"),t)?t.preventDefault():function(e,t){if(e.dom.parentNode){var i=e.shiftKey||e.state.selection.$from.parent.type.spec.code,n=e.dom.parentNode.appendChild(document.createElement(i?"textarea":"div"));i||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(function(){e.focus(),n.parentNode&&n.parentNode.removeChild(n),i?wn(e,n.value,null,t):wn(e,n.textContent,n.innerHTML,t)},50)}}(e,t)};var Mn=function(e,t){this.slice=e,this.move=t},zn=vt.mac?"altKey":"ctrlKey";for(var Sn in sn.dragstart=function(e,t){var i=e.mouseDown;if(i&&i.done(),t.dataTransfer){var n=e.state.selection,r=n.empty?null:e.posAtCoords(pn(t));if(r&&r.pos>=n.from&&r.pos<=(n instanceof et?n.to-1:n.to));else if(i&&i.mightDrag)e.dispatch(e.state.tr.setSelection(et.create(e.state.doc,i.mightDrag.pos)));else if(t.target&&1==t.target.nodeType){var o=e.docView.nearestDesc(t.target,!0);if(!o||!o.node.type.spec.draggable||o==e.docView)return;e.dispatch(e.state.tr.setSelection(et.create(e.state.doc,o.posBefore)))}var s=e.state.selection.content(),a=Ui(e,s),l=a.dom,c=a.text;t.dataTransfer.clearData(),t.dataTransfer.setData(_n?"Text":"text/html",l.innerHTML),_n||t.dataTransfer.setData("text/plain",c),e.dragging=new Mn(s,!t[zn])}},sn.dragend=function(e){var t=e.dragging;window.setTimeout(function(){e.dragging==t&&(e.dragging=null)},50)},an.dragover=an.dragenter=function(e,t){return t.preventDefault()},an.drop=function(e,t){var i=e.dragging;if(e.dragging=null,t.dataTransfer){var n=e.posAtCoords(pn(t));if(n){var r=e.state.doc.resolve(n.pos);if(r){var o=i&&i.slice||Xi(e,t.dataTransfer.getData(_n?"Text":"text/plain"),_n?null:t.dataTransfer.getData("text/html"),!1,r),s=i&&!t[zn];if(e.someProp("handleDrop",function(i){return i(e,t,o||m.empty,s)}))t.preventDefault();else if(o){t.preventDefault();var a=o?function(e,t,i){var n=e.resolve(t);if(!i.content.size)return t;for(var r=i.content,o=0;o<i.openStart;o++)r=r.firstChild.content;for(var s=1;s<=(0==i.openStart&&i.size?2:1);s++)for(var a=n.depth;a>=0;a--){var l=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(l>0?1:0);if(1==s?n.node(a).canReplace(c,c,r):n.node(a).contentMatchAt(c).findWrapping(r.firstChild.type))return 0==l?n.pos:l<0?n.before(a+1):n.after(a+1)}return null}(e.state.doc,r.pos,o):r.pos;null==a&&(a=r.pos);var l=e.state.tr;s&&l.deleteSelection();var c=l.mapping.map(a),d=0==o.openStart&&0==o.openEnd&&1==o.content.childCount,p=l.doc;if(d?l.replaceRangeWith(c,c,o.content.firstChild):l.replaceRange(c,c,o),!l.doc.eq(p)){var h=l.doc.resolve(c);if(d&&et.isSelectable(o.content.firstChild)&&h.nodeAfter&&h.nodeAfter.sameMarkup(o.content.firstChild))l.setSelection(new et(h));else{var u=l.mapping.map(a);l.mapping.maps[l.mapping.maps.length-1].forEach(function(e,t,i,n){return u=n}),l.setSelection(Di(e,h,l.doc.resolve(u)))}e.focus(),e.dispatch(l.setMeta("uiEvent","drop"))}}}}}},sn.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&wi(e)},20))},sn.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},sn.beforeinput=function(e,t){if(vt.chrome&&vt.android&&"deleteContentBackward"==t.inputType){var i=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==i&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,Nt(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},an)sn[Sn]=an[Sn];function Ln(e,t){if(e==t)return!0;for(var i in e)if(e[i]!==t[i])return!1;for(var n in t)if(!(n in e))return!1;return!0}var Cn=function(e,t){this.spec=t||Nn,this.side=this.spec.side||0,this.toDOM=e};Cn.prototype.map=function(e,t,i,n){var r=e.mapResult(t.from+n,this.side<0?-1:1),o=r.pos;return r.deleted?null:new Tn(o-i,o-i,this)},Cn.prototype.valid=function(){return!0},Cn.prototype.eq=function(e){return this==e||e instanceof Cn&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ln(this.spec,e.spec))};var An=function(e,t){this.spec=t||Nn,this.attrs=e};An.prototype.map=function(e,t,i,n){var r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-i,o=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-i;return r>=o?null:new Tn(r,o,this)},An.prototype.valid=function(e,t){return t.from<t.to},An.prototype.eq=function(e){return this==e||e instanceof An&&Ln(this.attrs,e.attrs)&&Ln(this.spec,e.spec)},An.is=function(e){return e.type instanceof An};var Dn=function(e,t){this.spec=t||Nn,this.attrs=e};Dn.prototype.map=function(e,t,i,n){var r=e.mapResult(t.from+n,1);if(r.deleted)return null;var o=e.mapResult(t.to+n,-1);return o.deleted||o.pos<=r.pos?null:new Tn(r.pos-i,o.pos-i,this)},Dn.prototype.valid=function(e,t){var i=e.content.findIndex(t.from),n=i.index,r=i.offset;return r==t.from&&r+e.child(n).nodeSize==t.to},Dn.prototype.eq=function(e){return this==e||e instanceof Dn&&Ln(this.attrs,e.attrs)&&Ln(this.spec,e.spec)};var Tn=function(e,t,i){this.from=e,this.to=t,this.type=i},$n={spec:{configurable:!0},inline:{configurable:!0}};Tn.prototype.copy=function(e,t){return new Tn(e,t,this.type)},Tn.prototype.eq=function(e,t){return void 0===t&&(t=0),this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to},Tn.prototype.map=function(e,t,i){return this.type.map(e,this,t,i)},Tn.widget=function(e,t,i){return new Tn(e,e,new Cn(t,i))},Tn.inline=function(e,t,i,n){return new Tn(e,t,new An(i,n))},Tn.node=function(e,t,i,n){return new Tn(e,t,new Dn(i,n))},$n.spec.get=function(){return this.type.spec},$n.inline.get=function(){return this.type instanceof An},Object.defineProperties(Tn.prototype,$n);var On=[],Nn={},En=function(e,t){this.local=e&&e.length?e:On,this.children=t&&t.length?t:On};En.create=function(e,t){return t.length?In(t,e,0,Nn):qn},En.prototype.find=function(e,t,i){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,i),n},En.prototype.findInner=function(e,t,i,n,r){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&i.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var l=this.children[a]+1;this.children[a+2].findInner(e-l,t-l,i,n+l,r)}},En.prototype.map=function(e,t,i){return this==qn||0==e.maps.length?this:this.mapInner(e,t,0,0,i||Nn)},En.prototype.mapInner=function(e,t,i,n,r){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(e,i,n);a&&a.type.valid(t,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(e,t,i,n,r,o,s){for(var a=e.slice(),l=function(e,t,i,n){for(var s=0;s<a.length;s+=3){var l=a[s+1],c=void 0;-1==l||e>l+o||(t>=a[s]+o?a[s+1]=-1:i>=r&&(c=n-i-(t-e))&&(a[s]+=c,a[s+1]+=c))}},c=0;c<i.maps.length;c++)i.maps[c].forEach(l);for(var d=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var h=i.map(e[p]+o),u=h-r;if(u<0||u>=n.content.size){d=!0;continue}var m=i.map(e[p+1]+o,-1)-r,f=n.content.findIndex(u),g=f.index,y=f.offset,v=n.maybeChild(g);if(v&&y==u&&y+v.nodeSize==m){var b=a[p+2].mapInner(i,v,h+1,e[p]+o+1,s);b!=qn?(a[p]=u,a[p+1]=m,a[p+2]=b):(a[p+1]=-2,d=!0)}else d=!0}if(d){var x=In(function(e,t,i,n,r,o,s){function a(e,t){for(var o=0;o<e.local.length;o++){var l=e.local[o].map(n,r,t);l?i.push(l):s.onRemove&&s.onRemove(e.local[o].spec)}for(var c=0;c<e.children.length;c+=3)a(e.children[c+2],e.children[c]+t+1)}for(var l=0;l<e.length;l+=3)-1==e[l+1]&&a(e[l+2],t[l]+o+1);return i}(a,e,t||[],i,r,o,s),n,0,s);t=x.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var _=0,w=0;_<x.children.length;_+=3){for(var M=x.children[_];w<a.length&&a[w]<M;)w+=3;a.splice(w,0,x.children[_],x.children[_+1],x.children[_+2])}}return new En(t&&t.sort(Fn),a)}(this.children,o,e,t,i,n,r):o?new En(o.sort(Fn)):qn},En.prototype.add=function(e,t){return t.length?this==qn?En.create(e,t):this.addInner(e,t,0):this},En.prototype.addInner=function(e,t,i){var n,r=this,o=0;e.forEach(function(e,s){var a,l=s+i;if(a=Pn(t,e,l)){for(n||(n=r.children.slice());o<n.length&&n[o]<s;)o+=3;n[o]==s?n[o+2]=n[o+2].addInner(e,a,l+1):n.splice(o,0,s,s+e.nodeSize,In(a,e,l+1,Nn)),o+=3}});var s=Bn(o?Rn(t):t,-i);return new En(s.length?this.local.concat(s).sort(Fn):this.local,n||this.children)},En.prototype.remove=function(e){return 0==e.length||this==qn?this:this.removeInner(e,0)},En.prototype.removeInner=function(e,t){for(var i=this.children,n=this.local,r=0;r<i.length;r+=3){for(var o=void 0,s=i[r]+t,a=i[r+1]+t,l=0,c=void 0;l<e.length;l++)(c=e[l])&&c.from>s&&c.to<a&&(e[l]=null,(o||(o=[])).push(c));if(o){i==this.children&&(i=this.children.slice());var d=i[r+2].removeInner(o,s+1);d!=qn?i[r+2]=d:(i.splice(r,3),r-=3)}}if(n.length)for(var p=0,h=void 0;p<e.length;p++)if(h=e[p])for(var u=0;u<n.length;u++)n[u].eq(h,t)&&(n==this.local&&(n=this.local.slice()),n.splice(u--,1));return i==this.children&&n==this.local?this:n.length||i.length?new En(n,i):qn},En.prototype.forChild=function(e,t){if(this==qn)return this;if(t.isLeaf)return En.empty;for(var i,n,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(i=this.children[r+2]);break}for(var o=e+1,s=o+t.content.size,a=0;a<this.local.length;a++){var l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof An){var c=Math.max(o,l.from)-o,d=Math.min(s,l.to)-o;c<d&&(n||(n=[])).push(l.copy(c,d))}}if(n){var p=new En(n.sort(Fn));return i?new Kn([p,i]):p}return i||qn},En.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof En)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var i=0;i<this.children.length;i+=3)if(this.children[i]!=e.children[i]||this.children[i+1]!=e.children[i+1]||!this.children[i+2].eq(e.children[i+2]))return!1;return!0},En.prototype.locals=function(e){return Vn(this.localsInner(e))},En.prototype.localsInner=function(e){if(this==qn)return On;if(e.inlineContent||!this.local.some(An.is))return this.local;for(var t=[],i=0;i<this.local.length;i++)this.local[i].type instanceof An||t.push(this.local[i]);return t};var qn=new En;En.empty=qn,En.removeOverlap=Vn;var Kn=function(e){this.members=e};function Bn(e,t){if(!t||!e.length)return e;for(var i=[],n=0;n<e.length;n++){var r=e[n];i.push(new Tn(r.from+t,r.to+t,r.type))}return i}function Pn(e,t,i){if(t.isLeaf)return null;for(var n=i+t.nodeSize,r=null,o=0,s=void 0;o<e.length;o++)(s=e[o])&&s.from>i&&s.to<n&&((r||(r=[])).push(s),e[o]=null);return r}function Rn(e){for(var t=[],i=0;i<e.length;i++)null!=e[i]&&t.push(e[i]);return t}function In(e,t,i,n){var r=[],o=!1;t.forEach(function(t,s){var a=Pn(e,t,s+i);if(a){o=!0;var l=In(a,t,i+s+1,n);l!=qn&&r.push(s,s+t.nodeSize,l)}});for(var s=Bn(o?Rn(e):e,-i).sort(Fn),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new En(s,r):qn}function Fn(e,t){return e.from-t.from||e.to-t.to}function Vn(e){for(var t=e,i=0;i<t.length-1;i++){var n=t[i];if(n.from!=n.to)for(var r=i+1;r<t.length;r++){var o=t[r];if(o.from!=n.from){o.from<n.to&&(t==e&&(t=e.slice()),t[i]=n.copy(n.from,o.from),Wn(t,r,n.copy(o.from,n.to)));break}o.to!=n.to&&(t==e&&(t=e.slice()),t[r]=o.copy(o.from,n.to),Wn(t,r+1,o.copy(n.to,o.to)))}}return t}function Wn(e,t,i){for(;t<e.length&&Fn(i,e[t])>0;)t++;e.splice(t,0,i)}function jn(e){var t=[];return e.someProp("decorations",function(i){var n=i(e.state);n&&n!=qn&&t.push(n)}),e.cursorWrapper&&t.push(En.create(e.state.doc,[e.cursorWrapper.deco])),Kn.from(t)}Kn.prototype.forChild=function(e,t){if(t.isLeaf)return En.empty;for(var i=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(e,t);r!=qn&&(r instanceof Kn?i=i.concat(r.members):i.push(r))}return Kn.from(i)},Kn.prototype.eq=function(e){if(!(e instanceof Kn)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},Kn.prototype.locals=function(e){for(var t,i=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(e);if(r.length)if(t){i&&(t=t.slice(),i=!1);for(var o=0;o<r.length;o++)t.push(r[o])}else t=r}return t?Vn(i?t:t.sort(Fn)):On},Kn.from=function(e){switch(e.length){case 0:return qn;case 1:return e[0];default:return new Kn(e)}};var Hn=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Jn(this),this.markCursor=null,this.cursorWrapper=null,Zn(this),this.nodeViews=Gn(this),this.docView=ai(this.state.doc,Xn(this),jn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.lastIOSEnterFallbackTimeout=null,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new rn(e,function(t,i,n,r){return function(e,t,i,n,r){if(t<0){var o=e.lastSelectionTime>Date.now()-50?e.lastSelectionOrigin:null,s=_i(e,o);if(s&&!e.state.selection.eq(s)){var l=e.state.tr.setSelection(s);"pointer"==o?l.setMeta("pointer",!0):"key"==o&&l.scrollIntoView(),e.dispatch(l)}}else{var c=e.state.doc.resolve(t),d=c.sharedDepth(i);t=c.before(d+1),i=e.state.doc.resolve(i).after(d+1);var p=e.state.selection,h=function(e,t,i){var n=e.docView.parseRange(t,i),r=n.node,o=n.fromOffset,s=n.toOffset,a=n.from,l=n.to,c=e.root.getSelection(),d=null,p=c.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(d=[{node:p,offset:c.anchorOffset}],Ot(c)||d.push({node:c.focusNode,offset:c.focusOffset})),vt.chrome&&8===e.lastKeyCode)for(var h=s;h>o;h--){var u=r.childNodes[h-1],m=u.pmViewDesc;if("BR"==u.nodeType&&!m){s=h;break}if(!m||m.size)break}var f=e.state.doc,g=e.someProp("domParser")||ie.fromSchema(e.state.schema),y=f.resolve(a),v=null,b=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:o,to:s,preserveWhitespace:!y.parent.type.spec.code||"full",editableContent:!0,findPositions:d,ruleFromNode:Wi,context:y});if(d&&null!=d[0].pos){var x=d[0].pos,k=d[1]&&d[1].pos;null==k&&(k=x),v={anchor:x+a,head:k+a}}return{doc:b,sel:v,from:a,to:l}}(e,t,i);if(vt.chrome&&e.cursorWrapper&&h.sel&&h.sel.anchor==e.cursorWrapper.deco.from){var u=e.cursorWrapper.deco.type.toDOM.nextSibling,m=u&&u.nodeValue?u.nodeValue.length:1;h.sel={anchor:h.sel.anchor+m,head:h.sel.anchor+m}}var f,g,y=e.state.doc,v=y.slice(h.from,h.to);8===e.lastKeyCode&&Date.now()-100<e.lastKeyCodeTime?(f=e.state.selection.to,g="end"):(f=e.state.selection.from,g="start"),e.lastKeyCode=null;var b=function(e,t,i,n,r){var o=e.findDiffStart(t,i);if(null==o)return null;var s=e.findDiffEnd(t,i+e.size,i+t.size),a=s.a,l=s.b;return"end"==r&&(n-=a+Math.max(0,o-Math.min(a,l))-o),a<o&&e.size<t.size?(l=(o-=n<=o&&n>=a?o-n:0)+(l-a),a=o):l<o&&(a=(o-=n<=o&&n>=l?o-n:0)+(a-l),l=o),{start:o,endA:a,endB:l}}(v.content,h.doc.content,h.from,f,g);if(!b){if(!(n&&p instanceof Ye&&!p.empty&&p.$head.sameParent(p.$anchor))||e.composing||h.sel&&h.sel.anchor!=h.sel.head){if(vt.ios&&e.lastIOSEnter>Date.now()-225&&r.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName})&&e.someProp("handleKeyDown",function(t){return t(e,Nt(13,"Enter"))}))return void(e.lastIOSEnter=0);if(h.sel){var x=ji(e,e.state.doc,h.sel);x&&!x.eq(e.state.selection)&&e.dispatch(e.state.tr.setSelection(x))}return}b={start:p.from,endA:p.to,endB:p.to}}e.domChangeCount++,e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof Ye&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),vt.ie&&vt.ie_version<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>h.from&&" "==h.doc.textBetween(b.start-h.from-1,b.start-h.from+1)&&(b.start--,b.endA--,b.endB--);var k,_=h.doc.resolveNoCache(b.start-h.from),w=h.doc.resolveNoCache(b.endB-h.from),M=_.sameParent(w)&&_.parent.inlineContent;if((vt.ios&&e.lastIOSEnter>Date.now()-225&&(!M||r.some(function(e){return"DIV"==e.nodeName||"P"==e.nodeName}))||!M&&_.pos<h.doc.content.size&&(k=Ze.findFrom(h.doc.resolve(_.pos+1),1,!0))&&k.head==w.pos)&&e.someProp("handleKeyDown",function(t){return t(e,Nt(13,"Enter"))}))e.lastIOSEnter=0;else if(e.state.selection.anchor>b.start&&function(e,t,i,n,r){if(!n.parent.isTextblock||i-t<=r.pos-n.pos||Hi(n,!0,!1)<r.pos)return!1;var o=e.resolve(t);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=e.resolve(Hi(o,!0,!0));return!(!s.parent.isTextblock||s.pos>i||Hi(s,!0,!1)<i)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}(y,b.start,b.endA,_,w)&&e.someProp("handleKeyDown",function(t){return t(e,Nt(8,"Backspace"))}))vt.android&&vt.chrome&&e.domObserver.suppressSelectionUpdates();else{vt.android&&!M&&_.start()!=w.start()&&0==w.parentOffset&&_.depth==w.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==b.endA&&(b.endB-=2,w=h.doc.resolveNoCache(b.endB-h.from),setTimeout(function(){e.someProp("handleKeyDown",function(t){return t(e,Nt(13,"Enter"))})},20));var z,S,L,C,A=b.start,D=b.endA;if(M)if(_.pos==w.pos)vt.ie&&vt.ie_version<=11&&0==_.parentOffset&&(e.domObserver.suppressSelectionUpdates(),setTimeout(function(){return wi(e)},20)),z=e.state.tr.delete(A,D),S=y.resolve(b.start).marksAcross(y.resolve(b.endA));else if(b.endA==b.endB&&(C=y.resolve(b.start))&&(L=function(e,t){for(var i,n,r,o=e.firstChild.marks,s=t.firstChild.marks,l=o,c=s,d=0;d<s.length;d++)l=s[d].removeFromSet(l);for(var p=0;p<o.length;p++)c=o[p].removeFromSet(c);if(1==l.length&&0==c.length)n=l[0],i="add",r=function(e){return e.mark(n.addToSet(e.marks))};else{if(0!=l.length||1!=c.length)return null;n=c[0],i="remove",r=function(e){return e.mark(n.removeFromSet(e.marks))}}for(var h=[],u=0;u<t.childCount;u++)h.push(r(t.child(u)));if(a.from(h).eq(e))return{mark:n,type:i}}(_.parent.content.cut(_.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,b.endA-C.start()))))z=e.state.tr,"add"==L.type?z.addMark(A,D,L.mark):z.removeMark(A,D,L.mark);else if(_.parent.child(_.index()).isText&&_.index()==w.index()-(w.textOffset?0:1)){var T=_.parent.textBetween(_.parentOffset,w.parentOffset);if(e.someProp("handleTextInput",function(t){return t(e,A,D,T)}))return;z=e.state.tr.insertText(T,A,D)}if(z||(z=e.state.tr.replace(A,D,h.doc.slice(b.start-h.from,b.endB-h.from))),h.sel){var $=ji(e,z.doc,h.sel);$&&!(vt.chrome&&vt.android&&e.composing&&$.empty&&($.head==A||$.head==z.mapping.map(D)-1)||vt.ie&&$.empty&&$.head==A)&&z.setSelection($)}S&&z.ensureMarks(S),e.dispatch(z.scrollIntoView())}}}(e,t,i,n,r)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var i=sn[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var i=t.target;i!=e.dom;i=i.parentNode)if(!i||11==i.nodeType||i.pmViewDesc&&i.pmViewDesc.stopEvent(t))return!1;return!0}(e,t)||dn(e,t)||!e.editable&&t.type in an||i(e,t)})};for(var i in sn)t(i);vt.safari&&e.dom.addEventListener("input",function(){return null}),cn(e)}(this),this.pluginViews=[],this.updatePluginViews()},Un={props:{configurable:!0},root:{configurable:!0}};function Xn(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(i){if("function"==typeof i&&(i=i(e.state)),i)for(var n in i)"class"==n?t.class+=" "+i[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(i[n]))}),[Tn.node(0,e.state.doc.content.size,t)]}function Zn(e){if(e.markCursor){var t=document.createElement("img");t.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:t,deco:Tn.widget(e.state.selection.head,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Jn(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function Gn(e){var t={};return e.someProp("nodeViews",function(e){for(var i in e)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=e[i])}),t}function Yn(){return(Yn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}Un.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Hn.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&cn(this),this._props=e,this.updateStateInner(e.state,!0)},Hn.prototype.setProps=function(e){var t={};for(var i in this._props)t[i]=this._props[i];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},Hn.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Hn.prototype.updateStateInner=function(e,t){var i=this,n=this.state,r=!1,o=!1;if(e.storedMarks&&this.composing&&(xn(this),o=!0),this.state=e,t){var s=Gn(this);(function(e,t){var i=0,n=0;for(var r in e){if(e[r]!=t[r])return!0;i++}for(var o in t)n++;return i!=n})(s,this.nodeViews)&&(this.nodeViews=s,r=!0),cn(this)}this.editable=Jn(this),Zn(this);var a=jn(this),l=Xn(this),c=t?"reset":e.scrollToSelection>n.scrollToSelection?"to selection":"preserve",d=r||!this.docView.matchesNode(e.doc,l,a);!d&&e.selection.eq(n.selection)||(o=!0);var p,h,u,m,f,g,y,v="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(e){for(var t,i,n=e.dom.getBoundingClientRect(),r=Math.max(0,n.top),o=(n.left+n.right)/2,s=r+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=e.root.elementFromPoint(o,s);if(a!=e.dom&&e.dom.contains(a)){var l=a.getBoundingClientRect();if(l.top>=r-20){t=a,i=l.top;break}}}return{refDOM:t,refTop:i,stack:Pt(e.dom)}}(this);if(o){this.domObserver.stop();var b=d&&(vt.ie||vt.chrome)&&!this.composing&&!n.selection.empty&&!e.selection.empty&&function(e,t){var i=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(i)!=t.$anchor.start(i)}(n.selection,e.selection);if(d){var x=vt.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!r&&this.docView.update(e.doc,l,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ai(e.doc,l,a,this.dom,this)),x&&!this.trackWrites&&(b=!0)}b||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(p=this,h=p.docView.domFromPos(p.state.selection.anchor,0),u=p.root.getSelection(),Ct(h.node,h.offset,u.anchorNode,u.anchorOffset)))?wi(this,b):(Ci(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(n),"reset"==c)this.dom.scrollTop=0;else if("to selection"==c){var k=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(i)})||(e.selection instanceof et?Bt(this,this.docView.domAfterPos(e.selection.from).getBoundingClientRect(),k):Bt(this,this.coordsAtPos(e.selection.head,1),k))}else v&&(f=(m=v).refDOM,g=m.refTop,Rt(m.stack,0==(y=f?f.getBoundingClientRect().top:0)?0:y-g))},Hn.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Hn.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var i=this.pluginViews[t];i.update&&i.update(this,e)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},Hn.prototype.someProp=function(e,t){var i,n=this._props&&this._props[e];if(null!=n&&(i=t?t(n):n))return i;var r=this.state.plugins;if(r)for(var o=0;o<r.length;o++){var s=r[o].props[e];if(null!=s&&(i=t?t(s):s))return i}},Hn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Hn.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(e){if(e.setActive)return e.setActive();if(It)return e.focus(It);var t=Pt(e);e.focus(null==It?{get preventScroll(){return It={preventScroll:!0},!0}}:void 0),It||(It=!1,Rt(t,0))}(this.dom),wi(this),this.domObserver.start()},Un.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Hn.prototype.posAtCoords=function(e){return Vt(this,e)},Hn.prototype.coordsAtPos=function(e,t){return void 0===t&&(t=1),Ht(this,e,t)},Hn.prototype.domAtPos=function(e,t){return void 0===t&&(t=0),this.docView.domFromPos(e,t)},Hn.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Hn.prototype.posAtDOM=function(e,t,i){void 0===i&&(i=-1);var n=this.docView.posFromDOM(e,t,i);if(null==n)throw new RangeError("DOM position not inside the editor");return n},Hn.prototype.endOfTextblock=function(e,t){return function(e,t,i){return Gt==t&&Yt==i?Qt:(Gt=t,Yt=i,Qt="up"==i||"down"==i?function(e,t,i){var n=t.selection,r="up"==i?n.$from:n.$to;return Zt(e,t,function(){for(var t=e.docView.domFromPos(r.pos,"up"==i?-1:1).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var o=Ht(e,r.pos,1),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=Lt(s,0,s.nodeValue.length).getClientRects()}for(var l=0;l<a.length;l++){var c=a[l];if(c.bottom>c.top&&("up"==i?c.bottom<o.top+1:c.top>o.bottom-1))return!1}}return!0})}(e,t,i):function(e,t,i){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,o=!r,s=r==n.parent.content.size,a=getSelection();return Jt.test(n.parent.textContent)&&a.modify?Zt(e,t,function(){var t=a.getRangeAt(0),r=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",i,"character");var l=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),l}):"left"==i||"backward"==i?o:s}(e,t,i))}(this,t||this.state,e)},Hn.prototype.destroy=function(){this.docView&&(function(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout),clearTimeout(e.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],jn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Hn.prototype.dispatchEvent=function(e){return function(e,t){dn(e,t)||!sn[t.type]||!e.editable&&t.type in an||sn[t.type](e,t)}(this,e)},Hn.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Hn.prototype,Un);var Qn=n.createElement("path",{fill:"currentColor",d:"M571.31 251.31l-22.62-22.62c-6.25-6.25-16.38-6.25-22.63 0L480 274.75l-46.06-46.06c-6.25-6.25-16.38-6.25-22.63 0l-22.62 22.62c-6.25 6.25-6.25 16.38 0 22.63L434.75 320l-46.06 46.06c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L480 365.25l46.06 46.06c6.25 6.25 16.38 6.25 22.63 0l22.62-22.62c6.25-6.25 6.25-16.38 0-22.63L525.25 320l46.06-46.06c6.25-6.25 6.25-16.38 0-22.63zM552 0H307.65c-14.54 0-27.26 9.8-30.95 23.87l-84.79 322.8-58.41-106.1A32.008 32.008 0 00105.47 224H24c-13.25 0-24 10.74-24 24v48c0 13.25 10.75 24 24 24h43.62l88.88 163.73C168.99 503.5 186.3 512 204.94 512c17.27 0 44.44-9 54.28-41.48L357.03 96H552c13.25 0 24-10.75 24-24V24c0-13.26-10.75-24-24-24z"});function er(e){return n.createElement("svg",Yn({"aria-hidden":"true","data-prefix":"fas","data-icon":"square-root-alt",className:"square-root-alt-solid_svg__svg-inline--fa square-root-alt-solid_svg__fa-square-root-alt square-root-alt-solid_svg__fa-w-18",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e),Qn)}i.p;var tr=new ee({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",toDOM:function(){return["p",0]},parseDOM:[{tag:"p"}]},mathlive:{group:"inline math",content:"text*",inline:!0,atom:!0,code:!0,toDOM:function(e){return["div",{class:"math-node"},0]},parseDOM:[{tag:"div"}]},text:{group:"inline"}}});function ir(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function nr(e,t,i){var n=e.selection.$cursor;if(!n||(i?!i.endOfTextblock("backward",e):n.parentOffset>0))return!1;var r=sr(n);if(!r){var o=n.blockRange(),s=o&&$e(o);return null!=s&&(t&&t(e.tr.lift(o,s).scrollIntoView()),!0)}var a=r.nodeBefore;if(!a.type.spec.isolating&&mr(e,r,t))return!0;if(0==n.parent.content.size&&(rr(a,"end")||et.isSelectable(a))){if(t){var l=e.tr.deleteRange(n.before(),n.after());l.setSelection(rr(a,"end")?Ze.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):et.create(l.doc,r.pos-a.nodeSize)),t(l.scrollIntoView())}return!0}return!(!a.isAtom||r.depth!=n.depth-1||(t&&t(e.tr.delete(r.pos-a.nodeSize,r.pos).scrollIntoView()),0))}function rr(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function or(e,t,i){var n=e.selection,r=n.$head,o=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("backward",e):r.parentOffset>0)return!1;o=sr(r)}var s=o&&o.nodeBefore;return!(!s||!et.isSelectable(s)||(t&&t(e.tr.setSelection(et.create(e.doc,o.pos-s.nodeSize)).scrollIntoView()),0))}function sr(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function ar(e,t,i){var n=e.selection.$cursor;if(!n||(i?!i.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size))return!1;var r=cr(n);if(!r)return!1;var o=r.nodeAfter;if(mr(e,r,t))return!0;if(0==n.parent.content.size&&(rr(o,"start")||et.isSelectable(o))){if(t){var s=e.tr.deleteRange(n.before(),n.after());s.setSelection(rr(o,"start")?Ze.findFrom(s.doc.resolve(s.mapping.map(r.pos)),1):et.create(s.doc,s.mapping.map(r.pos))),t(s.scrollIntoView())}return!0}return!(!o.isAtom||r.depth!=n.depth-1||(t&&t(e.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),0))}function lr(e,t,i){var n=e.selection,r=n.$head,o=r;if(!n.empty)return!1;if(r.parent.isTextblock){if(i?!i.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;o=cr(r)}var s=o&&o.nodeAfter;return!(!s||!et.isSelectable(s)||(t&&t(e.tr.setSelection(et.create(e.doc,o.pos)).scrollIntoView()),0))}function cr(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var i=e.node(t);if(e.index(t)+1<i.childCount)return e.doc.resolve(e.after(t+1));if(i.type.spec.isolating)break}return null}function dr(e){for(var t=0;t<e.edgeCount;t++){var i=e.edge(t).type;if(i.isTextblock&&!i.hasRequiredAttrs())return i}return null}function pr(e,t){var i=e.selection,n=i.$from,r=i.$to;if(n.parent.inlineContent||r.parent.inlineContent)return!1;var o=dr(n.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){var s=(!n.parentOffset&&r.index()<r.parent.childCount?n:r).pos,a=e.tr.insert(s,o.createAndFill());a.setSelection(Ye.create(a.doc,s+1)),t(a.scrollIntoView())}return!0}function hr(e,t){var i=e.selection.$cursor;if(!i||i.parent.content.size)return!1;if(i.depth>1&&i.after()!=i.end(-1)){var n=i.before();if(Oe(e.doc,n))return t&&t(e.tr.split(n).scrollIntoView()),!0}var r=i.blockRange(),o=r&&$e(r);return null!=o&&(t&&t(e.tr.lift(r,o).scrollIntoView()),!0)}function ur(e,t){var i=e.selection,n=i.$from,r=i.$to;if(e.selection instanceof et&&e.selection.node.isBlock)return!(!n.parentOffset||!Oe(e.doc,n.pos)||(t&&t(e.tr.split(n.pos).scrollIntoView()),0));if(!n.parent.isBlock)return!1;if(t){var o=r.parentOffset==r.parent.content.size,s=e.tr;e.selection instanceof Ye&&s.deleteSelection();var l=0==n.depth?null:dr(n.node(-1).contentMatchAt(n.indexAfter(-1))),c=o&&l?[{type:l}]:null,d=Oe(s.doc,s.mapping.map(n.pos),1,c);c||d||!Oe(s.doc,s.mapping.map(n.pos),1,l&&[{type:l}])||(c=[{type:l}],d=!0),d&&(s.split(s.mapping.map(n.pos),1,c),o||n.parentOffset||n.parent.type==l||!n.node(-1).canReplace(n.index(-1),n.indexAfter(-1),a.from([l.create(),n.parent]))||s.setNodeMarkup(s.mapping.map(n.before()),l)),t(s.scrollIntoView())}return!0}function mr(e,t,i){var n,r,o=t.nodeBefore,s=t.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(e,t,i){var n=t.nodeBefore,r=t.nodeAfter,o=t.index();return!(!(n&&r&&n.type.compatibleContent(r.type))||(!n.content.size&&t.parent.canReplace(o-1,o)?(i&&i(e.tr.delete(t.pos-n.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!r.isTextblock&&!Ne(e.doc,t.pos)||(i&&i(e.tr.clearIncompatible(t.pos,n.type,n.contentMatchAt(n.childCount)).join(t.pos).scrollIntoView()),0)))}(e,t,i))return!0;var l=t.parent.canReplace(t.index(),t.index()+1);if(l&&(n=(r=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&r.matchType(n[0]||s.type).validEnd){if(i){for(var c=t.pos+s.nodeSize,d=a.empty,p=n.length-1;p>=0;p--)d=a.from(n[p].create(null,d));d=a.from(o.copy(d));var h=e.tr.step(new Ae(t.pos-1,c,t.pos,c,new m(d,1,0),n.length,!0)),u=c+2*n.length;Ne(h.doc,u)&&h.join(u),i(h.scrollIntoView())}return!0}var f=Ze.findFrom(t,1),g=f&&f.$from.blockRange(f.$to),y=g&&$e(g);if(null!=y&&y>=t.depth)return i&&i(e.tr.lift(g,y).scrollIntoView()),!0;if(l&&s.isTextblock&&rr(o,"end")){for(var v=o,b=[];b.push(v),!v.isTextblock;)v=v.lastChild;if(v.canReplace(v.childCount,v.childCount,s.content)){if(i){for(var x=a.empty,k=b.length-1;k>=0;k--)x=a.from(b[k].copy(x));i(e.tr.step(new Ae(t.pos-b.length,t.pos+s.nodeSize,t.pos+1,t.pos+s.nodeSize-1,new m(x,b.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function fr(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,i,n){for(var r=0;r<e.length;r++)if(e[r](t,i,n))return!0;return!1}}var gr=fr(ir,nr,or),yr=fr(ir,ar,lr),vr={Enter:fr(function(e,t){var i=e.selection,n=i.$head,r=i.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(r)||(t&&t(e.tr.insertText("\n").scrollIntoView()),0))},pr,hr,ur),"Mod-Enter":function(e,t){var i=e.selection,n=i.$head,r=i.$anchor;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;var o=n.node(-1),s=n.indexAfter(-1),a=dr(o.contentMatchAt(s));if(!o.canReplaceWith(s,s,a))return!1;if(t){var l=n.after(),c=e.tr.replaceWith(l,l,a.createAndFill());c.setSelection(Ze.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},Backspace:gr,"Mod-Backspace":gr,Delete:yr,"Mod-Delete":yr,"Mod-a":function(e,t){return t&&t(e.tr.setSelection(new it(e.doc))),!0}},br={"Ctrl-h":vr.Backspace,"Alt-Backspace":vr["Mod-Backspace"],"Ctrl-d":vr.Delete,"Ctrl-Alt-Backspace":vr["Mod-Delete"],"Alt-Delete":vr["Mod-Delete"],"Alt-d":vr["Mod-Delete"]};for(var xr in vr)br[xr]=vr[xr];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();for(var kr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},_r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},wr="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),Mr="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),zr="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),Sr="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Lr="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Cr=wr&&(Sr||+wr[1]<57)||zr&&Sr,Ar=0;Ar<10;Ar++)kr[48+Ar]=kr[96+Ar]=String(Ar);for(Ar=1;Ar<=24;Ar++)kr[Ar+111]="F"+Ar;for(Ar=65;Ar<=90;Ar++)kr[Ar]=String.fromCharCode(Ar+32),_r[Ar]=String.fromCharCode(Ar);for(var Dr in kr)_r.hasOwnProperty(Dr)||(_r[Dr]=kr[Dr]);var Tr="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function $r(e){var t,i,n,r,o=e.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))n=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);Tr?r=!0:i=!0}}return t&&(s="Alt-"+s),i&&(s="Ctrl-"+s),r&&(s="Meta-"+s),n&&(s="Shift-"+s),s}function Or(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}var Nr=function(){};Nr.prototype.append=function(e){return e.length?(e=Nr.from(e),!this.length&&e||e.length<200&&this.leafAppend(e)||this.length<200&&e.leafPrepend(this)||this.appendInner(e)):this},Nr.prototype.prepend=function(e){return e.length?Nr.from(e).append(this):this},Nr.prototype.appendInner=function(e){return new qr(this,e)},Nr.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),e>=t?Nr.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))},Nr.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)},Nr.prototype.forEach=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length),t<=i?this.forEachInner(e,t,i,0):this.forEachInvertedInner(e,t,i,0)},Nr.prototype.map=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this.length);var n=[];return this.forEach(function(t,i){return n.push(e(t,i))},t,i),n},Nr.from=function(e){return e instanceof Nr?e:e&&e.length?new Er(e):Nr.empty};var Er=function(e){function t(t){e.call(this),this.values=t}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var i={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(e,i){return 0==e&&i==this.length?this:new t(this.values.slice(e,i))},t.prototype.getInner=function(e){return this.values[e]},t.prototype.forEachInner=function(e,t,i,n){for(var r=t;r<i;r++)if(!1===e(this.values[r],n+r))return!1},t.prototype.forEachInvertedInner=function(e,t,i,n){for(var r=t-1;r>=i;r--)if(!1===e(this.values[r],n+r))return!1},t.prototype.leafAppend=function(e){if(this.length+e.length<=200)return new t(this.values.concat(e.flatten()))},t.prototype.leafPrepend=function(e){if(this.length+e.length<=200)return new t(e.flatten().concat(this.values))},i.length.get=function(){return this.values.length},i.depth.get=function(){return 0},Object.defineProperties(t.prototype,i),t}(Nr);Nr.empty=new Er([]);var qr=function(e){function t(t,i){e.call(this),this.left=t,this.right=i,this.length=t.length+i.length,this.depth=Math.max(t.depth,i.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,t,i,n){var r=this.left.length;return!(t<r&&!1===this.left.forEachInner(e,t,Math.min(i,r),n))&&!(i>r&&!1===this.right.forEachInner(e,Math.max(t-r,0),Math.min(this.length,i)-r,n+r))&&void 0},t.prototype.forEachInvertedInner=function(e,t,i,n){var r=this.left.length;return!(t>r&&!1===this.right.forEachInvertedInner(e,t-r,Math.max(i,r)-r,n+r))&&!(i<r&&!1===this.left.forEachInvertedInner(e,Math.min(t,r),i,n))&&void 0},t.prototype.sliceInner=function(e,t){if(0==e&&t==this.length)return this;var i=this.left.length;return t<=i?this.left.slice(e,t):e>=i?this.right.slice(e-i,t-i):this.left.slice(e,i).append(this.right.slice(0,t-i))},t.prototype.leafAppend=function(e){var i=this.right.leafAppend(e);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(e){var i=this.left.leafPrepend(e);if(i)return new t(i,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t}(Nr),Kr=Nr,Br=function(e,t){this.items=e,this.eventCount=t};Br.prototype.popEvent=function(e,t){var i=this;if(0==this.eventCount)return null;for(var n,r,o=this.items.length;;o--)if(this.items.get(o-1).selection){--o;break}t&&(n=this.remapping(o,this.items.length),r=n.maps.length);var s,a,l=e.tr,c=[],d=[];return this.items.forEach(function(e,t){if(!e.step)return n||(n=i.remapping(o,t+1),r=n.maps.length),r--,void d.push(e);if(n){d.push(new Pr(e.map));var p,h=e.step.map(n.slice(r));h&&l.maybeStep(h).doc&&(p=l.mapping.maps[l.mapping.maps.length-1],c.push(new Pr(p,null,null,c.length+d.length))),r--,p&&n.appendMap(p,r)}else l.maybeStep(e.step);return e.selection?(s=n?e.selection.map(n.slice(r)):e.selection,a=new Br(i.items.slice(0,o).append(d.reverse().concat(c)),i.eventCount-1),!1):void 0},this.items.length,0),{remaining:a,transform:l,selection:s}},Br.prototype.addTransform=function(e,t,i,n){for(var r=[],o=this.eventCount,s=this.items,a=!n&&s.length?s.get(s.length-1):null,l=0;l<e.steps.length;l++){var c,d=e.steps[l].invert(e.docs[l]),p=new Pr(e.mapping.maps[l],d,t);(c=a&&a.merge(p))&&(p=c,l?r.pop():s=s.slice(0,s.length-1)),r.push(p),t&&(o++,t=null),n||(a=p)}var h,u,m,f=o-i.depth;return f>Ir&&(u=f,(h=s).forEach(function(e,t){if(e.selection&&0==u--)return m=t,!1}),s=h.slice(m),o-=f),new Br(s.append(r),o)},Br.prototype.remapping=function(e,t){var i=new xe;return this.items.forEach(function(t,n){var r=null!=t.mirrorOffset&&n-t.mirrorOffset>=e?i.maps.length-t.mirrorOffset:null;i.appendMap(t.map,r)},e,t),i},Br.prototype.addMaps=function(e){return 0==this.eventCount?this:new Br(this.items.append(e.map(function(e){return new Pr(e)})),this.eventCount)},Br.prototype.rebased=function(e,t){if(!this.eventCount)return this;var i=[],n=Math.max(0,this.items.length-t),r=e.mapping,o=e.steps.length,s=this.eventCount;this.items.forEach(function(e){e.selection&&s--},n);var a=t;this.items.forEach(function(t){var n=r.getMirror(--a);if(null!=n){o=Math.min(o,n);var l=r.maps[n];if(t.step){var c=e.steps[n].invert(e.docs[n]),d=t.selection&&t.selection.map(r.slice(a+1,n));d&&s++,i.push(new Pr(l,c,d))}else i.push(new Pr(l))}},n);for(var l=[],c=t;c<o;c++)l.push(new Pr(r.maps[c]));var d=this.items.slice(0,n).append(l).append(i),p=new Br(d,s);return p.emptyItemCount()>500&&(p=p.compress(this.items.length-i.length)),p},Br.prototype.emptyItemCount=function(){var e=0;return this.items.forEach(function(t){t.step||e++}),e},Br.prototype.compress=function(e){void 0===e&&(e=this.items.length);var t=this.remapping(0,e),i=t.maps.length,n=[],r=0;return this.items.forEach(function(o,s){if(s>=e)n.push(o),o.selection&&r++;else if(o.step){var a=o.step.map(t.slice(i)),l=a&&a.getMap();if(i--,l&&t.appendMap(l,i),a){var c=o.selection&&o.selection.map(t.slice(i));c&&r++;var d,p=new Pr(l.invert(),a,c),h=n.length-1;(d=n.length&&n[h].merge(p))?n[h]=d:n.push(p)}}else o.map&&i--},this.items.length,0),new Br(Kr.from(n.reverse()),r)},Br.empty=new Br(Kr.empty,0);var Pr=function(e,t,i,n){this.map=e,this.step=t,this.selection=i,this.mirrorOffset=n};Pr.prototype.merge=function(e){if(this.step&&e.step&&!e.selection){var t=e.step.merge(this.step);if(t)return new Pr(t.getMap().invert(),t,this.selection)}};var Rr=function(e,t,i,n){this.done=e,this.undone=t,this.prevRanges=i,this.prevTime=n},Ir=20;function Fr(e){var t=[];return e.forEach(function(e,i,n,r){return t.push(n,r)}),t}function Vr(e,t){if(!e)return null;for(var i=[],n=0;n<e.length;n+=2){var r=t.map(e[n],1),o=t.map(e[n+1],-1);r<=o&&i.push(r,o)}return i}function Wr(e,t,i,n){var r=Ur(t),o=Xr.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(s){var a=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),o,r),c=new Rr(n?l:s.remaining,n?s.remaining:l,null,0);i(s.transform.setSelection(a).setMeta(Xr,{redo:n,historyState:c}).scrollIntoView())}}var jr=!1,Hr=null;function Ur(e){var t=e.plugins;if(Hr!=t){jr=!1,Hr=t;for(var i=0;i<t.length;i++)if(t[i].spec.historyPreserveItems){jr=!0;break}}return jr}var Xr=new yt("history"),Zr=new yt("closeHistory");function Jr(e){return Array.isArray(e)}var Gr={"AMS-Regular":{65:[0,.68889,0,0],66:[0,.68889,0,0],67:[0,.68889,0,0],68:[0,.68889,0,0],69:[0,.68889,0,0],70:[0,.68889,0,0],71:[0,.68889,0,0],72:[0,.68889,0,0],73:[0,.68889,0,0],74:[.16667,.68889,0,0],75:[0,.68889,0,0],76:[0,.68889,0,0],77:[0,.68889,0,0],78:[0,.68889,0,0],79:[.16667,.68889,0,0],80:[0,.68889,0,0],81:[.16667,.68889,0,0],82:[0,.68889,0,0],83:[0,.68889,0,0],84:[0,.68889,0,0],85:[0,.68889,0,0],86:[0,.68889,0,0],87:[0,.68889,0,0],88:[0,.68889,0,0],89:[0,.68889,0,0],90:[0,.68889,0,0],107:[0,.68889,0,0],165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:[0,.68889,0,0],295:[0,.68889,0,0],710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:[.08167,.58167,0,0],1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:[0,.68889,0,0],8487:[0,.68889,0,0],8498:[0,.68889,0,0],8502:[0,.68889,0,0],8503:[0,.68889,0,0],8504:[0,.68889,0,0],8513:[0,.68889,0,0],8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:[0,.69224,0,0],8625:[0,.69224,0,0],8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:[0,.68889,0,0],8709:[.08167,.58167,0,0],8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:[.08167,.58167,0,0],8733:[0,.69224,0,0],8736:[0,.69224,0,0],8737:[0,.69224,0,0],8738:[.03517,.52239,0,0],8739:[.08167,.58167,0,0],8740:[.25142,.74111,0,0],8741:[.08167,.58167,0,0],8742:[.25142,.74111,0,0],8756:[0,.69224,0,0],8757:[0,.69224,0,0],8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:[.08167,.58167,0,0],8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:[0,.69224,0,0],8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:[0,.69224,0,0],8873:[0,.69224,0,0],8874:[0,.69224,0,0],8876:[0,.68889,0,0],8877:[0,.68889,0,0],8878:[0,.68889,0,0],8879:[0,.68889,0,0],8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:[.08167,.58167,0,0],8905:[.08167,.58167,0,0],8906:[.08167,.58167,0,0],8907:[0,.69224,0,0],8908:[0,.69224,0,0],8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:[0,.69224,0,0],8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:[0,.69224,0,0],9488:[0,.69224,0,0],9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:[0,.69224,0,0],10016:[0,.69224,0,0],10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:[.08167,.58167,0,0],57351:[.08167,.58167,0,0],57352:[.08167,.58167,0,0],57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:[0,.64444,0,0],55:[.19444,.43056,0,0],56:[0,.64444,0,0],57:[.19444,.43056,0,0],65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889]},"Fraktur-Regular":{33:[0,.69141,0,0],34:[0,.69141,0,0],38:[0,.69141,0,0],39:[0,.69141,0,0],40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:[0,.47534,0,0],49:[0,.47534,0,0],50:[0,.47534,0,0],51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:[0,.69141,0,0],55:[.18906,.47534,0,0],56:[0,.69141,0,0],57:[.18906,.47534,0,0],58:[0,.47534,0,0],59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:[0,.69141,0,0],65:[0,.69141,0,0],66:[0,.69141,0,0],67:[0,.69141,0,0],68:[0,.69141,0,0],69:[0,.69141,0,0],70:[.12604,.69141,0,0],71:[0,.69141,0,0],72:[.06302,.69141,0,0],73:[0,.69141,0,0],74:[.12604,.69141,0,0],75:[0,.69141,0,0],76:[0,.69141,0,0],77:[0,.69141,0,0],78:[0,.69141,0,0],79:[0,.69141,0,0],80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:[0,.69141,0,0],83:[0,.69141,0,0],84:[0,.69141,0,0],85:[0,.69141,0,0],86:[0,.69141,0,0],87:[0,.69141,0,0],88:[0,.69141,0,0],89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:[0,.69141,0,0],97:[0,.47534,0,0],98:[0,.69141,0,0],99:[0,.47534,0,0],100:[0,.62119,0,0],101:[0,.47534,0,0],102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:[0,.69141,0,0],106:[0,.69141,0,0],107:[0,.69141,0,0],108:[0,.69141,0,0],109:[0,.47534,0,0],110:[0,.47534,0,0],111:[0,.47534,0,0],112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:[0,.47534,0,0],115:[0,.47534,0,0],116:[0,.62119,0,0],117:[0,.47534,0,0],118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],8216:[0,.69141,0,0],8217:[0,.69141,0,0],58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:[0,.69141,0,0],58118:[0,.62119,0,0],58119:[0,.47534,0,0]},"Main-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:[0,.44444,0,0],46:[0,.15556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.44444,0,0],59:[.19444,.44444,0,0],60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68611,0,0],66:[0,.68611,0,0],67:[0,.68611,0,0],68:[0,.68611,0,0],69:[0,.68611,0,0],70:[0,.68611,0,0],71:[0,.68611,0,0],72:[0,.68611,0,0],73:[0,.68611,0,0],74:[0,.68611,0,0],75:[0,.68611,0,0],76:[0,.68611,0,0],77:[0,.68611,0,0],78:[0,.68611,0,0],79:[0,.68611,0,0],80:[0,.68611,0,0],81:[.19444,.68611,0,0],82:[0,.68611,0,0],83:[0,.68611,0,0],84:[0,.68611,0,0],85:[0,.68611,0,0],86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:[0,.68611,0,0],89:[0,.68611,.02875,0],90:[0,.68611,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.13444,.03194,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,0,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:[0,.44444,0,0],121:[.19444,.44444,.01597,0],122:[0,.44444,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],172:[0,.44444,0,0],176:[0,.69444,0,0],177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:[0,.68611,0,0],215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:[0,.69444,0,0],230:[0,.44444,0,0],247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:[0,.44444,0,0],338:[0,.68611,0,0],339:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.59611,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],733:[0,.69444,0,0],915:[0,.68611,0,0],916:[0,.68611,0,0],920:[0,.68611,0,0],923:[0,.68611,0,0],926:[0,.68611,0,0],928:[0,.68611,0,0],931:[0,.68611,0,0],933:[0,.68611,0,0],934:[0,.68611,0,0],936:[0,.68611,0,0],937:[0,.68611,0,0],8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8242:[0,.55556,0,0],8407:[0,.72444,.15486,0],8463:[0,.69444,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,0],8472:[.19444,.44444,0,0],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.10889,.39111,0,0],8593:[.19444,.69444,0,0],8594:[-.10889,.39111,0,0],8595:[.19444,.69444,0,0],8596:[-.10889,.39111,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:[.19444,.69444,0,0],8658:[-.10889,.39111,0,0],8659:[.19444,.69444,0,0],8660:[-.10889,.39111,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.06389,0],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68611,0,0],8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:[0,.44444,0,0],8734:[0,.44444,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:[.19444,.69444,0,0],8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:[0,.55556,0,0],8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:[.19444,.69444,0,0],9657:[-.02778,.47222,0,0],9661:[.19444,.69444,0,0],9667:[-.02778,.47222,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10815:[0,.68611,0,0],10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:[.19444,.69444,0,0]},"Main-BoldItalic":{33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:[0,.68611,0,0],66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:[0,.68611,0,0],77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],163:[0,.69444,0,0],168:[0,.69444,.11473,0],176:[0,.69444,0,0],184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:[0,.69444,0,0],728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:[0,.69444,0,0],732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:[0,.68611,0,0],920:[0,.68611,.09062,0],923:[0,.68611,0,0],926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:[0,.68333,0,0],66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:[0,.68333,0,0],77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],163:[0,.69444,0,0],168:[0,.66786,.10474,0],176:[0,.69444,0,0],184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],305:[0,.43056,0,.02778],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],567:[.19444,.43056,0,.08334],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:[0,.69444,0,0],728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:[0,.69444,0,0],732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:[0,.68333,0,0],920:[0,.68333,.09403,0],923:[0,.68333,0,0],926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:[0,.68889,0,0]},"Main-Regular":{32:[0,0,0,0],33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:[.25,.75,0,0],48:[0,.64444,0,0],49:[0,.64444,0,0],50:[0,.64444,0,0],51:[0,.64444,0,0],52:[0,.64444,0,0],53:[0,.64444,0,0],54:[0,.64444,0,0],55:[0,.64444,0,0],56:[0,.64444,0,0],57:[0,.64444,0,0],58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.68333,0,0],66:[0,.68333,0,0],67:[0,.68333,0,0],68:[0,.68333,0,0],69:[0,.68333,0,0],70:[0,.68333,0,0],71:[0,.68333,0,0],72:[0,.68333,0,0],73:[0,.68333,0,0],74:[0,.68333,0,0],75:[0,.68333,0,0],76:[0,.68333,0,0],77:[0,.68333,0,0],78:[0,.68333,0,0],79:[0,.68333,0,0],80:[0,.68333,0,0],81:[.19444,.68333,0,0],82:[0,.68333,0,0],83:[0,.68333,0,0],84:[0,.68333,0,0],85:[0,.68333,0,0],86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:[0,.68333,0,0],89:[0,.68333,.025,0],90:[0,.68333,0,0],91:[.25,.75,0,0],92:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,0],100:[0,.69444,0,0],101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:[0,.69444,0,0],105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:[.25,.75,0,0],124:[.25,.75,0,0],125:[.25,.75,0,0],126:[.35,.31786,0,0],160:[0,0,0,0],167:[.19444,.69444,0,0],168:[0,.66786,0,0],172:[0,.43056,0,0],176:[0,.69444,0,0],177:[.08333,.58333,0,0],182:[.19444,.69444,0,0],184:[.17014,0,0,0],198:[0,.68333,0,0],215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:[0,.69444,0,0],230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:[0,.68333,0,0],339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:[0,.69444,0,0],711:[0,.62847,0,0],713:[0,.56778,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.66786,0,0],730:[0,.69444,0,0],732:[0,.66786,0,0],733:[0,.69444,0,0],915:[0,.68333,0,0],916:[0,.68333,0,0],920:[0,.68333,0,0],923:[0,.68333,0,0],926:[0,.68333,0,0],928:[0,.68333,0,0],931:[0,.68333,0,0],933:[0,.68333,0,0],934:[0,.68333,0,0],936:[0,.68333,0,0],937:[0,.68333,0,0],8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0],8224:[.19444,.69444,0,0],8225:[.19444,.69444,0,0],8230:[0,.12,0,0],8242:[0,.55556,0,0],8407:[0,.71444,.15382,0],8463:[0,.68889,0,0],8465:[0,.69444,0,0],8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:[0,.69444,0,0],8501:[0,.69444,0,0],8592:[-.13313,.36687,0,0],8593:[.19444,.69444,0,0],8594:[-.13313,.36687,0,0],8595:[.19444,.69444,0,0],8596:[-.13313,.36687,0,0],8597:[.25,.75,0,0],8598:[.19444,.69444,0,0],8599:[.19444,.69444,0,0],8600:[.19444,.69444,0,0],8601:[.19444,.69444,0,0],8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:[.19444,.69444,0,0],8658:[-.13313,.36687,0,0],8659:[.19444,.69444,0,0],8660:[-.13313,.36687,0,0],8661:[.25,.75,0,0],8704:[0,.69444,0,0],8706:[0,.69444,.05556,.08334],8707:[0,.69444,0,0],8709:[.05556,.75,0,0],8711:[0,.68333,0,0],8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:[.25,.75,0,0],8726:[.25,.75,0,0],8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:[0,.69224,0,0],8739:[.25,.75,0,0],8741:[.25,.75,0,0],8743:[0,.55556,0,0],8744:[0,.55556,0,0],8745:[0,.55556,0,0],8746:[0,.55556,0,0],8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:[.19444,.69444,0,0],8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:[0,.55556,0,0],8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:[0,.55556,0,0],8852:[0,.55556,0,0],8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:[0,.69444,0,0],8867:[0,.69444,0,0],8868:[0,.69444,0,0],8869:[0,.69444,0,0],8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:[.25,.75,0,0],8969:[.25,.75,0,0],8970:[.25,.75,0,0],8971:[.25,.75,0,0],8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:[.19444,.69444,0,0],9657:[-.03472,.46528,0,0],9661:[.19444,.69444,0,0],9667:[-.03472,.46528,0,0],9711:[.19444,.69444,0,0],9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:[0,.75,0,0],9838:[.19444,.69444,0,0],9839:[.19444,.69444,0,0],10216:[.25,.75,0,0],10217:[.25,.75,0,0],10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:[0,.68333,0,0],10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:[.19444,.69444,0,0]},"Math-BoldItalic":{65:[0,.68611,0,0],66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:[0,.68611,0,0],72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:[0,.68611,0,0],77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:[0,.69444,0,0],105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:[0,.44444,0,0],116:[0,.63492,0,0],117:[0,.44444,0,0],118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:[0,.44444,0,0],121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],915:[0,.68611,.15972,0],916:[0,.68611,0,0],920:[0,.68611,.03194,0],923:[0,.68611,0,0],926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:[0,.68611,0,0],936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:[0,.44444,0,0],946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:[0,.44444,0,0],950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:[0,.44444,0,0],954:[0,.44444,0,0],955:[0,.69444,0,0],956:[.19444,.44444,0,0],957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:[0,.44444,0,0],960:[0,.44444,.03704,0],961:[.19444,.44444,0,0],962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:[.19444,.44444,0,0],967:[.19444,.44444,0,0],968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:[0,.69444,0,0],981:[.19444,.69444,0,0],982:[0,.44444,.03194,0],1009:[.19444,.44444,0,0],1013:[0,.44444,0,0]},"Math-Italic":{65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:[0,.69444,0,0],99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:[0,.69444,0,0],105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:[0,.69444,0,0],956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556]},"SansSerif-Bold":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:[.25,.75,0,0],48:[0,.69444,0,0],49:[0,.69444,0,0],50:[0,.69444,0,0],51:[0,.69444,0,0],52:[0,.69444,0,0],53:[0,.69444,0,0],54:[0,.69444,0,0],55:[0,.69444,0,0],56:[0,.69444,0,0],57:[0,.69444,0,0],58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.10556,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:[0,.69444,0,0],89:[0,.69444,.0275,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:[0,.69444,0,0],99:[0,.45833,0,0],100:[0,.69444,0,0],101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:[0,.69444,0,0],105:[0,.69444,0,0],106:[.19444,.69444,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],168:[0,.69444,0,0],176:[0,.69444,0,0],180:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:[0,.69444,0,0],711:[0,.63542,0,0],713:[0,.63778,0,0],728:[0,.69444,0,0],729:[0,.69444,0,0],730:[0,.69444,0,0],732:[0,.69444,0,0],733:[0,.69444,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"SansSerif-Italic":{33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:[0,.69444,0,0],66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:[0,.69444,0,0],77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],168:[0,.67937,.06385,0],176:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:[0,.69444,0,0],728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:[0,.69444,0,0],732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:[0,.69444,0,0],920:[0,.69444,.07555,0],923:[0,.69444,0,0],926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{33:[0,.69444,0,0],34:[0,.69444,0,0],35:[.19444,.69444,0,0],36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:[0,.69444,0,0],39:[0,.69444,0,0],40:[.25,.75,0,0],41:[.25,.75,0,0],42:[0,.75,0,0],43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:[0,.44444,0,0],46:[0,.08333,0,0],47:[.25,.75,0,0],48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:[0,.44444,0,0],59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:[0,.69444,0,0],64:[0,.69444,0,0],65:[0,.69444,0,0],66:[0,.69444,0,0],67:[0,.69444,0,0],68:[0,.69444,0,0],69:[0,.69444,0,0],70:[0,.69444,0,0],71:[0,.69444,0,0],72:[0,.69444,0,0],73:[0,.69444,0,0],74:[0,.69444,0,0],75:[0,.69444,0,0],76:[0,.69444,0,0],77:[0,.69444,0,0],78:[0,.69444,0,0],79:[0,.69444,0,0],80:[0,.69444,0,0],81:[.125,.69444,0,0],82:[0,.69444,0,0],83:[0,.69444,0,0],84:[0,.69444,0,0],85:[0,.69444,0,0],86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:[0,.69444,0,0],89:[0,.69444,.025,0],90:[0,.69444,0,0],91:[.25,.75,0,0],93:[.25,.75,0,0],94:[0,.69444,0,0],95:[.35,.09444,.02778,0],97:[0,.44444,0,0],98:[0,.69444,0,0],99:[0,.44444,0,0],100:[0,.69444,0,0],101:[0,.44444,0,0],102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:[0,.69444,0,0],105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:[0,.69444,0,0],108:[0,.69444,0,0],109:[0,.44444,0,0],110:[0,.44444,0,0],111:[0,.44444,0,0],112:[.19444,.44444,0,0],113:[.19444,.44444,0,0],114:[0,.44444,.01389,0],115:[0,.44444,0,0],116:[0,.57143,0,0],117:[0,.44444,0,0],118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:[0,.44444,0,0],121:[.19444,.44444,.01389,0],122:[0,.44444,0,0],126:[.35,.32659,0,0],168:[0,.67937,0,0],176:[0,.69444,0,0],184:[.17014,0,0,0],305:[0,.44444,0,0],567:[.19444,.44444,0,0],710:[0,.69444,0,0],711:[0,.63194,0,0],713:[0,.60889,0,0],714:[0,.69444,0,0],715:[0,.69444,0,0],728:[0,.69444,0,0],729:[0,.67937,0,0],730:[0,.69444,0,0],732:[0,.67659,0,0],733:[0,.69444,0,0],915:[0,.69444,0,0],916:[0,.69444,0,0],920:[0,.69444,0,0],923:[0,.69444,0,0],926:[0,.69444,0,0],928:[0,.69444,0,0],931:[0,.69444,0,0],933:[0,.69444,0,0],934:[0,.69444,0,0],936:[0,.69444,0,0],937:[0,.69444,0,0],8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:[0,.69444,0,0],8217:[0,.69444,0,0],8220:[0,.69444,0,0],8221:[0,.69444,0,0]},"Script-Regular":{65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0]},"Size1-Regular":{40:[.35001,.85,0,0],41:[.35001,.85,0,0],47:[.35001,.85,0,0],91:[.35001,.85,0,0],92:[.35001,.85,0,0],93:[.35001,.85,0,0],123:[.35001,.85,0,0],125:[.35001,.85,0,0],710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:[.25001,.75,0,0],8720:[.25001,.75,0,0],8721:[.25001,.75,0,0],8730:[.35001,.85,0,0],8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:[.25001,.75,0,0],8897:[.25001,.75,0,0],8898:[.25001,.75,0,0],8899:[.25001,.75,0,0],8968:[.35001,.85,0,0],8969:[.35001,.85,0,0],8970:[.35001,.85,0,0],8971:[.35001,.85,0,0],9168:[-99e-5,.601,0,0],10216:[.35001,.85,0,0],10217:[.35001,.85,0,0],10752:[.25001,.75,0,0],10753:[.25001,.75,0,0],10754:[.25001,.75,0,0],10756:[.25001,.75,0,0],10758:[.25001,.75,0,0]},"Size2-Regular":{40:[.65002,1.15,0,0],41:[.65002,1.15,0,0],47:[.65002,1.15,0,0],91:[.65002,1.15,0,0],92:[.65002,1.15,0,0],93:[.65002,1.15,0,0],123:[.65002,1.15,0,0],125:[.65002,1.15,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8719:[.55001,1.05,0,0],8720:[.55001,1.05,0,0],8721:[.55001,1.05,0,0],8730:[.65002,1.15,0,0],8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:[.55001,1.05,0,0],8897:[.55001,1.05,0,0],8898:[.55001,1.05,0,0],8899:[.55001,1.05,0,0],8968:[.65002,1.15,0,0],8969:[.65002,1.15,0,0],8970:[.65002,1.15,0,0],8971:[.65002,1.15,0,0],10216:[.65002,1.15,0,0],10217:[.65002,1.15,0,0],10752:[.55001,1.05,0,0],10753:[.55001,1.05,0,0],10754:[.55001,1.05,0,0],10756:[.55001,1.05,0,0],10758:[.55001,1.05,0,0]},"Size3-Regular":{40:[.95003,1.45,0,0],41:[.95003,1.45,0,0],47:[.95003,1.45,0,0],91:[.95003,1.45,0,0],92:[.95003,1.45,0,0],93:[.95003,1.45,0,0],123:[.95003,1.45,0,0],125:[.95003,1.45,0,0],710:[0,.75,0,0],732:[0,.75,0,0],770:[0,.75,0,0],771:[0,.75,0,0],8730:[.95003,1.45,0,0],8968:[.95003,1.45,0,0],8969:[.95003,1.45,0,0],8970:[.95003,1.45,0,0],8971:[.95003,1.45,0,0],10216:[.95003,1.45,0,0],10217:[.95003,1.45,0,0]},"Size4-Regular":{40:[1.25003,1.75,0,0],41:[1.25003,1.75,0,0],47:[1.25003,1.75,0,0],91:[1.25003,1.75,0,0],92:[1.25003,1.75,0,0],93:[1.25003,1.75,0,0],123:[1.25003,1.75,0,0],125:[1.25003,1.75,0,0],710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:[1.25003,1.75,0,0],8968:[1.25003,1.75,0,0],8969:[1.25003,1.75,0,0],8970:[1.25003,1.75,0,0],8971:[1.25003,1.75,0,0],9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:[.65002,1.15,0,0],9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:[.65002,1.15,0,0],9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:[1.25003,1.75,0,0],10217:[1.25003,1.75,0,0],57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:[0,0,0,0],33:[0,.61111,0,0],34:[0,.61111,0,0],35:[0,.61111,0,0],36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:[0,.61111,0,0],39:[0,.61111,0,0],40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:[0,.61111,0,0],49:[0,.61111,0,0],50:[0,.61111,0,0],51:[0,.61111,0,0],52:[0,.61111,0,0],53:[0,.61111,0,0],54:[0,.61111,0,0],55:[0,.61111,0,0],56:[0,.61111,0,0],57:[0,.61111,0,0],58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:[0,.61111,0,0],64:[0,.61111,0,0],65:[0,.61111,0,0],66:[0,.61111,0,0],67:[0,.61111,0,0],68:[0,.61111,0,0],69:[0,.61111,0,0],70:[0,.61111,0,0],71:[0,.61111,0,0],72:[0,.61111,0,0],73:[0,.61111,0,0],74:[0,.61111,0,0],75:[0,.61111,0,0],76:[0,.61111,0,0],77:[0,.61111,0,0],78:[0,.61111,0,0],79:[0,.61111,0,0],80:[0,.61111,0,0],81:[.13889,.61111,0,0],82:[0,.61111,0,0],83:[0,.61111,0,0],84:[0,.61111,0,0],85:[0,.61111,0,0],86:[0,.61111,0,0],87:[0,.61111,0,0],88:[0,.61111,0,0],89:[0,.61111,0,0],90:[0,.61111,0,0],91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:[0,.61111,0,0],95:[.09514,0,0,0],96:[0,.61111,0,0],97:[0,.43056,0,0],98:[0,.61111,0,0],99:[0,.43056,0,0],100:[0,.61111,0,0],101:[0,.43056,0,0],102:[0,.61111,0,0],103:[.22222,.43056,0,0],104:[0,.61111,0,0],105:[0,.61111,0,0],106:[.22222,.61111,0,0],107:[0,.61111,0,0],108:[0,.61111,0,0],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:[0,.61111,0,0],127:[0,.61111,0,0],160:[0,0,0,0],176:[0,.61111,0,0],184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:[0,.61111,0,0],715:[0,.61111,0,0],728:[0,.61111,0,0],730:[0,.61111,0,0],770:[0,.61111,0,0],771:[0,.61111,0,0],776:[0,.61111,0,0],915:[0,.61111,0,0],916:[0,.61111,0,0],920:[0,.61111,0,0],923:[0,.61111,0,0],926:[0,.61111,0,0],928:[0,.61111,0,0],931:[0,.61111,0,0],933:[0,.61111,0,0],934:[0,.61111,0,0],936:[0,.61111,0,0],937:[0,.61111,0,0],8216:[0,.61111,0,0],8217:[0,.61111,0,0],8242:[0,.61111,0,0],9251:[.11111,.21944,0,0]}};const Yr=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Qr={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25]},eo=.04,to=.111,io=.166,no=.2,ro=.6,oo=.1,so=10,ao=1.2,lo={"":" ","":" ","":"A","":"C","":"D","":"o","":"a","":"c","":"d","":"o","":"A","":"B","":"B","":"F","":"A","":"E","":"K","":"3","":"N","":"N","":"K","":"N","":"M","":"H","":"O","":"N","":"P","":"C","":"T","":"y","":"O","":"X","":"U","":"h","":"W","":"W","":"B","":"X","":"B","":"3","":"X","":"R","":"a","":"b","":"a","":"r","":"y","":"e","":"m","":"e","":"n","":"n","":"n","":"n","":"m","":"n","":"o","":"n","":"p","":"c","":"o","":"y","":"b","":"x","":"n","":"n","":"w","":"w","":"a","":"m","":"a","":"e","":"m","":"r"};function co(e,t){console.assert(Gr[t],'Unknown font "'+t+'"');let i=e.charCodeAt(0);if(e[0]in lo)i=lo[e[0]].charCodeAt(0);else if(Yr.test(e[0]))return i=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};const n=Gr[t][i];return n?{defaultMetrics:!1,depth:n[0],height:n[1],italic:n[2],skew:n[3]}:11034===i?{defaultMetrics:!0,depth:0,height:1,italic:0,skew:0}:{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}function po(e,t,i=NaN){if("string"==typeof e){const i=e.match(/([-+]?[0-9.]*)\s*([a-zA-Z]+)/);i?(e=parseFloat(i[1]),t=i[2].toLowerCase()):e=parseFloat(e)}const n={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:.75,em:so,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[t]||1;if(isFinite(i)){const t=Math.pow(10,i);return Math.round(e/so*n*t)/t}return e/so*n}function ho(e,t){return po(e,t)*(4/3)*so}class uo{constructor(e,t,i,n){this.id=e,this.size=t,this.cramped=n,this.sizeMultiplier=i,this.metrics=Object.keys(Qr).reduce((e,t)=>({...e,[t]:Qr[t][this.size]}),{}),this.metrics.emPerEx=Qr.xHeight[this.size]/Qr.quad[this.size]}sup(){return mo[[4,5,4,5,6,7,6,7][this.id]]}sub(){return mo[[5,5,5,5,7,7,7,7][this.id]]}fracNum(){return mo[[2,3,4,5,6,7,6,7][this.id]]}fracDen(){return mo[[3,3,5,5,7,7,7,7][this.id]]}cramp(){return mo[[1,1,3,3,5,5,7,7][this.id]]}cls(){return["displaystyle textstyle","textstyle","scriptstyle","scriptscriptstyle"][this.size]}adjustTo(e){let t=[["","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-textstyle displaystyle textstyle","","reset-textstyle scriptstyle","reset-textstyle scriptscriptstyle"],["reset-scriptstyle textstyle displaystyle","reset-scriptstyle textstyle","","reset-scriptstyle scriptscriptstyle"],["reset-scriptscriptstyle textstyle displaystyle","reset-scriptscriptstyle textstyle","reset-scriptscriptstyle scriptstyle",""]][this.size][e.size];return t.length>0&&(t=" "+t),t}isTight(){return this.size>=2}}const mo={0:new uo(0,0,1,!1),1:new uo(1,0,1,!0),2:new uo(2,1,1,!1),3:new uo(3,1,1,!0),4:new uo(4,2,.7,!1),5:new uo(5,2,.7,!0),6:new uo(6,3,.5,!1),7:new uo(7,3,.5,!0)};mo.displaystyle=mo[0],mo.textstyle=mo[2],mo.scriptstyle=mo[4],mo.scriptscriptstyle=mo[6];class fo{constructor(e){var t,i,n,r,o,s;this.macros=null!==(t=e.macros)&&void 0!==t?t:{},this.atomIdsSettings=e.atomIdsSettings,this.mathstyle=null!==(i=e.mathstyle)&&void 0!==i?i:mo.displaystyle,this.letterShapeStyle=null!==(n=e.letterShapeStyle)&&void 0!==n?n:"tex",this.size=null!==(r=e.size)&&void 0!==r?r:"size5",this.parentMathstyle=null!==(o=e.parentMathstyle)&&void 0!==o?o:this.mathstyle,this.parentSize=null!==(s=e.parentSize)&&void 0!==s?s:this.size,this.opacity=e.opacity,this.smartFence=e.smartFence}clone(e={}){const t=new fo(this);return void 0!==e&&(Object.assign(t,e),e.mathstyle?(t.parentMathstyle=this.mathstyle,t.parentSize=this.size,"string"==typeof e.mathstyle&&(t.mathstyle=mo[e.mathstyle])):t.mathstyle=this.mathstyle),t}setMathstyle(e){e&&"auto"!==e&&(this.mathstyle=mo[e])}cramp(){return this.clone({mathstyle:this.mathstyle.cramp()})}sup(){return this.clone({mathstyle:this.mathstyle.sup()})}sub(){return this.clone({mathstyle:this.mathstyle.sub()})}}const go={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},yo={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34]},vo={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"};function bo(e,t){const i=[];let n,r=[];return e.forEach(e=>{if("first"!==e.type){let o;"variant"===t?(o=e.variant,e.variantStyle&&"up"!==e.variantStyle&&(o+="-"+e.variantStyle)):o=e[t],o!==n?(r.length>0&&i.push(r),r=[e],n=o):r.push(e)}}),r.length>0&&i.push(r),i}const xo={};function ko(e,t){xo[e]={...t}}const _o=["","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","command","composition","error","placeholder","textord","none"];function wo(e){return _o.includes(e)}const Mo={"mord+mop":3,"mord+mbin":4,"mord+mrel":5,"mord+minner":3,"mop+mord":3,"mop+mop":3,"mop+mbin":5,"mop+minner":3,"mbin+mord":4,"mbin+mop":4,"mbin+mopen":4,"mbin+minner":4,"mrel+mord":5,"mrel+mop":5,"mrel+mopen":5,"mrel+minner":5,"mclose+mop":3,"mclose+mbin":4,"mclose+mrel":5,"mclose+minner":3,"mpunct+mord":3,"mpunct+mop":3,"mpunct+mbin":4,"mpunct+mrel":5,"mpunct+mopen":3,"mpunct+mpunct":3,"mpunct+minner":3},zo={"mord+mop":3,"mop+mord":3,"mop+mop":3,"mclose+mop":3,"minner+mop":3};function So(e){if("string"==typeof e)return e;if("number"==typeof e)return Number(Math.ceil(100*e)/100).toString();if(void 0===e)return"";if(Jr(e)){let t="";for(const i of e)t+=So(i);return t}return console.error("Span.toStringUnexpected argument type"),""}class Lo{constructor(e,t="",i=""){this.classes=t,Jr(e)?this.children=[].concat(...e):"string"==typeof e?this.body=e:e&&"object"==typeof e&&(this.children=[e]),this.type=i,this.style=null,this.updateDimensions()}updateDimensions(){let e=0,t=0,i=1;this.children?this.children.forEach(n=>{n.height>e&&(e=n.height),n.depth>t&&(t=n.depth),n.maxFontSize>i&&(i=n.maxFontSize)}):"string"==typeof this.body&&(e=ao,t=0),this.height=e,this.depth=t,this.maxFontSize=i}selected(e){e&&!/ML__selected/.test(this.classes)&&(this.classes.length>0&&(this.classes+=" "),this.classes+="ML__selected"),!e&&/ML__selected/.test(this.classes)&&(this.classes=this.classes.replace("ML__selected","")),this.children&&this.children.forEach(t=>t.selected(e))}applyStyle(e){if(!e)return;if(e.color&&("none"!==e.color?this.setStyle("color",e.color):this.setStyle("color","")),e.backgroundColor&&("none"!==e.backgroundColor?this.setStyle("background-color",e.backgroundColor):this.setStyle("background-color","")),e.cssClass&&(this.classes+=" "+e.cssClass),!this.body)return;console.assert("string"==typeof this.body);const t=function(e,t){var i;return(null===(i=xo[t.mode])||void 0===i?void 0:i.applyStyle)?xo[t.mode].applyStyle(e,t):""}(this,e);if(this.body&&t){this.maxFontSize={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49}[e.fontSize]||1,this.height=0,this.depth=0,this.skew=0,this.italic=0;for(let e=0;e<this.body.length;e++){const i=co(this.body.charAt(e),t);i&&(this.height=Math.max(this.height,i.height),this.depth=Math.max(this.depth,i.depth),this.skew=i.skew,this.italic=i.italic)}}}setStyle(e,...t){const i=So(t);i.length>0&&(this.style||(this.style={}),this.style[e]=i)}setTop(e){e&&0!==e&&(this.style||(this.style={}),this.style.top=So(e)+"em",this.height-=e,this.depth+=e)}setLeft(e){e&&0!==e&&(this.style||(this.style={}),this.style["margin-left"]=So(e)+"em")}setRight(e){e&&0!==e&&(this.style||(this.style={}),this.style["margin-right"]=So(e)+"em")}setWidth(e){e&&0!==e&&(this.style||(this.style={}),this.style.width=So(e)+"em")}toMarkup(e=1,t=1){var i,n,r,o,s;let a="",l=this.body||"";if(this.children){let e="none";for(let r=0;r<this.children.length;r++){const o=this.children[r];let s=0;const a=Co(this.children,r),c=e+"+"+a;s=o.isTight?null!==(i=zo[c])&&void 0!==i?i:0:null!==(n=Mo[c])&&void 0!==n?n:0,l+=o.toMarkup(s,t),e=a}}if(""!==l&&(l||this.svgBody)||this.classes&&"ML__selected"!==this.classes||this.cssId||this.style||this.svgOverlay){a="<span",this.cssId&&(a+=' id="'+this.cssId+'" '),this.attributes&&(a+=" "+Object.keys(this.attributes).map(e=>`${e}="${this.attributes[e]}"`).join(" "));const t=this.classes.split(" ");t.push(null!==(r={command:"ML__command",placeholder:"ML__placeholder",error:"ML__error"}[this.type])&&void 0!==r?r:""),this.caret&&"command"===this.type&&t.push("ML__command-caret");let i="";if((i=t.length>1?t.filter((e,t,i)=>e.length>0&&i.indexOf(e)===t).join(" "):t[0]).length>0&&(a+=` class="${i}"`),e&&((null===(o=this.style)||void 0===o?void 0:o["margin-left"])?this.style["margin-left"]=So(parseFloat(this.style["margin-left"])+e/18)+"em":(this.style||(this.style={}),this.style["margin-left"]=So(e/18)+"em")),this.style){let e="";const t=/ML__selected/.test(this.classes);for(const i in this.style)Object.prototype.hasOwnProperty.call(this.style,i)&&("background-color"===i&&t||(e+=i+":"+this.style[i]+";"));e.length>0&&(a+=' style="'+e+'"')}a+=">",this.svgBody?a+=function(e){if(yo[e]){const t=yo[e][2];return`<span style="height:${t}em;min-width:0"><span class="stretchy" style="height:${t}em"><svg width="100%" height="${t}em"viewBox="0 0 ${yo[e][0]} ${yo[e][1]}"preserveAspectRatio="none"><path d="${vo[e]}"></path></svg></span></span>`}const[t,i,n,r]=go[e];let o,s;const a=n/1e3;3===t.length?(o=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],s=["xMinYMin","xMidYMin","xMaxYMin"]):2===t.length?(o=["slice-1-of-2","slice-2-of-2"],s=["xMinYMin","xMaxYMin"]):(o=["slice-1-of-1"],s=[r]);const l=t.map((e,t)=>`<span class="${o[t]}" style="height:${a}em"><svg width="400em" height="${a}em"viewBox="0 0 400000 ${n}"preserveAspectRatio="${s[t]} slice"><path d="${vo[e]}"></path></svg></span>`).join("");return`<span style="height:${a}em;min-width:${i}em;display:inline-block;">${l}</span>`}(this.svgBody):this.svgOverlay?(a+='<span style="',a+="display: inline-block;",a+="height:"+(this.height+this.depth)+"em;",a+="vertical-align:"+this.depth+"em;",a+='">',a+=l,a+="</span>",a+="<svg ",a+='style="position:absolute;',a+="overflow:overlay;",a+="height:"+(this.height+this.depth)+"em;",(null===(s=this.style)||void 0===s?void 0:s.padding)?(a+="top:"+this.style.padding+";",a+="left:"+this.style.padding+";",a+="width:calc(100% - 2 * "+this.style.padding+" );"):(a+="top:0;",a+="left:0;",a+="width:100%;"),a+="z-index:2;",a+='"',this.svgStyle&&(a+=' style="'+this.svgStyle+'"'),a+=">",a+=this.svgOverlay,a+="</svg>"):a+=l,a+="</span>"}else a="";return this.caret&&"command"!==this.type&&("text"===this.caret?a+='<span class="ML__text-caret"></span>':a+='<span class="ML__caret"></span>'),a}tryCoalesceWith(e){if(this.type!==e.type)return!1;if("error"===this.type||"placeholder"===this.type||"command"===this.type)return!1;if(this.svgBody||!this.body)return!1;if(e.svgBody||!e.body)return!1;const t=this.children&&this.children.length>0,i=e.children&&e.children.length>0;if(t||i)return!1;if((this.style?this.style.length:0)!==(e.style?e.style.length:0))return!1;const n=this.classes.trim().replace(/\s+/g," ").split(" "),r=e.classes.trim().replace(/\s+/g," ").split(" ");if(n.length!==r.length)return!1;n.sort(),r.sort();for(let o=0;o<n.length;o++){if("vertical-separator"===n[o])return!1;if(n[o]!==r[o])return!1}if(this.style&&e.style)for(const o in this.style)if(Object.prototype.hasOwnProperty.call(this.style,o)&&Object.prototype.hasOwnProperty.call(e.style,o)&&this.style[o]!==e.style[o])return!1;return this.body+=e.body,this.height=Math.max(this.height,e.height),this.depth=Math.max(this.depth,e.depth),this.maxFontSize=Math.max(this.maxFontSize,e.maxFontSize),this.italic=e.italic,!0}}function Co(e,t){var i,n,r,o,s;if(t<0||t>=e.length)return"none";const a=null!==(n=null===(i=e[t-1])||void 0===i?void 0:i.type)&&void 0!==n?n:"none",l=null!==(o=null===(r=e[t+1])||void 0===r?void 0:r.type)&&void 0!==o?o:"none";let c=null!==(s=e[t].type)&&void 0!==s?s:"none";return"first"===c?"none":"textord"===c?"mord":("mbin"===c&&(/first|none|mrel|mpunct|mopen|mbin|mop/.test(a)||/none|mrel|mpunct|mclose/.test(l))&&(c="mord"),c)}function Ao(e){return e?Jr(e)?e.reduce((e,t)=>Math.max(e,t.height),0):e.height:0}function Do(e){return e?Jr(e)?e.reduce((e,t)=>Math.max(e,t.depth),0):e.depth:0}function To(e){return e?Jr(e)?e[e.length-1].italic:e.italic:0}function $o(e,t="",i=""){if(Jr(e)){const n=e.filter(e=>Boolean(e));return 1===n.length?new Lo(n[0],t,i):new Lo(n,t,i)}return new Lo(e,t,i)}function Oo(e,t,i="",n=""){const r=new Lo(t,i,n),o=co(t,e);return r.height=o.height,r.depth=o.depth,r.skew=o.skew,r.italic=o.italic,r.setRight(r.italic),r}function No(e,t="",i=""){const n=$o("","ML__strut");let r,o;return n.setStyle("height",Ao(e),"em"),0!==Do(e)&&((r=$o("","ML__strut--bottom")).setStyle("height",Ao(e)+Do(e),"em"),r.setStyle("vertical-align",-Do(e),"em")),$o(o=Jr(e)?[n,r,...e]:[n,r,e],t,i)}function Eo(e,t,i,n,r){r=r||"";const o=qo(t,(r+=" style-wrap ")+i.adjustTo(n));o.type=e;const s=n.sizeMultiplier/i.sizeMultiplier;return o.height*=s,o.depth*=s,o.maxFontSize=n.sizeMultiplier,o}function qo(e,t="",i=""){const n=new Lo(e,t,i);let r=1;return r=e instanceof Lo?e.maxFontSize:e.reduce((e,t)=>Math.max(e,t.maxFontSize),r),n.height*=r,n.depth*=r,n}function Ko(e,t,i="shift",n=0){let r=0,o=0;i=i||"shift";for(let d=0;d<t.length;d++)Jr(t[d])&&(1===t[d].length?t[d]=t[d][0]:t[d]=$o(t[d]));if("shift"===i)console.assert(t[0]instanceof Lo),r=-t[0].depth-n;else if("bottom"===i)r=-n;else if("top"===i){let e=n;for(const i of t)i instanceof Lo?e-=i.height+i.depth:"number"==typeof i&&(e-=i);r=e}else if("individualShift"===i){const e=t;t=[e[0]],console.assert(e[0]instanceof Lo),o=r=-e[1]-e[0].depth;for(let i=2;i<e.length;i+=2){console.assert(e[i]instanceof Lo);const n=-e[i+1]-o-e[i].depth;o+=n,console.assert(e[i-2]instanceof Lo);const r=n-(e[i-2].height+e[i-2].depth);t.push(r),t.push(e[i])}}else console.assert(!1,'makeVList with unknown method: "'+i+'"');let s=1;for(const d of t)d instanceof Lo&&(s=Math.max(s,d.maxFontSize));const a=function(e,t){const i=s?s/e.mathstyle.sizeMultiplier:0,n=new Lo("");return n.depth=0,n.height=0,1!==i&&(n.setStyle("font-size",i,i>0?"em":""),n.attributes={"aria-hidden":"true"}),"size5"!==e.size?new Lo(n,"fontsize-ensurer reset-"+e.size+" size5"):0!==i?n:null}(e),l=[];o=r;for(const d of t)if("number"==typeof d)o+=d;else if(d instanceof Lo){const e=$o([a,d]);e.setTop(-d.depth-o),l.push(e),o+=d.height+d.depth}const c=$o(l,"vlist");return c.depth=Math.max(r,Do(c)||0),c.height=Math.max(-o,Ao(c)||0),c}function Bo(e){const t=new Lo(null);return t.svgBody=e,t.height=function(e){return go[e]?go[e][2]/1e3:yo[e][2]}(e)/2,t.depth=t.height,t}const Po={},Ro={"<":"<",">":">",o:"o","&":"\\&","{":"\\{","}":"\\}","[":"\\lbrack","]":"\\rbrack",":":"\\colon","":"~","":"\\neg","":"\\cdot","":"\\frac{1}{4}","":"\\frac{1}{2}","":"\\frac{3}{4}","":"^{0}","":"^{i}","":"^{1}","":"^{2}","":"^{3}","":"\\dagger","":"\\ddagger","":"\\ldots","":"^{4}","":"^{5}","":"^{6}","":"^{7}","":"^{8}","":"^{9}","":"^{+}","":"^{-}","":"^{=}","":"^{n}","":"_{0}","":"_{1}","":"_{2}","":"_{3}","":"_{4}","":"_{5}","":"_{6}","":"_{7}","":"_{8}","":"_{9}","":"_{+}","":"_{-}","":"_{=}","":"_{a}","":"_{e}","":"_{o}","":"_{x}","":"\\prime","'":"\\prime","":"\\gets","":"\\to","":"\\triangle","":"\\triangledown","":"\\owns","":"\\ast","":"\\vert","":"\\Vert","":"\\land","":"\\lor","":"\\cdot","":"\\bowtie","":"\\ne","":"\\le","":"\\ge","":"\\bot","":"\\biconditional","":"\\impliedby","":"\\implies","":"\\C","":"\\N","":"\\P","":"\\Q","":"\\R","":"\\Z"},Io={},Fo={},Vo={iff:"\\;\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}"},Wo={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},jo={"\\#":"#","\\&":"&","\\$":"$","\\%":"%","\\_":"_","\\euro":"","\\maltese":"","\\{":"{","\\}":"}","\\nobreakspace":"","\\ldots":"","\\textellipsis":"","\\backslash":"\\","`":"","'":"","``":"","''":"","\\degree":"","\\textasciicircum":"^","\\textasciitilde":"~","\\textasteriskcentered":"*","\\textbackslash":"\\","\\textbraceleft":"{","\\textbraceright":"}","\\textbullet":"","\\textdollar":"$","\\textsterling":"","\\textdagger":"","\\textdaggerdbl":"","":"","":"","":"","":"","":"","":"",'"':"","\\ss":"","\\ae":"","\\oe":"","\\AE":"","\\OE":"","\\O":"","\\i":"","\\j":"","\\aa":"","\\AA":""},Ho=/[a-zA-Z0-9!@*()-=+{}[\]\\';:?/.,~<>`|'$%#&^_" ]/,Uo="undefined"!=typeof navigator&&/firefox|edge|Trident/i.test(navigator.userAgent)?/[a-zA-Z]/:new RegExp("\\p{Letter}","u"),Xo="undefined"!=typeof navigator&&/firefox|edge|Trident/i.test(navigator.userAgent)?/[0-9a-zA-Z]/:new RegExp("[0-9\\p{Letter}]","u");function Zo(e,t,i="mord",n=""){Po[e]={type:i,variant:n,value:t},Ro[t]||n||(Ro[t]=e),jo[e]=t}function Jo(e,t){for(let i=e;i<=t;i++){const e=String.fromCodePoint(i);Zo(e,e)}}function Go(e,t){if("math"===e)return Ro[t]||t;if("text"===e){let e=Object.keys(jo).find(e=>jo[e]===t);if(!e){const i=t.codePointAt(0).toString(16);e="^".repeat(i.length)+i}return e}return t}const Yo={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},Qo=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function es(e,t,i){if(!/[A-Za-z0-9]/.test(e))return e;if(!t&&!i)return e;const n=e.codePointAt(0);for(let r=0;r<Qo.length;r++)if((!t||Qo[r].variant===t)&&(!i||Qo[r].style===i)&&n>=Qo[r].offset&&n<Qo[r].offset+Qo[r].len){const e=Qo[r].start+n-Qo[r].offset;return String.fromCodePoint(Yo[e]||e)}return e}function ts(e,t){if("text"===e)return Go(e,t)||t;let i;if(i=Go(e,t))return i;const n=function(e){var t;if((e<119808||e>120831)&&(e<8448||e>8527))return{char:String.fromCodePoint(e)};for(const i in Yo)if(Object.prototype.hasOwnProperty.call(Yo,i)&&Yo[i]===e){e=null!==(t=i.codePointAt(0))&&void 0!==t?t:0;break}for(let i=0;i<Qo.length;i++)if(e>=Qo[i].start&&e<Qo[i].start+Qo[i].len)return{char:String.fromCodePoint(e-Qo[i].start+Qo[i].offset),variant:Qo[i].variant,style:Qo[i].style};return{char:String.fromCodePoint(e)}}(t.codePointAt(0));return n.style||n.variant?(i=n.char,n.variant&&(i="\\"+n.variant+"{"+i+"}"),"bold"===n.style?i="\\mathbf{"+i+"}":"italic"===n.style?i="\\mathit{"+i+"}":"bolditalic"===n.style&&(i="\\mathbfit{"+i+"}"),"\\mathord{"+i+"}"):""}function is(e,t){let i="",n=!1;for(const r of t){n&&(i+="text"===e?"{}":" "),n=!1;const t=ts(e,r);t?(i+=t,n=/\\[a-zA-Z0-9]+\*?$/.test(t)):i+=r}return i}function ns(e){var t,i;return null!==(i=null===(t=Po[e])||void 0===t?void 0:t.value)&&void 0!==i?i:e}function rs(e,t,i,n){var r,o,s;if(console.assert(Boolean(i)),console.assert(Boolean(e),"Missing command for ",i.body),null===(r=Io[e])||void 0===r?void 0:r.emit)return Io[e].emit(e,t,i,n);if(Po[e]||jo[e])return e;if(i.body&&1===(null===(s=null===(o=Io[e])||void 0===o?void 0:o.params)||void 0===s?void 0:s.length))return e+"{"+n(i,i.body)+"}";const a=e.codePointAt(0).toString(16);return"^".repeat(a.length)+a}function ss(e){var t;return null!==(t=Fo[e])&&void 0!==t?t:null}function as(e,t,i){if(!e||0===e.length)return null;let n=null;if("\\"===e.charAt(0)){if(n=Io[e])return n;if("math"===t?n=Po[e]:jo[e]&&(n={value:jo[e]}),!n){const t=e.slice(1);if(null==i?void 0:i[t]){let e=i[t];"object"==typeof e&&(e=e.def);let r=0;for(/(^|[^\\])#1/.test(e)&&(r=1),/(^|[^\\])#2/.test(e)&&(r=2),/(^|[^\\])#3/.test(e)&&(r=3),/(^|[^\\])#4/.test(e)&&(r=4),/(^|[^\\])#5/.test(e)&&(r=5),/(^|[^\\])#6/.test(e)&&(r=6),/(^|[^\\])#7/.test(e)&&(r=7),/(^|[^\\])#8/.test(e)&&(r=8),/(^|[^\\])#9/.test(e)&&(r=9),n={type:"group",mode:"math",params:[],infix:!1};r>=1;)n.params.push({isOptional:!1,type:"math"}),r-=1}}}else"math"===t?n=Po[e]:jo[e]?n={value:jo[e]}:"text"===t&&(n={value:e});return!n||"mord"!==n.type||"f"!==n.value&&"g"!==n.value&&"h"!==n.value||(n.isFunction=!0),n}function ls(e){if(e.length<=1)return[];const t=[];for(const i in Io)Object.prototype.hasOwnProperty.call(Io,i)&&i.startsWith(e)&&!Io[i].infix&&t.push({match:i,frequency:Io[i].frequency});for(const i in Po)Object.prototype.hasOwnProperty.call(Po,i)&&i.startsWith(e)&&t.push({match:i,frequency:Po[i].frequency});return t.sort((e,t)=>e.frequency===t.frequency?e.match.length-t.match.length:(t.frequency||0)-(e.frequency||0)),t}function cs(e){let t="auto";const i=e.match(/:([^=]+)/);return i&&(t=i[1].trim()),t}function ds(e){if(!e)return[];let t=[],i=e.split("]");if("["===i[0].charAt(0)){t.push({isOptional:!0,type:cs(i[0].slice(1))});for(let e=1;e<=i.length;e++)t=t.concat(ds(i[e]))}else if("{"===(i=e.split("}"))[0].charAt(0)){t.push({isOptional:!1,type:cs(i[0].slice(1))});for(let e=1;e<=i.length;e++)t=t.concat(ds(i[e]))}return t}function ps(e){let t="",i=!0;return e.forEach(e=>{"string"==typeof e.body?t+=e.body:i=!1}),i?t:""}function hs(e,t,i,n=!1){"string"==typeof e&&(e=[e]);const r={tabular:n,params:ds(t),parser:i};for(const o of e)Fo[o]=r}function us(e,t,i){hs(e,t,i,!0)}function ms(e,t,i,n,r){"string"==typeof e&&(e=[e]),i||(i={});const o={params:ds(t),mode:i.mode,infix:Boolean(i.infix),parse:n,emit:r};e.forEach(e=>{Io["\\"+e]=o})}const fs={acute:"",grave:"",dot:"",ddot:"",mathring:"",tilde:"~",bar:"",breve:"",check:"",hat:"^",vec:""};ms(Object.keys(fs),"{body:auto}",null,function(e,t){return{type:"accent",accent:fs[e.slice(1)],limits:"accent",skipBoundary:!0,body:t[0]}}),ms(["widehat","widecheck","widetilde"],"{body:auto}",null,(e,t)=>{const i=ps(t[0]);return{type:"accent",svgAccent:e.slice(1)+(i.length>5?"4":["1","1","2","2","3","3"][i.length]),limits:"accent",skipBoundary:!0,body:t[0]}}),ms("utilde","{body:auto}",null,(e,t)=>{const i=ps(t[0]),n="widetilde"+(i.length>5?"4":["1","1","2","2","3","3"][i.length]);return{type:"overunder",body:t[0],svgBelow:n,skipBoundary:!0}},(e,t,i,n)=>`\\utilde{${n(i,i.body)}}`),ms("^","{:string}",{},(e,t)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:t[0]&&{a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t[0]]||"^"})),ms("`","{:string}",{},(e,t)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:t[0]&&{a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t[0]]||"`"})),ms("'","{:string}",{},function(e,t){return{type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:t[0]&&{a:"",e:"",i:"",o:"",u:"",A:"",E:"",I:"",O:"",U:""}[t[0]]||"^"}}),ms("~","{:string}",{},(e,t)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:t[0]&&{n:"",N:"",a:"",o:"",A:"",O:""}[t[0]]||""})),ms("c","{:string}",{},(e,t)=>({type:"mord",limits:"nolimits",isSymbol:!0,isFunction:!1,body:t[0]&&{c:"",C:""}[t[0]]||""})),ms("enclose","{notation:string}[style:string]{body:auto}",null,(e,t)=>{var i;const n={type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",captureSelection:!0,body:t[2]};if(t[1]){const e=t[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(const t of e){const e=t.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(e)n.strokeWidth=ho(e[1],"px"),isFinite(n.strokeWidth)||(n.strokeWidth=1),n.strokeStyle=e[2],n.strokeColor=e[3];else{const e=t.match(/\s*([a-z]*)\s*=\s*"(.*)"/);e&&("mathbackground"===e[1]?n.backgroundcolor=e[2]:"mathcolor"===e[1]?n.strokeColor=e[2]:"padding"===e[1]?n.padding=ho(e[2],"px"):"shadow"===e[1]&&(n.shadow=e[2]))}}"dashed"===n.strokeStyle?n.svgStrokeStyle="5,5":"dotted"===n.strokeStyle&&(n.svgStrokeStyle="1,5")}return n.borderStyle=n.strokeWidth+"px "+n.strokeStyle+" "+n.strokeColor,n.notation={},(null!==(i=t[0])&&void 0!==i?i:"").split(/[, ]/).filter(e=>e.length>0).forEach(e=>{n.notation[e.toLowerCase()]=!0}),n.notation.updiagonalarrow&&(n.notation.updiagonalstrike=!1),n.notation.box&&(n.notation.left=!1,n.notation.right=!1,n.notation.bottom=!1,n.notation.top=!1),n}),ms("cancel","{body:auto}",null,function(e,t){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0},body:t[0]}}),ms("bcancel","{body:auto}",null,function(e,t){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{downdiagonalstrike:!0},body:t[0]}}),ms("xcancel","{body:auto}",null,function(e,t){return{type:"enclose",strokeColor:"currentColor",strokeWidth:1,strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",notation:{updiagonalstrike:!0,downdiagonalstrike:!0},body:t[0]}}),hs("math","",()=>({mathstyle:"textstyle"})),hs("displaymath","",function(){return{mathstyle:"displaystyle"}}),us("array","{columns:colspec}",(e,t)=>({colFormat:t[0],mathstyle:"textstyle"})),us(["equation","equation","subequations"],"",()=>({colFormat:[{align:"c"}]})),us("multline","",function(){return{colFormat:[{align:"m"}]}}),us(["align","align*","aligned","eqnarray"],"",(e,t,i)=>{let n=0;for(const s of i)n=Math.max(n,s.length);const r=[{gap:0},{align:"r"},{gap:0},{align:"l"}];let o=2;for(;o<n;)r.push({gap:1}),r.push({align:"r"}),r.push({gap:0}),r.push({align:"l"}),o+=2;return r.push({gap:0}),{arraycolsep:0,colFormat:r,jot:.3}}),us("split","",()=>({colFormat:[{align:"r"},{align:"l"}]})),us(["gather","gathered"],"",()=>({colFormat:[{gap:.25},{align:"c"},{gap:0}],jot:.3})),us(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","smallmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*","smallmatrix*"],"[columns:colspec]",(e,t)=>{var i;const n={mathstyle:"textstyle"};switch(e){case"pmatrix":case"pmatrix*":n.leftDelim="(",n.rightDelim=")";break;case"bmatrix":case"bmatrix*":n.leftDelim="[",n.rightDelim="]";break;case"Bmatrix":case"Bmatrix*":n.leftDelim="\\lbrace",n.rightDelim="\\rbrace";break;case"vmatrix":case"vmatrix*":n.leftDelim="\\vert",n.rightDelim="\\vert";break;case"Vmatrix":case"Vmatrix*":n.leftDelim="\\Vert",n.rightDelim="\\Vert";break;case"smallmatrix":case"smallmatrix*":n.mathstyle="scriptstyle";break;case"matrix":case"matrix*":n.leftDelim=".",n.rightDelim="."}return n.colFormat=null!==(i=t[0])&&void 0!==i?i:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],n}),us("cases","",()=>({arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",colFormat:[{align:"l"},{gap:1},{align:"l"}]})),hs("center","",function(){return{colFormat:[{align:"c"}]}}),ms(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overbrace","overlinesegment","overgroup"],"{:auto}",null,(e,t)=>({type:"overunder",body:t[0],svgAbove:e.slice(1),skipBoundary:!0,limits:"overunder"}),(e,t,i,n)=>`${e}{${n(i,i.body)}}`),ms(["underrightarrow","underleftarrow","underleftrightarrow","underbrace","underlinesegment","undergroup"],"{:auto}",null,(e,t)=>({type:"overunder",body:t[0],svgBelow:e.slice(1),skipBoundary:!0,limits:"overunder"}),(e,t,i,n)=>`${e}{${n(i,i.body)}}`),ms(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",null,(e,t)=>{let i=t[1];return 0===(null==i?void 0:i.length)&&(i=null),{type:"overunder",mathtype:"mrel",svgBody:e.slice(1),overscript:i,underscript:t[0]}},(e,t,i,n)=>e+(void 0!==i.underscript?`[${n(i,i.underscript)}]`:"")+`{${n(i,i.overscript)}}`),ms(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","coth","ctg","cth","cotg","csc","cosec","deg","dim","exp","hom","inf","ker","lg","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th"],"",null,function(e){return{type:"mop",limits:"nolimits",isSymbol:!1,isFunction:!0,body:e.slice(1),variant:"main",variantStyle:"up"}}),ms(["liminf","limsup"],"",null,e=>({type:"mop",limits:"limits",isSymbol:!1,body:{"\\liminf":"lim inf","\\limsup":"lim sup"}[e],variant:"main"})),ms(["lim","mod"],"",null,function(e){return{type:"mop",limits:"limits",isSymbol:!1,body:e.slice(1),variant:"main"}}),ms(["det","max","min"],"",null,function(e){return{type:"mop",limits:"limits",isSymbol:!1,isFunction:!0,body:e.slice(1),variant:"main"}}),ms("sqrt","[index:auto]{radicand:auto}",null,(e,t)=>({type:"surd",body:t[1],index:t[0]}),(e,t,i,n)=>{let r="";return void 0!==i.index&&(r+=`[${n(i,i.index)}]`),e+(r+=`{${n(i,i.body)}}`)}),ms(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",null,(e,t)=>{const i={type:"genfrac",numer:t[0],denom:t[1],mathstyle:"auto"};switch(e){case"\\dfrac":case"\\frac":case"\\tfrac":case"\\cfrac":i.hasBarLine=!0;break;case"\\\\atopfrac":i.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":i.hasBarLine=!1,i.leftDelim="(",i.rightDelim=")"}switch(e){case"\\dfrac":case"\\dbinom":i.mathstyle="displaystyle";break;case"\\tfrac":case"\\tbinom":i.mathstyle="textstyle"}return"\\cfrac"===e&&(i.continuousFraction=!0),i},(e,t,i,n)=>`${e}{${n(i,i.numer)}}{${n(i,i.denom)}}`),ms(["over","atop","choose"],"",{infix:!0},(e,t)=>{const i=t[0],n=t[1];let r=!1,o=null,s=null;switch(e){case"\\atop":break;case"\\over":r=!0;break;case"\\choose":r=!1,o="(",s=")";break;default:throw new Error("Unrecognized genfrac command")}return{type:"genfrac",numer:i,denom:n,hasBarLine:r,leftDelim:o,rightDelim:s,mathstyle:"auto"}},(e,t,i,n)=>`{${n(i,i.numer)}${e} ${n(i,i.denom)}}`),ms("pdiff","{numerator}{denominator}",null,(e,t)=>({type:"genfrac",numer:t[0],denom:t[1],numerPrefix:"",denomPrefix:"",hasBarLine:!0,leftDelim:null,rightDelim:null,mathstyle:"auto"}),(e,t,i,n)=>`${e}{${n(i,i.numer)}}{${n(i,i.denom)}}`),ms(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","smallint","intop"],"",null,e=>({type:"mop",limits:"auto",isSymbol:!0,variant:"main",body:{coprod:"",bigvee:"",bigwedge:"",biguplus:"",bigcap:"",bigcup:"",intop:"",prod:"",sum:"",bigotimes:"",bigoplus:"",bigodot:"",bigsqcup:"",smallint:""}[e.slice(1)]}));const gs={int:"",iint:"",iiint:"",oint:"",oiint:"",oiiint:"",intclockwise:"",varointclockwise:"",ointctrclockwise:"",intctrclockwise:"",sqcup:"",sqcap:"",uplus:"",wr:"",amalg:"",Cap:"",Cup:"",doublecap:"",doublecup:""};ms(Object.keys(gs),"",null,function(e){return{type:"mop",limits:"nolimits",isSymbol:!0,body:gs[e.slice(1)],variant:{"":"ams","":"ams"}[gs[e.slice(1)]]}}),ms(["Re","Im"],"",null,function(e){return{type:"mop",limits:"nolimits",isSymbol:!1,isFunction:!0,body:{"\\Re":"","\\Im":""}[e],variant:"fraktur"}}),ms("middle","{:delim}",null,function(e,t){return{type:"delim",delim:t[0]}});const ys={m0:"#3f3d99",m1:"#993d71",m2:"#998b3d",m3:"#3d9956",m4:"#3d5a99",m5:"#993d90",m6:"#996d3d",m7:"#43993d",m8:"#3d7999",m9:"#843d99"},vs=["#d35d60","#7293cb","#e1974d","#84bb5d","#9066a7","#aD6a58","#f5a4ce","#fff590","#212121","#818787","#d4d5d2","#ffffff"],bs=["#cc2428","#3769b1","#da7e30","#409852","#6b4c9a","#922426","#e7298a","#ffe907","#000000","#525055","#adafaa","#ffffff"],xs={apricot:"#FBB982",aquamarine:"#00B5BE",bittersweet:"#C04F17",black:"#221E1F",blue:"#2D2F92",bluegreen:"#00B3B8",blueviolet:"#473992",brickred:"#B6321C",brown:"#792500",burntorange:"#F7921D",cadetblue:"#74729A",carnationpink:"#F282B4",cerulean:"#00A2E3",cornflowerblue:"#41B0E4",cyan:"#00AEEF",dandelion:"#FDBC42",darkorchid:"#A4538A",emerald:"#00A99D",forestgreen:"#009B55",fuchsia:"#8C368C",goldenrod:"#FFDF42",gray:"#949698",green:"#00A64F",greenyellow:"#DFE674",junglegreen:"#00A99A",lavender:"#F49EC4",limegreen:"#8DC73E",magenta:"#EC008C",mahogany:"#A9341F",maroon:"#AF3235",melon:"#F89E7B",midnightblue:"#006795",mulberry:"#A93C93",navyblue:"#006EB8",olivegreen:"#3C8031",orange:"#F58137",orangered:"#ED135A",orchid:"#AF72B0",peach:"#F7965A",periwinkle:"#7977B8",pinegreen:"#008B72",plum:"#92268F",processblue:"#00B0F0",purple:"#99479B",rawsienna:"#974006",red:"#ED1B23",redorange:"#F26035",redviolet:"#A1246B",rhodamine:"#EF559F",royalblue:"#0071BC",royalpurple:"#613F99",rubinered:"#ED017D",salmon:"#F69289",seagreen:"#3FBC9D",sepia:"#671800",skyblue:"#46C5DD",springgreen:"#C6DC67",tan:"#DA9D76",tealblue:"#00AEB3",thistle:"#D883B7",turquoise:"#00B4CE",violet:"#58429B",violetred:"#EF58A0",white:"#FFFFFF",wildstrawberry:"#EE2967",yellow:"#FFF200",yellowgreen:"#98CC70",yelloworange:"#FAA21A"};function ks(e){var t;const i=e.toLowerCase().split("!");let n,r,o,s=255,a=255,l=255,c=-1;const d=i.length>0&&"-"===i[0].charAt(0);d&&(i[0]=i[0].slice(1));for(let p=0;p<i.length;p++){n=s,r=a,o=l;const e=null===(t=i[p].match(/([a-z0-9]*)/))||void 0===t?void 0:t[1];let d=xs[e]||ys[e];d||(d=i[p]);let h=d.match(/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i);if((null==h?void 0:h[1])&&h[2]&&h[3])s=Math.max(0,Math.min(255,parseInt(h[1],16))),a=Math.max(0,Math.min(255,parseInt(h[2],16))),l=Math.max(0,Math.min(255,parseInt(h[3],16)));else if(null==(h=d.match(/^#([0-9a-f]{3})$/i))?void 0:h[1]){const e=parseInt(h[1][0],16),t=parseInt(h[1][1],16),i=parseInt(h[1][2],16);s=Math.max(0,Math.min(255,16*e+e)),a=Math.max(0,Math.min(255,16*t+t)),l=Math.max(0,Math.min(255,16*i+i))}else{if(!((null==(h=d.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i))?void 0:h[1])&&h[2]&&h[3]))return null;s=Math.max(0,Math.min(255,parseInt(h[1]))),a=Math.max(0,Math.min(255,parseInt(h[2]))),l=Math.max(0,Math.min(255,parseInt(h[3])))}c>=0&&(s=(1-c)*s+c*n,a=(1-c)*a+c*r,l=(1-c)*l+c*o,c=-1),p+1<i.length&&(c=Math.max(0,Math.min(100,parseInt(i[++p])))/100)}return c>=0&&(s=c*s+(1-c)*n,a=c*a+(1-c)*r,l=c*l+(1-c)*o),d&&(s=255-s,a=255-a,l=255-l),"#"+("00"+Math.round(s).toString(16)).slice(-2)+("00"+Math.round(a).toString(16)).slice(-2)+("00"+Math.round(l).toString(16)).slice(-2)}function _s(e){let t=e.toUpperCase();for(const i in xs)if(xs[i]===t){t=i;break}for(const i in ys)if(ys[i]===t){t=i;break}return t}ms("ensuremath","{:math}",{},(e,t)=>({type:"group",mode:"math",body:t[0],skipBoundary:!0,latexOpen:"\\ensuremath{",latexClose:"}"}),(e,t,i,n)=>n(i,i.body)),ms("color","{:color}",{},(e,t)=>({color:t[0]})),ms("textcolor","{:color}{content:auto*}",{},(e,t)=>({color:t[0]})),ms("boxed","{content:math}",null,(e,t)=>({type:"box",framecolor:"black",skipBoundary:!0,body:t[0]})),ms("colorbox","{background-color:string}{content:auto}",{},(e,t)=>({type:"box",backgroundcolor:ks(t[0]),skipBoundary:!0,body:t[1],verbatimBackgroundcolor:t[0]}),(e,t,i,n)=>`${e}{${i.verbatimBackgroundcolor||_s(i.backgroundcolor)}}{${n(i,i.body)}}`),ms("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{},(e,t)=>({type:"box",framecolor:ks(t[0]),backgroundcolor:ks(t[1]),skipBoundary:!0,body:t[2],verbatimBackgroundcolor:t[1],verbatimFramecolor:t[0]}),(e,t,i,n)=>`${e}{${i.verbatimFramecolor||_s(i.framecolor)}{${i.verbatimBackgroundcolor||_s(i.backgroundcolor)}}{${n(i,i.body)}}`),ms("bbox","[:bbox]{body:auto}",{},(e,t)=>{if(t[0]){const e=t[0];return{type:"box",padding:e.padding,border:e.border,backgroundcolor:e.backgroundcolor,skipBoundary:!0,body:t[1]}}return{type:"box",skipBoundary:!0,body:t[1]}},(e,t,i,n)=>{let r=e;if(isFinite(i.padding)||void 0!==i.border||void 0!==i.backgroundcolor){const e=[];isFinite(i.padding)&&e.push(Math.floor(100*i.padding)/100+"em"),i.border&&e.push("border:"+i.border),i.backgroundcolor&&e.push(_s(i.backgroundcolor)),r+=`[${e.join(",")}]`}return r+`{${n(i,i.body)}}`}),ms(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"",{},(e,t)=>({mathstyle:e.slice(1)})),ms(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{mode:"text"},(e,t)=>({fontSize:{tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[e.slice(1)]})),ms("fontseries","{:string}",{mode:"text"},(e,t)=>({fontSeries:t[0]})),ms("fontshape","{:string}",{mode:"text"},(e,t)=>({fontShape:t[0]})),ms("fontfamily","{:string}",{mode:"text"},(e,t)=>({fontFamily:t[0]})),ms("selectfont","",{mode:"text"},(e,t)=>({})),ms("bf","",{},(e,t)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})),ms(["boldsymbol","bm"],"{:math*}",{},(e,t)=>({mode:"math",cssClass:"ML__boldsymbol"})),ms("bold","{:math*}",{},(e,t)=>({mode:"math",variantStyle:"bold"})),ms("bfseries","",{mode:"text"},(e,t)=>({fontSeries:"b"})),ms("mdseries","",{mode:"text"},(e,t)=>({fontSeries:"m"})),ms("upshape","",{mode:"text"},(e,t)=>({fontShape:"n"})),ms("slshape","",{mode:"text"},(e,t)=>({fontShape:"sl"})),ms("scshape","",{mode:"text"},(e,t)=>({fontShape:"sc"})),ms("textbf","{:text*}",{},(e,t)=>({mode:"text",fontSeries:"b"})),ms("textmd","{:text*}",{},(e,t)=>({mode:"text",fontSeries:"m"})),ms("textup","{:text*}",{},(e,t)=>({mode:"text",fontShape:"n"})),ms("textnormal","{:text*}",{},(e,t)=>({mode:"text",fontShape:"n",fontSeries:"m"})),ms("textsl","{:text*}",{},(e,t)=>({mode:"text",fontShape:"sl"})),ms("textit","{:text*}",{},(e,t)=>({mode:"text",fontShape:"it"})),ms("textsc","{:text*}",{},(e,t)=>({mode:"text",fontShape:"sc"})),ms("textrm","{:text*}",{},(e,t)=>({mode:"text",fontFamily:"roman"})),ms("textsf","{:text*}",{},(e,t)=>({mode:"text",fontFamily:"sans-serif"})),ms("texttt","{:text*}",{},(e,t)=>({mode:"text",fontFamily:"monospace"})),ms("mathbf","{:math*}",{},(e,t)=>({mode:"math",variant:"normal",variantStyle:"bold"})),ms("mathit","{:math*}",{},(e,t)=>({mode:"math",variant:"normal",variantStyle:"italic"})),ms("mathbfit","{:math*}",{},(e,t)=>({mode:"math",variant:"normal",variantStyle:"bolditalic"})),ms("mathrm","{:math*}",{},(e,t)=>({mode:"math",variant:"normal",variantStyle:"up"})),ms("mathsf","{:math*}",{},(e,t)=>({mode:"math",variant:"sans-serif",variantStyle:"up"})),ms("mathtt","{:math*}",{},(e,t)=>({mode:"math",variant:"monospace",variantStyle:"up"})),ms("it","",{},(e,t)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})),ms("rmfamily","",{},(e,t)=>({fontFamily:"roman"})),ms("sffamily","",{},(e,t)=>({fontFamily:"sans-serif"})),ms("ttfamily","",{},(e,t)=>({fontFamily:"monospace"})),ms(["Bbb","mathbb"],"{:math*}",{},(e,t)=>({variant:"double-struck",variantStyle:"up"})),ms(["frak","mathfrak"],"{:math*}",{},(e,t)=>({variant:"fraktur",variantStyle:"up"})),ms("mathcal","{:math*}",{},(e,t)=>({variant:"calligraphic",variantStyle:"up"})),ms("mathscr","{:math*}",{},(e,t)=>({variant:"script",variantStyle:"up"})),ms("mbox","{:text}",null,(e,t)=>({type:"group",mode:"math",body:t[0]})),ms("text","{:text*}",null,(e,t)=>({mode:"text"})),ms("class","{name:string}{content:auto*}",null,(e,t)=>({cssClass:t[0]})),ms("cssId","{id:string}{content:auto}",null,(e,t)=>({type:"group",body:t[1],cssId:t[0]})),ms("em","",null,(e,t)=>({cssClass:"ML__emph"})),ms("emph","{:auto}",null,(e,t)=>({cssClass:"ML__emph",body:t[0],type:"group",skipBoundary:!0}));const ws={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};function Ms(e,t,i,n,r,o=""){const s=Eo(e,Oo("Size"+i+"-Regular",ns(t),"delimsizing size"+i),r.mathstyle,mo.textstyle,o);return n&&s.setTop((1-r.mathstyle.sizeMultiplier)*r.mathstyle.metrics.axisHeight),s.setStyle("color",r.color),"number"==typeof r.opacity&&s.setStyle("opacity",r.opacity),s}function zs(e,t){let i="";return"Size1-Regular"===t?i=" delim-size1":"Size4-Regular"===t&&(i=" delim-size4"),Oo(t,ns(e),"delimsizinginner"+i)}function Ss(e,t,i,n,r,o=""){let s,a,l,c;s=l=c=ns(t),a=null;let d="Size1-Regular";"\\vert"===t||"\\lvert"===t||"\\rvert"===t||"\\mvert"===t||"\\mid"===t?l=s=c="":"\\Vert"===t||"\\lVert"===t||"\\rVert"===t||"\\mVert"===t||"\\|"===t?l=s=c="":"\\uparrow"===t?l=c="":"\\Uparrow"===t?l=c="":"\\downarrow"===t?s=l="":"\\Downarrow"===t?s=l="":"\\updownarrow"===t?(s="",l="",c=""):"\\Updownarrow"===t?(s="",l="",c=""):"["===t||"\\lbrack"===t?(s="",l="",c="",d="Size4-Regular"):"]"===t||"\\rbrack"===t?(s="",l="",c="",d="Size4-Regular"):"\\lfloor"===t?(l=s="",c="",d="Size4-Regular"):"\\lceil"===t?(s="",l=c="",d="Size4-Regular"):"\\rfloor"===t?(l=s="",c="",d="Size4-Regular"):"\\rceil"===t?(s="",l=c="",d="Size4-Regular"):"("===t?(s="",l="",c="",d="Size4-Regular"):")"===t?(s="",l="",c="",d="Size4-Regular"):"\\{"===t||"\\lbrace"===t?(s="",a="",c="",l="",d="Size4-Regular"):"\\}"===t||"\\rbrace"===t?(s="",a="",c="",l="",d="Size4-Regular"):"\\lgroup"===t?(s="",c="",l="",d="Size4-Regular"):"\\rgroup"===t?(s="",c="",l="",d="Size4-Regular"):"\\lmoustache"===t?(s="",c="",l="",d="Size4-Regular"):"\\rmoustache"===t?(s="",c="",l="",d="Size4-Regular"):"\\surd"===t?(s="",c="",l="",d="Size4-Regular"):"\\ulcorner"===t?(s="",l=c=" "):"\\urcorner"===t?(s="",l=c=" "):"\\llcorner"===t?(c="",l=s=" "):"\\lrcorner"===t&&(s="",l=s=" ");const p=co(ns(s),d),h=p.height+p.depth,u=co(ns(l),d),m=u.height+u.depth,f=co(ns(c),d),g=f.height+f.depth;let y=0,v=1;if(null!==a){const e=co(ns(a),d);y=e.height+e.depth,v=2}const b=h+g+y,x=Math.ceil((i-b)/(v*m)),k=b+x*v*m;let _=r.mathstyle.metrics.axisHeight;n&&(_*=r.mathstyle.sizeMultiplier);const w=k/2-_,M=[];if(M.push(zs(c,d)),null===a)for(let S=0;S<x;S++)M.push(zs(l,d));else{for(let e=0;e<x;e++)M.push(zs(l,d));M.push(zs(a,d));for(let e=0;e<x;e++)M.push(zs(l,d))}M.push(zs(s,d));const z=Ko(r,M,"bottom",w);return z.setStyle("color",r.color),"number"==typeof r.opacity&&z.setStyle("opacity",r.opacity),Eo(e,$o(z,"delimsizing mult"),r.mathstyle,mo.textstyle,o)}ms(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",null,function(e,t){return{type:"sizeddelim",size:ws[e].size,cls:ws[e].mclass,delim:t[0]}}),ms(["hspace","hspace*"],"{width:skip}",{},function(e,t){return{type:"spacing",width:t[0]||0}}),ms(["mathop","mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",null,(e,t)=>{const i={type:{"\\mathop":"mop","\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[e],body:t[0],captureSelection:!0};return"\\mathop"===e&&(i.limits="limits",i.isFunction=!0),i},(e,t,i,n)=>`${e}{${n(i,i.body)}}`),ms(["operatorname","operatorname*"],"{operator:math}",null,function(e,t){const i={type:"mop",captureSelection:!0,body:t[0],isFunction:!0};return i.body.forEach(e=>{e.isFunction=!1,e.variant||e.variantStyle||(e.variant="main",e.variantStyle="up"),e.type="mord",e.body={"":"*","":"-"}[e.body]||e.body}),"\\operatorname"===e?i.limits="nolimits":"\\operatorname*"===e&&(i.limits="limits"),i}),ms("unicode","{charcode:number}",null,(e,t)=>{let i=parseInt(t[0]);return isFinite(i)||(i=10067),{type:"mord",body:String.fromCodePoint(i),codepoint:i}},(e,t,i,n)=>`${e}{"${("000000"+i.codepoint.toString(16)).toUpperCase().substr(-6)}}`),ms("rule","[raise:dimen]{width:dimen}{thickness:dimen}",null,function(e,t){return{type:"rule",shift:t[0],width:t[1],height:t[2]}}),ms("overline","{:auto}",null,(e,t)=>({type:"line",position:"overline",skipBoundary:!0,body:t[0]})),ms("underline","{:auto}",null,(e,t)=>({type:"line",position:"underline",skipBoundary:!0,body:t[0]})),ms("overset","{annotation:auto}{symbol:auto}",null,function(e,t){return{type:"overunder",overscript:t[0],skipBoundary:!0,body:t[1]}},(e,t,i,n)=>`${e}{${n(i,i.overscript)}}{${n(i,i.body)}}`),ms("underset","{annotation:auto}{symbol:auto}",null,function(e,t){return{type:"overunder",underscript:t[0],skipBoundary:!0,body:t[1]}},(e,t,i,n)=>`${e}{${n(i,i.overscript)}}{${n(i,i.body)}}`),ms(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0},function(e,t){return{type:"genfrac",numer:t[0],denom:t[1],hasBarLine:!1,leftDelim:t[2],rightDelim:t[3],mathstyle:"auto"}},(e,t,i,n)=>`${n(i,i.numer)} ${e}${i.leftDelim}${i.rightDelim}${n(i,i.denom)}`),ms(["stackrel","stackbin"],"{annotation:auto}{symbol:auto}",null,function(e,t){return{type:"overunder",overscript:t[0],skipBoundary:!0,body:t[1],mathtype:"\\stackrel"===e?"mrel":"mbin"}},(e,t,i,n)=>`${e}{${n(i,i.overscript)}}{${n(i,i.body)}}`),ms(["phantom","vphantom","hphantom"],"{:auto*}",{},(e,t)=>({type:"phantom",captureSelection:!0,phantomType:e.slice(1),isPhantom:!0}),(e,t,i,n)=>e+"{"+n(i,i.body)+"}"),ms("smash","[:string]{:auto}",null,function(e,t){let i="smash";return"b"===t[0]?i="bsmash":"t"===t[0]&&(i="tsmash"),{type:"phantom",phantomType:i,skipBoundary:!0,body:t[1]}}),ms("rlap","{:auto}",null,function(e,t){return{type:"overlap",align:"right",skipBoundary:!0,body:t[0]}}),ms("llap","{:auto}",null,function(e,t){return{type:"overlap",align:"left",skipBoundary:!0,body:t[0]}}),ms("mathrlap","{:auto}",null,function(e,t){return{type:"overlap",mode:"math",align:"right",skipBoundary:!0,body:t[0]}}),ms("mathllap","{:auto}",null,function(e,t){return{type:"overlap",mode:"math",align:"left",skipBoundary:!0,body:t[0]}}),function(e){for(let t=0;t<e.length;t++){const i=e.charAt(t);Zo(i,i)}}("0123456789/@.?!"),Jo(65,90),Jo(97,122),Zo("\\forall",""),Zo("\\exists",""),Zo("\\nexists","","mord","ams"),Zo("\\mid","","mrel"),Zo("\\top",""),Zo("\\bot",""),Zo("\\sharp",""),Zo("\\flat",""),Zo("\\natural",""),Zo("\\#","#"),Zo("\\&","&"),Zo("\\clubsuit",""),Zo("\\heartsuit",""),Zo("\\spadesuit",""),Zo("\\diamondsuit",""),Zo("\\differencedelta","","mrel"),Zo("\\backslash","\\"),Zo("\\nabla",""),Zo("\\partial",""),Zo("\\ell",""),Zo("\\hbar",""),Zo("\\hslash","","mord","ams"),Zo("\\Finv","","mord","ams"),Zo("\\Game","","mord","ams"),Zo("\\wp",""),Zo("\\eth","","mord","ams"),Zo("\\mho","","mord","ams"),Zo("\\Bbbk","k","mord","ams"),Zo("\\N","N","mord","double-struck"),Zo("\\R","R","mord","double-struck"),Zo("\\Q","Q","mord","double-struck"),Zo("\\C","C","mord","double-struck"),Zo("\\Z","Z","mord","double-struck"),Zo("\\P","P","mord","double-struck"),Zo("\\pounds",""),Zo("\\yen","","mord","ams"),Zo("\\euro",""),Zo("\\dagger","","mbin"),Zo("\\dag","","mbin"),Zo("\\ddag","","mbin"),Zo("\\ddagger","","mbin"),Zo("\\maltese","","mord","ams"),Zo("\\rightarrow","","mrel"),Zo("\\to","","mrel"),Zo("\\leftarrow","","mrel"),Zo("\\gets","","mrel"),Zo("\\Rightarrow","","mrel"),Zo("\\Leftarrow","","mrel"),Zo("\\longrightarrow","","mrel"),Zo("\\longleftarrow","","mrel"),Zo("\\Longrightarrow","","mrel"),Zo("\\implies","","mrel"),Zo("\\Longleftarrow","","mrel"),Zo("\\impliedby","","mrel"),Zo("\\dashrightarrow","","mrel","ams"),Zo("\\dashleftarrow","","mrel","ams"),Zo("\\Rrightarrow","","mrel","ams"),Zo("\\Lleftarrow","","mrel","ams"),Zo("\\longleftrightarrow","","mrel"),Zo("\\biconditional","","mrel"),Zo("\\Longleftrightarrow","","mrel"),Zo("\\leftrightarrows","","mrel","ams"),Zo("\\rightleftarrows","","mrel","ams"),Zo("\\mapsto","","mrel"),Zo("\\longmapsto","","mrel"),Zo("\\uparrow","","mrel"),Zo("\\downarrow","","mrel"),Zo("\\Uparrow","","mrel"),Zo("\\Downarrow","","mrel"),Zo("\\updownarrow","","mrel"),Zo("\\Updownarrow","","mrel"),Zo("\\curvearrowright","","mrel","ams"),Zo("\\curvearrowleft","","mrel","ams"),Zo("\\hookrightarrow","","mrel"),Zo("\\hookleftarrow","","mrel"),Zo("\\rightharpoonup","","mrel"),Zo("\\leftharpoonup","","mrel"),Zo("\\rightharpoondown","","mrel"),Zo("\\leftharpoondown","","mrel"),Zo("\\rightrightarrows","","mrel","ams"),Zo("\\leftleftarrows","","mrel","ams"),Zo("\\upuparrows","","mrel","ams"),Zo("\\downdownarrows","","mrel","ams"),Zo("\\leftarrowtail","","mrel","ams"),Zo("\\rightarrowtail","","mrel","ams"),Zo("\\looparrowright","","mrel","ams"),Zo("\\looparrowleft","","mrel","ams"),Zo("\\twoheadleftarrow","","mrel","ams"),Zo("\\twoheadrightarrow","","mrel","ams"),Zo("\\rightleftharpoons","","mrel"),Zo("\\leftrightharpoons","","mrel","ams"),Zo("\\Rsh","","mrel","ams"),Zo("\\Lsh","","mrel","ams"),Zo("\\searrow","","mrel"),Zo("\\nearrow","","mrel"),Zo("\\swarrow","","mrel"),Zo("\\nwarrow","","mrel"),Zo("\\circlearrowright","","mrel","ams"),Zo("\\circlearrowleft","","mrel","ams"),Zo("\\restriction","","mrel","ams"),Zo("\\upharpoonright","","mrel","ams"),Zo("\\upharpoonleft","","mrel","ams"),Zo("\\downharpoonright","","mrel","ams"),Zo("\\downharpoonleft","","mrel","ams"),Zo("\\rightsquigarrow","","mrel","ams"),Zo("\\leadsto","","mrel","ams"),Zo("\\leftrightsquigarrow","","mrel","ams"),Zo("\\originalof","","mrel"),Zo("\\laplace","","mrel"),Zo("\\imageof","","mrel"),Zo("\\Laplace","","mrel"),Zo("\\multimap","","mrel","ams"),Zo("\\nrightarrow","","mrel","ams"),Zo("\\nleftarrow","","mrel","ams"),Zo("\\nRightarrow","","mrel","ams"),Zo("\\nLeftarrow","","mrel","ams"),Zo("\\nleftrightarrow","","mrel","ams"),Zo("\\nLeftrightarrow","","mrel","ams"),Zo("\\nless","","mrel","ams"),Zo("\\nleqslant","","mrel","ams"),Zo("\\lneq","","mrel","ams"),Zo("\\lneqq","","mrel","ams"),Zo("\\nleqq","","mrel","ams"),Zo("\\unlhd","","mbin","ams"),Zo("\\unrhd","","mbin","ams"),Zo("\\lvertneqq","","mrel","ams"),Zo("\\lnsim","","mrel","ams"),Zo("\\lnapprox","","mrel","ams"),Zo("\\nprec","","mrel","ams"),Zo("\\npreceq","","mrel","ams"),Zo("\\precnsim","","mrel","ams"),Zo("\\precnapprox","","mrel","ams"),Zo("\\nsim","","mrel","ams"),Zo("\\nshortmid","","mrel","ams"),Zo("\\nmid","","mrel","ams"),Zo("\\nvdash","","mrel","ams"),Zo("\\nvDash","","mrel","ams"),Zo("\\ngtr","","mrel","ams"),Zo("\\ngeqslant","","mrel","ams"),Zo("\\ngeqq","","mrel","ams"),Zo("\\gneq","","mrel","ams"),Zo("\\gneqq","","mrel","ams"),Zo("\\gvertneqq","","mrel","ams"),Zo("\\gnsim","","mrel","ams"),Zo("\\gnapprox","","mrel","ams"),Zo("\\nsucc","","mrel","ams"),Zo("\\nsucceq","","mrel","ams"),Zo("\\succnsim","","mrel","ams"),Zo("\\succnapprox","","mrel","ams"),Zo("\\ncong","","mrel","ams"),Zo("\\nshortparallel","","mrel","ams"),Zo("\\nparallel","","mrel","ams"),Zo("\\nVDash","","mrel","ams"),Zo("\\nsupseteqq","","mrel","ams"),Zo("\\supsetneq","","mrel","ams"),Zo("\\varsupsetneq","","mrel","ams"),Zo("\\supsetneqq","","mrel","ams"),Zo("\\varsupsetneqq","","mrel","ams"),Zo("\\nVdash","","mrel","ams"),Zo("\\precneqq","","mrel","ams"),Zo("\\succneqq","","mrel","ams"),Zo("\\nsubseteqq","","mrel","ams"),Zo("\\checkmark","","mord","ams"),Zo("\\diagup","","mord","ams"),Zo("\\diagdown","","mord","ams"),Zo("\\measuredangle","","mord","ams"),Zo("\\sphericalangle","","mord","ams"),Zo("\\backprime","","mord","ams"),Zo("\\backdoubleprime","","mord","ams"),Zo("\\ast","","mbin"),Zo("\\star","","mbin"),Zo("\\diamond","","mbin"),Zo("\\Diamond","","mord","ams"),Zo("\\lozenge","","mord","ams"),Zo("\\blacklozenge","","mord","ams"),Zo("\\bigstar","","mord","ams"),Zo("\\aleph",""),Zo("\\beth","","mord","ams"),Zo("\\daleth","","mord","ams"),Zo("\\gimel","","mord","ams"),Zo("\\lbrace","{","mopen"),Zo("\\rbrace","}","mclose"),Zo("\\langle","","mopen"),Zo("\\rangle","","mclose"),Zo("\\lfloor","","mopen"),Zo("\\rfloor","","mclose"),Zo("\\lceil","","mopen"),Zo("\\rceil","","mclose"),Zo("\\vert",""),Zo("\\mvert","","mrel"),Zo("\\lvert","","mopen"),Zo("\\rvert","","mclose"),Zo("\\|",""),Zo("\\Vert",""),Zo("\\mVert",""),Zo("\\lVert","","mopen"),Zo("\\rVert","","mclose"),Zo("\\parallel","","mrel"),Zo("\\shortparallel","","mrel","ams"),Zo("\\lbrack","[","mopen"),Zo("\\rbrack","]","mclose"),Zo("\\{","{","mopen"),Zo("\\}","}","mclose"),Zo("(","(","mopen"),Zo(")",")","mclose"),Zo("[","[","mopen"),Zo("]","]","mclose"),Zo("\\ulcorner","","mopen","ams"),Zo("\\urcorner","","mclose","ams"),Zo("\\llcorner","","mopen","ams"),Zo("\\lrcorner","","mclose","ams"),Zo("\\lgroup","","mopen"),Zo("\\rgroup","","mclose"),Zo("\\lmoustache","","mopen"),Zo("\\rmoustache","","mclose"),Zo("=","=","mrel"),Zo("\\ne","","mrel"),Zo("\\neq","","mrel"),Zo("<","<","mrel"),Zo("\\lt","<","mrel"),Zo(">",">","mrel"),Zo("\\gt",">","mrel"),Zo("\\le","","mrel"),Zo("\\leq","","mrel"),Zo("\\ge","","mrel"),Zo("\\geq","","mrel"),Zo("\\leqslant","","mrel","ams"),Zo("\\geqslant","","mrel","ams"),Zo("\\ll","","mrel"),Zo("\\gg","","mrel"),Zo("\\coloneq","","mrel"),Zo("\\measeq","","mrel"),Zo("\\eqdef","","mrel"),Zo("\\questeq","","mrel"),Zo(":",":","mrel"),Zo("\\cong","","mrel"),Zo("\\equiv","","mrel"),Zo("\\prec","","mrel"),Zo("\\preceq","","mrel"),Zo("\\succ","","mrel"),Zo("\\succeq","","mrel"),Zo("\\perp","","mrel"),Zo("\\propto","","mrel"),Zo("\\Colon","","mrel"),Zo("\\smile","","mrel"),Zo("\\frown","","mrel"),Zo("\\sim","","mrel"),Zo("\\gtrsim","","mrel","ams"),Zo("\\approx","","mrel"),Zo("\\approxeq","","mrel","ams"),Zo("\\thickapprox","","mrel","ams"),Zo("\\lessapprox","","mrel","ams"),Zo("\\gtrapprox","","mrel","ams"),Zo("\\precapprox","","mrel","ams"),Zo("\\succapprox","","mrel","ams"),Zo("\\thicksim","","mrel","ams"),Zo("\\succsim","","mrel","ams"),Zo("\\precsim","","mrel","ams"),Zo("\\backsim","","mrel","ams"),Zo("\\eqsim","","mrel","ams"),Zo("\\backsimeq","","mrel","ams"),Zo("\\simeq","","mrel"),Zo("\\lesssim","","mrel","ams"),Zo("\\nleq","","mrel","ams"),Zo("\\ngeq","","mrel","ams"),Zo("\\smallsmile","","mrel","ams"),Zo("\\smallfrown","","mrel","ams"),Zo("\\bowtie","","mrel"),Zo("\\Join","","mrel"),Zo("\\asymp","","mrel"),Zo("\\sqsubseteq","","mrel"),Zo("\\sqsupseteq","","mrel"),Zo("\\leqq","","mrel","ams"),Zo("\\eqslantless","","mrel","ams"),Zo("\\lll","","mrel","ams"),Zo("\\lessgtr","","mrel","ams"),Zo("\\lesseqgtr","","mrel","ams"),Zo("\\lesseqqgtr","","mrel","ams"),Zo("\\risingdotseq","","mrel","ams"),Zo("\\fallingdotseq","","mrel","ams"),Zo("\\subseteqq","","mrel","ams"),Zo("\\Subset","","mrel","ams"),Zo("\\sqsubset","","mrel","ams"),Zo("\\preccurlyeq","","mrel","ams"),Zo("\\curlyeqprec","","mrel","ams"),Zo("\\vDash","","mrel","ams"),Zo("\\Vvdash","","mrel","ams"),Zo("\\bumpeq","","mrel","ams"),Zo("\\Bumpeq","","mrel","ams"),Zo("\\geqq","","mrel","ams"),Zo("\\eqslantgtr","","mrel","ams"),Zo("\\ggg","","mrel","ams"),Zo("\\gtrless","","mrel","ams"),Zo("\\gtreqless","","mrel","ams"),Zo("\\gtreqqless","","mrel","ams"),Zo("\\supseteqq","","mrel","ams"),Zo("\\Supset","","mrel","ams"),Zo("\\sqsupset","","mrel","ams"),Zo("\\succcurlyeq","","mrel","ams"),Zo("\\curlyeqsucc","","mrel","ams"),Zo("\\Vdash","","mrel","ams"),Zo("\\shortmid","","mrel","ams"),Zo("\\between","","mrel","ams"),Zo("\\pitchfork","","mrel","ams"),Zo("\\varpropto","","mrel","ams"),Zo("\\backepsilon","","mrel","ams"),Zo("\\llless","","mrel","ams"),Zo("\\gggtr","","mrel","ams"),Zo("\\lhd","","mbin","ams"),Zo("\\rhd","","mbin","ams"),Zo("\\doteq","","mrel"),Zo("\\doteqdot","","mrel","ams"),Zo("\\Doteq","","mrel","ams"),Zo("\\eqcirc","","mrel","ams"),Zo("\\circeq","","mrel","ams"),Zo("\\lessdot","","mbin","ams"),Zo("\\gtrdot","","mbin","ams"),Zo("\\~","~","mrel"),Zo("\\leftrightarrow","","mrel"),Zo("\\Leftrightarrow","","mrel"),Zo("\\models","","mrel"),Zo("\\vdash","","mrel"),Zo("\\therefore","","mrel","ams"),Zo("\\because","","mrel","ams"),Zo("\\dashv","","mrel"),Zo("\\roundimplies","","mrel"),Zo("+","+","mbin"),Zo("-","","mbin"),Zo("","","mbin"),Zo("\\pm","","mbin"),Zo("\\mp","","mbin"),Zo("*","","mbin"),Zo("\\times","","mbin"),Zo("\\div","","mbin"),Zo("\\surd",""),Zo("\\divides","","mbin"),Zo("\\ltimes","","mbin","ams"),Zo("\\rtimes","","mbin","ams"),Zo("\\leftthreetimes","","mbin","ams"),Zo("\\rightthreetimes","","mbin","ams"),Zo("\\intercal","","mbin","ams"),Zo("\\dotplus","","mbin","ams"),Zo("\\doublebarwedge","","mbin","ams"),Zo("\\divideontimes","","mbin","ams"),Zo("\\centerdot","","mbin","ams"),Zo("\\cdot","","mbin"),Zo("\\infty",""),Zo("\\prime",""),Zo("\\doubleprime",""),Zo("\\angle",""),Zo("`",""),Zo("\\$","$"),Zo("\\%","%"),Zo("\\_","_"),Zo("\\alpha",""),Zo("\\beta",""),Zo("\\gamma",""),Zo("\\delta",""),Zo("\\epsilon",""),Zo("\\varepsilon",""),Zo("\\zeta",""),Zo("\\eta",""),Zo("\\theta",""),Zo("\\vartheta",""),Zo("\\iota",""),Zo("\\kappa",""),Zo("\\varkappa","","mord","ams"),Zo("\\lambda",""),Zo("\\mu",""),Zo("\\nu",""),Zo("\\xi",""),Zo("\\omicron","o"),Zo("\\pi",""),Zo("\\varpi",""),Zo("\\rho",""),Zo("\\varrho",""),Zo("\\sigma",""),Zo("\\varsigma",""),Zo("\\tau",""),Zo("\\phi",""),Zo("\\varphi",""),Zo("\\upsilon",""),Zo("\\chi",""),Zo("\\psi",""),Zo("\\omega",""),Zo("\\Gamma",""),Zo("\\Delta",""),Zo("\\Theta",""),Zo("\\Lambda",""),Zo("\\Xi",""),Zo("\\Pi",""),Zo("\\Sigma",""),Zo("\\Upsilon",""),Zo("\\Phi",""),Zo("\\Psi",""),Zo("\\Omega",""),Zo("\\digamma","","mord","ams"),Zo("\\emptyset",""),Zo("\\varnothing","","mord","ams"),Zo("\\cap","","mbin"),Zo("\\cup","","mbin"),Zo("\\setminus","","mbin"),Zo("\\smallsetminus","","mbin","ams"),Zo("\\complement","","mord","ams"),Zo("\\in","","mrel"),Zo("\\notin","","mrel"),Zo("\\not","","mrel"),Zo("\\ni","","mrel"),Zo("\\owns","","mrel"),Zo("\\subset","","mrel"),Zo("\\supset","","mrel"),Zo("\\subseteq","","mrel"),Zo("\\supseteq","","mrel"),Zo("\\subsetneq","","mrel","ams"),Zo("\\varsubsetneq","","mrel","ams"),Zo("\\subsetneqq","","mrel","ams"),Zo("\\varsubsetneqq","","mrel","ams"),Zo("\\nsubset","","mrel","ams"),Zo("\\nsupset","","mrel","ams"),Zo("\\nsubseteq","","mrel","ams"),Zo("\\nsupseteq","","mrel","ams"),Zo("\\ ","","spacing"),Zo("~","","spacing"),Zo("\\space","","spacing"),Zo("\\!",null,"spacing"),Zo("\\,",null,"spacing"),Zo("\\:",null,"spacing"),Zo("\\;",null,"spacing"),Zo("\\enskip",null,"spacing"),Zo("\\enspace",null,"spacing"),Zo("\\quad",null,"spacing"),Zo("\\qquad",null,"spacing"),Zo("\\colon",":","mpunct"),Zo("\\cdotp","","mpunct"),Zo("\\cdots","","minner"),Zo("\\ddots","","minner"),Zo("\\ldots","","minner"),Zo("\\mathellipsis","","minner"),Zo("\\vdots",""),Zo("\\ldotp",".","mpunct"),Zo(",",",","mpunct"),Zo(";",";","mpunct"),Zo("\\land","","mbin"),Zo("\\wedge","","mbin"),Zo("\\lor","","mbin"),Zo("\\vee","","mbin"),Zo("\\lnot",""),Zo("\\neg",""),Zo("\\barwedge","","mbin","ams"),Zo("\\veebar","","mbin","ams"),Zo("\\nor","","mbin","ams"),Zo("\\curlywedge","","mbin","ams"),Zo("\\curlyvee","","mbin","ams"),Zo("\\square","","mord","ams"),Zo("\\Box","","mord","ams"),Zo("\\blacksquare","","mord","ams"),Zo("\\boxminus","","mbin","ams"),Zo("\\boxplus","","mbin","ams"),Zo("\\boxtimes","","mbin","ams"),Zo("\\boxdot","","mbin","ams"),Zo("\\circ","","mbin"),Zo("\\bigcirc","","mbin"),Zo("\\bullet","","mbin"),Zo("\\circleddash","","mbin","ams"),Zo("\\circledast","","mbin","ams"),Zo("\\oplus","","mbin"),Zo("\\ominus","","mbin"),Zo("\\otimes","","mbin"),Zo("\\odot","","mbin"),Zo("\\circledcirc","","mbin","ams"),Zo("\\oslash","","mbin"),Zo("\\circledS","","mord","ams"),Zo("\\circledR","","mord","ams"),Zo("\\triangle",""),Zo("\\bigtriangleup","","mbin"),Zo("\\vartriangle","","mrel","ams"),Zo("\\triangleq","","mrel","ams"),Zo("\\triangledown","","mord","ams"),Zo("\\bigtriangledown","","mbin"),Zo("\\triangleleft","","mbin"),Zo("\\vartriangleleft","","mrel","ams"),Zo("\\trianglelefteq","","mrel","ams"),Zo("\\ntriangleleft","","mrel","ams"),Zo("\\ntrianglelefteq","","mrel","ams"),Zo("\\triangleright","","mbin"),Zo("\\vartriangleright","","mrel","ams"),Zo("\\trianglerighteq","","mrel","ams"),Zo("\\ntriangleright","","mrel","ams"),Zo("\\ntrianglerighteq","","mrel","ams"),Zo("\\blacktriangle","","mord","ams"),Zo("\\blacktriangledown","","mord","ams"),Zo("\\blacktriangleleft","","mrel","ams"),Zo("\\blacktriangleright","","mrel","ams"),Zo("\\/","/"),Zo("|","","textord"),Zo("\\And","&","mbin"),Zo("\\imath",""),Zo("\\jmath",""),Zo("\\degree",""),Zo("'",""),Zo('"',"");const Ls=["(",")","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd"],Cs=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],As=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],Ds=[0,1.2,1.8,2.4,3],Ts=[{type:"small",mathstyle:mo.scriptscriptstyle},{type:"small",mathstyle:mo.scriptstyle},{type:"small",mathstyle:mo.textstyle},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],$s=[{type:"small",mathstyle:mo.scriptscriptstyle},{type:"small",mathstyle:mo.scriptstyle},{type:"small",mathstyle:mo.textstyle},{type:"stack"}],Os=[{type:"small",mathstyle:mo.scriptscriptstyle},{type:"small",mathstyle:mo.scriptstyle},{type:"small",mathstyle:mo.textstyle},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function Ns(e,t,i,n,r,o=""){if(!t||0===t.length||"."===t)return qs(e,r,e);let s;"<"===t||"\\lt"===t?t="\\langle":">"!==t&&"\\gt"!==t||(t="\\rangle"),s=As.includes(t)?Ts:Ls.includes(t)?Os:$s;const a=function(e,t,i,n){for(let o=Math.min(2,3-n.mathstyle.size);o<i.length&&"stack"!==i[o].type;o++){const n=co(e,"small"===(r=i[o]).type?"Main-Regular":"large"===r.type?"Size"+r.size+"-Regular":(console.assert("stack"===r.type),"Size4-Regular"));if(n.defaultMetrics)return{type:"small",mathstyle:mo.scriptstyle};let s=n.height+n.depth;if("small"===i[o].type&&(s*=i[o].mathstyle.sizeMultiplier),s>t)return i[o]}var r;return i[i.length-1]}(ns(t),i,s,r);return"small"===a.type?function(e,t,i,n,r,o=""){const s=Eo(e,Oo("Main-Regular",ns(t)),r.mathstyle,i,o);return n&&s.setTop((1-r.mathstyle.sizeMultiplier/i.sizeMultiplier)*r.mathstyle.metrics.axisHeight),s.setStyle("color",r.color),"number"==typeof r.opacity&&s.setStyle("opacity",r.opacity),s}(e,t,a.mathstyle,n,r,"ML__small-delim "+o):"large"===a.type?Ms(e,t,a.size,n,r,o):(console.assert("stack"===a.type),Ss(e,t,i,n,r,o))}function Es(e,t,i,n,r,o=""){if("."===t)return qs(e,r,o);const s=r.mathstyle.metrics.axisHeight*r.mathstyle.sizeMultiplier,a=5/so,l=Math.max(i-s,n+s);return Ns(e,t,Math.max(l/500*901,2*l-a),!0,r,o)}function qs(e,t,i){return $o("","sizing"+t.mathstyle.adjustTo(mo.textstyle)+" nulldelimiter "+(i||""),e)}const Ks=8205,Bs=[[Ks,1],[65038,2],[127995,5],[129456,4],[917536,96]];let Ps;const Rs=[127462,127487];function Is(e){var t;return void 0===Ps&&(Ps={},Bs.forEach(e=>{for(let t=e[0];t<=e[0]+e[1]-1;t++)Ps[t]=!0})),null!==(t=Ps[e])&&void 0!==t&&t}function Fs(e){return e>=Rs[0]&&e<=Rs[1]}function Vs(e){if(/^[\x20-\xFF]*$/.test(e))return e;const t=[],i=function(e){const t=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(13===n&&10===e.charCodeAt(i+1)&&(n=10,i++),13!==n&&12!==n||(n=10),0===n&&(n=65533),n>=55296&&n<=56319){const t=e.charCodeAt(i+1);if(t>=56320&&t<=57343){const e=n-55296,r=t-56320;n=Math.pow(2,16)+e*Math.pow(2,10)+r,i++}}t.push(n)}return t}(e);let n=0;for(;n<i.length;){const e=i[n++],r=i[n];if(r===Ks){const e=n-1;for(n+=2;i[n]===Ks;)n+=2;t.push(String.fromCodePoint(...i.slice(e,n-e+1)))}else if(Is(r)){const e=n-1;for(;Is(i[n]);)n+=i[n]===Ks?2:1;t.push(String.fromCodePoint(...i.slice(e,n-e)))}else Fs(e)?(n+=1,t.push(String.fromCodePoint(...i.slice(n-2,2)))):t.push(String.fromCodePoint(e))}return t}class Ws{constructor(e){this.obeyspaces=!1,this.s=Vs(e),this.pos=0}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(e){let t;return(null==(t="string"==typeof this.s?e.exec(this.s.slice(this.pos)):e.exec(this.s.slice(this.pos).join("")))?void 0:t[0])?(this.pos+=t[0].length,t[0]):null}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]+/))return"<space>";if(this.obeyspaces&&this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]/))return"<space>";const e=this.get();if("\\"===e){if(!this.end()){let e=this.match(/^[a-zA-Z*]+/);if(e)this.match(/^[ \f\n\r\t\v\xA0\u2028\u2029]*/);else if(" "===(e=this.get()))return"<space>";return"\\"+e}}else{if("{"===e)return"<{>";if("}"===e)return"<}>";if("^"===e){if("^"===this.peek()){this.get();const e=this.match(/^(\^(\^(\^(\^[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f])?[0-9a-f][0-9a-f]/);if(e)return String.fromCodePoint(parseInt(e.slice(e.lastIndexOf("^")+1),16))}return e}if("#"===e){if(!this.end()){let e=!1;if(/[0-9?]/.test(this.peek())&&(e=!0,this.pos+1<this.s.length)){const t=this.s[this.pos+1];e=/[^0-9A-Za-z]/.test(t)}return e?"#"+this.get():"#"}}else if("$"===e)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return e}}function js(e,t){var i,n,r,o;let s=[],a=e.next();if(a)if("\\relax"===a);else if("\\noexpand"===a)(a=e.next())&&s.push(a);else if("\\obeyspaces"===a)e.obeyspaces=!0;else if("\\space"===a||"~"===a)s.push("<space>");else if("\\bgroup"===a)s.push("<{>");else if("\\egroup"===a)s.push("<}>");else if("\\string"===a)(a=e.next())&&("\\"===a[0]?Array.from(a).forEach(e=>s.push("\\"===e?"\\backslash":e)):"<{>"===a?s.push("\\{"):"<space>"===a?s.push("~"):"<}>"===a&&s.push("\\}"));else if("\\csname"===a){for(;"<space>"===e.peek();)e.next();let r="",o=!1,l=[];do{if(0===l.length)if(/^#[0-9?]$/.test(e.peek())){const r=e.get().slice(1);a=(l=Hs(null!==(n=null!==(i=null==t?void 0:t[r])&&void 0!==i?i:null==t?void 0:t["?"])&&void 0!==n?n:"\\placeholder{}",t))[0]}else l=(a=e.next())?[a]:[];(o=0===l.length)||"\\endcsname"!==a||(o=!0,l.shift()),o||(o="<$>"===a||"<$$>"===a||"<{>"===a||"<}>"===a||a.length>1&&"\\"===a[0]),o||(r+=l.shift())}while(!o);r&&s.push("\\"+r),s=s.concat(l)}else if("\\endcsname"===a);else if(a.length>1&&"#"===a[0]){const e=a.slice(1);s=s.concat(Hs(null!==(o=null!==(r=null==t?void 0:t[e])&&void 0!==r?r:null==t?void 0:t["?"])&&void 0!==o?o:"\\placeholder{}",t))}else s.push(a);return s}function Hs(e,t){const i=e.toString().split(/\r?\n/);let n="",r="";for(const a of i){n+=r,r=" ";const e=a.match(/((?:\\%)|[^%])*/);null!==e&&(n+=e[0])}const o=new Ws(n);let s=[];do{s=s.concat(js(o,t))}while(!o.end());return s}function Us(e){let t="",i="";for(const n of e)n&&(/[a-zA-Z*]/.test(n[0])&&(i+=t),t=/\\[a-zA-Z]+\*?$/.test(n)?" ":"",i+=n);return i}function Xs(e){return Us(e.map(e=>{var t;return null!==(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[e])&&void 0!==t?t:e}))}const Zs={},Js={size1:.5,size2:.7,size3:.8,size4:.9,size5:1,size6:1.2,size7:1.44,size8:1.73,size9:2.07,size10:2.49};function Gs(e,t){Zs[e]={decompose:t}}function Ys(e,t){var i,n;function r(e){return"mord"===e.type&&Boolean(e.symbol)&&/^[0-9,.]$/.test(e.symbol)}function o(e){return"text"===e.mode}const s=e instanceof fo?e:new fo(e),a=!s.atomIdsSettings||!s.atomIdsSettings.groupNumbers;let l=[];if(Jr(t)){if(0===t.length)return[];if(1===t.length)(l=t[0].decompose(s))&&a&&t[0].isSelected&&l.forEach(e=>e.selected(!0)),console.assert(!l||Jr(l));else{let e=[],c="",d=!0,p=null;for(let h=0;h<t.length;h++){""===t[h].body&&(t[h].superscript||t[h].subscript)||(p=null),(null===(i=s.atomIdsSettings)||void 0===i?void 0:i.groupNumbers)&&c&&(d&&r(t[h])||!d&&o(t[h]))&&(s.atomIdsSettings.overrideID=c);const u=t[h].decompose(s,p);if(s.atomIdsSettings&&(s.atomIdsSettings.overrideID=null),u){const i=[].concat(...u);p=i,(null===(n=s.atomIdsSettings)||void 0===n?void 0:n.groupNumbers)&&((r(t[h])||o(t[h]))&&(c&&d===r(t[h])||(d=r(t[h]),c=t[h].id)),(!r(t[h])&&!o(t[h])||t[h].superscript||t[h].subscript)&&c&&(c="")),a&&t[h].isSelected?(e=e.concat(i)).forEach(e=>e.selected(!0)):(e.length>0&&(l=[...l,...e],e=[]),l=l.concat(i))}}e.length>0&&(l=[...l,...e],e=[])}}else t instanceof Qs&&((l=t.decompose(s))&&a&&t.isSelected&&l.forEach(e=>e.selected(!0)));if(!l||0===l.length)return null;if(console.assert(Jr(l)&&l.length>0),s.mathstyle!==s.parentMathstyle){const e=s.mathstyle.sizeMultiplier/s.parentMathstyle.sizeMultiplier;for(const t of l)console.assert(!Jr(t)),console.assert("number"==typeof t.height&&isFinite(t.height)),t.height*=e,t.depth*=e}if(s.size!==s.parentSize){const e=Js[s.size]/Js[s.parentSize];for(const t of l)console.assert(!Jr(t)),console.assert("number"==typeof t.height&&isFinite(t.height)),t.height*=e,t.depth*=e}return l}class Qs{constructor(e,t,i="",n={}){console.assert("first"===t||Boolean(e)),this.mode=e,this.type=t,this.body=i,n.isPhantom&&this.setPhantom(!0),this.applyStyle(n)}toLatex(e=!1){return function(e,t){if(!(t=void 0!==t&&t)&&e.latex)return e.latex;let i="",n=0,r=0,o=0;const s=e.symbol;let a=[];const l=(e,i)=>(function(e,t,i){let n="";return Jr(t)?n=function(e,t,i){if(0===t.length)return"";if("first"===t[0].type){if(1===t.length)return"";t=t.slice(1)}return 0===t.length?"":Us(bo(t,"cssClass").map(t=>{const n=Us(bo(t,"color").map(t=>Us(function(e){const t=[];let i=[],n="NONE";return e.forEach(e=>{"first"!==e.type&&(e.mode!==n?(i.length>0&&t.push(i),i=[e],n=e.mode):i.push(e))}),i.length>0&&t.push(i),t}(t).map(t=>(function(e,t,i){var n;return(null===(n=xo[t[0].mode])||void 0===n?void 0:n.emitLatexRun)?xo[t[0].mode].emitLatexRun(e,t,i):""})(e,t,i)))));return!t[0].cssClass||void 0!==e&&e.cssClass===t[0].cssClass?n:"ML__boldsymbol"===t[0].cssClass?"\\boldsymbol{"+n+"}":"ML__emph"===t[0].cssClass?"\\emph{"+n+"}":"\\class{"+t[0].cssClass+"}{"+n+"}"}))}(e,t,i):"number"==typeof t||"boolean"==typeof t?n=t.toString():"string"==typeof t?n=t.replace(/\s/g,"~"):null!=t&&"function"==typeof t.toLatex&&(n=t.toLatex(i)),n})(e,i,t);switch(e.type){case"group":s?i=t?l(e,e.body):e.latex:(i=e.latexOpen||(e.cssId||e.cssClass?"":"{"),e.cssId&&(i+="\\cssId{"+e.cssId+"}{"),"ML__emph"===e.cssClass?i+=`\\emph{${l(e,e.body)}`:(e.cssClass&&(i+="\\class{"+e.cssClass+"}{"),i+=l(e,e.body),e.cssClass&&(i+="}")),e.cssId&&(i+="}"),i+=e.latexClose||(e.cssId||e.cssClass?"":"}"));break;case"array":if(i+="\\begin{"+e.environmentName+"}","array"===e.environmentName){if(i+="{",void 0!==e.colFormat)for(o=0;o<e.colFormat.length;o++)e.colFormat[o].align?i+=e.colFormat[o].align:e.colFormat[o].rule&&(i+="|");i+="}"}for(r=0;r<e.array.length;r++){for(n=0;n<e.array[r].length;n++)n>0&&(i+=" & "),i+=l(e,e.array[r][n]);r<e.array.length-1&&(i+=" \\\\ ")}i+="\\end{"+e.environmentName+"}";break;case"root":i=l(e,e.body);break;case"leftright":i+=Us(a=e.inner?["\\left"+(e.leftDelim||"."),l(e,e.body),"\\right"+(e.rightDelim||".")]:t?["."===e.leftDelim?"":e.leftDelim,l(e,e.body),"."===e.rightDelim?"":e.rightDelim]:["\\mleft"+(e.leftDelim||"."),l(e,e.body),"\\mright"+(e.rightDelim||".")]);break;case"delim":case"sizeddelim":i+=s+"{"+e.delim+"}";break;case"rule":i+=s,e.shift&&(i+=`[${l(e,e.shift)}em]`),i+=`{${l(e,e.width)}em}{${l(e,e.height)}em}`;break;case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":i+='\\char"'===s?e.latex:rs(s,null,e,l);break;case"mop":""!==e.body&&("\\mathop"===s||"\\operatorname"===s?i+=s+"{"+l(e,e.body)+"}":(i+=s,/^\\.*[a-zA-Z0-9]$/.test(s)&&(i+=" "))),e.explicitLimits&&("limits"===e.limits&&(i+="\\limits "),"nolimits"===e.limits&&(i+="\\nolimits "));break;case"spacing":i+=s,"\\hspace"===s||"\\hspace*"===s?(i+="{",e.width?i+=Number(e.width).toString()+"em":i+="0em",i+="}"):(i+=" ",e.width&&(i+=Number(e.width).toString()+"em "));break;case"enclose":if(i+=s,"\\enclose"===s){i+="{"+Object.keys(e.notation).join(" ")+"}";let t="",n="";e.backgroundColor&&"transparent"!==e.backgroundColor&&(t+=n+'mathbackground="'+_s(e.backgroundColor)+'"',n=","),e.shadow&&"auto"!==e.shadow&&(t+=n+'shadow="'+e.shadow+'"',n=","),1!==e.strokeWidth||"solid"!==e.strokeStyle?(t+=n+e.borderStyle,n=","):e.strokeColor&&"currentColor"!==e.strokeColor&&(t+=n+'mathcolor="'+_s(e.strokeColor)+'"',n=","),t&&(i+=`[${t}]`)}i+=`{${l(e,e.body)}}`;break;case"mathstyle":i+="\\"+e.mathstyle;break;case"space":i+=e.symbol;break;case"placeholder":i+="\\placeholder{}";break;case"first":case"command":case"msubsup":break;case"error":i+=e.latex;break;case"composition":i="";break;case"":console.assert("text"===e.mode,"Null atom type in mode "+e.mode),console.error("Attempting to emit a text atom");break;default:i=rs(s,null,e,l),console.assert(Boolean(i),"Missing custom emiter for ",s||e.body),i||(i+=s)}if(void 0!==e.superscript){let t=l(e,e.superscript);1===t.length?(""===t?t="\\prime ":""===t&&(t="\\doubleprime "),i+="^"+t):i+="^{"+t+"}"}if(void 0!==e.subscript){const t=l(e,e.subscript);1===t.length?i+="_"+t:i+="_{"+t+"}"}return i}(this,e)}getStyle(){return{mode:this.mode,color:this.isPhantom?"transparent":this.color,backgroundColor:this.isPhantom?"transparent":this.backgroundColor,variant:this.variant,variantStyle:this.variantStyle,fontFamily:this.fontFamily,fontShape:this.fontShape,fontSeries:this.fontSeries,fontSize:this.fontSize,cssId:this.cssId,cssClass:this.cssClass}}applyStyle(e){Object.assign(this,e),"none"===this.fontFamily&&(this.fontFamily=""),"auto"===this.fontShape&&(this.fontShape=""),"auto"===this.fontSeries&&(this.fontSeries=""),"none"===this.color&&(this.color=""),"none"===this.backgroundColor&&(this.backgroundColor=""),"auto"===this.fontSize&&(this.fontSize=""),this.fontSize&&(this.maxFontSize=Js[this.fontSize]),"text"===this.mode&&"root"!==this.type&&(this.type="")}getInitialBaseElement(){let e;return Jr(this.body)&&this.body.length>0&&("first"!==this.body[0].type?e=this.body[0].getInitialBaseElement():this.body[1]&&(e=this.body[1].getInitialBaseElement())),e||this}getFinalBaseElement(){return Jr(this.body)&&this.body.length>0?this.body[this.body.length-1].getFinalBaseElement():this}isCharacterBox(){const e=this.getInitialBaseElement();return/minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(e.type)}setPhantom(e){this.forEach(t=>{t.isPhantom=e})}forEach(e){if(e(this),Jr(this.body))for(const t of this.body)t&&t.forEach(e);else this.body&&"object"==typeof this.body&&e(this.body);if(this.superscript)for(const t of this.superscript)t&&t.forEach(e);if(this.subscript)for(const t of this.subscript)t&&t.forEach(e);if(this.overscript)for(const t of this.overscript)t&&t.forEach(e);if(this.underscript)for(const t of this.underscript)t&&t.forEach(e);if(this.numer)for(const t of this.numer)t&&t.forEach(e);if(this.denom)for(const t of this.denom)t&&t.forEach(e);if(this.index)for(const t of this.index)t&&t.forEach(e);if(this.array)for(const t of this.array)for(const i of t)for(const t of i)t.forEach(e)}decomposeGroup(e){const t=$o(Ys(e.clone({mathstyle:this.mathstyle?mo[this.mathstyle]:void 0}),this.body),"","mord");return this.cssId&&(t.cssId=this.cssId),t.applyStyle({backgroundColor:this.backgroundColor,cssClass:this.cssClass}),t}decomposeOverlap(e){const t=$o(Ys(e,this.body),"inner");return $o([t,$o(null,"fix")],"left"===this.align?"llap":"rlap","mord")}decomposeRule(e){const t=e.mathstyle,i=$o("","rule","mord");let n=this.shift&&!isNaN(this.shift)?this.shift:0;n/=t.sizeMultiplier;const r=this.width/t.sizeMultiplier,o=this.height/t.sizeMultiplier;return i.setStyle("border-right-width",r,"em"),i.setStyle("border-top-width",o,"em"),i.setStyle("margin-top",-(o-n),"em"),i.setStyle("border-color",e.color),i.width=r,i.height=o+n,i.depth=-n,i}decompose(e,t=null){var i;let n=null;if(!this.type||/mord|minner|mbin|mrel|mpunct|mopen|mclose|textord/.test(this.type)?(n="string"==typeof this.body?this.makeSpan(e,this.body):this.makeSpan(e,Ys(e,this.body))).type=wo(this.type)?this.type:"":"group"===this.type||"root"===this.type?n=this.decomposeGroup(e):"delim"===this.type?(n=$o(null,"")).delim=this.delim:"sizeddelim"===this.type?n=this.bind(e,function(e,t,i,n,r=""){return"."===t?qs(e,n,r):("<"===t||"\\lt"===t?t="\\langle":">"!==t&&"\\gt"!==t||(t="\\rangle"),Ls.includes(t)||As.includes(t)?Ms(e,t,i,!1,n,r):Cs.includes(t)?Ss(e,t,Ds[i],!1,n,r):(console.assert(!1,"Unknown delimiter '"+t+"'"),null))}(this.cls,this.delim,this.size,e)):"overlap"===this.type?n=this.decomposeOverlap(e):"rule"===this.type?n=this.decomposeRule(e):"msubsup"===this.type?(n=$o("","","mord"),t&&(n.height=t[0].height,n.depth=t[0].depth)):"space"===this.type?n=this.makeSpan(e," "):"spacing"===this.type?""===this.body?n=this.makeSpan(e,""):""===this.body?n="math"===this.mode?this.makeSpan(e," "):this.makeSpan(e,""):this.width?(n=$o("","mspace "),this.width>0?n.setWidth(this.width):n.setStyle("margin-left",this.width,"em")):n=$o("","mspace "+(null!==(i={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.symbol])&&void 0!==i?i:"mediumspace")):"mathstyle"===this.type?e.setMathstyle(this.mathstyle):"command"===this.type||"error"===this.type?(console.assert("string"==typeof this.body),(n=this.makeSpan(e,this.body)).classes="",this.isError&&(n.classes+=" ML__error"),this.isSuggestion&&(n.classes+=" ML__suggestion")):"composition"===this.type?(n=this.makeSpan(e,this.body)).classes="ML__composition":"placeholder"===this.type?n=this.makeSpan(e,""):"first"===this.type?n=this.makeSpan(e,""):(console.assert(Zs[this.type],'Unknown Atom type: "'+this.type+'"'),n=Zs[this.type].decompose(e,this)),!n)return null;if(this.caret&&"msubsup"!==this.type&&"command"!==this.type&&"placeholder"!==this.type&&"first"!==this.type&&(Jr(n)?"leftright"===this.type&&(this.superscript||this.subscript)||(n[n.length-1].caret=this.caret):n.caret=this.caret),this.containsCaret&&(Jr(n)?(n[0].classes=(n[0].classes||"")+" ML__contains-caret",n[n.length-1].classes=(n[n.length-1].classes||"")+" ML__contains-caret"):n.classes=(n.classes||"")+" ML__contains-caret"),!this.limits&&(this.superscript||this.subscript))if(Jr(n)){const t=n[n.length-1];n[n.length-1]=this.attachSupsub(e,t,t.type)}else n=[this.attachSupsub(e,n,n.type)];return Jr(n)?n:[n]}attachSupsub(e,t,i){if(!this.superscript&&!this.subscript)return t;const n=e.mathstyle;let r=null,o=null;this.superscript&&(r=$o(Ys(e.sup(),this.superscript),n.adjustTo(n.sup()))),this.subscript&&(o=$o(Ys(e.sub(),this.subscript),n.adjustTo(n.sub())));let s,a=0,l=0;this.isCharacterBox()||(a=Ao(t)-n.metrics.supDrop,l=Do(t)+n.metrics.subDrop),s=n===mo.displaystyle?n.metrics.sup1:n.cramped?n.metrics.sup3:n.metrics.sup2;const c=mo.textstyle.sizeMultiplier*n.sizeMultiplier,d=.5/so/c;let p=null;if(o&&r){a=Math.max(a,s,r.depth+.25*n.metrics.xHeight),l=Math.max(l,n.metrics.sub2);const i=eo;if(a-Do(r)-(Ao(o)-l)<4*i){l=4*i-(a-r.depth)+Ao(o);const e=.8*n.metrics.xHeight-(a-Do(r));e>0&&(a+=e,l-=e)}p=Ko(e,[o,l,r,-a],"individualShift"),this.isSymbol&&p.children[0].setLeft(-To(t))}else o&&!r?((p=Ko(e,[o],"shift",l=Math.max(l,n.metrics.sub1,Ao(o)-.8*n.metrics.xHeight))).children[0].setRight(d),this.isCharacterBox()&&p.children[0].setLeft(-To(t))):!o&&r&&(p=Ko(e,[r],"shift",-(a=Math.max(a,s,r.depth+.25*n.metrics.xHeight)))).children[0].setRight(d);const h=$o(p,"msubsup");return this.caret&&(h.caret=this.caret,this.caret=""),$o([t,h],"",i)}attachLimits(e,t,i,n){const r=this.superscript?$o(Ys(e.sup(),this.superscript),e.mathstyle.adjustTo(e.mathstyle.sup())):null,o=this.subscript?$o(Ys(e.sub(),this.subscript),e.mathstyle.adjustTo(e.mathstyle.sub())):null;return function(e,t,i,n,r,o){if(!r&&!o)return t;t=$o(t);let s=0,a=0;r&&(s=Math.max(to,no-Do(r))),o&&(a=Math.max(io,ro-Ao(o)));let l=null;if(o&&r){const c=oo+Ao(o)+Do(o)+a+Do(t)+i;(l=Ko(e,[oo,o,a,t,s,r,oo],"bottom",c)).children[0].setLeft(-n),l.children[2].setLeft(n)}else if(o&&!r){const r=Ao(t)-i;(l=Ko(e,[oo,o,a,t],"top",r)).children[0].setLeft(-n)}else if(!o&&r){const o=Do(t)+i;(l=Ko(e,[t,s,r,oo],"bottom",o)).children[1].setLeft(n)}return $o(l,"op-limits","mop")}(e,t,i,n,r,o)}bind(e,t){return"first"!==this.type&&""!==this.body&&(this.id=function(e){let t;return e.atomIdsSettings&&("number"==typeof e.atomIdsSettings.seed?(t=e.atomIdsSettings.overrideID?e.atomIdsSettings.overrideID:e.atomIdsSettings.seed.toString(36),e.atomIdsSettings.seed+=1):t=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36)),t}(e),this.id&&(t.attributes||(t.attributes={}),t.attributes["data-atom-id"]=this.id)),t}makeSpan(e,t){console.assert(wo(this.type));const i=$o(t,"","textord"===this.type?"mord":wo(this.type)?this.type:""),n=this.getStyle();n.letterShapeStyle=e.letterShapeStyle,i.applyStyle(n);const r=(null==n?void 0:n.fontSize)?n.fontSize:"size5";return r!==e.parentSize?(i.classes+=" sizing reset-"+e.parentSize,i.classes+=" "+r):e.parentSize!==e.size&&(i.classes+=" sizing reset-"+e.parentSize,i.classes+=" "+e.size),i.maxFontSize=Math.max(i.maxFontSize,e.mathstyle.sizeMultiplier||1),"text"===this.mode&&(i.classes+=" ML__text"),e.mathstyle.isTight()&&(i.isTight=!0),"math"!==this.mode&&(i.italic=0),i.setRight(i.italic),"number"==typeof e.opacity&&i.setStyle("opacity",e.opacity),this.bind(e,i),this.caret&&(this.superscript||this.subscript||(i.caret=this.caret,this.caret="",e.mathstyle.isTight()&&(i.isTight=!0))),i}}function ea(e,t=[]){const i=new Qs(e,"root",t||[]);return!Jr(i.body)||0!==i.body.length&&"first"===i.body[0].type||i.body.unshift(new Qs(e,"first")),i}function ta(e){return Jr(e)}function ia(e){const t=$o("","arraycolsep");return t.setWidth(e),t}function na(e,t,i,n){const r=[];for(const o of t){const t=$o(Ys(e,n));t.depth=o.depth,t.height=o.height,r.push(t),r.push(o.pos-i)}return Ko(e,r,"individualShift")}function ra(e){return!/^<({|}|\$|\$\$|space)>$/.test(e)}Gs("accent",(e,t)=>{const i=e.mathstyle;let n=Ys(e.cramp(),t.body);(t.superscript||t.subscript)&&(n=[t.attachSupsub(e,$o(n,"","mord"),"mord")]);let r=0;Jr(t.body)&&1===t.body.length&&t.body[0].isCharacterBox()&&(r=function(e){if(!e)return 0;if(Jr(e)){let t=0;for(const i of e)t+=i.skew||0;return t}return e.skew}(n));let o,s=Math.min(Ao(n),i.metrics.xHeight);if(t.svgAccent)o=Bo(t.svgAccent),s=-s+to;else{const e=Oo("Main-Regular",t.accent,"math");e.italic=0;const i=""===t.accent?" accent-vec":"";o=$o($o(e),"accent-body"+i)}return(o=Ko(e,[n,-s,o])).children[1].setLeft(2*r),[$o([o],"accent","mord")]}),Gs("array",(e,t)=>{var i;let n=t.colFormat;n&&0===n.length&&(n=[{align:"l"}]),n||(n=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]);const r=[];let o=0;for(const S of n)S.align&&o++;for(const S of t.array){let e=0;for(;e<S.length;){const t=[],i=Math.min(S.length,e+o);for(;e<i;)t.push(S[e++]);r.push(t)}}1===r[r.length-1].length&&0===r[r.length-1][0].length&&r.pop();const s=mo[t.mathstyle]||e.mathstyle,a=t.arraystretch||1,l="number"==typeof t.arraycolsep?t.arraycolsep:.5,c=a*ao,d=.7*c,p=.3*c;let h=0,u=0;const m=[],f=r.length;for(let S=0;S<f;++S){const n=r[S];u=Math.max(u,n.length);let o=d,s=p;const a={cells:[],height:0,depth:0,pos:0};for(let i=0;i<n.length;++i){const r=Ys(e.clone({mathstyle:mo[t.mathstyle]}),n[i])||[],l=[$o(null,"","mord")].concat(r);s=Math.max(s,Do(l)),o=Math.max(o,Ao(l)),a.cells.push(l)}let l=S===f-1?0:t.jot||0;(null===(i=t.rowGaps)||void 0===i?void 0:i[S])&&((l=t.rowGaps[S])>0&&(s<(l+=p)&&(s=l),l=0)),a.height=o,a.depth=s,h+=o,a.pos=h,h+=s+l,m.push(a)}const g=h/2+s.metrics.axisHeight,y=[];for(let S=0;S<u;S++){const t=[];for(const e of m){const i=e.cells[S];i&&(i.depth=e.depth,i.height=e.height,t.push(i),t.push(e.pos-g))}t.length>0&&y.push(Ko(e,t,"individualShift"))}const v=[];let b=!1,x=!1,k=0,_=!t.leftDelim;for(const S of n){if(S.align&&k>=y.length)break;if(S.align&&k<y.length)b?v.push(ia(2*l)):(x||_)&&v.push(ia(l)),v.push($o(y[k],"col-align-"+S.align)),k++,b=!0,x=!1,_=!1;else if(void 0!==S.gap)"number"==typeof S.gap?v.push(ia(S.gap)):v.push(na(e,m,g,S.gap)),b=!1,x=!1,_=!1;else if(S.rule){const t=$o(null,"vertical-separator");t.setStyle("height",h,"em"),t.setStyle("margin-top",3*e.mathstyle.metrics.axisHeight-g,"em"),t.setStyle("vertical-align","top");let i=0;x?i=.16:b&&(i=l-.04),t.setLeft(i),v.push(t),b=!1,x=!0,_=!1}}if(b&&!t.rightDelim&&v.push(ia(l)),!(t.leftDelim&&"."!==t.leftDelim||t.rightDelim&&"."!==t.rightDelim))return[$o(v,"mtable","mord")];const w=$o(v,"mtable"),M=Ao(w),z=Do(w);return[$o([t.bind(e,Es("mopen",t.leftDelim,M,z,e)),w,t.bind(e,Es("mclose",t.rightDelim,M,z,e))],"","mord")]}),Gs("box",(e,t)=>{const i="number"==typeof t.padding?t.padding:.3,n=$o(Ys(e,t.body),"","mord");n.setStyle("vertical-align",-Do(n),"em"),n.setStyle("height",0);const r=$o(n,"","mord"),o=$o("","ML__box");o.setStyle("position","absolute"),o.setStyle("height",Ao(r)+Do(r)+2*i,"em"),0!==i?o.setStyle("width","calc(100% + "+2*i+"em)"):o.setStyle("width","100%"),o.setStyle("top",-i,"em"),o.setStyle("left",-i,"em"),o.setStyle("z-index","-1"),o.setStyle("box-sizing","border-box"),t.backgroundcolor&&o.setStyle("background-color",t.backgroundcolor),t.framecolor&&o.setStyle("border","0.04em solid "+t.framecolor),t.border&&o.setStyle("border",t.border),r.setStyle("display","inline-block"),r.setStyle("height",Ao(r)+Do(r),"em");const s=$o([o,r]);return s.setStyle("position","relative"),s.setStyle("vertical-align",-i+Do(r),"em"),s.height=Ao(r)+i,s.depth=Do(r)+i,s.setLeft(i),s.setRight(i),s.setStyle("height",s.height+s.depth-2*i,"em"),s.setStyle("top",-i,"em"),s.setStyle("display","inline-block"),[s]}),Gs("enclose",(e,t)=>{const i=$o(Ys(e,t.body),"","mord"),n="number"==typeof t.padding?t.padding:.3,r=$o("","ML__notation");r.setStyle("position","absolute"),r.setStyle("height",Ao(i)+Do(i)+2*n,"em"),r.height=Ao(i)+n,r.depth=Do(i)+n,0!==n?r.setStyle("width","calc(100% + "+2*n+"em)"):r.setStyle("width","100%"),r.setStyle("top","0"),r.setStyle("left",-n,"em"),r.setStyle("z-index","-1"),t.backgroundcolor&&r.setStyle("background-color",t.backgroundcolor),t.notation.box&&r.setStyle("border",t.borderStyle),t.notation.actuarial&&(r.setStyle("border-top",t.borderStyle),r.setStyle("border-right",t.borderStyle)),t.notation.madruwb&&(r.setStyle("border-bottom",t.borderStyle),r.setStyle("border-right",t.borderStyle)),t.notation.roundedbox&&(r.setStyle("border-radius",(Ao(i)+Do(i))/2,"em"),r.setStyle("border",t.borderStyle)),t.notation.circle&&(r.setStyle("border-radius","50%"),r.setStyle("border",t.borderStyle)),t.notation.top&&r.setStyle("border-top",t.borderStyle),t.notation.left&&r.setStyle("border-left",t.borderStyle),t.notation.right&&r.setStyle("border-right",t.borderStyle),t.notation.bottom&&r.setStyle("border-bottom",t.borderStyle);let o="";if(t.notation.horizontalstrike&&(o+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',o+=` stroke-width="${t.strokeWidth}" stroke="${t.strokeColor}"`,o+=' stroke-linecap="round"',t.svgStrokeStyle&&(o+=` stroke-dasharray="${t.svgStrokeStyle}"`),o+="/>"),t.notation.verticalstrike&&(o+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',o+=` stroke-width="${t.strokeWidth}" stroke="${t.strokeColor}"`,o+=' stroke-linecap="round"',t.svgStrokeStyle&&(o+=` stroke-dasharray="${t.svgStrokeStyle}"`),o+="/>"),t.notation.updiagonalstrike&&(o+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',o+=` stroke-width="${t.strokeWidth}" stroke="${t.strokeColor}"`,o+=' stroke-linecap="round"',t.svgStrokeStyle&&(o+=` stroke-dasharray="${t.svgStrokeStyle}"`),o+="/>"),t.notation.downdiagonalstrike&&(o+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',o+=` stroke-width="${t.strokeWidth}" stroke="${t.strokeColor}"`,o+=' stroke-linecap="round"',t.svgStrokeStyle&&(o+=` stroke-dasharray="${t.svgStrokeStyle}"`),o+="/>"),o){let e;"none"!==t.shadow&&(e="auto"===t.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+t.shadow+")"),function(e,t,i){e.svgOverlay=t,e.svgStyle=i}(r,o,e)}const s=$o([r,i]);return s.setStyle("position","relative"),s.setStyle("display","inline"),s.height=Ao(i)+n,s.depth=Do(i)+n,s.setLeft(n),s.setRight(n),[s]}),Gs("genfrac",(e,t)=>{const i="auto"===t.mathstyle?e.mathstyle:mo[t.mathstyle],n=e.clone({mathstyle:i});let r=[];t.numerPrefix&&r.push($o(t.numerPrefix,"mord"));const o=t.continuousFraction?i:i.fracNum(),s=qo(r=r.concat(Ys(n.clone({mathstyle:o}),t.numer)),e.mathstyle.adjustTo(o));let a=[];t.denomPrefix&&a.push($o(t.denomPrefix,"mord"));const l=t.continuousFraction?i:i.fracDen(),c=qo(a=a.concat(Ys(n.clone({mathstyle:l}),t.denom)),e.mathstyle.adjustTo(l)),d=t.hasBarLine?eo/i.sizeMultiplier:0;let p,h,u=0;i.size===mo.displaystyle.size?(p=i.metrics.num1,u=d>0?3*d:7*eo,h=i.metrics.denom1):(d>0?(p=i.metrics.num2,u=d):(p=i.metrics.num3,u=3*eo),h=i.metrics.denom2);const m=s?Do(s):0,f=c?Ao(c):0;let g;if(0===d){const e=p-m-(f-h);e<u&&(p+=.5*(u-e),h+=.5*(u-e)),g=Ko(n,[s,-p,c,h],"individualShift")}else{const e=i.metrics.axisHeight,r=e+.5*d,o=e-.5*d;p-m-r<u&&(p+=u-(p-m-r)),o-(f-h)<u&&(h+=u-(o-(f-h)));const a=$o(null," frac-line");a.applyStyle(t.getStyle()),a.height=d/2,a.depth=d/2;const l=[];s&&(l.push(s),l.push(-p)),l.push(a),l.push(d/2-e),c&&(l.push(c),l.push(h)),g=Ko(n,l,"individualShift")}g.classes+=" mfrac",g.height*=i.sizeMultiplier/e.mathstyle.sizeMultiplier,g.depth*=i.sizeMultiplier/e.mathstyle.sizeMultiplier;const y=i.size===mo.displaystyle.size?i.metrics.delim1:i.metrics.delim2,v=t.bind(e,Ns("mopen",t.leftDelim,y,!0,e.clone({mathstyle:i}))),b=t.bind(e,Ns("mclose",t.rightDelim,y,!0,e.clone({mathstyle:i})));return v.applyStyle(t.getStyle()),b.applyStyle(t.getStyle()),[t.bind(e,$o([v,g,b],e.parentSize!==e.size?"sizing reset-"+e.parentSize+" "+e.size:"","mord"))]}),Gs("leftright",(e,t)=>{if(!t.body)return t.leftDelim?new Qs("math","mopen",t.leftDelim).decompose(e):t.rightDelim?new Qs("math","mclose",t.rightDelim).decompose(e):null;const i=e.clone(),n=Ys(i,t.body),r=i.mathstyle;let o=0,s=0,a=[];if(o=Ao(n)*r.sizeMultiplier,s=Do(n)*r.sizeMultiplier,t.leftDelim&&(a.push(t.bind(e,Es("mopen",t.leftDelim,o,s,i,"ML__open"))),a[a.length-1].applyStyle(t.getStyle())),n){for(let r=0;r<n.length;r++)if(n[r].delim){const a=n[r].caret,l=/ML__selected/.test(n[r].classes);n[r]=t.bind(e,Es("minner",n[r].delim,o,s,i)),n[r].caret=a,n[r].selected(l)}a=a.concat(n)}if(t.rightDelim){let n,r=t.rightDelim;"?"===r&&(e.smartFence?(r=(r={"(":")","\\{":"\\}","\\lbrace":"\\rbrace","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"}[t.leftDelim])||t.leftDelim,n="ML__smart-fence__close"):r="."),a.push(t.bind(e,Es("mclose",r,o,s,i,(n||"")+" ML__close"))),a[a.length-1].applyStyle(t.getStyle())}return t.inner?[$o(a,r.cls(),"minner")]:a}),Gs("line",(e,t)=>{const i=e.mathstyle,n=Ys(e.cramp(),t.body),r=eo/i.sizeMultiplier,o=$o(null,e.mathstyle.adjustTo(mo.textstyle)+" "+t.position+"-line");let s;if(o.height=r,o.maxFontSize=1,"overline"===t.position)s=Ko(e,[n,3*r,o,r]);else{const t=$o(n);s=Ko(e,[r,o,3*r,t],"top",Ao(t))}return[$o(s,t.position,"mord")]}),Gs("mop",(e,t)=>{var i;const n=e.mathstyle;let r,o=0,s=0;if(t.isSymbol){const i=n.size===mo.displaystyle.size&&"\\smallint"!==t.symbol;o=((r=Oo(i?"Size2-Regular":"Size1-Regular",t.body,"op-symbol "+(i?"large-op":"small-op"),"mop")).height-r.depth)/2-n.metrics.axisHeight*n.sizeMultiplier,s=r.italic,r.applyStyle({color:t.isPhantom?"transparent":t.color,backgroundColor:t.isPhantom?"transparent":t.backgroundColor,cssId:t.cssId,cssClass:t.cssClass,letterShapeStyle:e.letterShapeStyle})}else Jr(t.body)?r=$o(Ys(e,t.body),"","mop"):(console.assert("mop"===t.type),r=t.makeSpan(e,t.body));t.bind(e,r),t.isSymbol&&r.setTop(o);let a=r;if(t.superscript||t.subscript){const l=null!==(i=t.limits)&&void 0!==i?i:"auto";a="limits"===l||"auto"===l&&n.size===mo.displaystyle.size?t.attachLimits(e,r,o,s):t.attachSupsub(e,r,"mop")}return[a]}),Gs("overunder",(e,t)=>{const i=t.svgBody?Bo(t.svgBody):Ys(e,t.body),n=e.clone({mathstyle:mo.scriptstyle});let r,o;t.svgAbove?r=Bo(t.svgAbove):t.overscript&&t.overscript.length>0&&(r=$o(Ys(n,t.overscript),e.mathstyle.adjustTo(n.mathstyle))),t.svgBelow?o=Bo(t.svgBelow):t.underscript&&t.underscript.length>0&&(o=$o(Ys(n,t.underscript),e.mathstyle.adjustTo(n.mathstyle))),r&&o&&(o.setLeft(.3),o.setRight(.3),r.setLeft(.3),r.setRight(.3));let s=function(e,t,i,n,r){if(!i&&!n)return $o(t,"op-over-under",r);let o=0,s=0;i&&(o=Math.max(to,no-Do(i))),n&&(s=Math.max(io,ro-Ao(n)));let a=null;if(n&&i){const r=Ao(n)+Do(n)+Do(t);a=Ko(e,[0,n,s,t,o,i,io],"bottom",r)}else n&&!i?a=Ko(e,[0,n,s,t],"top",Ao(t)):i&&!n&&(a=Ko(e,[Do(t),t,Math.max(io,o),i],"bottom",Do(t)));return $o(a,"op-over-under",r)}(e,i,r,o,wo(t.type)?t.type:"mrel");return(t.superscript||t.subscript)&&(s=t.attachLimits(e,s,0,0)),[s]}),Gs("phantom",(e,t)=>{if("vphantom"===t.phantomType){const i=$o(Ys(e,t.body),"inner");return[$o([i,$o(null,"fix")],"rlap","mord")]}if("hphantom"===t.phantomType||"smash"===t.phantomType||"bsmash"===t.phantomType||"tsmash"===t.phantomType){const i=$o(Ys(e,t.body),"","mord");return"bsmash"!==t.phantomType&&(i.height=0),"tsmash"!==t.phantomType&&(i.depth=0),[$o(Ko(e,[i]),"","mord")]}return[$o(Ys(e,t.body),"","mord")]}),Gs("surd",(e,t)=>{var i;const n=e.mathstyle;console.assert(null===t.body||Jr(t.body));const r=null!==(i=Ys(e.cramp(),t.body))&&void 0!==i?i:$o(""),o=eo/n.sizeMultiplier;let s=o;n.id<mo.textstyle.id&&(s=n.metrics.xHeight);let a=o+s/4;const l=$o(Ns("","\\surd",Math.max(2*s,(Ao(r)+Do(r))*n.sizeMultiplier)+(a+o),!1,e),"sqrt-sign");l.applyStyle(t.getStyle());const c=l.height+l.depth-o;c>Ao(r)+Do(r)+a&&(a=(a+c-(Ao(r)+Do(r)))/2),l.setTop(l.height-Ao(r)-(a+o));const d=$o(null,e.mathstyle.adjustTo(mo.textstyle)+" sqrt-line");d.applyStyle(t.getStyle()),d.height=o;const p=Ko(e,[r,a,d,o]);if(!t.index)return[t.bind(e,$o([l,p],"sqrt","mord"))];const h=$o(Ys(e.clone({mathstyle:mo.scriptscriptstyle}),t.index),n.adjustTo(mo.scriptscriptstyle)),u=$o([$o(Ko(e,[h],"shift",-.6*(Math.max(l.height,p.height)-Math.max(l.depth,p.depth))),"root"),l,p],"sqrt","mord");return u.height=l.height,u.depth=l.depth,[t.bind(e,u)]});class oa{constructor(e,t,i,n){this.index=0,this.style={},this.parseMode="math",this.smartFence=!1,this.tabularMode=!1,this.atoms=[],this.endCount=0,this.tokens=e,this.args=t,this.macros=i,this.onError=(e=>n({before:Xs(this.tokens.slice(this.index,this.index+10)),after:Xs(this.tokens.slice(Math.max(0,this.index-10),this.index)),...e}))}swapAtoms(e=[]){const t=this.atoms;return this.atoms=e,t}swapParseMode(e){const t=this.parseMode;return this.parseMode=e,t}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(e){return this.tokens[this.index]===e&&(this.index++,!0)}lastSubsupAtom(){const e=0===this.atoms.length?void 0:this.atoms[this.atoms.length-1];return(!e||"mop"!==e.type&&"leftright"!==e.type&&"msubsup"!==e.type)&&((null==e?void 0:e.limits)&&"nolimits"!==(null==e?void 0:e.limits)||this.atoms.push(new Qs(this.parseMode,"msubsup",""))),this.atoms[this.atoms.length-1]}hasPattern(e){return e.test(this.tokens[this.index])}hasInfixCommand(){const e=this.index;if(e<this.tokens.length&&"\\"===this.tokens[e][0]){const t=as(this.tokens[e],this.parseMode,this.macros);return!((null==t?void 0:t.mode)&&!t.mode.includes(this.parseMode))&&(null==t?void 0:t.infix)}return!1}matchColumnSeparator(){const e=this.index;return!(!this.tabularMode||"&"!==this.tokens[e]||(this.index++,0))}matchRowSeparator(){const e=this.index;return!(!this.tabularMode||"\\\\"!==this.tokens[e]&&"\\cr"!==this.tokens[e]||(this.index++,0))}placeholder(){var e;if(!this.args||void 0===this.args["?"]){const e=new Qs(this.parseMode,"placeholder","?",this.style);return e.captureSelection=!0,[e]}return"string"==typeof(null===(e=this.args)||void 0===e?void 0:e["?"])?sa(this.args["?"],this.parseMode,null,this.macros,!1,this.onError):this.args["?"]}matchWhitespace(){let e=!1;for(;this.match("<space>");)e=!0;return e}skipUntilToken(e){let t=this.tokens[this.index];for(;t&&t!==e;)t=this.tokens[++this.index];t===e&&this.index++}skipFiller(){let e=!1;do{const t=this.matchWhitespace(),i=this.match("\\relax");e=!t&&!i}while(!e)}matchKeyword(e){const t=this.index;let i=this.end(),n="";for(;!i;){const t=this.get();ra(t)?(n+=t,i=this.end()||n.length>=e.length):i=!0}const r=e.toUpperCase()===n.toUpperCase();return r||(this.index=t),r}scanString(){let e="",t=this.end();for(;!t;){if(this.match("<space>"))e+=" ";else{const i=this.peek();"]"===i?t=!0:ra(i)?e+=this.get():"\\"===i[0]?(this.onError({code:"unbalanced-braces"}),e+=this.get()):t=!0}t=t||this.end()}return e}scanBalancedString(){let e="",t=this.end(),i=1;for(;!t;){if(this.match("<space>"))e+=" ";else{const t=this.get();"<{>"===t?(e+="{",i+=1):"<}>"===t?(i-=1)>0?e+="}":this.index-=1:e+="<$>"===t?"$":"<$$>"===t?"$$":t}t=0===i||this.end()}return e}matchLiteralArg(){var e;let t="";if(this.match("<{>")){let i=1;for(;i>0&&!this.end();){const n=this.get();"<}>"===n?(i-=1)>0&&(t+="}"):"<{>"===n?(i+=1,t+="{"):t+=null!==(e={"<space>":" ","<$$>":"$$","<$>":"$"}[n])&&void 0!==e?e:n}}return t}scanColor(){return ks(this.scanString())}scanNumber(e=!0){var t,i;let n=!1,r=this.peek();for(;"<space>"===r||"+"===r||"-"===r;)this.get(),"-"===r&&(n=!n),r=this.peek();e=Boolean(e);let o=10,s=/[0-9]/;if(this.match("'"))o=8,s=/[0-7]/,e=!0;else if(this.match('"')||this.match("x"))o=16,s=/[0-9A-F]/,e=!0;else if(this.match("`"))return(r=this.get())?r.startsWith("\\")&&2===r.length?(n?-1:1)*(null!==(t=r.codePointAt(1))&&void 0!==t?t:0):(n?-1:1)*(null!==(i=r.codePointAt(0))&&void 0!==i?i:0):NaN;let a="";for(;this.hasPattern(s);)a+=this.get();if(!e&&(this.match(".")||this.match(",")))for(a+=".";this.hasPattern(s);)a+=this.get();const l=e?parseInt(a,o):parseFloat(a);return n?-l:l}scanDimen(){const e=this.scanNumber(!1);let t;return this.matchWhitespace(),this.matchKeyword("pt")?t=po(e,"pt"):this.matchKeyword("mm")?t=po(e,"mm"):this.matchKeyword("cm")?t=po(e,"cm"):this.matchKeyword("ex")?t=po(e,"ex"):this.matchKeyword("px")?t=po(e,"px"):this.matchKeyword("em")?t=po(e,"em"):this.matchKeyword("bp")?t=po(e,"bp"):this.matchKeyword("dd")?t=po(e,"dd"):this.matchKeyword("pc")?t=po(e,"pc"):this.matchKeyword("in")?t=po(e,"in"):this.matchKeyword("mu")?t=po(e,"mu"):(this.onError({code:"missing-unit"}),t=po(e,"pt")),t}scanSkip(){const e=this.scanDimen();return this.matchWhitespace(),this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen(),e}scanColspec(){this.matchWhitespace();const e=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){const t=this.get();if("c"===t||"r"===t||"l"===t)e.push({align:t});else if("|"===t)e.push({rule:!0});else if("@"===t){if(this.match("<{>")){const t=this.swapParseMode("math");e.push({gap:this.parse(e=>"<}>"===e)}),this.swapParseMode(t)}this.match("<}>")||this.onError({code:"unbalanced-braces"})}}return e}parseModeSet(){let e="";if(this.match("\\(")&&(e="\\)"),!e&&this.match("\\[")&&(e="\\]"),!e)return null;const t=this.swapParseMode("math"),i=new Qs("math","group");return i.mathstyle="\\)"===e?"textstyle":"displaystyle",i.body=this.parse(t=>t===e),this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.swapParseMode(t),i.body&&0!==i.body.length?i:null}parseModeShift(){let e="";if(this.match("<$>")&&(e="<$>"),!e&&this.match("<$$>")&&(e="<$$>"),!e)return null;const t=new Qs("math","group");t.mathstyle="<$>"===e?"textstyle":"displaystyle",t.latexOpen="<$>"===e?"$":"$$",t.latexClose=t.latexOpen;const i=this.swapParseMode("math");return t.body=this.parse(t=>t===e),this.match(e)||this.onError({code:"unbalanced-mode-shift"}),this.swapParseMode(i),t.body&&0!==t.body.length?t:null}parseEnvironment(){if(!this.match("\\begin"))return null;const e=this.parseArgument("string");if(!e)return null;const t=ss(e);if(!t)return this.onError({code:"unknown-environment",arg:e}),null;const i=[];if(null==t?void 0:t.params)for(const h of t.params)if(h.isOptional)i.push(this.parseOptionalArgument(h.type));else{const t=this.parseArgument(h.type);t||this.onError({code:"missing-argument",arg:e}),i.push(t)}const n=this.parseMode,r=this.tabularMode,o=this.swapAtoms([]);this.tabularMode=t.tabular;const s=[],a=[];let l=[],c=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:e}),c=!0),!c&&this.match("\\end")&&(this.parseArgument("string")!==e&&this.onError({code:"unbalanced-environment",arg:e}),c=!0),!c)if(this.matchColumnSeparator())l.push(this.swapAtoms([]));else if(this.matchRowSeparator()){l.push(this.swapAtoms([]));let e=0;this.matchWhitespace(),this.match("[")&&(e=this.scanDimen(),this.matchWhitespace(),this.match("]")),a.push(e||0),s.push(l),l=[]}else this.atoms=this.atoms.concat(this.parse(e=>"<}>"===e||"&"===e||"\\end"===e||"\\cr"===e||"\\\\"===e))}while(!c);l.push(this.swapAtoms([])),l.length>0&&s.push(l);const d=this.swapAtoms(o);if(console.assert(!this.tabularMode||0===d.length,"Leftover atoms in tabular mode"),this.parseMode=n,this.tabularMode=r,!t.tabular&&0===d.length)return null;if(t.tabular&&0===s.length)return null;const p=new Qs(this.parseMode,"array",d);return Object.assign(p,t.parser(e,i,s)),p.array=s,p.rowGaps=a,p.environmentName=e,p}parse(e){var t;const i=this.style;e||(e=(e=>"<}>"===e));let n="",r=null,o=[],s=null;const a=this.swapAtoms([]);for(;!this.end()&&!e(this.peek());)this.hasInfixCommand()&&!n?((r=as(n=this.get(),"math",this.macros))&&(o=this.parseArguments(r)[1]),s=this.swapAtoms([])):this.parseToken();let l;return n?(console.assert(Boolean(r)),o.unshift(this.swapAtoms(a)),s&&o.unshift(s),(l=[new Qs(this.parseMode,r.type,null!==(t=r.value)&&void 0!==t?t:n.slice(1),r.parse?r.parse(n,o):null)])[0].symbol=n):l=this.swapAtoms(a),this.style=i,l}parseGroup(){if(!this.match("<{>"))return null;const e=new Qs(this.parseMode,"group");return e.body=this.parse(e=>"<}>"===e),this.match("<}>")||this.onError({code:"unbalanced-braces"}),e.latexOpen="{",e.latexClose="}",e}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;const e=new Qs(this.parseMode,"leftright");e.leftDelim="(",e.inner=!1;const t=this.swapAtoms([]);let i=1;for(;!this.end()&&0!==i;)this.match("(")&&(i+=1),this.match(")")&&(i-=1),0!==i&&this.parseToken();return 0===i&&this.match(")"),e.rightDelim=0===i?")":"?",e.body=this.swapAtoms(t),e}scanDelim(){this.matchWhitespace();const e=this.get();if(!e)return this.onError({code:"unexpected-end-of-string"}),null;let t=".";("\\"===e[0]||ra(e))&&(t=e);const i=as(t,"math",this.macros);return i?i.mode&&!i.mode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:t}),null):"mopen"===i.type||"mclose"===i.type||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(t)?t:(this.onError({code:"unexpected-delimiter",arg:t}),null):(this.onError({code:"unknown-command",arg:t}),null)}parseLeftRight(){if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;const e=this.style;let t="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;t="\\mright"}const i=this.scanDelim();if(!i)return null;const n=this.swapAtoms([]);for(;!this.end()&&!this.match(t);)this.parseToken();this.style=e;const r=this.scanDelim(),o=new Qs(this.parseMode,"leftright","",this.style);return o.leftDelim=i,o.rightDelim=null!=r?r:void 0,o.inner="right"===t,o.body=this.swapAtoms(n),o}parseSupSub(){var e,t;if("math"!==this.parseMode)return!1;let i=!1,n=this.peek();for(;"^"===n||"_"===n||"'"===n;){const r="_"===n?"subscript":"superscript";if(this.match("^")||this.match("_")){const t=this.parseArgument("math");if(t){const n=this.lastSubsupAtom();n[r]=(null!==(e=n[r])&&void 0!==e?e:[]).concat(t),i=!0}}else if(this.match("'")){const e=this.lastSubsupAtom(),n=new Qs(e.mode,"mord","");n.symbol="\\prime",e.superscript=null!==(t=e.superscript)&&void 0!==t?t:[],e.superscript.push(n),i=!0}n=this.peek()}return i}parseLimits(){if(this.match("\\limits")){const e=this.lastSubsupAtom();return e.limits="limits",e.explicitLimits=!0,!0}if(this.match("\\nolimits")){const e=this.lastSubsupAtom();return e.limits="nolimits",e.explicitLimits=!0,!0}return!1}parseArguments(e){if(!e||!e.params)return[void 0,[]];let t;const i=[];let n=e.infix?2:0;for(;n<e.params.length;){const r=e.params[n];if(r.isOptional)i.push(this.parseOptionalArgument(r.type));else if(r.type.endsWith("*"))t=r.type.slice(0,-1);else{const e=this.parseArgument(r.type);void 0!==e?i.push(e):(this.onError({code:"missing-argument"}),i.push(this.placeholder()))}n+=1}return[t,i]}parseArgument(e){var t;let i;if(this.skipFiller(),e="auto"===e?this.parseMode:e,!this.match("<{>")){if("delim"===e)return null!==(t=this.scanDelim())&&void 0!==t?t:".";if(/^(math|text)$/.test(e)){const t=this.swapParseMode(e),i=this.parseSimpleToken();return this.swapParseMode(t),i}}const n=this.parseMode;this.parseMode=e;const r=this.swapAtoms([]);if("string"===e)i=this.scanString(),this.skipUntilToken("<}>");else if("balanced-string"===e)i=this.scanBalancedString(),this.skipUntilToken("<}>");else if("number"===e)i=this.scanNumber(),this.skipUntilToken("<}>");else if("dimen"===e)i=this.scanDimen(),this.skipUntilToken("<}>");else if("skip"===e)i=this.scanSkip(),this.skipUntilToken("<}>");else if("colspec"===e)i=this.scanColspec(),this.skipUntilToken("<}>");else if("color"===e)i=this.scanColor()||"#ffffff",this.skipUntilToken("<}>");else if("delim"===e)i=this.scanDelim()||".",this.skipUntilToken("<}>");else{console.assert(/^(math|text)$/.test(e),'Unexpected parse mode: "'+e+'"');const t=this.index;let n=1;do{const e=this.get();"<}>"===e&&(n-=1),"<{>"===e&&(n+=1)}while(n>0&&!this.end());if(!(i=function(e,t,i,n){var r;return(null===(r=xo[e])||void 0===r?void 0:r.parse)?xo[e].parse(t,i,n):null}(e,this.tokens.slice(t,this.index-1),this.onError,{args:this.args,macros:this.macros,smartFence:this.smartFence,style:this.style,parse:(e,t,n)=>{const r=new oa(t,n.args,n.macros,this.onError);return r.parseMode=e,r.style=n.style,[i=r.parse(),t.slice(r.index)]}}))){this.index=t;do{this.atoms=this.atoms.concat(this.parse())}while(!this.match("<}>")&&!this.end())}}this.parseMode=n;const o=this.swapAtoms(r);return null!=i?i:o}parseOptionalArgument(e){var t;if(e="auto"===e?this.parseMode:e,this.matchWhitespace(),!this.match("["))return null;const i=this.parseMode;this.parseMode=e;const n=this.swapAtoms();let r;for(;!this.end()&&!this.match("]");)if("string"===e)r=this.scanString();else if("number"===e)r=this.scanNumber();else if("dimen"===e)r=this.scanDimen();else if("skip"===e)r=this.scanSkip();else if("colspec"===e)r=this.scanColspec();else if("color"===e)r=null!==(t=this.scanColor())&&void 0!==t?t:"#ffffff";else if("bbox"===e){const e=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),t={};for(const i of e){const e=ks(i);if(e)t.backgroundcolor=e;else{const e=i.match(/^\s*([0-9.]+)\s*([a-z][a-z])/);if(e)t.padding=po(e[1],e[2]);else{const e=i.match(/^\s*border\s*:\s*(.*)/);e&&(t.border=e[1])}}}r=t}else console.assert("math"===e,'Unexpected parse mode: "'+e+'"'),this.atoms=this.atoms.concat(this.parse(e=>"]"===e));this.parseMode=i;const o=this.swapAtoms(n);return null!=r?r:o}parseSimpleToken(){const e=this.get();if(!e)return null;let t=null;if("<space>"===e)"text"===this.parseMode&&((t=new Qs("text",""," ",this.style)).symbol=" ");else if("\\"===e[0]){if("\\placeholder"===e)(t=new Qs(this.parseMode,"placeholder",this.parseArgument("string"),this.style)).captureSelection=!0;else if("\\char"===e){const e=this.index;let i=Math.floor(this.scanNumber(!0));(!isFinite(i)||i<0||i>1114111)&&(i=10067),(t=new Qs(this.parseMode,"math"===this.parseMode?"mord":"",String.fromCodePoint(i))).symbol="\\char",t.latex="\\char"+Xs(this.tokens.slice(e,this.index))}else if("\\hskip"===e||"\\kern"===e){const i=this.scanSkip();isFinite(i)&&((t=new Qs(this.parseMode,"spacing",null,this.style)).width=i,t.symbol=e,t.latex=e)}else if(!(t=this.scanMacro(e))){const i=as(e,this.parseMode,{});if(!i)return this.onError({code:"unknown-command",arg:e}),(t=new Qs("math","error",e)).symbol=e,t.latex=e,[t];if(i.mode&&!i.mode.includes(this.parseMode))return this.onError({code:"invalid-command",arg:e}),(t=new Qs("math","error",e)).symbol=e,t.latex=e,[t];const n=this.index,[r,o]=this.parseArguments(i);if(!o)return null;if(i.infix)this.onError({code:"too-many-infix-commands",arg:e});else{if(i.parse){const n=i.parse(e,o);if(n.type)t=new Qs(this.parseMode,i.type,r?this.parseArgument(r):null,{...this.style,...n});else{const e=this.parseMode;if(n.mode&&(this.parseMode=n.mode,delete n.mode),n.mathstyle){this.parseMode="math";const e=new Qs("math","mathstyle");e.mathstyle=n.mathstyle,this.atoms.push(e)}if(r){const e=this.style;this.style={...this.style,...n},t=this.parseArgument(r),this.style=e}else this.style={...this.style,...n};this.parseMode=e}}else{const n={...this.style,variant:i.variant||this.style.variant,variantStyle:i.variantStyle||this.style.variantStyle};t=new Qs(this.parseMode,i.type||"mop",i.value||e,n)}if(t instanceof Qs&&!/^\\(llap|rlap|class|cssId)$/.test(e)){t.symbol=e;const i=Xs(this.tokens.slice(n,this.index));if(i&&(t.latex=t.symbol+i),t.isFunction&&this.smartFence){const e=this.scanSmartFence();e&&(t=[t,e])}}}}}else if(ra(e)){const i=as(e,this.parseMode,this.macros);if(i){const n={...this.style};t=new Qs(this.parseMode,i.type,i.value||e,n),i.isFunction&&(t.isFunction=!0)}else t=new Qs(this.parseMode,"math"===this.parseMode?"mord":"",e,this.style);if(t.symbol=e,t.latex=ts(this.parseMode,e),(null==i?void 0:i.isFunction)&&this.smartFence){const e=this.scanSmartFence();e&&(t=[t,e])}}else"<}>"===e?this.onError({latex:"",code:"unbalanced-braces"}):this.onError({latex:"",code:"unexpected-token",arg:e});return t&&!Jr(t)?[t]:t}scanMacro(e){var t;const i=e.slice(1);if(!this.macros||!this.macros[i])return null;const n=this.index,r=[];let o,s=0;"string"==typeof this.macros[i]?(o=this.macros[i],/(^|[^\\])#1/.test(o)&&(s=1),/(^|[^\\])#2/.test(o)&&(s=2),/(^|[^\\])#3/.test(o)&&(s=3),/(^|[^\\])#4/.test(o)&&(s=4),/(^|[^\\])#5/.test(o)&&(s=5),/(^|[^\\])#6/.test(o)&&(s=6),/(^|[^\\])#7/.test(o)&&(s=7),/(^|[^\\])#8/.test(o)&&(s=8),/(^|[^\\])#9/.test(o)&&(s=9)):(o=this.macros[i].def,s=this.macros[i].args||0);for(let l=1;l<=s;l++)r[l]=this.matchLiteralArg();r["?"]=null===(t=this.args)||void 0===t?void 0:t["?"];const a=new Qs(this.parseMode,"group",sa(o,this.parseMode,r,this.macros,!1,this.onError));return a.captureSelection=!0,a.symbol=e,a.latex=e+Xs(this.tokens.slice(n,this.index)),a}parseToken(){let e=this.parseEnvironment()||this.parseModeShift()||this.parseModeSet()||this.parseGroup()||this.parseLeftRight();return!(e||!this.parseSupSub()&&!this.parseLimits())||(e||(e=this.parseSimpleToken()),Jr(e)?this.atoms=this.atoms.concat(e):e&&this.atoms.push(e),null!==e)}}function sa(e,t,i,n,r=!1,o){let s=[];const a=new oa(Hs(e,i),i,n,t=>{"function"==typeof o&&o({...t,latex:e})});for(a.parseMode=t||"math",r&&(a.smartFence=!0);!a.end();){const e=a.parse();e&&(s=s.concat(e))}return s}var aa,la;const ca=null!==(la=null===(aa=document.currentScript)||void 0===aa?void 0:aa.src)&&void 0!==la?la:function(){const e=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===e.length)return"";const t=e[0].match(/http.*js/);return t?t[0]:""}();function da(e,t){var i,n;if(!t)return null;let r=null!==(i=null==e?void 0:e.getRootNode())&&void 0!==i?i:null===document||void 0===document?void 0:document.head;if(!r)return null;r===document&&(r=document.head);const o=function(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}(t).toString(36),s=r.querySelector(`style[data-id="${o}"]`);if(s){const e=parseFloat(null!==(n=s.getAttribute("data-refcount"))&&void 0!==n?n:"0");s.setAttribute("data-refcount",Number(e+1).toString())}else{const e=document.createElement("style");e.type="text/css",e.dataset.id=o,e.dataset.refcount="1",e.appendChild(document.createTextNode(t)),r.appendChild(e)}return{release:()=>{var e;const t=document.head.querySelector(`style[data-id="${o}"]`);if(t){const i=parseFloat(null!==(e=t.getAttribute("data-refcount"))&&void 0!==e?e:"0");1===i?t.remove():t.setAttribute("data-refcount",Number(i-1).toString())}}}}function pa(e){return 0===e.length||1===e.length&&"first"===e[0].type}function ha(e){const t=e.siblings();for(let i=t.length-1;i>=0;i--)t[i].isSuggestion&&t.splice(i,1)}function ua(e){let t=1,i=e.ancestor(t);for(;i;)i.latex=void 0,t+=1,i=e.ancestor(t)}function ma(e,t){const i={...t},n=e.lastPosition;return i.start<0?i.start=Math.max(0,n+i.start+1):isNaN(i.start)?i.start=0:i.start=Math.min(i.start,n),i.end<0?i.end=Math.max(0,n+i.end+1):isNaN(i.end)?i.end=i.start:i.end=Math.min(i.end,n),i.start<i.end?i.direction="forward":([i.start,i.end]=[i.end,i.start],i.direction="backward"),i.collapsed=i.start===i.end,i.collapsed&&(i.direction="none"),e.positions[i.start]&&(i.depth=e.positions[i.start].depth-1),i}function fa(e,t){let i="";for(const n of e)i+=n.relation+":"+n.offset+"/";return t&&(i+="#"+t),i}function ga(e){const t={path:[],extent:0},i=e.split("#");i.length>1&&(t.extent=parseInt(i[1]));const n=i[0].split("/");for(const r of n){const e=r.match(/([^:]*):(.*)/);e&&t.path.push({relation:e[1],offset:parseInt(e[2])})}return t}function ya(e,t){let i=0,n=-1,r=!1;for(;!r;)r=(r=(n+=1)>=e.length||n>=t.length)||!(e[n].relation===t[n].relation&&e[n].offset===t[n].offset);return i=n===e.length&&n===t.length?0:n+1===e.length&&n+1===t.length&&e[n].relation===t[n].relation?1:2}function va(e){return ga(fa(e)).path}function ba(e,t){let i=0;for(let n=0;n<t.row;n++)for(let t=0;t<e[n].length;t++)i+=1;return i+=t.col}function xa(e,t){let i;if("string"==typeof t){const e=t.match(/cell([0-9]*)$/);e&&(i=parseInt(e[1]))}else i=t;const n={row:0,col:0};for(;i>0;)n.col+=1,(!e[n.row]||n.col>=e[n.row].length)&&(n.col=0,n.row+=1),i-=1;return n}function ka(e,t,i=!0){var n;let r;return"object"!=typeof t&&(t=xa(e,t)),Jr(e[t.row])&&(r=null!==(n=e[t.row][t.col])&&void 0!==n?n:null),i&&r&&(0===r.length||"first"!==r[0].type)&&r.unshift(new Qs("math","first")),r}function _a(e){let t=0,i=0,n=1;for(const r of e)i+=1,r.length>n&&(n=r.length);return t=i*n}function wa(e,t,i){const n={...t};if(n.row+=i,n.row<0){if(n.col+=i,n.row=e.length-1,n.col<0)return null;for(;n.row>=0&&!ka(e,n);)n.row-=1;if(n.row<0)return null}else if(n.row>=e.length){for(n.col+=i,n.row=0;n.row<e.length&&!ka(e,n);)n.row+=1;if(n.row>e.length-1)return null}return n}const Ma={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML_bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},za={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[0-9A-Z ]$/,fraktur:/^[0-9A-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^]$/,monospace:/^[0-9A-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9]$/,"sans-serif":/^[0-9A-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039b\u039e\u03A0\u03A3\u03A5\u03A8\u03a9]$/},Sa=/^[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5]$/,La=[/^[a-z]$/,/^[A-Z]$/,Sa,/^[\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9]$/],Ca={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};ko("math",{emitLatexRun:function(e,t,i){let n=e.variant;return e.variantStyle&&"up"!==e.variantStyle&&(n+="-"+e.variantStyle),Us(bo(t,"color").map(t=>{const r=Us(bo(t,"variant").map(t=>{let r=t[0].variant;if(t[0].variantStyle&&"up"!==t[0].variantStyle&&(r+="-"+t[0].variantStyle),t.every(t=>{const i=as(t.symbol,e.mode,null);if(!i||!i.variant&&!i.variantStyle)return!1;let n=t.variant;return t.variantStyle&&"up"!==t.variantStyle&&(n+="-"+t.variantStyle),n===r}))return Us(t.map(e=>e.toLatex(i)));let o="";return r&&r!==n&&(o={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathit{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[r],console.assert(void 0!==o)),o+Us(t.map(e=>e.toLatex(i)))+(o?"}":"")}));return!t[0].color||e&&e.color===t[0].color?r:"\\textcolor{"+_s(t[0].color)+"}{"+r+"}"}))},applyStyle:function(e,t){const i="auto"!==t.letterShapeStyle&&t.letterShapeStyle?t.letterShapeStyle:"tex";let n=t.variant||"normal",r=t.variantStyle||"";"normal"===n&&!r&&/\u00a3|\u0131|\u0237/.test(e.body)&&(n="main",r="italic"),"normal"!==n||r||1!==e.body.length||La.forEach((t,n)=>{t.test(e.body)&&"it"===Ca[i][n]&&(r="italic")}),"up"===r&&(r="");const o=r?n+"-"+r:n;console.assert(Ma[o]);const[s,a]=Ma[o];return za[n]&&!za[n].test(e.body)?(e.body=es(e.body,n,r),e.variant="",e.variantStyle="",null):(Sa.test(e.body)&&(e.classes+=" lcGreek"),a&&(e.classes+=" "+a),s)}});const Aa={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};ko("text",{emitLatexRun:function(e,t,i){const n=function(e,t,i){return Us(bo(t,"color").map(t=>{const i=function(e,t,i){return function(e,t,i){return Us(bo(t,"fontFamily").map(e=>{const t=function(e,t,i){return Us(bo(t,"fontSize").map(e=>{const t=function(e,t,i){return Us(bo(t,"fontSeries").map(e=>{const t=function(e,t,i){return Us(bo(t,"fontShape").map(e=>{const t=function(e,t,i){let n=!1;return Us(t.map(e=>{let t="",i="";return e.latex?t=e.latex:"string"==typeof e.body?t=is("text",e.body):e.symbol&&(t=e.symbol.replace(/\\/g,"\\backslash ")),!n||t&&!/^[a-zA-Z0-9*]/.test(t)||(i="{}"),n=/\\[a-zA-Z0-9]+\*?$/.test(t),i+t}))}(0,e);return"it"===e[0].fontShape?"\\textit{"+t+"}":"sl"===e[0].fontShape?"\\textsl{"+t+"}":"sc"===e[0].fontShape?"\\textsc{"+t+"}":"n"===e[0].fontShape?"\\textup{"+t+"}":e[0].fontShape?"\\fontshape{"+e[0].fontShape+"}"+t:t}))}(0,e);return"b"===e[0].fontSeries?"\\textbf{"+t+"}":"l"===e[0].fontSeries?"\\textlf{"+t+"}":"m"===e[0].fontSeries?"\\textmd{"+t+"}":e[0].fontSeries?"\\fontseries{"+e[0].fontSeries+"}"+t:t}))}(0,e),i={size1:"tiny",size2:"scriptsize",size3:"footnotesize",size4:"small",size5:"normalsize",size6:"large",size7:"Large",size8:"LARGE",size9:"huge",size10:"Huge"}[e[0].fontSize]||"";return i?"\\"+i+" "+t:t}))}(0,e),i={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[e[0].fontFamily]||"";return i?"\\"+i+"{"+t+"}":e[0].fontFamily?"\\fontfamily{"+e[0].fontFamily+"}"+t:t}))}(0,t)}(0,t);return!t[0].color||"none"===t[0].color||e&&e.color===t[0].color?i:"\\textcolor{"+_s(t[0].color)+"}{"+i+"}"}))}(e,t);return t.every(e=>e.fontSeries||e.fontShape||e.fontFamily)&&t[0].mode===e.mode?n:`\\text{${n}}`},applyStyle:function(e,t){const i=t.fontFamily;if(Aa[i]?e.classes+=" "+Aa[i]:i&&e.setStyle("font-family",i),t.fontShape&&(e.classes+=" "+({it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[t.fontShape]||"")),t.fontSeries){const i=t.fontSeries.match(/(.?[lbm])?(.?[cx])?/);i&&(e.classes+=" "+({ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[i[1]||""]||""),e.classes+=" "+({uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[i[2]||""]||""))}return"Main-Regular"},parse:(e,t,i)=>(function(e,t,i){let n,r=[];for(;e.length>0;){const o=e.shift();if("<space>"===o)(n=new Qs("text",""," ",i.style)).symbol=" ",r.push(n);else if("\\"===o[0]){let t;e.unshift(o),[t,e]=i.parse("text",e,i),r=[...r,...t]}else if("<$>"===o||"<$$>"===o){const t=e.slice(0,e.findIndex(e=>e===o));e=e.slice(t.length+1);const[n]=i.parse("math",t,i);r=[...r,...n]}else if("<{>"===o||"<}>"===o);else{const e=as(o,"text",i.macros);!e||e.mode&&!e.mode.includes("text")?t({code:"unexpected-token"}):((n=new Qs("text",e?e.type:"",e?e.value:o,i.style)).symbol=o,n.latex=Go("text",o),r.push(n))}}return[r,e]})(e,t,i)[0]}),ms(["ce","pu"],"{chemformula:balanced-string}",null,(e,t)=>({type:"group",mode:"chem",body:sa(Ta.go(Da.go(t[0],"\\pu"===e?"pu":"ce"))),latexOpen:"\\"+e+"{",latexClose:"}"}));var Da={go:function(e,t){if(!e)return[];void 0===t&&(t="ce");var i,n="0",r={parenthesisLevel:0};e=(e=(e=e.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var o=10,s=[];;){i!==e?(o=10,i=e):o--;var a=Da.stateMachines[t],l=a.transitions[n]||a.transitions["*"];e:for(var c=0;c<l.length;c++){var d=Da.patterns.match_(l[c].pattern,e);if(d){for(var p=l[c].task,h=0;h<p.action_.length;h++){var u;if(a.actions[p.action_[h].type_])u=a.actions[p.action_[h].type_](r,d.match_,p.action_[h].option);else{if(!Da.actions[p.action_[h].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+p.action_[h].type_+")"];u=Da.actions[p.action_[h].type_](r,d.match_,p.action_[h].option)}Da.concatArray(s,u)}if(n=p.nextState||n,!(e.length>0))return s;if(p.revisit||(e=d.remainder),!p.toContinue)break e}}if(o<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(e,t){if(t)if(Array.isArray(t))for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"(-)(9)^(-9)":function(e){var t=e.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return t&&t[0]?{match_:t.splice(1),remainder:e.substr(t[0].length)}:null},"state of aggregation $":function(e){var t=Da.patterns.findObserveGroups(e,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(t&&t.remainder.match(/^($|[\s,;\)\]\}])/))return t;var i=e.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return i?{match_:i[0],remainder:e.substr(i[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(e){return Da.patterns.findObserveGroups(e,"^{","","","}")},"^($...$)":function(e){return Da.patterns.findObserveGroups(e,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(e){return Da.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(e){return Da.patterns.findObserveGroups(e,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(e){return Da.patterns.findObserveGroups(e,"_{","","","}")},"_($...$)":function(e){return Da.patterns.findObserveGroups(e,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(e){return Da.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(e){return Da.patterns.findObserveGroups(e,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(e){return Da.patterns.findObserveGroups(e,"","{","}","")},"{(...)}":function(e){return Da.patterns.findObserveGroups(e,"{","","","}")},"$...$":function(e){return Da.patterns.findObserveGroups(e,"","$","$","")},"${(...)}$":function(e){return Da.patterns.findObserveGroups(e,"${","","","}$")},"$(...)$":function(e){return Da.patterns.findObserveGroups(e,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(e){return Da.patterns.findObserveGroups(e,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(e){return Da.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(e){return Da.patterns.findObserveGroups(e,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(e){return Da.patterns.findObserveGroups(e,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(e){return Da.patterns.findObserveGroups(e,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(e){return Da.patterns.findObserveGroups(e,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(e){return Da.patterns.findObserveGroups(e,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(e){var t;if(t=e.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:t[0],remainder:e.substr(t[0].length)};var i=Da.patterns.findObserveGroups(e,"","$","$","");return i&&(t=i.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:t[0],remainder:e.substr(t[0].length)}:null},amount2:function(e){return this.amount(e)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(e){if(e.match(/^\([a-z]+\)$/))return null;var t=e.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return t?{match_:t[0],remainder:e.substr(t[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(e,t,i,n,r,o,s,a,l,c){var d=function(e,t){if("string"==typeof t)return 0!==e.indexOf(t)?null:t;var i=e.match(t);return i?i[0]:null},p=d(e,t);if(null===p)return null;if(e=e.substr(p.length),null===(p=d(e,i)))return null;var h=function(e,t,i){for(var n=0;t<e.length;){var r=e.charAt(t),o=d(e.substr(t),i);if(null!==o&&0===n)return{endMatchBegin:t,endMatchEnd:t+o.length};if("{"===r)n++;else if("}"===r){if(0===n)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];n--}t++}return null}(e,p.length,n||r);if(null===h)return null;var u=e.substring(0,n?h.endMatchEnd:h.endMatchBegin);if(o||s){var m=this.findObserveGroups(e.substr(h.endMatchEnd),o,s,a,l);if(null===m)return null;var f=[u,m.match_];return{match_:c?f.join(""):f,remainder:m.remainder}}return{match_:u,remainder:e.substr(h.endMatchEnd)}},match_:function(e,t){var i=Da.patterns.patterns[e];if(void 0===i)throw["MhchemBugP","mhchem bug P. Please report. ("+e+")"];if("function"==typeof i)return Da.patterns.patterns[e](t);var n=t.match(i);return n?{match_:n[2]?[n[1],n[2]]:n[1]?n[1]:n[0],remainder:t.substr(n[0].length)}:null}},actions:{"a=":function(e,t){e.a=(e.a||"")+t},"b=":function(e,t){e.b=(e.b||"")+t},"p=":function(e,t){e.p=(e.p||"")+t},"o=":function(e,t){e.o=(e.o||"")+t},"q=":function(e,t){e.q=(e.q||"")+t},"d=":function(e,t){e.d=(e.d||"")+t},"rm=":function(e,t){e.rm=(e.rm||"")+t},"text=":function(e,t){e.text_=(e.text_||"")+t},insert:function(e,t,i){return{type_:i}},"insert+p1":function(e,t,i){return{type_:i,p1:t}},"insert+p1+p2":function(e,t,i){return{type_:i,p1:t[0],p2:t[1]}},copy:function(e,t){return t},rm:function(e,t){return{type_:"rm",p1:t||""}},text:function(e,t){return Da.go(t,"text")},"{text}":function(e,t){var i=["{"];return Da.concatArray(i,Da.go(t,"text")),i.push("}"),i},"tex-math":function(e,t){return Da.go(t,"tex-math")},"tex-math tight":function(e,t){return Da.go(t,"tex-math tight")},bond:function(e,t,i){return{type_:"bond",kind_:i||t}},"color0-output":function(e,t){return{type_:"color0",color:t[0]}},ce:function(e,t){return Da.go(t)},"1/2":function(e,t){var i=[];t.match(/^[+\-]/)&&(i.push(t.substr(0,1)),t=t.substr(1));var n=t.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return n[1]=n[1].replace(/\$/g,""),i.push({type_:"frac",p1:n[1],p2:n[2]}),n[3]&&(n[3]=n[3].replace(/\$/g,""),i.push({type_:"tex-math",p1:n[3]})),i},"9,9":function(e,t){return Da.go(t,"9,9")}},createTransitions:function(e){var t,i,n,r,o={};for(t in e)for(i in e[t])for(n=i.split("|"),e[t][i].stateArray=n,r=0;r<n.length;r++)o[n[r]]=[];for(t in e)for(i in e[t])for(n=e[t][i].stateArray||[],r=0;r<n.length;r++){var s=e[t][i];if(s.action_){s.action_=[].concat(s.action_);for(var a=0;a<s.action_.length;a++)"string"==typeof s.action_[a]&&(s.action_[a]={type_:s.action_[a]})}else s.action_=[];for(var l=t.split("|"),c=0;c<l.length;c++)if("*"===n[r])for(var d in o)o[d].push({pattern:l[c],task:s});else o[n[r]].push({pattern:l[c],task:s})}return o},stateMachines:{}};Da.stateMachines={ce:{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(e,t){var i;if((e.d||"").match(/^[0-9]+$/)){var n=e.d;e.d=void 0,i=this.output(e),e.b=n}else i=this.output(e);return Da.actions["o="](e,t),i},"d= kv":function(e,t){e.d=t,e.dType="kv"},"charge or bond":function(e,t){if(e.beginsWithBond){var i=[];return Da.concatArray(i,this.output(e)),Da.concatArray(i,Da.actions.bond(e,t,"-")),i}e.d=t},"- after o/d":function(e,t,i){var n=Da.patterns.match_("orbital",e.o||""),r=Da.patterns.match_("one lowercase greek letter $",e.o||""),o=Da.patterns.match_("one lowercase latin letter $",e.o||""),s=Da.patterns.match_("$one lowercase latin letter$ $",e.o||""),a="-"===t&&(n&&""===n.remainder||r||o||s);!a||e.a||e.b||e.p||e.d||e.q||n||!o||(e.o="$"+e.o+"$");var l=[];return a?(Da.concatArray(l,this.output(e)),l.push({type_:"hyphen"})):(n=Da.patterns.match_("digits",e.d||""),i&&n&&""===n.remainder?(Da.concatArray(l,Da.actions["d="](e,t)),Da.concatArray(l,this.output(e))):(Da.concatArray(l,this.output(e)),Da.concatArray(l,Da.actions.bond(e,t,"-")))),l},"a to o":function(e){e.o=e.a,e.a=void 0},"sb=true":function(e){e.sb=!0},"sb=false":function(e){e.sb=!1},"beginsWithBond=true":function(e){e.beginsWithBond=!0},"beginsWithBond=false":function(e){e.beginsWithBond=!1},"parenthesisLevel++":function(e){e.parenthesisLevel++},"parenthesisLevel--":function(e){e.parenthesisLevel--},"state of aggregation":function(e,t){return{type_:"state of aggregation",p1:Da.go(t,"o")}},comma:function(e,t){var i=t.replace(/\s*$/,"");return i!==t&&0===e.parenthesisLevel?{type_:"comma enumeration L",p1:i}:{type_:"comma enumeration M",p1:i}},output:function(e,t,i){var n,r,o;for(var s in e.r?(r="M"===e.rdt?Da.go(e.rd,"tex-math"):"T"===e.rdt?[{type_:"text",p1:e.rd||""}]:Da.go(e.rd),o="M"===e.rqt?Da.go(e.rq,"tex-math"):"T"===e.rqt?[{type_:"text",p1:e.rq||""}]:Da.go(e.rq),n={type_:"arrow",r:e.r,rd:r,rq:o}):(n=[],(e.a||e.b||e.p||e.o||e.q||e.d||i)&&(e.sb&&n.push({type_:"entitySkip"}),e.o||e.q||e.d||e.b||e.p||2===i?e.o||e.q||e.d||!e.b&&!e.p?e.o&&"kv"===e.dType&&Da.patterns.match_("d-oxidation$",e.d||"")?e.dType="oxidation":e.o&&"kv"===e.dType&&!e.q&&(e.dType=void 0):(e.o=e.a,e.d=e.b,e.q=e.p,e.a=e.b=e.p=void 0):(e.o=e.a,e.a=void 0),n.push({type_:"chemfive",a:Da.go(e.a,"a"),b:Da.go(e.b,"bd"),p:Da.go(e.p,"pq"),o:Da.go(e.o,"o"),q:Da.go(e.q,"pq"),d:Da.go(e.d,"oxidation"===e.dType?"oxidation":"bd"),dType:e.dType}))),e)"parenthesisLevel"!==s&&"beginsWithBond"!==s&&delete e[s];return n},"oxidation-output":function(e,t){var i=["{"];return Da.concatArray(i,Da.go(t,"oxidation")),i.push("}"),i},"frac-output":function(e,t){return{type_:"frac-ce",p1:Da.go(t[0]),p2:Da.go(t[1])}},"overset-output":function(e,t){return{type_:"overset",p1:Da.go(t[0]),p2:Da.go(t[1])}},"underset-output":function(e,t){return{type_:"underset",p1:Da.go(t[0]),p2:Da.go(t[1])}},"underbrace-output":function(e,t){return{type_:"underbrace",p1:Da.go(t[0]),p2:Da.go(t[1])}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Da.go(t[1])}},"r=":function(e,t){e.r=t},"rdt=":function(e,t){e.rdt=t},"rd=":function(e,t){e.rd=t},"rqt=":function(e,t){e.rqt=t},"rq=":function(e,t){e.rq=t},operator:function(e,t,i){return{type_:"operator",kind_:i||t}}}},a:{transitions:Da.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Da.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(e){if(e.text_){var t={type_:"text",p1:e.text_};for(var i in e)delete e[i];return t}}}},pq:{transitions:Da.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(e,t){return{type_:"state of aggregation subscript",p1:Da.go(t,"o")}},"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Da.go(t[1],"pq")}}}},bd:{transitions:Da.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(e,t){return{type_:"color",color1:t[0],color2:Da.go(t[1],"bd")}}}},oxidation:{transitions:Da.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(e,t){return{type_:"roman numeral",p1:t||""}}}},"tex-math":{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var i in e)delete e[i];return t}}}},"tex-math tight":{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(e,t){e.o=(e.o||"")+"{"+t+"}"},output:function(e){if(e.o){var t={type_:"tex-math",p1:e.o};for(var i in e)delete e[i];return t}}}},"9,9":{transitions:Da.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(e,t){var i=[];return"+-"===t[0]||"+/-"===t[0]?i.push("\\pm "):t[0]&&i.push(t[0]),t[1]&&(Da.concatArray(i,Da.go(t[1],"pu-9,9")),t[2]&&(t[2].match(/[,.]/)?Da.concatArray(i,Da.go(t[2],"pu-9,9")):i.push(t[2])),t[3]=t[4]||t[3],t[3]&&(t[3]=t[3].trim(),"e"===t[3]||"*"===t[3].substr(0,1)?i.push({type_:"cdot"}):i.push({type_:"times"}))),t[3]&&i.push("10^{"+t[5]+"}"),i},"number^":function(e,t){var i=[];return"+-"===t[0]||"+/-"===t[0]?i.push("\\pm "):t[0]&&i.push(t[0]),Da.concatArray(i,Da.go(t[1],"pu-9,9")),i.push("^{"+t[2]+"}"),i},operator:function(e,t,i){return{type_:"operator",kind_:i||t}},space:function(){return{type_:"pu-space-1"}},output:function(e){var t,i=Da.patterns.match_("{(...)}",e.d||"");i&&""===i.remainder&&(e.d=i.match_);var n=Da.patterns.match_("{(...)}",e.q||"");if(n&&""===n.remainder&&(e.q=n.match_),e.d&&(e.d=e.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.d=e.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),e.q){e.q=e.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),e.q=e.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var r={d:Da.go(e.d,"pu"),q:Da.go(e.q,"pu")};"//"===e.o?t={type_:"pu-frac",p1:r.d,p2:r.q}:(t=r.d,r.d.length>1||r.q.length>1?t.push({type_:" / "}):t.push({type_:"/"}),Da.concatArray(t,r.q))}else t=Da.go(e.d,"pu-2");for(var o in e)delete e[o];return t}}},"pu-2":{transitions:Da.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(e,t){e.rm+="^{"+t+"}"},space:function(){return{type_:"pu-space-2"}},output:function(e){var t=[];if(e.rm){var i=Da.patterns.match_("{(...)}",e.rm||"");t=i&&""===i.remainder?Da.go(i.match_,"pu"):{type_:"rm",p1:e.rm}}for(var n in e)delete e[n];return t}}},"pu-9,9":{transitions:Da.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){var i=e.text_.length%3;0===i&&(i=3);for(var n=e.text_.length-3;n>0;n-=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(0,i)),t.reverse()}else t.push(e.text_);for(var r in e)delete e[r];return t},"output-o":function(e){var t=[];if(e.text_=e.text_||"",e.text_.length>4){for(var i=e.text_.length-3,n=0;n<i;n+=3)t.push(e.text_.substr(n,3)),t.push({type_:"1000 separator"});t.push(e.text_.substr(n))}else t.push(e.text_);for(var r in e)delete e[r];return t}}}};var Ta={go:function(e,t){if(!e)return"";for(var i="",n=!1,r=0;r<e.length;r++){var o=e[r];"string"==typeof o?i+=o:(i+=Ta._go2(o),"1st-level escape"===o.type_&&(n=!0))}return t||n||!i||(i="{"+i+"}"),i},_goInner:function(e){return e?Ta.go(e,!0):e},_go2:function(e){var t;switch(e.type_){case"chemfive":t="";var i={a:Ta._goInner(e.a),b:Ta._goInner(e.b),p:Ta._goInner(e.p),o:Ta._goInner(e.o),q:Ta._goInner(e.q),d:Ta._goInner(e.d)};i.a&&(i.a.match(/^[+\-]/)&&(i.a="{"+i.a+"}"),t+=i.a+"\\,"),(i.b||i.p)&&(t+="{\\vphantom{X}}",t+="^{\\hphantom{"+(i.b||"")+"}}_{\\hphantom{"+(i.p||"")+"}}",t+="{\\vphantom{X}}",t+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(i.b||"")+"}}",t+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(i.p||"")+"}}}"),i.o&&(i.o.match(/^[+\-]/)&&(i.o="{"+i.o+"}"),t+=i.o),"kv"===e.dType?((i.d||i.q)&&(t+="{\\vphantom{X}}"),i.d&&(t+="^{"+i.d+"}"),i.q&&(t+="_{\\smash[t]{"+i.q+"}}")):"oxidation"===e.dType?(i.d&&(t+="{\\vphantom{X}}",t+="^{"+i.d+"}"),i.q&&(t+="{\\vphantom{X}}",t+="_{\\smash[t]{"+i.q+"}}")):(i.q&&(t+="{\\vphantom{X}}",t+="_{\\smash[t]{"+i.q+"}}"),i.d&&(t+="{\\vphantom{X}}",t+="^{"+i.d+"}"));break;case"rm":t="\\mathrm{"+e.p1+"}";break;case"text":e.p1.match(/[\^_]/)?(e.p1=e.p1.replace(" ","~").replace("-","\\text{-}"),t="\\mathrm{"+e.p1+"}"):t="\\text{"+e.p1+"}";break;case"roman numeral":t="\\mathrm{"+e.p1+"}";break;case"state of aggregation":t="\\mskip2mu "+Ta._goInner(e.p1);break;case"state of aggregation subscript":t="\\mskip1mu "+Ta._goInner(e.p1);break;case"bond":if(!(t=Ta._getBond(e.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+e.kind_+")"];break;case"frac":var n="\\frac{"+e.p1+"}{"+e.p2+"}";t="\\mathchoice{\\textstyle"+n+"}{"+n+"}{"+n+"}{"+n+"}";break;case"pu-frac":var r="\\frac{"+Ta._goInner(e.p1)+"}{"+Ta._goInner(e.p2)+"}";t="\\mathchoice{\\textstyle"+r+"}{"+r+"}{"+r+"}{"+r+"}";break;case"tex-math":t=e.p1+" ";break;case"frac-ce":t="\\frac{"+Ta._goInner(e.p1)+"}{"+Ta._goInner(e.p2)+"}";break;case"overset":t="\\overset{"+Ta._goInner(e.p1)+"}{"+Ta._goInner(e.p2)+"}";break;case"underset":t="\\underset{"+Ta._goInner(e.p1)+"}{"+Ta._goInner(e.p2)+"}";break;case"underbrace":t="\\underbrace{"+Ta._goInner(e.p1)+"}_{"+Ta._goInner(e.p2)+"}";break;case"color":t="{\\color{"+e.color1+"}{"+Ta._goInner(e.color2)+"}}";break;case"color0":t="\\color{"+e.color+"}";break;case"arrow":var o={rd:Ta._goInner(e.rd),rq:Ta._goInner(e.rq)},s="\\x"+Ta._getArrow(e.r);o.rq&&(s+="[{"+o.rq+"}]"),t=s+=o.rd?"{"+o.rd+"}":"{}";break;case"operator":t=Ta._getOperator(e.kind_);break;case"1st-level escape":t=e.p1+" ";break;case"space":t=" ";break;case"entitySkip":case"pu-space-1":t="~";break;case"pu-space-2":t="\\mkern3mu ";break;case"1000 separator":t="\\mkern2mu ";break;case"commaDecimal":t="{,}";break;case"comma enumeration L":t="{"+e.p1+"}\\mkern6mu ";break;case"comma enumeration M":t="{"+e.p1+"}\\mkern3mu ";break;case"comma enumeration S":t="{"+e.p1+"}\\mkern1mu ";break;case"hyphen":t="\\text{-}";break;case"addition compound":t="\\,{\\cdot}\\,";break;case"electron dot":t="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":t="{\\times}";break;case"prime":t="\\prime ";break;case"cdot":t="\\cdot ";break;case"tight cdot":t="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":t="\\times ";break;case"circa":t="{\\sim}";break;case"^":t="uparrow";break;case"v":t="downarrow";break;case"ellipsis":t="\\ldots ";break;case"/":t="/";break;case" / ":t="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return t},_getArrow:function(e){switch(e){case"->":case"":case"":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(e){switch(e){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(e){switch(e){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}};const $a={"''":{mode:"math",value:"^{\\doubleprime}"},alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:{mode:"math",value:"\\pi"},"pi ":{mode:"text",value:"\\pi "},Pi:{mode:"math",value:"\\Pi"},theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:{mode:"math",value:"\\nabla"},grad:{mode:"math",value:"\\nabla"},del:{mode:"math",value:"\\partial"},"":"\\infty",oo:{mode:"math",after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"":{mode:"math",value:"\\sum"},sum:{mode:"math",value:"\\sum_{#?}^{#?}"},prod:{mode:"math",value:"\\prod_{#?}^{#?}"},sqrt:{mode:"math",value:"\\sqrt{#?}"},"":{mode:"math",value:"\\differentialD"},"":{mode:"math",value:"\\differentialD"},arcsin:{mode:"math",value:"\\arcsin"},arccos:{mode:"math",value:"\\arccos"},arctan:{mode:"math",value:"\\arctan"},sin:{mode:"math",value:"\\sin"},sinh:{mode:"math",value:"\\sinh"},cos:{mode:"math",value:"\\cos"},cosh:{mode:"math",value:"\\cosh"},tan:{mode:"math",value:"\\tan"},tanh:{mode:"math",value:"\\tanh"},sec:{mode:"math",value:"\\sec"},csc:{mode:"math",value:"\\csc"},cot:{mode:"math",value:"\\cot"},log:{mode:"math",value:"\\log"},ln:{mode:"math",value:"\\ln"},exp:{mode:"math",value:"\\exp"},lim:{mode:"math",value:"\\lim_{#?}"},dx:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:{mode:"math",value:"\\forall"},EE:{mode:"math",value:"\\exists"},"!EE":{mode:"math",value:"\\nexists"},"&&":{mode:"math",value:"\\land"},xin:{mode:"math",after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{mode:"math",after:"nothing+letter+closefence",value:"\\in"},"!in":{mode:"math",value:"\\notin"},NN:"\\N",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",PP:"\\P",xx:{mode:"math",value:"\\times"},"+-":{mode:"math",value:"\\pm"},"!=":{mode:"math",value:"\\ne"},">=":{mode:"math",value:"\\ge"},"<=":{mode:"math",value:"\\le"},"<<":{mode:"math",value:"\\ll"},">>":{mode:"math",value:"\\gg"},"~~":{mode:"math",value:"\\approx"},"":{mode:"math",value:"\\approx"},"?=":{mode:"math",value:"\\questeq"},"":{mode:"math",value:"\\div"},"":{mode:"math",value:"\\neg"},":=":{mode:"math",value:"\\coloneq"},"::":{mode:"math",value:"\\Colon"},"(:":{mode:"math",value:"\\langle"},":)":{mode:"math",value:"\\rangle"},beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},"eta ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta "},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},"mu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu "},nu:{mode:"math",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},"nu ":{mode:"text",after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu "},"":"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega","":"\\omega",forall:{mode:"math",value:"\\forall"},exists:{mode:"math",value:"\\exists"},"!exists":{mode:"math",value:"\\nexists"},":.":{mode:"math",value:"\\therefore"},liminf:"\\operatorname*{lim~inf}_{#?}",limsup:"\\operatorname*{lim~sup}_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:{mode:"math",value:"\\mod"},max:{mode:"math",value:"\\max"},min:{mode:"math",value:"\\min"},erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:{mode:"math",value:"\\operatorname{bessel}"},mean:{mode:"math",value:"\\operatorname{mean}"},median:{mode:"math",value:"\\operatorname{median}"},fft:{mode:"math",value:"\\operatorname{fft}"},lcm:{mode:"math",value:"\\operatorname{lcm}"},gcd:{mode:"math",value:"\\operatorname{gcd}"},randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:{mode:"math",value:"\\operatorname{Re}"},Im:{mode:"math",value:"\\operatorname{Im}"},mm:{mode:"math",after:"nothing+digit",value:"\\operatorname{mm}"},cm:{mode:"math",after:"nothing+digit",value:"\\operatorname{cm}"},km:{mode:"math",after:"nothing+digit",value:"\\operatorname{km}"},kg:{mode:"math",after:"nothing+digit",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function Oa(e,t,i){var n;return function(e,t){if(!t)return"";if("string"==typeof t)return t;if(!e)return t.value;let i=!1,n=!1,r=!1,o=!1,s=!1,a=!1,l=!1,c=!1,d=!1,p=!1,h=!1,u=!1,m=!1,f=!1,g=e[e.length-1],y=e.length-1;for(;g&&/msubsup|placeholder/.test(g.type);)g=e[y-=1];if(i=!g||"first"===g.type,g){if(void 0!==t.mode&&g.mode!==t.mode)return"";n=!(m="text"===g.mode)&&"mord"===g.type&&Uo.test(g.body),r=!m&&"mord"===g.type&&/[0-9]+$/.test(g.body),o=!m&&g.isFunction,s="genfrac"===g.type,a="surd"===g.type,l="mbin"===g.type,c="mrel"===g.type,d="mpunct"===g.type||"minner"===g.type,p=Boolean(g.array),h="mopen"===g.type,u="mclose"===g.type||"leftright"===g.type,f="space"===g.type}return void 0!==t.after?/nothing/.test(t.after)&&i||/letter/.test(t.after)&&n||/digit/.test(t.after)&&r||/function/.test(t.after)&&o||/frac/.test(t.after)&&s||/surd/.test(t.after)&&a||/binop/.test(t.after)&&l||/relop/.test(t.after)&&c||/punct/.test(t.after)&&d||/array/.test(t.after)&&p||/openfence/.test(t.after)&&h||/closefence/.test(t.after)&&u||/text/.test(t.after)&&m||/space/.test(t.after)&&f?t.value:"":t.value}(e,null!==(n=null==i?void 0:i[t])&&void 0!==n?n:$a[t])}function Na(e,t){if(!e)return["latex",""];if(e.length<=1)return["latex",e];if(!t||"ASCIIMath"!==t.format){const t=e.trim();if(t.startsWith("$$")&&t.endsWith("$$")||t.startsWith("\\[")&&t.endsWith("\\]")||t.startsWith("\\(")&&t.endsWith("\\)"))return["latex",t.substring(2,t.length-2)];if(t.startsWith("$")&&t.endsWith("$"))return["latex",t.substring(1,t.length-1)];if(e=e.replace(/\\\\([^\s\n])/g,"\\$1"),/\\/.test(e))return["latex",e]}return e=(e=(e=(e=(e=(e=e.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),[(null==t?void 0:t.format)||"ASCIIMath",Ea(e,null!=t?t:{})]}function Ea(e,t){var i,n,r,o,s,a,l;if(!e)return"";let c,d=!1;if(d||"^"!==e[0]&&"_"!==e[0]||(c=qa(e.substr(1),{inlineShortcuts:null!==(i=null==t?void 0:t.inlineShortcuts)&&void 0!==i?i:{},noWrap:!0}),e=e[0]+"{"+c.match+"}",e+=Ea(c.rest,t),d=!0),!d&&(c=e.match(/^(sqrt|\u221a)(.*)/))&&(e="\\sqrt{"+((c=qa(c[2],{inlineShortcuts:null!==(n=null==t?void 0:t.inlineShortcuts)&&void 0!==n?n:{},noWrap:!0})).match||"\\placeholder{}")+"}",e+=Ea(c.rest,t),d=!0),!d&&(c=e.match(/^(\\cbrt|\u221b)(.*)/))&&(e="\\sqrt[3]{"+((c=qa(c[2],{inlineShortcuts:null!==(r=null==t?void 0:t.inlineShortcuts)&&void 0!==r?r:{},noWrap:!0})).match||"\\placeholder{}")+"}",e+=Ea(c.rest,t),d=!0),d||(c=e.match(/^abs(.*)/))&&(e="\\left|"+(c=qa(c[1],{inlineShortcuts:null!==(o=null==t?void 0:t.inlineShortcuts)&&void 0!==o?o:{},noWrap:!0})).match+"\\right|",e+=Ea(c.rest,t),d=!0),d||(c=e.match(/^["](.*?)["](.*)/))&&(e="\\text{"+c[1]+"}",e+=Ea(c[2],t),d=!0),d||(c=e.match(/^([^a-zA-Z({[_^\\\s"]+)(.*)/))&&(e=Ka(c[1],t),e+=Ea(c[2],t),d=!0),!d&&/^(f|g|h)[^a-zA-Z]/.test(e)&&(c=qa(e.substring(1),{inlineShortcuts:null!==(s=t.inlineShortcuts)&&void 0!==s?s:{},noWrap:!0}),e="("===e[1]?e[0]+"\\mleft("+c.match+"\\mright)":e[0]+c.match,e+=Ea(c.rest,t),d=!0),d||(c=e.match(/^([a-zA-Z]+)(.*)/))&&(e=Ka(c[1],t),e+=Ea(c[2],t),d=!0),!d)if((c=qa(e,{inlineShortcuts:null!==(a=t.inlineShortcuts)&&void 0!==a?a:{},noWrap:!0})).match&&"/"===c.rest[0]){const i=qa(c.rest.substr(1),{inlineShortcuts:null!==(l=t.inlineShortcuts)&&void 0!==l?l:{},noWrap:!0});i.match&&(e="\\frac{"+c.match+"}{"+i.match+"}"+Ea(i.rest,t)),d=!0}else c.match&&(e="("===e[0]?"\\left("+c.match+"\\right)"+Ea(c.rest,t):c.match+Ea(c.rest,t),d=!0);return d||(c=e.match(/^(\s+)(.*)$/))&&(e=" "+Ea(c[2],t),d=!0),e}function qa(e,t){let i="",n=e=e.trim(),r=e.charAt(0),o={"(":")","{":"}","[":"]"}[r];if(o){let s=1,a=1;for(;a<e.length&&s>0;)e[a]===r&&s++,e[a]===o&&s--,a++;0===s?(t.noWrap&&"("===r?i=Ea(e.substring(1,a-1),t):("{"===r&&"}"===o&&(r="\\{",o="\\}"),i="\\left"+r+Ea(e.substring(1,a-1),t)+"\\right"+o),n=e.substring(a)):(i=e.substring(1,a),n="")}else{let r=e.match(/^([a-zA-Z]+)/);if(r){let i=Oa(null,e,t.inlineShortcuts);if(i)return{match:i=(i=i.replace("_{#?}","")).replace("^{#?}",""),rest:e.substring(i.length)}}if(r=e.match(/^([a-zA-Z])/))return{match:r[1],rest:e.substring(1)};if(r=e.match(/^(-)?\d+(\.\d*)?/))return{match:r[0],rest:e.substring(r[0].length)};/^\\(left|right)/.test(e)||(r=e.match(/^(\\[a-zA-Z]+)/))&&(n=e.substring(r[1].length),i=r[1])}return{match:i,rest:n}}function Ka(e,t){let i=Oa(null,e,t);return i?(i=(i=i.replace("_{#?}","")).replace("^{#?}",""),i+=" "):i=e,i}function Ba(e){var t;"function"!=typeof(null===(t=e.listeners)||void 0===t?void 0:t.onSelectionDidChange)||e.suppressChangeNotifications||e.listeners.onSelectionDidChange(e)}function Pa(e){var t;"function"!=typeof(null===(t=e.listeners)||void 0===t?void 0:t.onContentDidChange)||e.suppressChangeNotifications||e.listeners.onContentDidChange(e)}function Ra(e){if(e.parent().array)return ka(e.parent().array,e.relation())[e.anchorOffset()];const t=e.siblings();return t[Math.min(t.length-1,e.anchorOffset())]}function Ia(e,t,i=0){let n;if("string"==typeof t)(n=ga(t)).extent=i;else if(Jr(t)){const r=va(t),o=e.path;e.path=r,0===i&&"placeholder"===Ra(e).type&&(r[r.length-1].offset=e.anchorOffset()-1,i=1),n={path:r,extent:null!=i?i:0},e.path=o}else n=t;const r=0!==ya(e.path,n.path),o=n.extent!==e.extent;return(r||o)&&(r&&Fa(e),e.path=va(n.path),e.siblings().length<e.anchorOffset()?(console.warn("Invalid selection: "+e.toString()+' in "'+e.root.toLatex(!1)+'"'),e.path=[{relation:"body",offset:0}],e.extent=0):e.extent=n.extent,Ba(e)),r||o}function Fa(e){const t=e.siblings();if(t&&t.length<=1){let i;const n=e.relation();"numer"===n?i="numerator":"denom"===n?i="denominator":"surd"===e.parent().type&&"body"===n?i="radicand":"overunder"===e.parent().type&&"body"===n?i="base":"underscript"!==n&&"overscript"!==n||(i="annotation"),i&&t.splice(1,0,new Qs("math","placeholder","",Va(e)))}}function Va(e){const t=0===e.extent?Ra(e):e.sibling(1);let i;if(t&&"first"!==t.type){if("command"===t.type||"composition"===t.type)return{};i={color:t.color,backgroundColor:t.backgroundColor,fontFamily:t.fontFamily,fontShape:t.fontShape,fontSeries:t.fontSeries,fontSize:t.fontSize}}let n=1,r=e.ancestor(n);for(;!i&&r;)r&&(i={color:r.color,backgroundColor:r.backgroundColor,fontFamily:r.fontFamily,fontShape:r.fontShape,fontSeries:r.fontSeries,fontSize:r.fontSize}),n+=1,r=e.ancestor(n);return i}function Wa(e){return!!e&&("mord"===e.type&&/[0-9.]/.test(e.body)||"mpunct"===e.type&&","===e.body)}function ja(e){const t=e.siblings();if(t.length<=1)return null;let i=Math.min(e.endOffset(),t.length-1);if("command"!==t[i].type)return null;for(;i>0&&"command"===t[i].type;)i-=1;let n=e.startOffset()+1;for(;n<=t.length-1&&"command"===t[n].type;)n+=1;return n>i?{start:i+1,end:n}:null}function Ha(e){const t=rl(e)?Ra(e):e.sibling(1);let i;if(t){if("command"===t.type)return"command";i=t.mode}let n=1,r=e.ancestor(n);for(;!i&&r;)r&&(i=r.mode),n+=1,r=e.ancestor(n);return i}function Ua(e,t=1,i=!0){var n;const r=e.suppressChangeNotifications;e.suppressChangeNotifications=!0;const o=e.clone(),s=e.extent;Ga(e,t),"placeholder"===Ra(e).type&&Ga(e,t);const a=hl(e,(e,t)=>"placeholder"===e.type||t.path.length>1&&1===t.siblings().length,t);if(0===a.length){if(Ia(e,o,s),i&&(null===(n=e.hooks)||void 0===n?void 0:n.tabOut)&&e.hooks.tabOut(e,t>0?"forward":"backward")&&document.activeElement){const e=function(){function e(e){return!((i=e).disabled||"INPUT"===i.tagName&&"hidden"===i.type||function(e){if(e===document.activeElement||e.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(e).visibility)return!0;const t=e.getBoundingClientRect();if(0===t.width||0===t.height)return!0;for(;e;){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(i)||function(e){return"INPUT"===e.tagName&&"radio"===e.type&&!function(e){if(!e.name)return!0;const t=function(e,t){for(let i=0;i<e.length;i++)if(e[i].checked&&e[i].form===t)return e[i];return null}((e.form||e.ownerDocument).querySelectorAll('input[type="radio"][name="'+e.name+'"]'),e.form);return!t||t===e}(e)}(e)||t(e)<0);var i}function t(e){const t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?"true"===e.contentEditable?0:"AUDIO"!==e.nodeName&&"VIDEO"!==e.nodeName||null!==e.getAttribute("tabindex")?e.tabIndex:0:t}return function(i){const n=[],r=[];return Array.from(i.querySelectorAll('input, select, textarea, a[href], button, \n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')).filter(e).forEach((e,i)=>{const o=t(e);0===o?n.push(e):r.push({documentOrder:i,tabIndex:o,node:e})}),r.sort((e,t)=>e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex).map(e=>e.node).concat(n)}(document.body)}();let i=e.indexOf(document.activeElement)+t;i<0&&(i=e.length-1),i>=e.length&&(i=0),e[i].focus()}return e.suppressChangeNotifications=r,!1}return Ia(e,a[0]),"placeholder"===Ra(e).type&&ol(e,-1),e.announce("move",o),Ba(e),e.suppressChangeNotifications=r,!0}function Xa(e,t=0,i=0,n=""){const r=e.path[e.path.length-1].relation;n||(n=r);const o=e.parent();if(!o&&"body"!==n)return!1;const s=n.startsWith("cell");if(!s&&!o[n]||s&&!o.array)return!1;const a=n!==r;e.path[e.path.length-1].relation=n;const l=e.siblings().length;e.path[e.path.length-1].relation=r;const c=e.extent;"end"===i&&(i=l-t-1),ol(e,i);const d=e.extent!==c;ol(e,c),t<0&&(t=l+t),t=Math.max(0,Math.min(t,l-1));const p=e.path[e.path.length-1].offset;return(a||p!==t||d)&&(a&&Fa(e),e.path[e.path.length-1].relation=n,e.path[e.path.length-1].offset=t,ol(e,i),Ba(e)),!0}function Za(e,t){var i;t=null!=t?t:{};const n={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(e.anchorOffset()===e.siblings().length-1){Fa(e);let r=n[e.relation()];const o=e.parent();for(;r&&!o[r];)r=n[r];if(r)return void Xa(e,0,0,r);if(e.parent().array){const t=_a(e.parent().array);let i=parseInt(e.relation().match(/cell([0-9]*)$/)[1])+1;for(;i<t;){if(ka(e.parent().array,i)&&Xa(e,0,0,"cell"+i))return;i+=1}}if(1===e.path.length)(e.suppressChangeNotifications||!(null===(i=e.hooks)||void 0===i?void 0:i.moveOut)||e.hooks.moveOut(e,"forward"))&&(e.path[0].offset=0);else{const i=!t.iterateAll&&e.parent().skipBoundary;e.path.pop(),i&&Za(e,t)}return}Xa(e,e.anchorOffset()+1);const r=Ra(e);if(r&&!r.captureSelection){let i;if(r.array){let t=0;i="";const n=_a(r.array);for(;!i&&t<n;)ka(r.array,t)&&(i="cell"+t.toString()),t+=1;return console.assert(i),e.path.push({relation:i,offset:0}),void Xa(e,0,0,i)}for(i="body";i;){if(Jr(r[i]))return e.path.push({relation:i,offset:0}),e.insertFirstAtom(),void(!t.iterateAll&&r.skipBoundary&&Za(e,t));i=n[i]}}}function Ja(e,t){var i;const n={numer:"body",denom:"numer",index:"denom",overscript:"index",underscript:"overscript",subscript:"underscript",superscript:"subscript"};if(!(t=null!=t?t:{}).iterateAll&&1===e.anchorOffset()&&e.parent()&&e.parent().skipBoundary&&Xa(e,0),e.anchorOffset()<1){let t=n[e.relation()];for(;t&&!Xa(e,-1,0,t);)t=n[t];const r=e.parent()?e.parent().type:"none";if("body"!==t||"msubsup"!==r&&"mop"!==r||(t=null),t)return;if(Fa(e),e.relation().startsWith("cell")){let t=parseInt(e.relation().match(/cell([0-9]*)$/)[1])-1;for(;t>=0;){if(ka(e.parent().array,t)&&Xa(e,-1,0,"cell"+t))return;t-=1}}return void(1===e.path.length?(e.suppressChangeNotifications||!(null===(i=e.hooks)||void 0===i?void 0:i.moveOut)||e.hooks.moveOut(e,"backward"))&&(e.path[0].offset=e.root.body.length-1):(e.path.pop(),Xa(e,e.anchorOffset()-1)))}const r=Ra(e);if(!r.captureSelection){let t;if(r.array){t="";const i=_a(r.array);let n=i-1;for(;!t&&n<i;)ka(r.array,n)&&(t="cell"+n.toString()),n-=1;return n+=1,console.assert(t),e.path.push({relation:t,offset:ka(r.array,n).length-1}),void Xa(e,-1,0,t)}for(t="superscript";t;){if(Jr(r[t]))return e.path.push({relation:t,offset:r[t].length-1}),void Xa(e,-1,0,t);t=n[t]}}Xa(e,e.anchorOffset()-1),!t.iterateAll&&e.sibling(0)&&e.sibling(0).skipBoundary&&Ja(e,t)}function Ga(e,t,i){i=null!=i?i:{extend:!1},ha(e);const n=e.clone();if("upward"===t)!function(e,t){var i,n;const r=null!==(i=(t=null!=t?t:{extend:!1}).extend)&&void 0!==i&&i;al(e);const o=e.relation();if("denom"===o)r?(e.path.pop(),e.path[e.path.length-1].offset-=1,ol(e,1)):Xa(e,e.anchorOffset(),0,"numer"),e.announce("moveUp");else if(e.parent().array){let i=xa(e.parent().array,o);(i=wa(e.parent().array,i,-1))&&ka(e.parent().array,i)?(e.path[e.path.length-1].relation="cell"+ba(e.parent().array,i),Xa(e,e.anchorOffset()),e.announce("moveUp")):Ga(e,"backward",t)}else e.announce("line"),!e.suppressChangeNotifications&&(null===(n=e.hooks)||void 0===n||n.moveOut(e,"upward"))}(e,i);else if("downward"===t)!function(e,t){var i,n;const r=null!==(i=(t=null!=t?t:{extend:!1}).extend)&&void 0!==i&&i;sl(e);const o=e.relation();if("numer"===o)r?(e.path.pop(),e.path[e.path.length-1].offset-=1,ol(e,1)):Xa(e,e.anchorOffset(),0,"denom"),e.announce("moveDown");else if(e.parent().array){let i=xa(e.parent().array,o);(i=wa(e.parent().array,i,1))&&ka(e.parent().array,i)?(e.path[e.path.length-1].relation="cell"+ba(e.parent().array,i),Xa(e,e.anchorOffset()),e.announce("moveDown")):Ga(e,"forward",t)}else e.announce("line"),!e.suppressChangeNotifications&&(null===(n=e.hooks)||void 0===n||n.moveOut(e,"downward"))}(e,i);else{let n="forward"===t?1:"backward"===t?-1:t;if(i.extend)return Ya(e,n);if(n>0)for(sl(e)&&n--;n>0;)Za(e),n--;else if(n<0)for(al(e)&&n++;0!==n;)Ja(e),n++}return Ba(e),e.announce("move",n),!0}function Ya(e,t){let i=e.path[e.path.length-1].offset,n=0;const r=e.clone(),o=i+(n=e.extent+t);if(o<0&&0!==n){if(e.path.length>1)return e.path.pop(),ol(e,-1),Ba(e),e.announce("move",r),!0;i=e.path[e.path.length-1].offset,n=e.extent}else if(o>=e.siblings().length){if(e.path.length>1)return e.path.pop(),e.path[e.path.length-1].offset-=1,ol(e,1),Ba(e),e.announce("move",r),!0;rl(e)&&(i-=1),n-=1}return Xa(e,i,n),e.announce("move",r),!0}function Qa(e,t,i){var n;const r=null!==(n=(i=null!=i?i:{extend:!1}).extend)&&void 0!==n&&n;t=t<0?-1:1;const o=e.clone(),s=e.siblings(),a=e.focusOffset();let l=a+t;if(r&&(l=Math.min(Math.max(0,l),s.length-1)),l<0||l>=s.length)Ga(e,t,i);else{if(s[l]&&"text"===s[l].mode){if((l=function(e,t,i){i=i<0?-1:1;const n=e.siblings();if(!n[t])return t;if("text"!==n[t].mode)return t;let r;if(Xo.test(n[t].body)){let e,o=t;do{e="text"===n[o].mode&&Xo.test(n[o].body),o+=i}while(n[o]&&e);r=n[o]?o-2*i:o-i}else if(/\s/.test(n[t].body)){let e=t;for(;n[e]&&"text"===n[e].mode&&/\s/.test(n[e].body);)e+=i;if(n[e]){let t=!0;do{t="text"===n[e].mode&&!/\s/.test(n[e].body),e+=i}while(n[e]&&t);r=n[e]?e-2*i:e-i}else r=e-i}else{let e=t;for(;n[e]&&"text"===n[e].mode&&!/\s/.test(n[e].body);)e+=i;r=n[e]?e:e-i;let o=!0;for(;n[e]&&o;)(o="text"===n[e].mode&&/\s/.test(n[e].body))&&(r=e),e+=i;r=n[e]?e-2*i:e-i}return r-(i>0?0:1)}(e,l,t))<0&&!r)return void Xa(e,0);if(l>s.length)return Xa(e,s.length-1),void Ga(e,t,i)}else{const e=s[l]?s[l].type:"";if("mopen"===e&&t>0||"mclose"===e&&t<0){let i="mopen"===e?1:-1;for(l+=t>0?1:-1;l>=0&&l<s.length&&0!==i;)"mopen"===s[l].type?i+=1:"mclose"===s[l].type&&(i-=1),l+=t;0!==i&&(l=a+t),t>0&&(l-=1)}else{for(;s[l]&&"math"===s[l].mode&&s[l].type===e;)l+=t;l-=t>0?1:0}}if(r){const t=e.anchorOffset();Xa(e,t,l-t)}else Xa(e,l);e.announce("move",o)}}function el(e,t=1,i){var n;i=null!=i?i:{extend:!1},t=t<0?-1:1;const r=e.clone(),o=[{relation:"body",offset:e.path[0].offset}];let s;return null!==(n=!i.extend)&&void 0!==n&&n?(o[0].offset=t<0?0:e.root.body.length-1,s=0):t<0?o[0].offset>0&&(s=-o[0].offset):o[0].offset<e.siblings().length-1&&(s=e.siblings().length-1-o[0].offset),Ia(e,o,s),e.announce("move",r),!0}function tl(e){if(rl(e))return null;const t=[],i=e.siblings(),n=e.startOffset()+1,r=e.endOffset()+1;for(let o=n;o<r;o++)i[o]&&"first"!==i[o].type&&t.push(i[o]);return t}function il(e){const t=e.siblings();if("text"===Ha(e)){let i=e.startOffset(),n=e.endOffset();for(;t[i]&&"text"===t[i].mode&&Xo.test(t[i].body);)i-=1;for(;t[n]&&"text"===t[n].mode&&Xo.test(t[n].body);)n+=1;if(i>=(n-=1))return Xa(e,e.endOffset()-1,1),!0;Xa(e,i,n-i)}else if("mord"===e.sibling(0).type&&/[0-9,.]/.test(e.sibling(0).body)){let i=e.startOffset(),n=e.endOffset();for(;Wa(t[i]);)i-=1;for(;Wa(t[n]);)n+=1;Xa(e,i,(n-=1)-i)}else Xa(e,0,"end");return!0}function nl(e){return e.path=[{relation:"body",offset:0}],Xa(e,0,"end")}function rl(e){return 0===e.extent}function ol(e,t){e.extent=t}function sl(e){return 0!==e.extent&&(Xa(e,e.endOffset()),!0)}function al(e){return 0!==e.extent&&(Xa(e,e.startOffset()),!0)}function ll(e){if(e.path.length>1){const t=e.clone();return e.path.pop(),ol(e,0),e.announce("move",t),!0}return e.announce("plonk"),!1}function cl(e,t,i,n={extendToWordBoundary:!1}){const r=ya(t,i);if(0===r)return n.extendToWordBoundary?cl(e,t=pl(e,t,-1),i=pl(e,i,1)):Ia(e,va(t),0);if(1===r){const r=i[i.length-1].offset-t[t.length-1].offset;return n.extendToWordBoundary?cl(e,t=pl(e,t,r<0?1:-1),i=pl(e,i,r<0?-1:1)):Ia(e,va(t),r)}let o=function(e,t){const i=[],n=Math.min(e.length-1,t.length-1);let r=0;for(;r<=n&&e[r].relation===t[r].relation&&e[r].offset===t[r].offset;)i.push(e[r]),r+=1;return i}(t,i);const s=o.length;if(t.length===s||i.length===s||t[s].relation!==i[s].relation)return Ia(e,o,-1);o.push(t[s]),o=va(o);let a=i[s].offset-t[s].offset+1;return a<=0?i.length>s+1?(o[s].relation=i[s].relation,o[s].offset=i[s].offset,o[o.length-1].offset-=1,a=2-a):(o[s].relation=i[s].relation,o[s].offset=i[s].offset,a=1-a):i.length<=t.length?o[o.length-1].offset-=1:i.length>t.length&&(o[s].offset-=1),Ia(e,o,a)}function dl(e,t,i){var n;(i=null!=i?i:{}).recursive=null!==(n=i.recursive)&&void 0!==n&&n;const r=e.siblings(),o=e.startOffset()+1,s=e.endOffset()+1;if(i.recursive)for(let a=o;a<s;a++)r[a]&&"first"!==r[a].type&&r[a].forEach(t);else for(let a=o;a<s;a++)r[a]&&"first"!==r[a].type&&t(r[a])}function pl(e,t,i){i=i<0?-1:1;const n=new Cc;n.path=va(t),n.root=e.root;let r=0;for(;n.sibling(r)&&"text"===n.sibling(r).mode&&Xo.test(n.sibling(r).body);)r+=i;return n.sibling(r)||(r-=i),n.path[n.path.length-1].offset+=r,n.path}function hl(e,t,i=1){i=i<0?-1:1;const n=[],r=new Cc;r.path=va(e.path),r.extent=e.extent,r.root=e.root,i>=0?sl(r):(al(r),Ga(r,"forward"));const o=Ra(r);do{t(Ra(r),r)&&n.push(r.toString()),i>=0?Za(r,{iterateAll:!0}):Ja(r,{iterateAll:!0})}while(o!==Ra(r));return n}const ul="apple"===yl()?{id:"apple.en-intl",displayName:"English (international)",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," "," "," "],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","","`","`"],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["","","",""],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===yl()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",locale:"en",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","",""],Digit2:["2","@","",""],Digit3:["3","#","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","^","",""],Digit7:["7","&","",""],Digit8:["8","*","",""],Digit9:["9","(","",""],Digit0:["0",")","",""],Space:[" "," ","",""],Minus:["-","_","",""],Equal:["=","+","",""],BracketLeft:["[","{","",""],BracketRight:["]","}","",""],Backslash:["\\","|","",""],Semicolon:[";",":","",""],Quote:["'",'"',"",""],Backquote:["`","~","",""],Comma:[",","<","",""],Period:[".",">","",""],Slash:["/","?","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},ml={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},fl=[];let gl;function yl(){let e="linux";return(null===navigator||void 0===navigator?void 0:navigator.platform)&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)&&(/^(mac)/i.test(navigator.platform)?e="apple":/^(win)/i.test(navigator.platform)?e="windows":/(android)/i.test(navigator.userAgent)?e="linux":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?e="apple":/\bCrOS\b/i.test(navigator.userAgent)&&(e="linux")),e}function vl(e){e.platform===yl()&&fl.push(e)}function bl(e){gl=fl.find(t=>e.startsWith(t.locale))}function xl(){return null!=gl?gl:fl[0]}vl(ul),vl({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","","|"],KeyM:[",","?","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","",""],Digit3:['"',"3","",""],Digit4:["'","4","",""],Digit5:["(","5","{","["],Digit6:["","6","",""],Digit7:["","7","",""],Digit8:["!","8","",""],Digit9:["","9","",""],Digit0:["","0","",""],Space:[" "," "," "," "],Minus:[")","","}","]"],Equal:["-","_","",""],BracketLeft:["^","","",""],BracketRight:["$","*","",""],Backslash:["`","","@","#"],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["<",">","",""],Comma:[";",".","",""],Period:[":","/","","\\"],Slash:["=","+","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","",""],NumpadEqual:["=","=","=","="]}}),vl({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C",""," "],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H",""," "],KeyI:["i","I"," "," "],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L"," ",""],KeyM:["m","M","",""],KeyN:["n","N"," ",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R",""," "],KeyS:["s","S",""," "],KeyT:["t","T","",""],KeyU:["u","U"," "," "],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y",""," "],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&",""," "],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["","","\\",""]}}),vl({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["","","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","",""],Quote:["","","{",""],Backquote:["","","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),vl({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["z","Z","","<"],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","","#",""],Digit4:["4","$","~","$"],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Enter:["\r","\r","\r","\r"],Escape:["","","",""],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\",""],Equal:["","","","~"],BracketLeft:["","","[",""],BracketRight:["+","*","]",""],Backslash:["","","}",""],Semicolon:["","","~",""],Quote:["","","{","{"],Backquote:["","","\\","\\"],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),vl({id:"linux.french",locale:"fr",displayName:"French",platform:"apple",score:0,mapping:{KeyA:["q","Q","@",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","","&"],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","n","N"],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","","<"],KeyX:["x","X","",">"],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{","$"],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Enter:["\r","\r","\r","\r"],Escape:["","","",""],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","~","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|",""]}}),vl({id:"windows.french",locale:"fr",displayName:"French",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["","7","`",""],Digit8:["_","8","\\",""],Digit9:["","9","^",""],Digit0:["","0","@",""],Space:[" "," ","",""],Minus:[")","","]",""],Equal:["=","+","}",""],BracketLeft:["^","","",""],BracketRight:["$","","",""],Backslash:["*","","",""],Semicolon:["m","M","",""],Quote:["","%","",""],Backquote:["","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),vl({id:"windows.german",locale:"de",displayName:"German",platform:"windows",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["","?","\\",""],Equal:["","`","",""],BracketLeft:["","","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["^","","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),vl({id:"apple.german",locale:"de",displayName:"German",platform:"apple",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","@",""],KeyM:["m","M","",""],KeyN:["n","N","~",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"",""],Digit3:["3","","","#"],Digit4:["4","$","",""],Digit5:["5","%","[",""],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{",""],Digit9:["9",")","}",""],Digit0:["0","=","",""],Space:[" "," "," "," "],Minus:["","?","",""],Equal:["","`","'",""],BracketLeft:["","","",""],BracketRight:["+","*","",""],Backslash:["#","'","",""],Semicolon:["","","",""],Quote:["","","",""],Backquote:["<",">","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","","",""],NumpadEqual:["=","=","=","="]}});const kl=[{key:"ctrl+alt+e",command:["insert","\\text{cmd+alt+e}"]},{key:"cmd+alt+a",command:["insert","\\text{cmd+alt+a}"]},{key:"ctrl+alt+a",command:["insert","\\text{ctrl+alt+a}"]},{key:"meta+alt+2",command:["insert","\\text{meta+alt+2}"]},{key:"ctrl+alt+shift+a",command:["insert","\\text{ctrl+alt+shift+a}"]},{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendToPreviousChar"},{key:"shift+[ArrowRight]",command:"extendToNextChar"},{key:"shift+[ArrowUp]",command:"extendUp"},{key:"shift+[ArrowDown]",command:"extendDown"},{key:"[Backspace]",command:"deletePreviousChar"},{key:"alt+[Delete]",command:"deletePreviousChar"},{key:"[Delete]",command:"deleteNextChar"},{key:"alt+[Backspace]",command:"deleteNextChar"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"alt+shift+[ArrowLeft]",command:"extendToPreviousWord"},{key:"alt+shift+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"ctrl+shift+[ArrowLeft]",command:"extendToGroupStart"},{key:"ctrl+shift+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathFieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathFieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"cmd+shift+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathFieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathFieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"cmd+shift+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","command"]},{key:"\\",ifMode:"math",command:["switchMode","command"]},{key:"alt+[Equal]",ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"[Escape]",ifMode:"command",command:["complete",{discard:!0}]},{key:"[Tab]",ifMode:"command",command:["complete",{acceptSuggestion:!0}]},{key:"[Return]",ifMode:"command",command:"complete"},{key:"[Enter]",ifMode:"command",command:"complete"},{key:"shift+[Escape]",ifMode:"command",command:["complete",{discard:!0}]},{key:"[ArrowDown]",ifMode:"command",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"command",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deletePreviousChar"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"[Undo]",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"cmd+shift+y",command:"redo"},{key:"ctrl+shift+z",ifPlatform:"!macos",command:"redo"},{key:"cmd+shift+z",command:"redo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathFieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathFieldEnd"},{key:"ctrl+shift+b",ifPlatform:"macos",command:"extendToPreviousChar"},{key:"ctrl+shift+f",ifPlatform:"macos",command:"extendToNextChar"},{key:"ctrl+shift+p",ifPlatform:"macos",command:"extendUp"},{key:"ctrl+shift+n",ifPlatform:"macos",command:"extendDown"},{key:"ctrl+shift+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"ctrl+shift+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"ctrl+alt+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"ctrl+alt+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"ctrl+shift+alt+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"ctrl+shift+alt+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deletePreviousChar"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteNextChar"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"shift+[Quote]",ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifMode:"text",command:["switchMode","math","",""]},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","$$\\sqrt{#0}$$"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Minus]",ifMode:"math",command:"moveToSubscript"},{key:"alt+[BracketLeft]",ifMode:"math",command:["insert","$$\\left\\lbrack #0 \\right\\rbrack$$"]},{key:"alt+shift+[BracketLeft]",ifMode:"math",command:["insert","$$\\left\\lbrace #0 \\right\\rbrace$$"]},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+;",ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifMode:"math",command:"addRowAfter"},{key:"ctrl+shift+;",ifMode:"math",command:"addRowBefore"},{key:"cmd+shift+;",ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Comma]",ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifMode:"math",command:"addColumnAfter"},{key:"ctrl+shift+[Comma]",ifMode:"math",command:"addColumnAfter"},{key:"cmd+shift+[Comma]",ifMode:"math",command:"addColumnAfter"},{key:"alt+p",ifMode:"math",command:["insert","$$\\pi$$"]},{key:"alt+v",ifMode:"math",command:["insert","$$\\sqrt{#0}$$"]},{key:"alt+w",ifMode:"math",command:["insert","$$\\sum_{i=#?}^{#?}$$"]},{key:"alt+u",ifMode:"math",command:["insert","$$\\cup$$"]},{key:"alt+n",ifMode:"math",command:["insert","$$\\cap$$"]},{key:"alt+o",ifMode:"math",command:["insert","$$\\emptyset$$"]},{key:"alt+d",ifMode:"math",command:["insert","$$\\differentialD$$"]},{key:"alt+shift+o",ifMode:"math",command:["insert","$$\\varnothing$$"]},{key:"alt+shift+d",ifMode:"math",command:["insert","$$\\partial$$"]},{key:"alt+shift+p",ifMode:"math",command:["insert","$$\\prod_{i=#?}^{#?}$$"]},{key:"alt+shift+u",ifMode:"math",command:["insert","$$\\bigcup$$"]},{key:"alt+shift+n",ifMode:"math",command:["insert","$$\\bigcap$$"]},{key:"alt+shift+a",ifMode:"math",command:["insert","$$\\forall$$"]},{key:"alt+shift+e",ifMode:"math",command:["insert","$$\\exists$$"]},{key:"alt+[Digit5]",ifMode:"math",command:["insert","$\\infty$$"]},{key:"alt+[Digit6]",ifMode:"math",command:["insert","$$\\wedge$$"]},{key:"alt+shift+[Digit6]",ifMode:"math",command:["insert","$$\\vee$$"]},{key:"alt+[Digit9]",ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifMode:"math",command:["insert",")"]},{key:"alt+shift+[Backslash]",ifMode:"math",command:["insert","|"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","$$\\backslash$$"]},{key:"/",ifMode:"math",command:["insert","$$\\frac{#@}{#?}$$"]},{key:"alt+/",ifMode:"math",command:["insert","$$\\/$$"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","$$\\frac{#@}{#?}$$"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+[Backquote]",ifMode:"math",command:["insert","$$\\~$$"]},{key:"alt+shift+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"ctrl+alt+[ArrowUp]",command:["speak","parent",{withHighlighting:!1}]},{key:"ctrl+alt+[ArrowDown]",command:["speak","all",{withHighlighting:!1}]}],_l={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"alt+shift+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"alt+shift+u","\\bigcap":"alt+shift+n","\\forall":"alt+shift+a","\\exists":"alt+shift+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit5]","\\vee":"alt+shift+[Digit6]","\\differentialD":"alt+d","\\partial":"alt+shift+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"alt+shift+o","\\~":"~"};function wl(e){if((null===navigator||void 0===navigator?void 0:navigator.platform)&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)){let t;if(/^(mac)/i.test(navigator.platform)?t="macos":/^(win)/i.test(navigator.platform)?t="windows":/(android)/i.test(navigator.userAgent)?t="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?t="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(t="chromeos"),e.startsWith("!")&&!e.endsWith(t))return!0;if(e.endsWith(t))return!0}return!1}function Ml(e){let t=e;return Jr(t)&&(t=t.length>0?t[0]+"("+t.slice(1).join("")+")":""),t}function zl(e){var t;const i=wl("macos")||wl("ios"),n=e.split("+");let r="";for(const o of n)!i&&r&&(r+='<span class="ML__shortcut-join">+</span>'),o.startsWith("Key")?r+=o.substr(3,1):o.startsWith("Digit")?r+=o.substr(5,1):r+=null!==(t={cmd:"",meta:i?"":"command",shift:i?"":"shift",alt:i?"":"alt",ctrl:i?"":"control","\n":i?"":"return","[return]":i?"":"return","[enter]":i?"":"enter","[tab]":i?"":"tab","[escape]":"esc","[backspace]":i?"":"backspace","[delete]":i?"":"del","[pageup]":i?"":"page up","[pagedown]":i?"":"page down","[home]":i?"":"home","[end]":i?"":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"",up:"",right:"",down:"","[arrowleft]":"","[arrowup]":"","[arrowright]":"","[arrowdown]":"","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[o.toLowerCase()])&&void 0!==t?t:o.toUpperCase();return r}function Sl(e,t){const i=[],n=[];return e.forEach(e=>{try{const t=function(e){if(e.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(e.ifPlatform))throw new Error(`Unexpected platform "${e.ifPlatform}" for keybinding ${e.key}`);let t=e.key.split("+");const i=t.pop();let n=e.ifPlatform;if(t=t.map(e=>{const t=e.toLowerCase();if("cmd"===t){if(n&&"macos"!==n&&"ios"!==n)throw new Error('Unexpected "cmd" modifier with platform "'+n+'"');return n||(n=wl("ios")?"ios":"macos"),"meta"}if("win"===t){if(n&&"windows"!==n)throw new Error('Unexpected "win" modifier with platform "'+n+'"');return n="windows","meta"}return t}),!n||wl(n)){if(/^\[(.*)\]$/.test(i))t.push(i);else{const n=function(e){var t,i;const n=null!==(t=xl())&&void 0!==t?t:ul;for(const[r,o]of Object.entries(n.mapping)){if(o[0]===e)return"["+r+"]";if(o[1]===e)return"shift+["+r+"]";if(o[2]===e)return"alt+["+r+"]";if(o[3]===e)return"shift+alt+["+r+"]"}return null!==(i=ml[e])&&void 0!==i?i:""}(i);if(!n)throw new Error('Invalid keybinding key "'+e.key+'"');t=t.concat(n.split("+"))}return{...e,ifPlatform:n,key:t.join("+")}}}(e);t&&i.push(t)}catch(e){n.push(e.message)}}),n.length>0&&t(n),i}function Ll(e,t,i,n){const r=t.split(" ");for(const o of r){const t=o.match(/(.*):(.*)/);if(t){const r=null!=n?n:{};"active"===t[2]?r.passive=!1:r[t[2]]=!0,e.addEventListener(t[1],i,r)}else e.addEventListener(o,i,n)}}function Cl(e,t,i,n){const r=t.split(" ");for(const o of r){const t=o.match(/(.*):(.*)/);if(t){const r=null!=n?n:{};"active"===t[2]?r.passive=!1:r[t[2]]=!0,e.removeEventListener(t[1],i,r)}else e.removeEventListener(o,i,n)}}function Al(e,t){let i=document.getElementById(e);return i?i.setAttribute("data-refcount",Number(parseInt(i.getAttribute("data-refcount"))+1).toString()):((i=document.createElement("div")).setAttribute("aria-hidden","true"),i.setAttribute("data-refcount","1"),i.className=t,i.id=e,document.body.appendChild(i)),i}function Dl(e){if(!e)return;const t=parseInt(e.getAttribute("data-refcount"));t<=1?e.remove():e.setAttribute("data-refcount",Number(t-1).toString())}function Tl(e){return e.element&&e.element.mathfield===e}function $l(e){const t=function(e){var t,i;return null!==(i=null!==(t=e.querySelector(".ML__caret"))&&void 0!==t?t:e.querySelector(".ML__text-caret"))&&void 0!==i?i:e.querySelector(".ML__command-carett")}(e);if(t){const e=t.getBoundingClientRect();return{x:e.right,y:e.bottom,height:e.height}}return null}function Ol(e){const t=e.querySelectorAll(".ML__selected");if(t&&t.length>0){const i={top:1/0,bottom:-1/0,left:1/0,right:-1/0};t.forEach(e=>{const t=e.getBoundingClientRect();t.left<i.left&&(i.left=t.left),t.right>i.right&&(i.right=t.right),t.bottom>i.bottom&&(i.bottom=t.bottom),t.top<i.top&&(i.top=t.top)});const n=e.getBoundingClientRect(),r=i.right-i.left,o=i.bottom-i.top;return i.left=Math.ceil(i.left-n.left+e.scrollLeft),i.right=i.left+r,i.top=Math.ceil(i.top-n.top),i.bottom=i.top+o,i}return null}function Nl(e,t,i){let n,r,o,s,a;"object"==typeof i&&(i.default||i.pressed)?(i.default&&t.setAttribute("data-"+e.options.namespace+"command",JSON.stringify(i.default)),i.alt&&t.setAttribute("data-"+e.options.namespace+"command-alt",JSON.stringify(i.alt)),i.altshift&&t.setAttribute("data-"+e.options.namespace+"command-altshift",JSON.stringify(i.altshift)),i.shift&&t.setAttribute("data-"+e.options.namespace+"command-shift",JSON.stringify(i.shift)),i.pressed&&t.setAttribute("data-"+e.options.namespace+"command-pressed",JSON.stringify(i.pressed)),i.pressAndHoldStart&&t.setAttribute("data-"+e.options.namespace+"command-pressAndHoldStart",JSON.stringify(i.pressAndHoldStart)),i.pressAndHoldEnd&&t.setAttribute("data-"+e.options.namespace+"command-pressAndHoldEnd",JSON.stringify(i.pressAndHoldEnd))):t.setAttribute("data-"+e.options.namespace+"command",JSON.stringify(i)),Ll(t,"mousedown touchstart:passive",i=>{if("mousedown"!==i.type||1===i.buttons){i.stopPropagation(),"touchstart"!==i.type&&i.preventDefault(),t.classList.add("pressed"),n=Date.now(),"touchstart"===i.type&&(o=i.changedTouches[0].identifier);const s=t.getAttribute("data-"+e.options.namespace+"command-pressed");s&&e.executeCommand(JSON.parse(s));const l=t.getAttribute("data-"+e.options.namespace+"command-pressAndHoldStart");l&&(r=t,a&&clearTimeout(a),a=window.setTimeout(function(){t.classList.contains("pressed")&&e.executeCommand(JSON.parse(l))},300))}}),Ll(t,"mouseleave touchcancel",()=>{t.classList.remove("pressed")}),Ll(t,"touchmove:passive",e=>{for(let t=0;t<e.changedTouches.length;t++)if(e.changedTouches[t].identifier===o){const i=document.elementFromPoint(e.changedTouches[t].clientX,e.changedTouches[t].clientY);i!==s&&s&&(s.dispatchEvent(new MouseEvent("mouseleave"),{bubbles:!0}),s=null),i&&(s=i,i.dispatchEvent(new MouseEvent("mouseenter",{bubbles:!0,buttons:1})))}}),Ll(t,"mouseenter",e=>{1===e.buttons&&t.classList.add("pressed")}),Ll(t,"mouseup touchend click",i=>{if(s){i.stopPropagation(),i.preventDefault();const e=s;return s=null,void e.dispatchEvent(new MouseEvent("mouseup",{bubbles:!0}))}if(t.classList.remove("pressed"),t.classList.add("active"),"click"===i.type&&0!==i.detail)return i.stopPropagation(),void i.preventDefault();window.setTimeout(function(){t.classList.remove("active")},150);let o=t.getAttribute("data-"+e.options.namespace+"command-pressAndHoldEnd");const a=Date.now();(t!==r||a<n+300)&&(o=void 0),!o&&i.altKey&&i.shiftKey&&(o=t.getAttribute("data-"+e.options.namespace+"command-altshift")),!o&&i.altKey&&(o=t.getAttribute("data-"+e.options.namespace+"command-alt")),!o&&i.shiftKey&&(o=t.getAttribute("data-"+e.options.namespace+"command-shift")),o||(o=t.getAttribute("data-"+e.options.namespace+"command")),o&&e.executeCommand(JSON.parse(o)),i.stopPropagation(),i.preventDefault()})}const El={"\\text":"roman text","\\textrm":"roman text","\\textnormal":"roman text","\\textit":"italic text","\\textbf":"bold text","\\texttt":"monospaced text","\\textsf":"sans-serif text","\\mathrm":["roman","(upright)"],"\\mathbf":"bold","\\bf":"bold","\\bold":"bold","\\mathit":"italic","\\mathbb":"blackboard","\\mathscr":"script","\\mathtt":["typewriter","(monospaced)"],"\\mathsf":"sans-serif","\\mathcal":"caligraphic","\\frak":["fraktur","(gothic)"],"\\mathfrak":["fraktur","(gothic)"],"\\textcolor":"text color","\\color":"color","\\forall":"for all","\\exists":"there exists","\\nexists":"there does not exist","\\frac":"fraction","\\dfrac":"display fraction","\\cfrac":"continuous fraction","\\tfrac":"text fraction","\\binom":"binomial coefficient","\\dbinom":"display binomial coefficient","\\tbinom":"text binomial coefficient","\\pdiff":"partial differential","\\vec":"vector","\\check":"caron","\\acute":"acute","\\breve":"breve","\\tilde":"tilde","\\dot":"dot","\\hat":["hat","circumflex"],"\\ddot":"double dot","\\bar":"bar","\\prime":"prime","\\doubleprime":"double prime","\\varnothing":"empty set","\\emptyset":"empty set","\\subseteq":"subset of or <br>equal to","\\supseteq":"superset of or <br>equal to","\\supset":"superset of","\\subset":"subset of","\\partial":"partial derivative","\\bigcup":"union","\\bigcap":"intersection","\\approx":"approximately equal to","\\notin":"not an element of","\\in":["element of","included in"],"\\infty":"infinity","\\land":"logical and","\\sqrt":"square root","\\prod":"product","\\sum":"summation","\\amalg":["amalgamation","coproduct","free product","disjoint union"],"\\cup":"union with","\\cap":"intersection with","\\int":"integral","\\iint":"surface integral","\\oint":"curve integral","\\iiint":"volume integral","\\iff":"if and only if","\\ln":"natural logarithm","\\boldsymbol":"bold","\\setminus":"set subtraction","\\stackrel":"relation with symbol above","\\stackbin":"operator with symbol above","\\underset":"symbol with annotation below","\\overset":"symbol with annotation above","\\hslash":["h-bar","Planck constant"],"\\gtrsim":"greater than or <br>similar to","\\propto":"proportional to","\\equiv":"equivalent to","\\!":["negative thin space","(-3 mu)"],"\\ ":["space","(6 mu)"],"\\,":["thin space","(3 mu)"],"\\:":["medium space","(4 mu)"],"\\;":["thick space","(5 mu)"],"\\quad":["1 em space","(18 mu)"],"\\qquad":["2 em space","(36 mu)"],"\\enskip":["&#189; em space","(9 mu)"],"\\mp":"minus or plus","\\pm":"plus or minus","\\Im":"Imaginary part of","\\Re":"Real part of","\\gothicCapitalR":"Real part of","\\gothicCapitalI":"Imaginary part part of","\\differentialD":"differential d","\\aleph":["aleph","infinite cardinal",'<a target="_blank" href="https://en.wikipedia.org/wiki/Cardinal_number">Wikipedia <big>&#x203A;</big></a>'],"\\beth":["beth","beth number",'<a target="_blank" href="https://en.wikipedia.org/wiki/Beth_number">Wikipedia <big>&#x203A;</big></a>'],"\\gimel":["gimel","gimel function",'<a target="_blank" href="https://en.wikipedia.org/wiki/Gimel_function">Wikipedia <big>&#x203A;</big></a>'],"\\O":"empty set","\\N":"set of <br>natural numbers","\\Z":"set of <br>integers","\\Q":"set of <br>rational numbers","\\C":"set of <br>complex numbers","\\R":"set of <br>real numbers","\\P":"set of <br>prime numbers","\\lesseqqgtr":"less than, equal to or<br> greater than","\\gnapprox":"greater than and <br>not approximately","\\lnapprox":"lesser than and <br>not approximately","\\j":"dotless j","\\i":"dotless i","\\cdot":"centered dot","\\lmoustache":"left moustache","\\rmoustache":"right moustache","\\nabla":["nabla","del","differential vector operator"],"\\square":["square","dAlembert operator",'<a target="_blank" href="https://en.wikipedia.org/wiki/D%27Alembert_operator">Wikipedia <big>&#x203A;</big></a>'],"\\blacksquare":["black square","end of proof","tombstone","Halmos symbol"],"\\Box":"end of proof","\\colon":["such that","ratio"],"\\coloneq":["is defined by","is assigned"],"\\Colon":["is defined by","as"],"\\_":["underbar","underscore"],"\\ll":"much less than","\\gg":"much greater than","\\doteq":"approximately equal to","\\Doteq":"approximately equal to","\\doteqdot":"approximately equal to","\\cong":["isomorphism of","(for algebras, modules...)"],"\\det":["determinant of","(of a matrix)"],"\\dotplus":"Cartesian product algebra","\\otimes":["tensor product","(of algebras)","Kronecker product","(of matrices)"],"\\oplus":["direct sum","(of modules)"],"\\lb":"base-2 logarithm","\\lg":"base-10 logarithm","\\wp":["Weierstrass P",'<a target="_blank" href="https://en.wikipedia.org/wiki/Weierstrass%27s_elliptic_functions">Wikipedia <big>&#x203A;</big></a>'],"\\wr":["wreath product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Wreath_product">Wikipedia <big>&#x203A;</big></a>'],"\\top":["tautology","Proposition P is universally true"],"\\bot":["contradiction","Proposition P is contradictory"],"\\mid":["probability","of event A given B"],"\\mho":["Siemens","electrical conductance in SI unit",'<a target="_blank" href="https://en.wikipedia.org/wiki/Siemens_(unit)">Wikipedia <big>&#x203A;</big></a>'],"\\Longrightarrow":"implies","\\Longleftrightarrow":"if, and only if,","\\prec":"precedes","\\preceq":"precedes or is equal to","\\succ":"succeedes","\\succeq":"succeedes or is equal to","\\perp":["is perpendicular to","is independent of"],"\\models":["entails","double-turnstyle, models","is a semantic consequence of",'<a target="_blank" href="https://en.wikipedia.org/wiki/Double_turnstile">Wikipedia <big>&#x203A;</big></a>'],"\\vdash":["satisfies","turnstyle, assertion sign","syntactic inference",'<a target="_blank" href="https://en.wikipedia.org/wiki/Turnstile_(symbol)">Wikipedia <big>&#x203A;</big></a>'],"\\implies":["implies","logical consequence"],"\\impliedby":["implied by","logical consequence"],"\\surd":["surd","root of","checkmark"],"\\ltimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rtimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\leftthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\rightthreetimes":["semi direct product",'<a target="_blank" href="https://en.wikipedia.org/wiki/Semidirect_product">Wikipedia <big>&#x203A;</big></a>'],"\\divideontimes":["divide on times"],"\\curlywedge":"nor","\\curlyvee":"nand","\\simeq":"is group isomorphic with","\\vartriangleleft":["is a normal subgroup of","is an ideal ring of"],"\\circ":["circle","ring","function composition"],"\\rlap":["overlap right","\\rlap{x}o"],"\\llap":["overlap left","o\\llap{/}"],"\\colorbox":["color box","\\colorbox{#fbc0bd}{...}"],"\\ast":["asterisk","reflexive closure (as a superscript)"],"\\bullet":"bullet","\\lim":"limit"};function ql(e,t,i){if(!t||0===t.length)return void Pl(e);const n=t,r=function(e,t){const i=sa(e,"math",null,t.options.macros);return No($o(Ys({mathstyle:mo.displaystyle,macros:t.options.macros},i),"ML__base"),"ML__mathlive").toMarkup()}(t,e),o=function(e){let t=El[n]||"";return Jr(t)&&(t=t.join("<br>")),t}(),s=function(e,t){let i=[];if("string"==typeof t){const e=_l[t];Jr(e)?i=e.slice():e&&i.push(e)}const n=Ml(t),r=new RegExp("^"+n.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");return e.forEach(e=>{r.test(Ml(e.command))&&i.push(e)}),i.map(zl)}(e.keybindings,n).join("<br>");let a=i?'<div class="ML__popover__prev-shortcut" role="button" aria-label="Previous suggestion"><span><span>&#x25B2;</span></span></div>':"";a+='<span class="ML__popover__content" role="button">',a+='<div class="ML__popover__command">'+r+"</div>",o&&(a+='<div class="ML__popover__note">'+o+"</div>"),s&&(a+='<div class="ML__popover__shortcut">'+s+"</div>"),a+="</span>",function(e,t){e.popover.innerHTML=e.options.createHTML(t);const i=$l(e.field);i&&Bl(e,i),e.popover.classList.add("is-visible")}(e,a+=i?'<div class="ML__popover__next-shortcut" role="button" aria-label="Next suggestion"><span><span>&#x25BC;</span></span></div>':"");let l=e.popover.getElementsByClassName("ML__popover__content");l&&l.length>0&&Nl(e,l[0],{default:["complete",{acceptSuggestion:!0}]}),(l=e.popover.getElementsByClassName("ML__popover__prev-shortcut"))&&l.length>0&&Nl(e,l[0],"previousSuggestion"),(l=e.popover.getElementsByClassName("ML__popover__next-shortcut"))&&l.length>0&&Nl(e,l[0],"nextSuggestion")}function Kl(e,t){if(e.element&&e.element.mathfield===e&&e.popover.classList.contains("is-visible"))if(null==t?void 0:t.deferred)window.requestAnimationFrame(()=>Kl(e));else if(Ra(e.model)&&"command"===Ra(e.model).type){const t=$l(e.field);t&&Bl(e,t)}else Pl(e)}function Bl(e,t){const i=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,r=window.innerWidth-document.documentElement.clientWidth,o=window.innerHeight-document.documentElement.clientHeight,s=e.virtualKeyboardVisible?e.virtualKeyboard.element.offsetHeight:0;t.x+e.popover.offsetWidth/2>n-r?e.popover.style.left=n-e.popover.offsetWidth-r+"px":t.x-e.popover.offsetWidth/2<0?e.popover.style.left="0":e.popover.style.left=t.x-e.popover.offsetWidth/2+"px",t.y+e.popover.offsetHeight+5>i-o-s?(e.popover.classList.add("ML__popover--reverse-direction"),e.popover.style.top=t.y-t.height-e.popover.offsetHeight-5+"px"):(e.popover.classList.remove("ML__popover--reverse-direction"),e.popover.style.top=t.y+5+"px")}function Pl(e){e.popover.classList.remove("is-visible")}function Rl(e,t=!1){var i;let n="";const r=ja(e);if(r){const o=t?e.anchorOffset()+1:r.end,s=e.siblings();for(let e=r.start;e<o;e++)n+=null!==(i=s[e].body)&&void 0!==i?i:""}return n}function Il(e,t){const i=ja(e);if(i){const n=e.siblings();for(let e=i.start;e<i.end;e++)n[e].isError=t}}function Fl(e,t){const i=ja(e);if(i){if(t){e.siblings().splice(i.start,i.end-i.start,...t);const n=[];for(const e of t)e.forEach(e=>{"placeholder"===e.type&&n.push(e)});ol(e,0),e.path[e.path.length-1].offset=i.start-1,0!==n.length&&Ua(e,1,!1)||Xa(e,i.start+t.length-1)}else e.siblings().splice(i.start,i.end-i.start),Xa(e,i.start-1,0);Pa(e)}}function Vl(e){const t=e.suppressChangeNotifications;e.suppressChangeNotifications=!0,function e(t){if(t)if(Jr(t))for(let i=t.length-1;i>=0;i--)"command"===t[i].type?t.splice(i,1):e(t[i]);else if(e(t.body),e(t.superscript),e(t.subscript),e(t.underscript),e(t.overscript),e(t.numer),e(t.denom),e(t.index),t.array)for(let i=_a(t.array);i>=0;i--)e(ka(t.array,i))}(e.root.body),e.suppressChangeNotifications=t,Pa(e)}const Wl={"\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"","\\mid":"","\\lbrace":"{","\\rbrace":"}","\\langle":"","\\rangle":"","\\lfloor":"","\\rfloor":"","\\lceil":"","\\rceil":"","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"};function jl(e){return e.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Hl(e,t){return e&&t.generateID?' extid="'+e+'"':""}function Ul(e,t,i){let n=!1;t=t||e.atoms.length;let r="",o="",s=-1,a=-1;const l=e.atoms[e.index];if(e.index<t&&("mord"===l.type||"textord"===l.type)&&"0123456789,.".indexOf(l.body)<0&&(o=rc(l,i),l.superscript&&(s=e.index),l.subscript&&(a=e.index),e.index+=1),o.length>0){if(n=!0,Xl(e)&&(s=e.index,e.index+=1),Zl(e)&&(a=e.index,e.index+=1),s>=0&&a>=0)r="<msubsup>"+o,r+=tc(e.atoms[a].subscript,0,0,i).mathML,r+=tc(e.atoms[s].superscript,0,0,i).mathML,r+="</msubsup>";else if(s>=0){if(r="<msup>"+o,Xl(e)){const t=tc(e.atoms[s].superscript,0,0,i).mathML,n=tc(e.atoms[s+1].superscript,0,0,i).mathML;r+="<mi></mi>"!==t&&"<mi>&#x2032;</mi>"!==t||"<mi></mi>"!==n&&"<mi>&#x2032;</mi>"!==n?"<mi></mi>"===t||"<mi>&#x2032;</mi>"===t?"<mi>&#x2032;</mi>":t:"<mi>&#x2033;</mi>"}else r+=tc(e.atoms[s].superscript,0,0,i).mathML;r+="</msup>"}else a>=0?(r="<msub>"+o,r+=tc(e.atoms[a].subscript,0,0,i).mathML,r+="</msub>"):r=o;"mi"!==e.lastType&&"mn"!==e.lastType&&"mtext"!==e.lastType&&"fence"!==e.lastType||/^<mo>(.*)<\/mo>$/.test(r)||(r="<mo>&#8290;</mo>"+r),o.endsWith(">f</mi>")||o.endsWith(">g</mi>")?(r+="<mo>&x2061;</mo>",e.lastType="applyfunction"):e.lastType=/^<mo>(.*)<\/mo>$/.test(r)?"mo":"mi",e.mathML+=r}return n}function Xl(e){return e.index<e.atoms.length&&e.atoms[e.index].superscript&&"msubsup"===e.atoms[e.index].type}function Zl(e){return e.index<e.atoms.length&&e.atoms[e.index].subscript&&"msubsup"===e.atoms[e.index].type}function Jl(e,t,i){let n=!1,r="",o=t.atoms[t.index-1];return!!o&&(o.superscript||o.subscript||(Xl(t)||Zl(t))&&(o=t.atoms[t.index],t.index+=1),!!o&&(o.superscript&&o.subscript?(r="<msubsup>"+e,r+=tc(o.subscript,0,0,i).mathML,r+=tc(o.superscript,0,0,i).mathML,r+="</msubsup>"):o.superscript?(r="<msup>"+e,r+=tc(o.superscript,0,0,i).mathML,r+="</msup>"):o.subscript&&(r="<msub>"+e,r+=tc(o.subscript,0,0,i).mathML,r+="</msub>"),r.length>0&&(n=!0,t.mathML+=r,t.lastType=""),n))}function Gl(e,t,i){let n=!1;t=t||e.atoms.length;const r=e.index;let o="";for(;e.index<t&&"text"===e.atoms[e.index].mode;)o+=e.atoms[e.index].body?e.atoms[e.index].body:" ",e.index+=1;return o.length>0&&(n=!0,o="<mtext"+Hl(e.atoms[r].id,i)+">"+o+"</mtext>",e.mathML+=o,e.lastType="mtext"),n}function Yl(e,t,i){let n=!1;t=t||e.atoms.length;const r=e.index;let o="",s=function(e){let t=-1,i=e.index,n=!1,r=!1;for(;i<e.atoms.length&&!n&&!r;)r=!(n="mord"!==e.atoms[i].type||"0123456789,.".indexOf(e.atoms[i].body)<0)&&e.atoms[i].superscript,i++;return r&&(t=i-1),t}(e);for(s>=0&&s<t&&(t=s);e.index<t&&"mord"===e.atoms[e.index].type&&"0123456789,.".indexOf(e.atoms[e.index].body)>=0;)o+=e.atoms[e.index].body,e.index+=1;return o.length>0&&(n=!0,o="<mn"+Hl(e.atoms[r].id,i)+">"+o+"</mn>",s<0&&Xl(e)&&(s=e.index,e.index+=1),s>=0&&(o="<msup>"+o,o+=tc(e.atoms[s].superscript,0,0,i).mathML,o+="</msup>"),e.mathML+=o,e.lastType="mn"),n}function Ql(e,t,i){let n=!1;t=t||e.atoms.length;let r="",o="";if(e.index<t&&"mopen"===e.atoms[e.index].type){let s=!1,a=0;const l=e.index;let c=-1,d=l+1;for(;d<t&&!s;)"mopen"===e.atoms[d].type?a+=1:"mclose"===e.atoms[d].type&&(a-=1),-1===a&&(s=!0,c=d),d+=1;s&&(r="<mrow>",r+=ic(e.atoms[l],i),r+=tc(e.atoms,l+1,c,i).mathML,r+=ic(e.atoms[c],i),r+="</mrow>","mi"!==e.lastType&&"mn"!==e.lastType&&"mfrac"!==e.lastType&&"fence"!==e.lastType||(r="<mo>&#8290;</mo>"+r),e.index=c+1,Jl(r,e,i)&&(n=!0,e.lastType="",r=""),o="fence")}return r.length>0&&(n=!0,e.mathML+=r,e.lastType=o),n}function ec(e,t,i){let n=!1;t=t||e.atoms.length;let r="",o="";const s=e.atoms[e.index];if(e.index<t&&("mbin"===s.type||"mrel"===s.type))r+=rc(e.atoms[e.index],i),e.index+=1,o="mo";else if(e.index<t&&"mop"===s.type){if("limits"===s.limits&&(s.superscript||s.subscript)){const e=ic(s,i);s.superscript&&s.subscript?(r+=("nolimits"!==s.limits?"<munderover>":"<msubsup>")+e,r+=tc(s.subscript,0,0,i).mathML,r+=tc(s.superscript,0,0,i).mathML,r+="nolimits"!==s.limits?"</munderover>":"</msubsup>"):s.superscript?(r+=("nolimits"!==s.limits?"<mover>":"<msup>")+e,r+=tc(s.superscript,0,0,i).mathML,r+="nolimits"!==s.limits?"</mover>":"</msup>"):(r+=("nolimits"!==s.limits?"<munder>":"<msub>")+e,r+=tc(s.subscript,0,0,i).mathML,r+="nolimits"!==s.limits?"</munder>":"</msub>"),o="mo"}else{const t=e.atoms[e.index],s="\\operatorname"===t.symbol,a=s?'<mi class="MathML-Unit"'+Hl(t.id,i)+">"+nc(t.body)+"</mi>":ic(t,i);r+=a,e.index+=1,Jl(r,e,i)&&(n=!0,e.lastType="",r=""),e.index-=1,s||/^<mo>(.*)<\/mo>$/.test(a)?o=s?"mi":"mo":(r+="<mo>&#x2061;</mo>",o="applyfunction")}"mi"!==e.lastType&&"mn"!==e.lastType||/^<mo>(.*)<\/mo>$/.test(r)||(r="<mo>&#8290;</mo>"+r),e.index+=1}return r.length>0&&(n=!0,e.mathML+=r,e.lastType=o),n}function tc(e,t,i,n){const r={atoms:e,index:null!=t?t:0,mathML:"",lastType:""};if("number"==typeof e||"boolean"==typeof e)r.mathML=e.toString();else if("string"==typeof e)r.mathML=e;else if(e instanceof Qs)r.mathML=rc(e,n);else if(Array.isArray(e)){let t=0;for(i=i||(e?e.length:0);r.index<i;)if(Gl(r,i,n)||Yl(r,i,n)||Ul(r,i,n)||ec(r,i,n)||Ql(r,i,n))t+=1;else if(r.index<i){let e=rc(r.atoms[r.index],n);"mn"===r.lastType&&e.length>0&&"genfrac"===r.atoms[r.index].type&&(e="<mo>&#x2064;</mo>"+e),"genfrac"===r.atoms[r.index].type?r.lastType="mfrac":r.lastType="",e.length>0&&(r.mathML+=e,t+=1),r.index+=1}t>1&&(r.mathML="<mrow>"+r.mathML+"</mrow>")}return r}function ic(e,t){let i="";const n=nc(e.body);return n&&(i="<mo"+Hl(e.id,t)+">"+n+"</mo>"),i}function nc(e){if(!e)return"";if("string"==typeof e)return jl(e);if(!Array.isArray(e)&&"string"==typeof e.body)return jl(e.body);let t="";for(const i of e)"string"==typeof i.body&&(t+=i.body);return jl(t)}function rc(e,t){var i,n,r,o,s,a,l,c,d,p,h,u;const m={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:""},f={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"","\\cdotp":"","\\ldots":"","\\cdots":"","\\ddots":"","\\vdots":"","\\ldotp":"."},g={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5};let y,v,b,x,k,_,w="",M="",z={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[e.fontFamily||e.font]||"";z&&(z=' mathvariant="'+z+'"');const S=e.symbol;if("text"===e.mode)w="<mi"+Hl(e.id,t)+">"+e.body+"</mi>";else switch(e.type){case"first":break;case"group":case"root":w=tc(e.body,0,0,t).mathML;break;case"array":if((e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(w+="<mrow>",e.leftDelim&&"."!==e.leftDelim&&(w+="<mo>"+(Wl[e.leftDelim]||e.leftDelim)+"</mo>")),w+="<mtable",e.colFormat){for(w+=' columnalign="',b=0;b<e.colFormat.length;b++)e.colFormat[b].align&&(w+={l:"left",c:"center",r:"right"}[e.colFormat[b].align]+" ");w+='"'}for(w+=">",v=0;v<e.array.length;v++){for(w+="<mtr>",y=0;y<e.array[v].length;y++)w+="<mtd>"+tc(e.array[v][y],0,0,t).mathML+"</mtd>";w+="</mtr>"}w+="</mtable>",(e.leftDelim&&"."!==e.leftDelim||e.rightDelim&&"."!==e.rightDelim)&&(e.rightDelim&&"."!==e.rightDelim&&(w+="<mo>"+(Wl[e.leftDelim]||e.rightDelim)+"</mo>"),w+="</mrow>");break;case"genfrac":(e.leftDelim||e.rightDelim)&&(w+="<mrow>"),e.leftDelim&&"."!==e.leftDelim&&(w+="<mo"+Hl(e.id,t)+">"+(Wl[e.leftDelim]||e.leftDelim)+"</mo>"),e.hasBarLine?(w+="<mfrac>",w+=tc(e.numer,0,0,t).mathML||"<mi>&nbsp;</mi>",w+=tc(e.denom,0,0,t).mathML||"<mi>&nbsp;</mi>",w+="</mfrac>"):(w+="<mtable"+Hl(e.id,t)+">",w+="<mtr>"+tc(e.numer,0,0,t).mathML+"</mtr>",w+="<mtr>"+tc(e.denom,0,0,t).mathML+"</mtr>",w+="</mtable>"),e.rightDelim&&"."!==e.rightDelim&&(w+="<mo"+Hl(e.id,t)+">"+(Wl[e.rightDelim]||e.rightDelim)+"</mo>"),(e.leftDelim||e.rightDelim)&&(w+="</mrow>");break;case"surd":e.index?(w+="<mroot"+Hl(e.id,t)+">",w+=tc(e.body,0,0,t).mathML,w+=tc(e.index,0,0,t).mathML,w+="</mroot>"):(w+="<msqrt"+Hl(e.id,t)+">",w+=tc(e.body,0,0,t).mathML,w+="</msqrt>");break;case"leftright":w="<mrow>",e.leftDelim&&"."!==e.leftDelim&&(w+="<mo"+Hl(e.id,t)+">"+(Wl[e.leftDelim]||e.leftDelim)+"</mo>"),e.body&&(w+=tc(e.body,0,0,t).mathML),e.rightDelim&&"."!==e.rightDelim&&(w+="<mo"+Hl(e.id,t)+">"+(Wl[e.rightDelim]||e.rightDelim)+"</mo>"),w+="</mrow>";break;case"sizeddelim":case"delim":w+='<mo separator="true"'+Hl(e.id,t)+">"+(Wl[e.delim]||e.delim)+"</mo>";break;case"accent":w+='<mover accent="true"'+Hl(e.id,t)+">",w+=tc(e.body,0,0,t).mathML,w+="<mo>"+(Wl[S]||e.accent)+"</mo>",w+="</mover>";break;case"line":case"overlap":break;case"overunder":k=e.overscript,x=e.underscript,(e.svgAbove||k)&&(e.svgBelow||x)?_=e.body:k&&k.length>0?(_=e.body,(null===(n=null===(i=e.body)||void 0===i?void 0:i[0])||void 0===n?void 0:n.underscript)?(x=e.body[0].underscript,_=e.body[0].body):"first"===(null===(o=null===(r=e.body)||void 0===r?void 0:r[0])||void 0===o?void 0:o.type)&&(null===(a=null===(s=e.body)||void 0===s?void 0:s[1])||void 0===a?void 0:a.underscript)&&(x=e.body[1].underscript,_=e.body[1].body)):x&&x.length>0&&(_=e.body,(null===(c=null===(l=e.body)||void 0===l?void 0:l[0])||void 0===c?void 0:c.overscript)?(k=e.body[0].overscript,_=e.body[0].body):"first"===(null===(p=null===(d=e.body)||void 0===d?void 0:d[0])||void 0===p?void 0:p.type)&&(null===(u=null===(h=e.body)||void 0===h?void 0:h[1])||void 0===u?void 0:u.overscript)&&(k=e.body[1].overscript,_=e.body[1].body)),(e.svgAbove||k)&&(e.svgBelow||x)?(w+=`<munderover ${z} ${Hl(e.id,t)}>`,w+=m[e.svgBody]||tc(_,0,0,t).mathML,w+=m[e.svgBelow]||tc(x,0,0,t).mathML,w+=m[e.svgAbove]||tc(k,0,0,t).mathML,w+="</munderover>"):e.svgAbove||k?(w+=`<mover ${z} ${Hl(e.id,t)}>`+(m[e.svgBody]||tc(_,0,0,t).mathML),w+=m[e.svgAbove]||tc(k,0,0,t).mathML,w+="</mover>"):(e.svgBelow||x)&&(w+=`<munder ${z} ${Hl(e.id,t)}>`+(m[e.svgBody]||tc(_,0,0,t).mathML),w+=m[e.svgBelow]||tc(x,0,0,t).mathML,w+="</munder>");break;case"placeholder":case"mord":{w=f[S]||S||("string"==typeof e.body?e.body:"");const i=S?S.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null;i?w="&#x"+i[1]+";":w.length>0&&"\\"===w.charAt(0)&&(w="string"==typeof e.body&&e.body.charCodeAt(0)>255?"&#x"+("000000"+e.body.charCodeAt(0).toString(16)).substr(-4)+";":"string"==typeof e.body?e.body.charAt(0):e.body);const n=/\d/.test(w)?"mn":"mi";w="<"+n+z+Hl(e.id,t)+">"+jl(w)+"</"+n+">";break}case"mbin":case"mrel":case"textord":case"minner":w=S&&f[S]?"<mi"+Hl(e.id,t)+">"+f[S]+"</mi>":S&&Wl[S]?"<mo"+Hl(e.id,t)+">"+Wl[S]+"</mo>":ic(e,t);break;case"mpunct":w='<mo separator="true"'+Hl(e.id,t)+">"+(Wl[S]||S)+"</mo>";break;case"mop":""!==e.body&&(w="<mo"+Hl(e.id,t)+">",w+="\\operatorname"===S?e.body:S||e.body,w+="</mo>");break;case"mathstyle":break;case"box":w='<menclose notation="box"',e.backgroundcolor&&(w+=' mathbackground="'+ks(e.backgroundcolor)+'"'),w+=Hl(e.id,t)+">"+tc(e.body,0,0,t).mathML+"</menclose>";break;case"spacing":w+='<mspace width="'+(g[S]||0)+'em"/>';break;case"enclose":w='<menclose notation="';for(const t in e.notation)Object.prototype.hasOwnProperty.call(e.notation,t)&&e.notation[t]&&(w+=M+t,M=" ");w+=Hl(e.id,t)+'">'+tc(e.body,0,0,t).mathML+"</menclose>";break;case"space":w+="&nbsp;";break;case"msupsub":case"phantom":case"composition":break;default:console.log("In conversion to MathML, unknown type : "+e.type)}return w}function oc(e,t){return tc(e,0,0,t).mathML}function sc(e){let t=0;for(let i=0;i<e.length;i++)t=31*t+e.charCodeAt(i),t|=0;return Math.abs(t)}function ac(e){e.dirty||(e.dirty=!0,requestAnimationFrame(()=>{Tl(e)&&e.dirty&&lc(e)}))}function lc(e,t){t=null!=t?t:{},e.dirty=!1,window.mathlive||(window.mathlive={}),Ra(e.model)||(console.warn("Invalid selection, resetting it. "+fa(e.model.path)),e.model.path=[{relation:"body",offset:0}]),e.model.root.forEach(e=>{e.caret="",e.isSelected=!1,e.containsCaret=!1});const i=e.hasFocus();if(rl(e.model)?Ra(e.model).caret=i&&!e.options.readOnly?e.mode:"":dl(e.model,e=>{e.isSelected=!0}),i&&!e.options.readOnly){let t=e.model.ancestor(1),i=1,n=!1;for(;t&&!n;)"surd"!==t.type&&"leftright"!==t.type||(t.containsCaret=!0,n=!0),i+=1,t=e.model.ancestor(i)}const n=$o(Ys({mathstyle:mo.displaystyle,letterShapeStyle:e.options.letterShapeStyle,atomIdsSettings:{seed:sc(e.model.root.toLatex(!1)),groupNumbers:t.forHighlighting},smartFence:e.options.smartFence,macros:e.options.macros},e.model.root),"ML__base");n.attributes={translate:"no","aria-hidden":"true"};const r=No(n,"ML__mathlive");e.field.innerHTML=e.options.createHTML(r.toMarkup(0,e.options.horizontalSpacingScale)),e.field.classList.toggle("ML__focused",i&&!e.options.readOnly),e.accessibleNode.innerHTML=e.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+oc(e.model.root,e.options)+"</math>");const o=Ol(e.field);if(null!==o){const t=document.createElement("div");t.classList.add("ML__selection"),t.style.position="absolute",t.style.left=Number(o.left).toString()+"px",t.style.top=Number(o.top).toString()+"px",t.style.width=Number(Math.ceil(o.right-o.left)).toString()+"px",t.style.height=Number(Math.ceil(o.bottom-o.top-1)).toString()+"px",e.field.insertBefore(t,e.field.childNodes[0])}}const cc={};function dc(e,t){t=null!=t?t:{target:"mathfield",canUndo:!1},Object.keys(e).forEach(i=>{console.assert(!cc[i],"Selector already defined: ",i),cc[i]={...t,fn:e[i]}})}function pc(e,t=",",i){if(!e)return[];let n,r=[];for(let o of e)o&&o.length>0&&"first"===o[0].type&&(o=o.slice(1)),o&&o.length>0&&(n?r.push(n):n=new Qs("math","mpunct",t,i),r=r.concat(o));return r}function hc(e,t){const i=e.parent();if(i&&"array"===i.type&&Jr(i.array)){const n=e.relation();if(i.array){const r=xa(i.array,n);"after row"===t||"before row"===t?(r.col=0,r.row=r.row+("after row"===t?1:0),i.array.splice(r.row,0,[[]])):(r.col+="after column"===t?1:0,i.array[r.row].splice(r.col,0,[]));const o=ba(i.array,r);e.path.pop(),e.path.push({relation:"cell"+o.toString(),offset:0}),e.insertFirstAtom()}}}function uc(e){var t;const i=e.parent();if("leftright"===i.type){i.type="array";const n=null!==(t={"(":"pmatrix","\\lbrack":"bmatrix","\\lbrace":"cases"}[i.leftDelim])&&void 0!==t?t:"matrix",r=ss(n),o=[[i.body]];Object.assign(i,r.parser(n,[],o)),i.mode=Ha(e),i.environmentName=n,i.array=o,i.rowGaps=[0],delete i.body,e.path[e.path.length-1].relation="cell0"}}function mc(e){return uc(e),hc(e,"after row"),Pa(e),!0}function fc(e){return uc(e),hc(e,"after column"),Pa(e),!0}function gc(e,t=0){const i=e.suppressChangeNotifications;if(e.suppressChangeNotifications=!0,t=t<0?-1:t>0?1:t,ha(e),e.parent().array&&t<0&&0===e.startOffset()){const t=e.parent().array;if(function(e){const t={col:0,row:0};for(;t.row<e.length&&!ka(e,t);)t.row+=1;return ka(e,t)?"cell"+ba(e,t):""}(t)===e.relation()){const i=function(e,t=[";",","],i){let n,r=[];for(const o of e)n?r.push(n):n=new Qs("math","mpunct",t[0],void 0),r=r.concat(pc(o,t[1]));return r}(t);e.path.pop(),e.siblings().splice(e.anchorOffset(),1,...i),Xa(e,e.anchorOffset()-1,i.length)}else{const i=xa(t,e.relation());if(0===i.col){const n=wa(t,i,-1);n.col=t[n.row].length-1,e.path[e.path.length-1].relation="cell"+ba(t,n);const r=t[n.row][n.col].length,o=pc(t[i.row]);t[n.row][n.col]=t[n.row][n.col].concat(o),Xa(e,r-1,o.length),function(e,t){e.splice(t,1)}(t,i.row)}else 0===function(e,t){let i=0;const n={col:t,row:0};for(;n.row<e.length;){const t=ka(e,n);if(t&&t.length>0){let e=t.length;"first"===t[0].type&&(e-=1),e>0&&(i+=1)}n.row+=1}return i}(t,i.col)&&(function(e,t){let i=0;for(;i<e.length;)e[i][t]&&e[i].splice(t,1),i+=1}(t,i.col),i.col-=1,e.path[e.path.length-1].relation="cell"+ba(t,i),Xa(e,t[i.row][i.col].length-1,0))}return e.suppressChangeNotifications=i,Ba(e),void Pa(e)}const n=e.siblings();if(rl(e)){const i=e.anchorOffset();if(t<0)if(0!==i){const t=e.sibling(0);"leftright"===t.type?(t.rightDelim="?",Ga(e,"backward")):!t.captureSelection&&/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(t.type)?Ga(e,"backward"):(e.announce("deleted",null,n.slice(i,i+1)),n.splice(i,1),Xa(e,i-1))}else{const t=e.relation();if("superscript"===t||"subscript"===t){const i=e.parent()[t].filter(e=>"placeholder"!==e.type&&"first"!==e.type);e.parent()[t]=null,e.path.pop(),e.siblings().splice(e.anchorOffset(),0,...i),Xa(e,e.anchorOffset()-1),e.announce("deleted: "+t)}else if("denom"===t){const t=e.parent().numer.filter(e=>"placeholder"!==e.type&&"first"!==e.type),i=e.parent().denom.filter(e=>"placeholder"!==e.type&&"first"!==e.type);e.path.pop(),e.siblings().splice(e.anchorOffset(),1,...i),e.siblings().splice(e.anchorOffset(),0,...t),Xa(e,e.anchorOffset()+t.length-1),e.announce("deleted: denominator")}else if("body"===t){const t=e.siblings().filter(e=>"placeholder"!==e.type);e.path.length>1&&(t.shift(),e.path.pop(),e.siblings().splice(e.anchorOffset(),1,...t),Xa(e,e.anchorOffset()-1),e.announce("deleted: root"))}else Ga(e,"backward"),yc(e,-1)}else if(t>0)if(i!==n.length-1)/^(group|array|genfrac|surd|leftright|overlap|overunder|box|mathstyle|sizing)$/.test(e.sibling(1).type)?Ga(e,"forward"):(e.announce("deleted",null,n.slice(i+1,i+2)),n.splice(i+1,1));else if("numer"===e.relation()){const t=e.parent().numer.filter(e=>"placeholder"!==e.type&&"first"!==e.type),i=e.parent().denom.filter(e=>"placeholder"!==e.type&&"first"!==e.type);e.path.pop(),e.siblings().splice(e.anchorOffset(),1,...i),e.siblings().splice(e.anchorOffset(),0,...t),Xa(e,e.anchorOffset()+t.length-1),e.announce("deleted: numerator")}else Ga(e,"forward"),yc(e,-1)}else{const t=e.startOffset()+1,i=e.endOffset()+1;e.announce("deleted",null,n.slice(t,i)),n.splice(t,i-t),Xa(e,t-1)}ua(e),e.suppressChangeNotifications=i,Ba(e),Pa(e)}function yc(e,t=0){if(0===t)gc(e,0);else if(t>0)for(;t>0;)gc(e,1),t--;else for(;t<0;)gc(e,-1),t++;return!0}function vc(e,t){if(rl(e))return!1;function i(t,i){let n=!0;return dl(e,e=>{n=n&&e[t]===i},{recursive:!0}),n}return t.color&&i("color",t.color)&&(t.color="none"),t.backgroundColor&&i("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none"),t.fontFamily&&i("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.series&&(t.fontSeries=t.series),t.fontSeries&&i("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.shape&&(t.fontShape=t.shape),t.fontShape&&i("fontShape",t.fontShape)&&(t.fontShape="auto"),t.size&&(t.fontSize=t.size),t.fontSize&&i("fontSize",t.fontSize)&&(t.fontSize="size5"),dl(e,e=>e.applyStyle(t),{recursive:!0}),Pa(e),!0}function bc(e){e.root.forEach(e=>{!Array.isArray(e.body)||0!==e.body.length&&"first"===e.body[0].type||e.body.unshift(new Qs(e.mode,"first")),!e.superscript||0!==e.superscript.length&&"first"===e.superscript[0].type||e.superscript.unshift(new Qs(e.mode,"first")),!e.subscript||0!==e.subscript.length&&"first"===e.subscript[0].type||e.subscript.unshift(new Qs(e.mode,"first")),!e.overscript||0!==e.overscript.length&&"first"===e.overscript[0].type||e.overscript.unshift(new Qs(e.mode,"first")),!e.underscript||0!==e.underscript.length&&"first"===e.underscript[0].type||e.underscript.unshift(new Qs(e.mode,"first")),!e.numer||0!==e.numer.length&&"first"===e.numer[0].type||e.numer.unshift(new Qs(e.mode,"first")),!e.denom||0!==e.denom.length&&"first"===e.denom[0].type||e.denom.unshift(new Qs(e.mode,"first")),!e.index||0!==e.index.length&&"first"===e.index[0].type||e.index.unshift(new Qs(e.mode,"first"))})}function xc(e,t,i){var n,r,o,s;if(null!==(n=i.smartFence)&&void 0!==n&&n){if(wc(e,t,i.style))return void bc(e)}else{const i=e.parent();if("leftright"===(null==i?void 0:i.type)&&"?"===i.rightDelim&&e.endOffset()===e.siblings().length-1&&/^[)}\]|]$/.test(t))return i.rightDelim=t,Ga(e,"forward"),bc(e),void Pa(e)}const a=e.suppressChangeNotifications;i.suppressChangeNotifications&&(e.suppressChangeNotifications=!0);const l=e.suppressChangeNotifications;e.suppressChangeNotifications=!0,i.insertionMode||(i.insertionMode="replaceSelection"),i.selectionMode||(i.selectionMode="placeholder"),i.format||(i.format="auto"),i.macros=null!==(r=i.macros)&&void 0!==r?r:e.options.macros;const c=i.mode||Ha(e);let d;const p=[ea("math",tl(e)).toLatex(!1)],h=null!==(o=i.placeholder)&&void 0!==o?o:"\\placeholder{}";p["?"]=h,"replaceSelection"!==i.insertionMode||rl(e)?"replaceAll"===i.insertionMode?(e.root.body=[],e.root.latex="",e.path=[{relation:"body",offset:0}],e.extent=0):"insertBefore"===i.insertionMode?al(e):"insertAfter"===i.insertionMode&&sl(e):yc(e);const u=e.siblings(),m=e.startOffset();if(m+1<u.length&&u[m+1]&&"placeholder"===u[m+1].type?yc(e,1):m>0&&u[m]&&"placeholder"===u[m].type&&yc(e,-1),"math"===c&&"ASCIIMath"===i.format)[,t]=Na(t,{format:"ASCIIMath"}),_c(e,d=sa(t,"math",null,null==i?void 0:i.macros,!1,e.listeners.onError));else if("text"===c||"auto"!==i.format&&"latex"!==i.format)"text"!==c&&"text"!==i.format||(d=sa(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(//g,"\\textsterling "),"text",p,i.macros,!1,e.listeners.onError));else if("command"===c){d=[];for(const e of t)Ho.test(e)&&d.push(new Qs("command","command",e))}else if(""===t)d=[new Qs("command","command","\\")];else{if("auto"===i.format&&([i.format,t]=Na(t)),p[0])t=t.replace(/(^|[^\\])#@/g,"$1#0");else if(/(^|[^\\])#@/.test(t)){const i=function(e){const t=e.siblings();let i=e.startOffset();if("text"===t[i].mode)for(;i>=1&&"text"===t[i].mode;)i--;else for(;i>=1&&/^(mord|surd|msubsup|leftright|mop)$/.test(t[i].type);)i--;return i}(e);t=t.replace(/(^|[^\\])#@/g,"$1"+function(e,t,i){const n=e.siblings();if(pa(n))return"";if("first"===n[0].type&&0===t&&(t=1),"root"===e.parent().type&&1===t&&i===n.length-1)return e.parent().toLatex(!1);let r="",o=t;for(;o<=i;)r+=n[o].toLatex(!1),o++;return r}(e,i+1,e.startOffset())),function(e,t){t>0?e.siblings().splice(e.anchorOffset()+1,t):(e.siblings().splice(e.anchorOffset()+t+1,-t),Xa(e,e.anchorOffset()+t))}(e,i-e.startOffset())}else t=t.replace(/(^|[^\\])#@/g,"$1#?");/^\$\$(.*)\$\$$/.test(t)&&(t=t.substring(2,t.length-2)),p[0]||(p[0]=h),d=sa(t,c,p,i.macros,null!==(s=i.smartFence)&&void 0!==s&&s,e.listeners.onError),"latex"!==i.format&&_c(e,d)}ua(e),function e(t,i){t&&i&&(ta(t)?t.forEach(t=>e(t,i)):"object"==typeof t&&(t.color||t.backgroundColor||t.fontFamily||t.fontShape||t.fontSeries||t.fontSize||(t.applyStyle(i),e(t.body,i),e(t.numer,i),e(t.denom,i),e(t.index,i),e(t.overscript,i),e(t.underscript,i),e(t.subscript,i),e(t.superscript,i))))}(d,i.style);const f=e.parent();if("latex"!==i.format&&e.options.removeExtraneousParentheses&&f&&"leftright"===f.type&&"("===f.leftDelim&&pa(f.body)&&d&&1===d.length&&"genfrac"===d[0].type?(e.path.pop(),e.siblings()[e.anchorOffset()]=d[0]):("latex"!==i.format||1!==p.length||p[0]||"root"===f.type&&pa(f.body)&&(f.latex=t),e.siblings().splice(e.anchorOffset()+1,0,...d)),bc(e),e.suppressChangeNotifications=l,"placeholder"===i.selectionMode){const t=[];for(const e of d)e.forEach(e=>{"placeholder"===e.type&&t.push(e)});0!==t.length&&Ua(e,1,!1)?e.announce("move"):Xa(e,e.anchorOffset()+d.length)}else"before"===i.selectionMode||("after"===i.selectionMode?Xa(e,e.anchorOffset()+d.length):"item"===i.selectionMode&&Xa(e,e.anchorOffset(),d.length));Pa(e),e.suppressChangeNotifications=a}function kc(e){if(e)return 1===e.length&&"leftright"===e[0].type&&"("===e[0].leftDelim&&(e=e[0].body),e}function _c(e,t){if(t&&e.options.removeExtraneousParentheses){for(let e=0;t[e];e++)if("leftright"===t[e].type&&"("===t[e].leftDelim&&ta(t[e].body)){let i=0,n=0,r=0;for(let o=0;t[e].body[o];o++)"genfrac"===t[e].body[o].type&&(i++,n=o),"first"!==t[e].body[o].type&&r++;0===r&&1===i&&(t[e]=t[e].body[n])}t.forEach(t=>{if("genfrac"===t.type&&(_c(e,t.numer),_c(e,t.denom),t.numer=kc(t.numer),t.denom=kc(t.denom)),t.superscript&&(_c(e,t.superscript),t.superscript=kc(t.superscript)),t.subscript&&(_c(e,t.subscript),t.subscript=kc(t.subscript)),t.underscript&&(_c(e,t.underscript),t.underscript=kc(t.underscript)),t.overscript&&(_c(e,t.overscript),t.overscript=kc(t.overscript)),t.index&&(_c(e,t.index),t.index=kc(t.index)),"surd"===t.type?(_c(e,t.body),t.body=kc(t.body)):ta(t.body)&&_c(e,t.body),t.array)for(let i=_a(t.array);i>=0;i--)_c(e,ka(t.array,i))})}}function wc(e,t,i){const n=e.parent();let r="leftright"===n.type?n.leftDelim+n.rightDelim:"";if("\\lbrace\\rbrace"===r&&(r="{}"),"\\{\\}"===r&&(r="{}"),"{}"===r&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(t))return xc(e,"\\,\\middle"+t+"\\, ",{mode:"math",format:"latex",style:i}),!0;"{"!==t&&"\\{"!==t||(t="\\lbrace"),"}"!==t&&"\\}"!==t||(t="\\rbrace"),"["===t&&(t="\\lbrack"),"]"===t&&(t="\\rbrack");const o=Wo[t];if(o&&("leftright"!==n.type||"|"!==n.leftDelim)){let n="";const r=rl(e)||"placeholder"===Ra(e).type;n=e.sibling(0).isFunction?"\\mleft"+t+"\\mright":"\\left"+t+"\\right",n+=r?"?":o;let s=[];return r&&(s=e.siblings().splice(e.anchorOffset()+1,e.siblings().length)),xc(e,n,{mode:"math",format:"latex",style:i}),r&&(e.sibling(0).body=s,Ga(e,"backward")),!0}let s;if(Object.keys(Wo).forEach(e=>{t===Wo[e]&&(s=e)}),s){if(n&&"leftright"===n.type&&e.endOffset()===e.siblings().length-1)return n.rightDelim=t,Ga(e,"forward"),Pa(e),!0;const r=e.siblings();let o;for(o=e.endOffset();o>=0&&("leftright"!==r[o].type||"?"!==r[o].rightDelim);o--);if(o>=0)return r[o].rightDelim=t,r[o].body=r[o].body.concat(r.slice(o+1,e.endOffset()+1)),r.splice(o+1,e.endOffset()-o),Xa(e,o),Pa(e),!0;if(n&&"leftright"===n.type&&"?"===n.rightDelim){n.rightDelim=t;const i=r.slice(e.endOffset()+1);return r.splice(e.endOffset()+1),e.path.pop(),e.siblings().splice(e.endOffset()+1,0,...i),Pa(e),!0}const s=e.ancestor(2);return!(!s||"leftright"!==s.type||"?"!==s.rightDelim||e.endOffset()!==r.length-1)&&(Ga(e,"forward"),wc(e,t,i))}return!1}dc({performWithFeedback:(e,t)=>(function(e,t){return e.focus(),e.options.keypressVibration&&(null===navigator||void 0===navigator?void 0:navigator.vibrate)&&navigator.vibrate(3),"moveToNextPlaceholder"===(t=t.replace(/-\w/g,e=>e[1].toUpperCase()))||"moveToPreviousPlaceholder"===t||"complete"===t?e.returnKeypressSound?(e.returnKeypressSound.load(),e.returnKeypressSound.play().catch(e=>console.warn(e))):e.keypressSound&&(e.keypressSound.load(),e.keypressSound.play().catch(e=>console.warn(e))):"deletePreviousChar"!==t&&"deleteNextChar"!==t&&"deletePreviousWord"!==t&&"deleteNextWord"!==t&&"deleteToGroupStart"!==t&&"deleteToGroupEnd"!==t&&"deleteToMathFieldStart"!==t&&"deleteToMathFieldEnd"!==t||!e.deleteKeypressSound?e.keypressSound&&(e.keypressSound.load(),e.keypressSound.play().catch(e=>console.warn(e))):(e.deleteKeypressSound.load(),e.deleteKeypressSound.play().catch(e=>console.warn(e))),e.executeCommand(t)})(e,t)}),dc({addRowAfter:mc,addColumnAfter:fc,addRowBefore:function(e){return uc(e),hc(e,"before row"),Pa(e),!0},addColumnBefore:function(e){return uc(e),hc(e,"before column"),Pa(e),!0}},{target:"model",category:"array-edit"});class Mc{constructor(e){this.positions=[],this.root=e;const t=new Cc;t.root=e,bc(t);do{this.positions.push({path:t.toString(),atom:Lc(t),depth:t.path.length})}while(zc(t))}at(e){return this.positions[e]}find(e){for(let t=0;t<this.positions.length;t++)if(this.positions[t].atom===e)return t;return-1}get lastPosition(){return this.positions.length-1}paths(e){return e.map(e=>this.at(e).path)}}function zc(e){const t={body:"numer",numer:"denom",denom:"index",index:"overscript",overscript:"underscript",underscript:"subscript",subscript:"superscript"};if(e.anchorOffset()===e.siblings(!1).length-1){let i=t[e.relation()];const n=e.parent();for(;i&&!n[i];)i=t[i];if(i)return Sc(e,0,i),!0;if(e.parent().array){const t=_a(e.parent().array);let i=parseInt(e.relation().match(/cell([0-9]*)$/)[1])+1;for(;i<t;){if(ka(e.parent().array,i,!1)&&Sc(e,0,"cell"+i))return!0;i+=1}}return 1!==e.path.length&&(e.path.pop(),!0)}Sc(e,e.anchorOffset()+1);const i=Lc(e);if(i&&!i.captureSelection){let n;if(i.array){let t=0;n="";const r=_a(i.array);for(;!n&&t<r;)ka(i.array,t,!1)&&(n="cell"+t.toString()),t+=1;return console.assert(n),e.path.push({relation:n,offset:0}),Sc(e,0,n),!0}for(n="body";n;){if(Jr(i[n]))return e.path.push({relation:n,offset:0}),!0;n=t[n]}}return!0}function Sc(e,t=0,i=""){const n=e.path[e.path.length-1].relation;i||(i=n);const r=e.parent();if(!r&&"body"!==i)return!1;const o=i.startsWith("cell");if(!o&&!r[i]||o&&!r.array)return!1;e.path[e.path.length-1].relation=i;const s=e.siblings(!1).length;return e.path[e.path.length-1].relation=n,t<0&&(t=s+t),t=Math.max(0,Math.min(t,s-1)),e.path[e.path.length-1].relation=i,e.path[e.path.length-1].offset=t,!0}function Lc(e){if(e.parent().array)return ka(e.parent().array,e.relation())[e.anchorOffset()];const t=e.siblings(!1);return t[Math.min(t.length-1,e.anchorOffset())]}class Cc{constructor(e,t,i,n){this.options={mode:"math",removeExtraneousParentheses:!1,...e},this.root=ea(this.options.mode),this.path=[{relation:"body",offset:0}],this.extent=0,this.setListeners(t),this.setHooks(i),this.mathfield=n,this.suppressChangeNotifications=!1}clone(){const e=new Cc(this.options,this.listeners,this.hooks,this.mathfield);return e.root=this.root,e.path=va(this.path),e}setListeners(e){this.listeners=e}setHooks(e){this.hooks={announce:(null==e?void 0:e.announce)?e.announce:(e,t,i,n)=>{},moveOut:(null==e?void 0:e.moveOut)?e.moveOut:()=>!0,tabOut:(null==e?void 0:e.tabOut)?e.tabOut:()=>!0}}get selection(){const e=Ra(this);let t;if(this.parent().array)t=ka(this.parent().array,this.relation())[this.focusOffset()];else{const e=this.siblings();t=e[Math.min(e.length-1,this.focusOffset())]}const i=new Mc(this.root);return[ma(i,{start:i.find(e),end:i.find(t)})]}set selection(e){!function(e,t){const i=Array.isArray(t)?t[0]:t,n=new Mc(e.root);let r;i.direction||(i.direction="forward"),(i.start<0||i.start>n.lastPosition)&&(i.start=n.lastPosition),void 0===i.end&&(i.end=i.start),(i.end<0||i.end>n.lastPosition)&&(i.end=n.lastPosition),Ia(e,r="backward"===i.direction?n.at(i.end).path:n.at(i.start).path,i.end-i.start)}(this,e)}get lastPosition(){return new Mc(this.root).lastPosition}announce(e,t,i=[]){this.hooks.announce(this.mathfield,e,t,i)}toString(){return fa(this.path,this.extent)}siblings(e=!0){var t;if(0===this.path.length)return[];let i;return this.parent().array?i=ka(this.parent().array,this.relation()):"string"==typeof(i=null!==(t=this.parent()[this.relation()])&&void 0!==t?t:[])&&(i=[]),!e||0!==i.length&&"first"===i[0].type||i.unshift(new Qs(this.parent().mode,"first")),i}anchorOffset(){return this.path.length>0?this.path[this.path.length-1].offset:0}focusOffset(){return this.path.length>0?this.path[this.path.length-1].offset+this.extent:0}groupIsSelected(){return 0===this.startOffset()&&this.endOffset()>=this.siblings().length-1}startOffset(){return Math.min(this.focusOffset(),this.anchorOffset())}endOffset(){return Math.max(this.focusOffset(),this.anchorOffset())}sibling(e){return this.siblings()[this.startOffset()+e]}ancestor(e){if(e>this.path.length)return null;let t=this.root;for(let i=0;i<this.path.length-e;i++){const e=this.path[i];if(t.array)t=ka(t.array,e.relation)[e.offset];else{if(!t[e.relation])return null;{0!==t[e.relation].length&&"first"===t[e.relation][0].type||t[e.relation].unshift(new Qs(t[e.relation][0].mode,"first"));const i=Math.min(e.offset,t[e.relation].length-1);t=t[e.relation][i]}}}return t}parent(){return this.ancestor(1)}relation(){return this.path.length>0?this.path[this.path.length-1].relation:""}insertFirstAtom(){this.siblings()}}function Ac(e){if(sl(e),!Ra(e).superscript)if(Ra(e).subscript)Ra(e).superscript=[new Qs(e.parent().mode,"first")];else{const t=e.sibling(1);(null==t?void 0:t.superscript)?e.path[e.path.length-1].offset+=1:(null==t?void 0:t.subscript)?(e.path[e.path.length-1].offset+=1,Ra(e).superscript=[new Qs(e.parent().mode,"first")]):("limits"!==Ra(e).limits&&(e.siblings().splice(e.anchorOffset()+1,0,new Qs(e.parent().mode,"msubsup","",Va(e))),e.path[e.path.length-1].offset+=1),Ra(e).superscript=[new Qs(e.parent().mode,"first")])}return e.path.push({relation:"superscript",offset:0}),il(e),!0}dc({moveToOpposite:e=>{const t={superscript:"subscript",subscript:"superscript",denom:"numer",numer:"denom"}[e.relation()];return t||Ac(e),e.parent()[t]||(e.parent()[t]=[new Qs(e.parent().mode,"first")]),Xa(e,0,"end",t),!0},moveBeforeParent:e=>e.path.length>1?(e.path.pop(),Xa(e,e.anchorOffset()-1),!0):(e.announce("plonk"),!1),moveAfterParent:e=>ll(e),moveToNextPlaceholder:e=>Ua(e,1),moveToPreviousPlaceholder:e=>Ua(e,-1),moveToNextChar:e=>Ga(e,"forward"),moveToPreviousChar:e=>Ga(e,"backward"),moveUp:e=>Ga(e,"upward"),moveDown:e=>Ga(e,"downward"),moveToNextWord:e=>Qa(e,1),moveToPreviousWord:e=>Qa(e,-1),moveToGroupStart:e=>Xa(e,0),moveToGroupEnd:e=>Xa(e,-1),moveToMathFieldStart:e=>el(e,-1),moveToMathFieldEnd:e=>el(e,1),moveToSuperscript:e=>Ac(e),moveToSubscript:e=>(function(e){if(sl(e),!Ra(e).subscript)if(Ra(e).superscript)Ra(e).subscript=[new Qs(e.parent().mode,"first")];else{const t=e.sibling(1);(null==t?void 0:t.subscript)?e.path[e.path.length-1].offset+=1:(null==t?void 0:t.superscript)?(e.path[e.path.length-1].offset+=1,Ra(e).subscript=[new Qs(e.parent().mode,"first")]):("limits"!==Ra(e).limits&&(e.siblings().splice(e.anchorOffset()+1,0,new Qs(e.parent().mode,"msubsup","",Va(e))),e.path[e.path.length-1].offset+=1),Ra(e).subscript=[new Qs(e.parent().mode,"first")])}return e.path.push({relation:"subscript",offset:0}),il(e),!0})(e)},{target:"model",category:"selection-anchor"}),dc({selectGroup:e=>il(e),selectAll:e=>nl(e),extendToNextChar:e=>Ya(e,1),extendToPreviousChar:e=>Ya(e,-1),extendToNextWord:e=>Qa(e,1,{extend:!0}),extendToPreviousWord:e=>Qa(e,-1,{extend:!0}),extendUp:e=>Ga(e,"upward",{extend:!0}),extendDown:e=>Ga(e,"downward",{extend:!0}),extendToNextBoundary:e=>Qa(e,1,{extend:!0}),extendToPreviousBoundary:e=>Qa(e,-1,{extend:!0}),extendToGroupStart:e=>(ol(e,-e.anchorOffset()),!0),extendToGroupEnd:e=>(ol(e,e.siblings().length-e.anchorOffset()),!0),extendToMathFieldStart:e=>el(e,-1,{extend:!0}),extendToMathFieldEnd:e=>el(e,1,{extend:!0})},{target:"model",category:"selection-extend"}),dc({deleteAll:e=>(nl(e),yc(e)),deleteNextChar:e=>yc(e,1),deletePreviousChar:e=>yc(e,-1),deleteNextWord:e=>(Qa(e,1,{extend:!0}),yc(e)),deletePreviousWord:e=>(Qa(e,-1,{extend:!0}),yc(e)),deleteToGroupStart:e=>(ol(e,-e.anchorOffset()),yc(e)),deleteToGroupEnd:e=>(el(e,-1,{extend:!0}),yc(e)),deleteToMathFieldStart:e=>(el(e,-1,{extend:!0}),yc(e)),deleteToMathFieldEnd:e=>(el(e,1,{extend:!0}),yc(e))},{target:"model",category:"delete"});const Dc=["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"];function Tc(e){return!e.ctrlKey&&!e.metaKey&&"Dead"!==e.key&&(""===e.code||Dc.indexOf(e.code)>=0)}function $c(e){const t=[];return(e=function(e){if(!e.code){const t=Object.entries(xl().mapping);let i,n=!1,r=!1;for(let o=0;o<4;o++){for(const[s,a]of t)if(a[o]===e.key){i=s,3===o?(n=!0,r=!0):2===o?n=!0:1===o&&(r=!0);break}if(i)break}return new KeyboardEvent(e.type,{...e,altKey:n,shiftKey:r,code:i})}return new KeyboardEvent(e.type,e)}(e)).ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),0===t.length?"["+e.code+"]":(t.push("["+e.code+"]"),t.join("+"))}function Oc(e=document){var t,i;return(null===(i=null===(t=e.activeElement)||void 0===t?void 0:t.shadowRoot)||void 0===i?void 0:i.activeElement)?Oc(e.activeElement.shadowRoot):e.activeElement}function Nc(e){var t;if(!e)return"";let i;return"Unidentified"===e.key&&e.target&&(i=e.target.value),i=null!==(t=null!=i?i:e.key)&&void 0!==t?t:e.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(i)&&(i=""),i}class Ec{constructor(e){this.maximumDepth=1e3,this.record=!1,this.canCoalesce=!1,this.model=e,this.reset()}reset(){this.stack=[],this.index=-1}startRecording(){this.record=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(e){this.canUndo()&&("function"==typeof(null==e?void 0:e.onUndoStateWillChange)&&e.onUndoStateWillChange(this.model.mathfield,"undo"),this.restore(this.stack[this.index-1],e),this.index-=1,e&&"function"==typeof e.onUndoStateDidChange&&e.onUndoStateDidChange(this.model.mathfield,"undo"),this.canCoalesce=!1)}redo(e){this.canRedo()&&("function"==typeof(null==e?void 0:e.onUndoStateWillChange)&&e.onUndoStateWillChange(this.model.mathfield,"redo"),this.index+=1,this.restore(this.stack[this.index],e),e&&"function"==typeof e.onUndoStateDidChange&&e.onUndoStateDidChange(this.model.mathfield,"redo"),this.canCoalesce=!1)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(e){this.record&&("function"==typeof(null==e?void 0:e.onUndoStateWillChange)&&e.onUndoStateWillChange(this.model.mathfield,"snapshot"),this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push({latex:this.model.root.toLatex(!1),selection:this.model.selection}),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),e&&"function"==typeof e.onUndoStateDidChange&&e.onUndoStateDidChange(this.model.mathfield,"snapshot"),this.canCoalesce=!1)}snapshotAndCoalesce(e){this.canCoalesce&&this.pop(),this.snapshot(e),this.canCoalesce=!0}save(){return{latex:this.model.root.toLatex(!1),selection:this.model.selection}}restore(e,t){const i=this.model.suppressChangeNotifications;void 0!==t.suppressChangeNotifications&&(this.model.suppressChangeNotifications=t.suppressChangeNotifications),xc(this.model,e?e.latex:"",{...t,format:"latex",mode:"math",insertionMode:"replaceAll",selectionMode:"after",smartFence:!1}),this.model.selection=e?e.selection:[{start:0}],this.model.suppressChangeNotifications=i}}const qc={"":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega"},Kc={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\langle":"(:","\\rangle":":)"};const Bc={};function Pc(e){const t=Bc.locale.substring(0,2);let i="";return Bc.strings[Bc.locale]&&(i=Bc.strings[Bc.locale][e]),!i&&Bc.strings[t]&&(i=Bc.strings[t][e]),i||(i=Bc.strings.en[e]),i||(i=e),i}function Rc(e,t,i){ha(e);const n=[],r=t.substr(i);for(const o of r){const e=new Qs("command","command",o);e.isSuggestion=!0,n.push(e)}Array.prototype.splice.apply(e.siblings(),[e.anchorOffset()+1,0].concat(n))}function Ic(e,t){if(t=null!=t?t:{acceptSuggestion:!1},Pl(e),t.discard)return Fl(e.model,null),e.switchMode("math"),!0;const i=Rl(e.model,!t.acceptSuggestion);if(i){if("\\("===i||"\\)"===i)Fl(e.model,[]),xc(e.model,i.slice(1),{mode:e.mode});else{e.switchMode("math");const t=sa(i,"math",null,e.options.macros);t?Fl(e.model,t):Il(e.model,!0)}return e.snapshot(),e.model.announce("replacement"),!0}return!1}function Fc(e){!function(e){const t=e.siblings(),i=ja(e);let n=i.start;for(;n<i.end&&!t[n].isSuggestion;)n++;Xa(e,n-1)}(e.model),ha(e.model);const t=Rl(e.model),i=ls(t);if(0===i.length)Pl(e),Il(e.model,!0);else{const n=e.suggestionIndex%i.length,r=t.length-i[n].match.length;0!==r&&Rc(e.model,i[n].match,r),ql(e,i[n].match,i.length>1)}return ac(e),!0}Bc.plural=function(e,t,i){var n;(i=null!=i?i:{}).type=null!==(n=i.type)&&void 0!==n?n:"cardinal";const r=Bc.locale.substring(0,2),o="ordinal"===i.type?Bc._ordinal:Bc._cardinal;let s,a="ordinal"===i.type?Bc._ordinalPluralCategories.indexOf(o.select(e)):Bc._cardinalPluralCategories.indexOf(o.select(e));return Bc.strings[Bc.locale]&&(s=Bc.strings[Bc.locale][t]),!s&&Bc.strings[r]&&(s=Bc.strings[r][t]),s||((s=Bc.strings.en[t])||(s=t),a="ordinal"===i.type?Bc._ordinalPluralCategories.indexOf(Bc._ordinalEnglish.select(e)):Bc._cardinalPluralCategories.indexOf(Bc._cardinalEnglish.select(e))),s.split(";")[a]||s.split(";")[0]},Bc.merge=function(e,t){if(e&&t){const i=Bc._locale;Bc.locale=e,Bc.strings[e]={...Bc.strings[e],...t},Bc.locale=i}else e&&!t&&Object.keys(e).forEach(t=>Bc.merge(t,e[t]))},Object.defineProperty(Bc,"locale",{set(e){Bc._locale=e,Bc._ordinal=null,Bc._cardinal=null},get(){var e;return Bc._locale||(Bc._locale=null!==(e=null===navigator||void 0===navigator?void 0:navigator.language.slice(0,5))&&void 0!==e?e:"en"),Bc._locale}}),Object.defineProperty(Bc,"ordinal",{get:()=>(Bc._ordinal||(Bc._ordinalEnglish=new Intl.PluralRules("en",{type:"ordinal"}),Bc._ordinalEnglishPluralCategories=Bc._ordinalEnglish.resolvedOptions().pluralCategories,Bc._ordinal=new Intl.PluralRules(Bc.locale,{type:"ordinal"}),Bc._ordinalPluralCategories=Bc._ordinal.resolvedOptions().pluralCategories),Bc._ordinal)}),Object.defineProperty(Bc,"cardinal",{get:()=>(Bc._cardinal||(Bc._cardinalEnglish=new Intl.PluralRules("en",{type:"cardinal"}),Bc._cardinalEnglishPluralCategories=Bc._cardinalEnglish.resolvedOptions().pluralCategories,Bc._cardinal=new Intl.PluralRules(Bc.locale,{type:"cardinal"}),Bc._cardinalPluralCategories=Bc._ordinal.resolvedOptions().pluralCategories),Bc._cardinal)}),Bc.strings={en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo"},ar:{"keyboard.tooltip.functions":"","keyboard.tooltip.symbols":"  ","keyboard.tooltip.greek":" ","keyboard.tooltip.command":"   ","keyboard.tooltip.numeric":"","keyboard.tooltip.roman":"  ","tooltip.copy to clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"   ","tooltip.undo":""},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"Rmische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen"},el:{"keyboard.tooltip.functions":"","keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.command":"  LaTeX","keyboard.tooltip.numeric":"","keyboard.tooltip.roman":" ","tooltip.copy to clipboard":"  ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.undo":""},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"Smbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Numrico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer"},fa:{"keyboard.tooltip.functions":"","keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.command":"  ","keyboard.tooltip.numeric":"","keyboard.tooltip.roman":" ","tooltip.copy to clipboard":"  ","tooltip.redo":"  ","tooltip.toggle virtual keyboard":"/  ","tooltip.undo":"  "},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Numrique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"Rtablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare"},ja:{"keyboard.tooltip.functions":"","keyboard.tooltip.symbols":"","keyboard.tooltip.greek":"","keyboard.tooltip.command":"LaTeX","keyboard.tooltip.numeric":"","keyboard.tooltip.roman":"","tooltip.copy to clipboard":"","tooltip.redo":"","tooltip.toggle virtual keyboard":"","tooltip.undo":""},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr","tooltip.toggle virtual keyboard":"Przecz wirtualn klawiatur","tooltip.undo":"Cofnij"},ru:{"keyboard.tooltip.functions":"","keyboard.tooltip.symbols":"","keyboard.tooltip.greek":" ","keyboard.tooltip.command":"   LaTeX","keyboard.tooltip.numeric":"","keyboard.tooltip.roman":" ","tooltip.copy to clipboard":"   ","tooltip.redo":"","tooltip.toggle virtual keyboard":"  ","tooltip.undo":""}},dc({complete:Ic,nextSuggestion:function(e){return e.suggestionIndex+=1,Fc(e),!1},previousSuggestion:function(e){if(e.suggestionIndex-=1,e.suggestionIndex<0){ha(e.model);const t=ls(Rl(e.model));e.suggestionIndex=t.length-1}return Fc(e),!1}},{target:"mathfield",category:"autocomplete"});const Vc={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ",a:'<phoneme alphabet="ipa" ph="e">a</phoneme>',A:'capital <phoneme alphabet="ipa" ph="e">A</phoneme>',"+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","":"","":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"};function Wc(e){let t=0;if(ta(e))for(const i of e)"first"!==i.type&&(t+=1);return 1===t}function jc(e){let t="";if(ta(e))for(const i of e)"first"!==i.type&&"string"==typeof i.body&&(t+=i.body);return t}function Hc(e,t){var i;const n={...t,textToSpeechRulesOptions:{...t.textToSpeechRulesOptions}};if(window.sre&&"sre"===n.textToSpeechRules){const t=oc(e,n);return t?(n.textToSpeechMarkup&&(n.textToSpeechRulesOptions=null!==(i=n.textToSpeechRulesOptions)&&void 0!==i?i:{},n.textToSpeechRulesOptions.markup=n.textToSpeechMarkup,"ssml"===n.textToSpeechRulesOptions.markup&&(n.textToSpeechRulesOptions.markup="ssml_step"),n.textToSpeechRulesOptions.rate=n.speechEngineRate),n.textToSpeechRulesOptions&&window.sre.System.getInstance().setupEngine(n.textToSpeechRulesOptions),window.sre.System.getInstance().toSpeech(t)):""}let r=function e(t,i,n){function r(e){return"<emphasis>"+e+"</emphasis>"}if(!i)return"";let o="";if(ta(i)){let s=!1,a=!1;for(let l=0;l<i.length;l++)"text"!==i[l].mode&&(a=!1),l<i.length-2&&"mopen"===i[l].type&&"mclose"===i[l+2].type&&"mord"===i[l+1].type?(o+=" of ",o+=r(e(t,i[l+1],n)),l+=2):"text"===i[l].mode?a?o+=i[l].body?i[l].body:" ":(a=!0,o+=e("text",i[l],n)):"mord"===i[l].type&&/[0123456789,.]/.test(i[l].body)?s?o+=i[l].body:(s=!0,o+=e(t,i[l],n)):(s=!1,o+=e(t,i[l],n))}else if("text"===i.mode)i.id&&"math"===t&&(o+='<mark name="'+i.id.toString()+'"/>'),o+=i.body;else{i.id&&"math"===t&&(o+='<mark name="'+i.id.toString()+'"/>');let s="",a="",l="",c=!1;switch(i.type){case"group":case"root":o+=e("math",i.body,n);break;case"genfrac":if(s=e("math",i.numer,n),a=e("math",i.denom,n),Wc(i.numer)&&Wc(i.denom)){const e={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[jc(i.numer)+"/"+jc(i.denom)];e?o=e:o+=s+" over "+a}else o+=' the fraction <break time="150ms"/>'+s+', over <break time="150ms"/>'+a+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(l=e("math",i.body,n),i.index){let t=e("math",i.index,n);const r=(t=t.trim()).replace(/<mark([^/]*)\/>/g,"");o+="3"===r?' the cube root of <break time="200ms"/>'+l+'. <break time="200ms"/> End cube root':"n"===r?' the nth root of <break time="200ms"/>'+l+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+t+', of <break time="200ms"/>'+l+'. <break time="200ms"/> End root'}else Wc(i.body)?o+=" the square root of "+l+" , ":o+=' the square root of <break time="200ms"/>'+l+'. <break time="200ms"/> End square root';break;case"leftright":o+=Vc[i.leftDelim]||i.leftDelim,o+=e("math",i.body,n),o+=Vc[i.rightDelim]||i.rightDelim;break;case"rule":case"overunder":case"overlap":break;case"placeholder":o+="placeholder "+i.body;break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":case"textord":{const r=i.symbol;if("\\mathbin"===r||"\\mathrel"===r||"\\mathopen"===r||"\\mathclose"===r||"\\mathpunct"===r||"\\mathord"===r||"\\mathinner"===r){o=e(t,i.body,n);break}let s=i.body,a=i.symbol;if("delim"!==i.type&&"sizeddelim"!==i.type||(s=a=i.delim),"text"===t)o+=s;else{if("mbin"===i.type&&(o+='<break time="150ms"/>'),s){const e=Vc[s]||(a?Vc[a.trim()]:"");o+=e?" "+e:(a?function(e){let t="";return"\\"===e.charAt(0)&&(t=" "+e.replace("\\","")+" "),t}(a.trim()):"")||function(e){let t="";return n.textToSpeechMarkup?/[a-z]/.test(e)?t+=' <say-as interpret-as="character">'+e+"</say-as>":/[A-Z]/.test(e)?t+=String("capital "+e.toLowerCase()):t+=e:/[a-z]/.test(e)?t+=" '"+e.toUpperCase()+"'":/[A-Z]/.test(e)?t+=" 'capital "+e.toUpperCase()+"'":t+=e,t}(s)}else o+=e("math",i.body,n);"mbin"===i.type&&(o+='<break time="150ms"/>')}break}case"mop":if(""!==i.body){const t=i.symbol;if("\\sum"===t)if(i.superscript&&i.subscript){let t=e("math",i.superscript,n);t=t.trim();let r=e("math",i.subscript,n);o+=' the summation from <break time="200ms"/>'+(r=r.trim())+'<break time="200ms"/> to  <break time="200ms"/>'+t+'<break time="200ms"/> of <break time="150ms"/>',c=!0}else if(i.subscript){let t=e("math",i.subscript,n);o+=' the summation from <break time="200ms"/>'+(t=t.trim())+'<break time="200ms"/> of <break time="150ms"/>',c=!0}else o+=" the summation of";else if("\\prod"===t)if(i.superscript&&i.subscript){let t=e("math",i.superscript,n);t=t.trim();let r=e("math",i.subscript,n);o+=' the product from <break time="200ms"/>'+(r=r.trim())+'<break time="200ms"/> to <break time="200ms"/>'+t+'<break time="200ms"/> of <break time="150ms"/>',c=!0}else if(i.subscript){let t=e("math",i.subscript,n);o+=' the product from <break time="200ms"/>'+(t=t.trim())+'<break time="200ms"/> of <break time="150ms"/>',c=!0}else o+=" the product  of ";else if("\\int"===t)if(i.superscript&&i.subscript){let t=e("math",i.superscript,n);t=t.trim();let s=e("math",i.subscript,n);o+=' the integral from <break time="200ms"/>'+r(s=s.trim())+'<break time="200ms"/> to <break time="200ms"/>'+r(t)+' <break time="200ms"/> of ',c=!0}else o+=' the integral of <break time="200ms"/> ';else"string"==typeof i.body?o+=Vc[i.body]||Vc[i.symbol]||" "+i.body:i.symbol&&("\\"===i.symbol[0]?o+=" "+i.symbol.substr(1):o+=" "+i.symbol)}break;case"enclose":l=e("math",i.body,n),Wc(i.body)?o+=" crossed out "+l+" , ":o+=" crossed out "+l+". End cross out"}if(!c&&i.superscript){let r=e(t,i.superscript,n);const s=(r=r.trim()).replace(/<[^>]*>/g,"");if(Wc(i.superscript)){if("math"===t){const e=function(e){if(ta(e))for(const t of e)if("first"!==t.type&&t.id)return t.id.toString();return""}(i.superscript);e&&(o+='<mark name="'+e+'"/>')}""===s?o+=" prime ":"2"===s?o+=" squared ":"3"===s?o+=" cubed ":isNaN(parseInt(s))?o+=" to the "+r+"; ":o+=' to the <say-as interpret-as="ordinal">'+s+"</say-as> power; "}else isNaN(parseInt(s))?o+=" raised to the "+r+"; ":o+=' raised to the <say-as interpret-as="ordinal">'+s+"</say-as> power; "}if(!c&&i.subscript){let t=e("math",i.subscript,n);t=t.trim(),Wc(i.subscript)?o+=" sub "+t:o+=" subscript "+t+". End subscript. "}}return o}("math",e,n);if("ssml"===n.textToSpeechMarkup){let e="";n.speechEngineRate&&(e='<prosody rate="'+n.speechEngineRate+'">'),r='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+e+"<p><s>"+r+"</s></p>"+(e?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else r="mac"===n.textToSpeechMarkup&&"mac"===function(e){let t="other";return(null===navigator||void 0===navigator?void 0:navigator.platform)&&(null===navigator||void 0===navigator?void 0:navigator.userAgent)&&(/^(mac)/i.test(navigator.platform)?t="mac":/^(win)/i.test(navigator.platform)?t="win":/(android)/i.test(navigator.userAgent)?t="android":/(iphone)/i.test(navigator.userAgent)||/(ipod)/i.test(navigator.userAgent)||/(ipad)/i.test(navigator.userAgent)?t="ios":/\bCrOS\b/i.test(navigator.userAgent)&&(t="chromeos")),t===e?e:"!"+e}("mac")?r.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="([0-9]*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):r.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return r}function Uc(e,t,i){return t+Hc(i,{...e,textToSpeechMarkup:"",textToSpeechRulesOptions:{...e.textToSpeechRulesOptions,markup:"none"}})}function Xc(e,t,i,n){let r="";"plonk"===t?(e.plonkSound&&(e.plonkSound.load(),e.plonkSound.play().catch(e=>console.warn(e))),e.resetKeystrokeBuffer()):"delete"===t?r=Uc(e.options,"deleted: ",n):"focus"===t||/move/.test(t)?r=(rl(e.model)?"":"selected: ")+function(e,t){function i(e,t){return"body"===t.relation?{enclose:"cross out",leftright:"fence",surd:"square root",root:"math field"}[e.type]:{numer:"numerator",denom:"denominator",index:"index",body:"parent",subscript:"subscript",superscript:"superscript"}[t.relation]}const n=t?t.path:[],r=e.model.path,o=r[r.length-1];let s="";for(;n.length>r.length;)s+="out of "+i(t.parent(),n[n.length-1])+"; ",n.pop();if(!rl(e.model))return Uc(e.options,"",tl(e.model));const a=i(e.model.parent(),o);0===o.offset&&(s+=(a?"start of "+a:"unknown")+": ");const l=e.model.sibling(Math.max(1,e.model.extent));return l?s+=Uc(e.options,"",l):0!==o.offset&&(s+=a?"end of "+a:"unknown"),s}(e,i):"replacement"===t?r=Uc(e.options,"",e.model.sibling(0)):"line"===t?(e.accessibleNode.innerHTML=e.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+oc(e.model.root,e.options)+"</math>"),r=Uc(e.options,"",e.model.root),e.keyboardDelegate.setAriaLabel("after: "+r)):r=n?Uc(e.options,t+" ",n):t;const o=/\u00a0/.test(e.ariaLiveText.textContent)?"  ":"  ";e.ariaLiveText.textContent=r+o}dc({speak:(e,t,i)=>(function(e,t,i){i=null!=i?i:{withHighlighting:!1};const n=function(e,t){let i=null;switch(t){case"all":i=e.model.root;break;case"selection":rl(e.model)||(i=tl(e.model));break;case"left":{const t=e.model.siblings(),n=e.model.startOffset();if(n>=1){i=[];for(let e=1;e<=n;e++)i.push(t[e])}break}case"right":{const t=e.model.siblings(),n=e.model.endOffset()+1;if(n<=t.length-1){i=[];for(let e=n;e<=t.length-1;e++)i.push(t[e])}break}case"group":i=e.model.siblings();break;case"parent":{const t=e.model.parent();t&&"root"!==t.type&&(i=e.model.parent());break}}return i}(e,t);if(null===n)return e.options.speakHook(function(e){let t="";switch(e){case"all":console.log("Internal failure: speak all failed");break;case"selection":t="no selection";break;case"left":t="at start";break;case"right":t="at end";break;case"group":console.log("Internal failure: speak group failed");break;case"parent":t="no parent";break;default:console.log('unknown speak_ param value: "'+e+'"')}return t}(t),e.options),!1;const r={...e.options};(i.withHighlighting||"amazon"===r.speechEngine)&&(r.textToSpeechMarkup=window.sre&&"sre"===r.textToSpeechRules?"ssml_step":"ssml");const o=Hc(n,r);return i.withHighlighting?(window.mathlive.readAloudMathField=e,lc(e,{forHighlighting:!0}),e.options.readAloudHook&&e.options.readAloudHook(e.field,o,e.options)):e.options.speakHook&&e.options.speakHook(o,r),!1})(e,t,i)},{target:"mathfield",category:"speech"});const Zc=()=>{};function Jc(e){if("string"==typeof e){const t=new Audio;return t.preload="none",t.src=e,t.volume=.5,t}return e}function Gc(e){e instanceof HTMLAudioElement&&(e.pause(),e.removeAttribute("src"),e.load())}function Yc(e,t){const i=Qc(e,Object.keys(e));return Object.keys(t).forEach(e=>{var n,r,o;switch(e){case"scriptDepth":if(Jr(t.scriptDepth))i.scriptDepth=[t.scriptDepth[0],t.scriptDepth[1]];else{if("number"!=typeof t.scriptDepth)throw Error("Unexpected value for scriptDepth");i.scriptDepth=[t.scriptDepth,t.scriptDepth]}break;case"namespace":if(!/^[a-z]*[-]?$/.test(t.namespace))throw Error("namespace must be a string of lowercase characters only");/-$/.test(t.namespace)?i.namespace=t.namespace:i.namespace=t.namespace+"-";break;case"locale":i.locale="auto"===t.locale?null!==(n=null===navigator||void 0===navigator?void 0:navigator.language.slice(0,5))&&void 0!==n?n:"en":t.locale,Bc.locale=i.locale;break;case"strings":Bc.merge(t.strings),i.strings=Bc.strings;break;case"virtualKeyboardLayout":"auto"===t.virtualKeyboardLayout?i.virtualKeyboardLayout=null!==(r={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[Bc.locale.substring(0,2)])&&void 0!==r?r:"qwerty":i.virtualKeyboardLayout=t.virtualKeyboardLayout;break;case"virtualKeyboardMode":{const e=null===(o=window.matchMedia)||void 0===o?void 0:o.call(window,"(any-pointer: coarse)").matches;"auto"===t.virtualKeyboardMode?i.virtualKeyboardMode=e?"onfocus":"off":i.virtualKeyboardMode=t.virtualKeyboardMode}break;case"letterShapeStyle":"auto"===t.letterShapeStyle?"fr"===Bc.locale.substring(0,2)?i.letterShapeStyle="french":i.letterShapeStyle="tex":i.letterShapeStyle=t.letterShapeStyle;break;case"plonkSound":Gc(i.plonkSound),i.plonkSound=Jc(t.plonkSound);break;case"keypressSound":if(Gc(i.keypressSound),"string"==typeof t.keypressSound){const e=Jc(t.keypressSound);i.keypressSound={delete:e,return:e,spacebar:e,default:e}}else if(t.keypressSound instanceof HTMLAudioElement)i.keypressSound={delete:t.keypressSound,return:t.keypressSound,spacebar:t.keypressSound,default:t.keypressSound};else{if(!t.keypressSound.default)throw Error("Missing keypressSound.default");i.keypressSound={...t.keypressSound},i.keypressSound.return||(i.keypressSound.return=t.keypressSound.default),i.keypressSound.spacebar||(i.keypressSound.spacebar=t.keypressSound.default),i.keypressSound.delete||(i.keypressSound.delete=t.keypressSound.default)}break;case"onBlur":case"onFocus":case"onContentWillChange":case"onContentDidChange":case"onSelectionWillChange":case"onSelectionDidChange":case"onUndoStateWillChange":case"onUndoStateDidChange":case"onModeChange":case"onCommit":case"onVirtualKeyboardToggle":case"onReadAloudStatus":case"onError":if(null===t[e])i[e]=Zc;else if("function"!=typeof t[e])throw Error(e+" must be a function or null");i[e]=t[e];break;default:Jr(t[e])?i[e]=[...t[e]]:"object"==typeof t[e]?i[e]={...t[e]}:i[e]=t[e]}}),void 0!==t.overrideDefaultInlineShortcuts&&(t.overrideDefaultInlineShortcuts?i.inlineShortcuts=t.inlineShortcuts:i.inlineShortcuts={...$a,...t.inlineShortcuts}),i}function Qc(e,t){let i;i="string"==typeof t?[t]:void 0===t?Object.keys(e):t;const n={};return i.forEach(t=>{Jr(n[t])?n[t]=[...n[t]]:"object"==typeof n[t]?n[t]={...n[t]}:n[t]=e[t]}),"string"==typeof t?n[t]:n}function ed(){return{namespace:"",substituteTextArea:void 0,readOnly:!1,createHTML:e=>e,fontsDirectory:"./fonts",defaultMode:"math",macros:Vo,horizontalSpacingScale:1,letterShapeStyle:"auto",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,ignoreSpacebarInMathMode:!0,locale:Bc.locale,strings:Bc.strings,keybindings:kl,overrideDefaultInlineShortcuts:!1,inlineShortcuts:{},inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:'<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:/android|cros/i.test(null===navigator||void 0===navigator?void 0:navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:Zc,readAloudHook:Zc,onAnnounce:Xc,onKeystroke:()=>!0,onMoveOutOf:()=>!0,onTabOutOf:()=>!0,onBlur:Zc,onFocus:Zc,onContentWillChange:Zc,onContentDidChange:Zc,onSelectionWillChange:Zc,onSelectionDidChange:Zc,onUndoStateWillChange:Zc,onUndoStateDidChange:Zc,onModeChange:Zc,onVirtualKeyboardToggle:Zc,onReadAloudStatus:Zc,onCommit:Zc,onError:()=>{}}}function td(e,t,i){"function"==typeof t&&(i=t,t=1/0),void 0===t&&(t=1/0);let n=0,r=!1;for(;!r;){const o=e.model.sibling(n);(r=0===t||!o||"math"!==o.mode||!(/mord|textord|mpunct/.test(o.type)||"mop"===o.type&&/[a-zA-Z]+/.test(o.body))||Boolean(o.superscript)||Boolean(o.subscript)||i&&!i(o))||(o.applyStyle({mode:"text"}),o.symbol=o.body,o.latex=""),n-=1,t-=1}Pa(e.model)}function id(e,t,i){"function"==typeof t&&(i=t,t=1/0),void 0===t&&(t=1/0);let n=0,r=!1;for(;!r;){const o=e.model.sibling(n);(r=0===t||!o||"text"!==o.mode||" "===o.body||i&&!i(o))||o.applyStyle({mode:"math"}),n-=1,t-=1}nd(e),Pa(e.model)}function nd(e){let t=0;for(;e.model.sibling(t)&&"math"===e.model.sibling(t).mode;)t-=1;if(e.model.sibling(t)&&"text"===e.model.sibling(t).mode&&" "===e.model.sibling(t).body&&(!e.model.sibling(t-1)||"math"===e.model.sibling(t-1).mode)){e.model.siblings().splice(t-1,1),Pa(e.model);const i=e.model.suppressChangeNotifications;e.model.suppressChangeNotifications=!0,Xa(e.model,e.model.anchorOffset()-1),e.model.suppressChangeNotifications=i}}function rd(e,t,i){!function(e){const t=e.shiftKey&&e.altKey?3:e.altKey?2:e.shiftKey?1:0;if("Unidentified"===e.key)return;if("Dead"===e.key)return;const i=fl.filter(i=>{var n;return(null===(n=i.mapping[e.code])||void 0===n?void 0:n[t])===e.key});0!==i.length&&(i.forEach(e=>{e.score+=1}),fl.sort((e,t)=>t.score-e.score))}(i);const n=xl();if(e.keyboardLayout!==n.id&&(e.keyboardLayout=n.id,e.keybindings=Sl(e.options.keybindings,t=>{"function"==typeof e.options.onError&&e.options.onError({code:"invalid-keybinding",arg:t.join("\n")}),console.log(t.join("\n"))})),function(e,t){const i=e.keystrokeCaption;if(i&&e.keystrokeCaptionVisible){const n=e.element.getBoundingClientRect();i.style.left=n.left+"px",i.style.top=n.top-64+"px",i.innerHTML=e.options.createHTML("<span>"+(zl(t)||t)+"</span>"+i.innerHTML),i.style.visibility="visible",setTimeout(function(){i.childNodes.length>0&&i.removeChild(i.childNodes[i.childNodes.length-1]),0===i.childNodes.length&&(i.style.visibility="hidden")},3e3)}}(e,t),clearTimeout(e.keystrokeBufferResetTimer),e.options.onKeystroke&&!e.options.onKeystroke(e,t,i))return(null==i?void 0:i.preventDefault)&&(i.preventDefault(),i.stopPropagation()),!1;let r,o,s,a=!1;if("command"!==e.mode&&(!i||!i.ctrlKey&&!i.metaKey))if("[Backspace]"===t)e.keystrokeBuffer=e.keystrokeBuffer.slice(0,-1),e.keystrokeBufferStates.pop(),e.resetKeystrokeBuffer({defer:!0});else if(Tc(i)){const t=Nc(i),n=e.keystrokeBuffer+t;let s=0;for(;!r&&s<n.length;){let t;if(e.keystrokeBufferStates[s]){const i=new Cc;i.root=ea("math",sa(e.keystrokeBufferStates[s].latex,e.options.defaultMode,null,e.options.macros)),bc(i),i.selection=e.keystrokeBufferStates[s].selection,t=i.siblings()}else t=e.model.siblings();r=Oa(t,n.slice(s),e.options.inlineShortcuts),s+=1}o=e.keystrokeBufferStates.length-(n.length-s),e.keystrokeBuffer+=t,e.keystrokeBufferStates.push(e.getUndoRecord()),function(e,t){const i=[],n=t.overrideDefaultInlineShortcuts;for(let r=0;r<=e.length-1;r++){const o=e.substring(r);n||Object.keys($a).forEach(e=>{e.startsWith(o)&&!i.includes(e)&&i.push(e)});const s=(null==t?void 0:t.inlineShortcuts)?t.inlineShortcuts:null;s&&Object.keys(s).forEach(e=>{e.startsWith(o)&&i.push(e)})}return i}(n,e.options).length<=1?a=!0:e.resetKeystrokeBuffer({defer:!0})}else e.resetKeystrokeBuffer();if(e.options.smartMode){const n=e.mode;r?e.mode="math":function(e,t,i){if(e.smartModeSuppressed)return!1;if(e.model.endOffset()<e.model.siblings().length-1)return!1;if(!i||!Tc(i))return!1;const n=Nc(i);if(!rl(e.model))return!("text"!==e.mode||!/[/_^]/.test(n));const r=function(e){let t="",i=0,n=!1;for(;!n;){const r=e.model.sibling(i);(n=!(r&&("text"===r.mode&&!r.type||"math"===r.mode&&/mord|textord|mpunct/.test(r.type))))||(t=r.body+t),i-=1}return t}(e)+n;if("text"===e.mode){if("Esc"===t||/[/\\]/.test(n))return!0;if(/[\^_]/.test(n))return/(^|\s)[a-zA-Z][^_]$/.test(r)&&id(e,1),!0;const i={")":"(","}":"{","]":"["}[n];if(i&&e.model.parent()&&"leftright"===e.model.parent().type&&e.model.parent().leftDelim===i)return!0;if(/(^|[^a-zA-Z])(a|I)[ ]$/.test(r))return!1;if(/[$]/u.test(n))return!0;if(/(^|[^a-zA-Z'])[a-zA-Z][ ]$/.test(r))return id(e,1),!1;if(/[^0-9]\.[^0-9\s]$/.test(r)){id(e,1);const t=e.model.sibling(0);return t.body="",t.variant="normal",t.symbol="\\cdot",t.latex="",!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(r))return id(e,1),!0;if(/\.[0-9]$/.test(r))return id(e,1),!0;if(/[(][0-9+\-.]$/.test(r))return id(e,1),!0;if(/[(][a-z][,;]$/.test(r))return id(e,2),!0;if(/[0-9+\-=><*|]$/.test(n))return nd(e),!0}else{if("[Space]"===t)return td(e,void 0,e=>/[a-z][:,;.]$/.test(e.body)),!0;if(/[a-zA-Z]{3,}$/.test(r)&&!/(dxd|abc|xyz|uvw)$/.test(r))return td(e,void 0,e=>/[a-zA-Z]/.test(e.body)),!0;if(/(^|\W)(if|If)$/i.test(r))return td(e,1),!0;if(/(\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5){3,}$/u.test(r)&&!/()$/.test(r))return td(e,void 0,e=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039b|\u039E|\u03A0|\u03A3|\u03a5|\u03a6|\u03a8|\u03a9|[\u03b1-\u03c9]|\u03d1|\u03d5|\u03d6|\u03f1|\u03f5)/u.test(e.body)),!0;if("?"===n)return!0;if("."===n&&!/[0-9-+]\.$/.test(r))return!0}return!1}(e,t,i)&&(e.mode={math:"text",text:"math"}[e.mode],s=""),e.mode!==n&&"function"==typeof e.options.onModeChange&&e.options.onModeChange(e,e.mode)}if(r||s||(s=function(e,t,i){if(0===e.length)return"";for(let n=e.length-1;n>=0;n--)if(e[n].key===i&&(!e[n].ifMode||e[n].ifMode===t))return e[n].command;return""}(e.keybindings,e.mode,t)),!(r||s||"[Enter]"!==t&&"[Return]"!==t)&&"function"==typeof e.options.onCommit)return e.options.onCommit(e),(null==i?void 0:i.preventDefault)&&(i.preventDefault(),i.stopPropagation()),!1;if(!r&&!s)return!0;if(e.options.readOnly&&"insert"===s[0])return!0;Il(e.model,!1);const l=e.model.parent();if("moveAfterParent"===s&&l&&"leftright"===l.type&&e.model.endOffset()===e.model.siblings().length-1&&e.options.smartFence&&wc(e.model,".",e.style)&&(s="",ac(e)),"math"===e.mode&&"[Spacebar]"===t&&!r){const t=e.model.sibling(1),i=e.model.sibling(-1);(t&&"text"===t.mode||i&&"text"===i.mode)&&xc(e.model," ",{mode:"text"})}if(s)e.executeCommand(s);else if(r){e.keyboardDelegate.cancelComposition();const t={...Va(e.model),...e.style};if(!/^(\\{|\\}|\\[|\\]|\\@|\\#|\\$|\\%|\\^|\\_|\\backslash)$/.test(r)){const n=e.mode;xc(e.model,Nc(i),{suppressChangeNotifications:!0,mode:e.mode,style:t}),e.snapshotAndCoalesce(),e.restoreToUndoRecord(e.keystrokeBufferStates[o]),e.mode=n}const n=e.model.suppressChangeNotifications;e.model.suppressChangeNotifications=!0,xc(e.model,r,{format:"latex",mode:e.mode,style:t,smartFence:!0}),nd(e),r.endsWith(" ")&&(e.mode="text",xc(e.model," ",{mode:"text",style:t})),e.model.suppressChangeNotifications=n,Pa(e.model),Ba(e.model),e.snapshot(),e.dirty=!0,e.model.announce("replacement"),a&&e.resetKeystrokeBuffer()}return e.scrollIntoView(),(null==i?void 0:i.preventDefault)&&(i.preventDefault(),i.stopPropagation()),!1}function od(e,t,i){if(e.options.readOnly)return void e.model.announce("plonk");if((i=null!=i?i:{}).focus&&e.focus(),i.feedback&&(e.options.keypressVibration&&(null===navigator||void 0===navigator?void 0:navigator.vibrate)&&navigator.vibrate(3),e.keypressSound&&(e.keypressSound.load(),e.keypressSound.play().catch(e=>console.warn(e)))),i.commandMode&&"command"!==e.mode&&e.switchMode("command"),Il(e.model,!1),i.simulateKeystroke){const i=t.charAt(0);if(!rd(e,i,new KeyboardEvent("keypress",{key:i})))return}let n="",r=!1;const o={...Va(e.model),...e.style},s=Vs(t);for(const a of s)if("command"===e.mode){ha(e.model),e.suggestionIndex=0;const t=Rl(e.model),i=ls(t+a);r=i.length>1,0===i.length?(xc(e.model,a,{mode:"command"}),/^\\[a-zA-Z\\*]+$/.test(t+a)&&Il(e.model,!0),Pl(e)):(xc(e.model,a,{mode:"command"}),i[0].match!==t+a&&Rc(e.model,i[0].match,-i[0].match.length+t.length+1),n=i[0].match)}else if("math"===e.mode){const t={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[a];if(t){if("moveToSuperscript"===t){if(sd(e)>=e.options.scriptDepth[1])return void e.model.announce("plonk")}else if("moveToSubscript"===t&&ad(e)>=e.options.scriptDepth[0])return void e.model.announce("plonk");e.executeCommand(t)}else e.options.smartSuperscript&&"superscript"===e.model.relation()&&/[0-9]/.test(a)&&0===e.model.siblings().filter(e=>"first"!==e.type).length?(xc(e.model,a,{mode:"math",style:o}),ll(e.model)):xc(e.model,a,{mode:"math",style:o,smartFence:e.options.smartFence})}else"text"===e.mode&&xc(e.model,a,{mode:"text",style:o});"command"!==e.mode&&e.snapshotAndCoalesce(),e.dirty=!0,e.scrollIntoView(),ql(e,n,r)}function sd(e){let t=0,i=0,n=e.model.ancestor(i),r=!1;for(;n;)(n.superscript||n.subscript)&&(t+=1),n.superscript?r=!0:n.subscript&&(r=!1),i+=1,n=e.model.ancestor(i);return r?t:0}function ad(e){let t=0,i=0,n=e.model.ancestor(i),r=!1;for(;n;)(n.superscript||n.subscript)&&(t+=1),n.superscript?r=!1:n.subscript&&(r=!0),i+=1,n=e.model.ancestor(i);return r?t:0}let ld;dc({undo:e=>(Ic(e),e.undo(),!0),redo:e=>(Ic(e),e.redo(),!0),scrollIntoView:e=>(e.scrollIntoView(),!0),scrollToStart:e=>(e.field.scroll(0,0),!0),scrollToEnd:e=>{const t=e.field.getBoundingClientRect();return e.field.scroll(t.left-window.scrollX,0),!0},enterCommandMode:e=>(e.switchMode("command"),!0),toggleKeystrokeCaption:e=>(e.keystrokeCaptionVisible=!e.keystrokeCaptionVisible,e.keystrokeCaption.innerHTML="",e.keystrokeCaptionVisible||(e.keystrokeCaption.style.visibility="hidden"),!1),switchMode:(e,t)=>(e.switchMode(t),!0),insert:(e,t,i)=>e.insert(t,i),typedText:(e,t)=>(od(e,t),!0),commit:e=>("function"==typeof e.options.onCommit&&e.options.onCommit(e),!0)}),dc({applyStyle:function(e,t){e.resetKeystrokeBuffer();const i=function(e){const t={};return"string"==typeof e.mode&&(t.mode=e.mode.toLowerCase(),console.assert("math"===t.mode||"text"===t.mode||"command"===t.mode)),"string"==typeof e.color&&(t.color=e.color),"string"==typeof e.backgroundColor&&(t.backgroundColor=e.backgroundColor),"string"==typeof e.fontFamily&&(t.fontFamily=e.fontFamily),"string"==typeof e.series&&(t.fontSeries=e.series),"string"==typeof e.fontSeries&&(t.fontSeries=e.fontSeries.toLowerCase()),t.fontSeries&&(t.fontSeries={bold:"b",medium:"m",normal:"m"}[t.fontSeries]||t.fontSeries),"string"==typeof e.shape&&(t.fontShape=e.shape),"string"==typeof e.fontShape&&(t.fontShape=e.fontShape.toLowerCase()),t.fontShape&&(t.fontShape={italic:"it",up:"n",upright:"n",normal:"n"}[t.fontShape]||t.fontShape),"string"==typeof e.size?t.fontSize=e.size:"number"==typeof e.size&&(t.fontSize="size"+Math.min(0,Math.max(10,e.size))),"string"==typeof e.fontSize&&(t.fontSize=e.fontSize.toLowerCase()),t.fontSize&&(t.fontSize={tiny:"size1",scriptsize:"size2",footnotesize:"size3",small:"size4",normal:"size5",normalsize:"size5",large:"size6",Large:"size7",LARGE:"size8",huge:"size9",Huge:"size10"}[t.fontSize]||t.fontSize),t}(t);if(i.mode){if(rl(e.model))e.switchMode(i.mode);else{const t=e.mode,i="math"===(Ha(e.model)||e.options.defaultMode)?"text":"math";let n=e.getValue(e.selection,"ASCIIMath");if("math"===i&&/^"[^"]+"$/.test(n)&&(n=n.slice(1,-1)),e.insert(n,{mode:i,selectionMode:"item",format:"text"===i?"text":"ASCIIMath"}),e.mode=i,e.model.groupIsSelected()){const t=e.model.parent();!t||"group"!==t.type&&"root"!==t.type||(t.mode=i)}e.mode!==t&&"function"==typeof e.options.onModeChange&&e.options.onModeChange(e,e.mode)}delete i.mode}return rl(e.model)?(e.style.fontSeries&&i.fontSeries===e.style.fontSeries&&(i.fontSeries="auto"),i.fontShape&&i.fontShape===e.style.fontShape&&(i.fontShape="auto"),i.color&&i.color===e.style.color&&(i.color="none"),i.backgroundColor&&i.backgroundColor===e.style.backgroundColor&&(i.backgroundColor="none"),i.fontSize&&i.fontSize===e.style.fontSize&&(i.fontSize="auto"),e.style={...e.style,...i}):(vc(e.model,i),e.snapshot()),!0}},{target:"mathfield"}),dc({copyToClipboard:e=>(e.focus(),rl(e.model)&&e.select(),document.execCommand("copy"),!1),cutToClipboard:e=>(e.focus(),document.execCommand("cut"),!0),pasteFromClipboard:e=>(e.focus(),document.execCommand("paste"),!0)},{target:"mathfield",category:"clipboard"});let cd=0;function dd(e,t,i,n){var r;(n=null!=n?n:{}).bias=null!==(r=n.bias)&&void 0!==r?r:0;const o=function e(t,i,n){let r={element:null,distance:Number.POSITIVE_INFINITY},o=!0;if(t.getAttribute("data-atom-id")){r.element=t;const e=t.getBoundingClientRect(),s=i-(e.left+e.right)/2,a=n-(e.top+e.bottom)/2;r.distance=s*s+a*a,o=i>=e.left&&i<=e.right}if(o&&t.children)for(const s of t.children){const t=e(s,i,n);t.element&&t.distance<=r.distance&&(r=t)}return r}(e.field,t,i).element,s=o?o.getAttribute("data-atom-id"):null;if(!s)return;const a=hl(e.model,e=>{if(!e.captureSelection)return e.id===s;let t=!1;return e.forEach(e=>{e.id===s&&(t=!0)}),t});if(!a||0===a.length)return;const l=ga(a[0]).path;if(0===n.bias){const e=o.getBoundingClientRect();t<e.left+e.width/2&&!o.classList.contains("ML__placeholder")&&(l[l.length-1].offset=Math.max(0,l[l.length-1].offset-1))}else n.bias<0&&(l[l.length-1].offset=Math.min(e.model.siblings().length-1,Math.max(0,l[l.length-1].offset+n.bias)));return l}class pd{constructor(e){this.mathfield=e,this.element=document.createElement("div"),window.addEventListener("mouseup",this),window.addEventListener("blur",this),window.addEventListener("touchend",this),window.addEventListener("touchcancel",this)}handleEvent(e){switch(e.type){case"mouseup":case"blur":case"touchend":case"touchcancel":_d(this.mathfield)}}dispose(){Dl(document.getElementById("mathlive-alternate-keys-panel")),this.element.remove()}}const hd={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;",classes:"tex",layers:["symbols"]},command:{tooltip:"keyboard.tooltip.command",command:"enterCommandMode",label:"<svg><use xlink:href='#svg-command' /></svg>",layers:["lower-command","upper-command","symbols-command"]},style:{tooltip:"keyboard.tooltip.style",layer:"style",label:"<b>b</b><i>i</i>"}},ud={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'{\\char"0190}'],"\\rho ":["&#x3A1",'{\\char"3A1}'],"\\tau ":["&#x3A4;",'{\\char"3A4}'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'{\\char"399}'],"\\omicron ":["&#x039F;",'{\\char"39F}'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'{\\char"391}'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'{\\char"397}'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'{\\char"39A}'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'{\\char"396}'],"\\chi ":["&Chi;",'{\\char"3A7}'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'{\\char"392}'],"\\nu ":["&Nu;",'{\\char"39D}'],"\\mu ":["&Mu;",'{\\char"39C}']},md={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",classes:"box"},{latex:"\\cdots",aside:"center ellipsis",classes:"box"},{latex:"\\ldotp",aside:"low dot",classes:"box"},{latex:"\\ldots",aside:"low ellipsis",classes:"box"},{latex:"\\vdots",aside:"",classes:"box"},{latex:"\\ddots",aside:"",classes:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",classes:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",classes:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\nless","\\nleq","\\precsim","\\lesssim","\\lessgtr","\\prec","\\preccurlyeq","\\lessdot","\\nprec"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\ngtr","\\ngeq","\\succsim","\\gtrsim","\\gtrless","\\succ","\\succcurlyeq","\\gtrdot","\\nsucc"],set:["\\in","\\owns","\\subset","\\nsubset","\\supset","\\nsupset"],"!set":["\\notin","\\backepsilon"],subset:[],supset:[],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\ln_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",classes:"small"},{latex:"\\int",classes:"small"},{latex:"\\smallint",classes:"small"},{latex:"\\iint",classes:"small"},{latex:"\\iiint",classes:"small"},{latex:"\\oint",classes:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",classes:"small"},{latex:"\\frac{\\partial}{\\partial x}",classes:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\N",aside:"set of natural numbers"}],p:[{latex:"\\P",aside:"set of primes"}],q:[{latex:"\\Q",aside:"set of rational numbers"}],r:[{latex:"\\R",aside:"set of real numbers"}],z:[{latex:"\\Z",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",classes:"small"},{latex:"g(#?)",classes:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isnt"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br> em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br> em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br> em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br> em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:" em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:" em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>',command:'"deleteAll"'}],"->|":[]};let fd={};const gd={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='$$\\exponentialE$$' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-insert='$$\\imaginaryI$$' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='x2' data-insert='$$#@^{2}$$'><span><i>x</i>&thinsp;</span></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='$$#@^{#?}$$'><span><i>x</i><sup>&thinsp;<small>&#x2b1a;</small></sup></span></li>\n                <li class='keycap tex' data-alt-keys='sqrt' data-insert='$$\\sqrt{#0}$$' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='int' data-latex='\\int_0^\\infty'><span></span></li>\n                <li class='keycap tex' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys=','>,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='set' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!set' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='supset' data-insert='\\supset '>&#x2283;</li>\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-insert='$$^{\\prime} $$'><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-insert='\\subseteq '>&#x2286;</li>\n                <li class='keycap tex' data-insert='\\supseteq '>&#x2287;</li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\vec{#@}$$' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='accents' data-insert='$$\\bar{#@}$$' data-latex='\\bar{#?}' data-aside='bar'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='$$\\left| #0 \\right|$$' data-latex='\\left| #? \\right|' data-aside='abs'></li>\n                <li class='keycap tex' data-insert='\\ast '>&#x2217;<aside>asterisk</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"{\\\\char\\\"391}\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"0190}'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A1}'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A4}'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"399}'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39F}'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='{\\char\"391}'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"397}'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39A}'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'>&#x21e7;</li>\n                <li class='keycap tex' data-insert='{\\char\"396}'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"3A7}'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"392}'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39D}'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='{\\char\"39C}'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-command":"\n        <div class='rows'>\n            <ul><row name='lower-1' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-2' class='tt' shift-layer='upper-command'/></ul>\n            <ul><row name='lower-3' class='tt' shift-layer='upper-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'>01#</li>\n                <li class='keycap tt' data-shifted='[' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"[\"]'>{</li>\n                <li class='keycap tt' data-shifted=']' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"]\"]'>}</li>\n                <li class='keycap tt' data-shifted='(' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \"(\"]'>^</li>\n                <li class='keycap tt' data-shifted=')' data-shifted-command='[\"insertAndUnshiftKeyboardLayer\", \")\"]'>_</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-command":"\n        <div class='rows'>\n            <ul><row name='upper-1' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-2' class='tt' shift-layer='lower-command'/></ul>\n            <ul><row name='upper-3' class='tt' shift-layer='lower-command'/></ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='symbols-command'01#</li>\n                <li class='keycap tt'>[</li>\n                <li class='keycap tt'>]</li>\n                <li class='keycap tt'>(</li>\n                <li class='keycap tt'>)</li>\n                <li class='keycap w20' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","symbols-command":"\n        <div class='rows'>\n            <ul><li class='keycap tt'>1</li><li class='keycap tt'>2</li><li class='keycap tt'>3</li><li class='keycap tt'>4</li><li class='keycap tt'>5</li><li class='keycap tt'>6</li><li class='keycap tt'>7</li><li class='keycap tt'>8</li><li class='keycap tt'>9</li><li class='keycap tt'>0</li></ul>\n            <ul><li class='keycap tt'>!</li><li class='keycap tt'>@</li><li class='keycap tt'>#</li><li class='keycap tt'>$</li><li class='keycap tt'>%</li><li class='keycap tt'>^</li><li class='keycap tt'>&</li><li class='keycap tt'>*</li><li class='keycap tt'>+</li><li class='keycap tt'>=</li></ul>\n            <ul>\n                <li class='keycap tt'>\\</li>\n                <li class='keycap tt'>|</li>\n                <li class='keycap tt'>/</li>\n                <li class='keycap tt'>`</li>\n                <li class='keycap tt'>;</li>\n                <li class='keycap tt'>:</li>\n                <li class='keycap tt'>?</li>\n                <li class='keycap tt'>'</li>\n                <li class='keycap tt'>\"</li>\n                <li class='action font-glyph bottom right'\n                    data-shifted='<span class=\"warning\"><svg><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'\n                >&#x232b;</li>\n            </ul>\n            <ul>\n                <li class='layer-switch font-glyph modifier bottom left' data-layer='lower-command'>abc</li>\n                <li class='keycap tt'>&lt;</li>\n                <li class='keycap tt'>&gt;</li>\n                <li class='keycap tt'>~</li>\n                <li class='keycap tt'>,</li>\n                <li class='keycap tt'>.</li>\n                <li class='keycap' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{lcm}(#?)$$' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{ceil}(#?)$$' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\lim_{n\\to\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\int$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{abs}(#?)$$' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\cos'></li>\n                <li class='fnbutton' data-insert='\\cos^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln_{10}'></li>\n                <li class='fnbutton' data-insert='$$10^{#?}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{gcd}(#?)$$' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{floor}(#?)$$' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\sum_{n\\mathop=0}^{\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\int_{0}^{\\infty}$$'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{sign}(#?)$$' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton' data-insert='\\tan'></li>\n                <li class='fnbutton' data-insert='\\tan^{-1}'></li>\n                <li class='fnbutton' data-insert='$$\\log_{#?}$$'></li>\n                <li class='fnbutton' data-insert='$$\\sqrt[#?]{#0}$$'></li>\n                <li class='bigfnbutton' data-insert='$$#0 \\mod$$' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='$$\\operatorname{round}(#?) $$' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='$$\\prod_{n\\mathop=0}^{\\infty}$$' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='$$\\frac{\\differentialD #0}{\\differentialD x}$$'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deletePreviousChar\"]'>&#x232b;</li></ul>\n            <ul><li class='separator'></li>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='$$^{#?} $$' data-latex='x^{#?} '></li>\n                <li class='fnbutton' data-insert='$$_{#?} $$' data-latex='x_{#?} '></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"#cc2428\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"#fff590\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"size9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='$$\\emph{#?} $$' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function yd(e,t,i){return e=e.replace(/(^|[^\\])#@/g,"$1#?"),No($o(Ys({mathstyle:mo.displaystyle,macros:i.options.macros},sa(e,"math",t,i.options.macros)),"ML__base"),"ML__mathlive").toMarkup()}function vd(e,t,i){var n;let r="<div class='left'>";const o=t.replace(/\s+/g," ").split(" ");if(o.length>1){const t={...hd,...null!==(n=e.options.customVirtualKeyboards)&&void 0!==n?n:{}};for(const e of o){if(!t[e]){console.error('Unknown virtual keyboard "'+e+'"');break}r+="<div class='",e===i?r+="selected ":t[e].command?r+="action ":r+="layer-switch ",r+=(t[e].classes||"")+"'",t[e].tooltip&&(r+="data-ML__tooltip='"+Pc(t[e].tooltip)+"' ",r+="data-placement='top' data-delay='1s'"),e!==i&&(t[e].command&&(r+="data-command='\""+t[e].command+"\"'"),t[e].layer&&(r+="data-layer='"+t[e].layer+"'")),r+=">"+t[e].label+"</div>"}}return r+="</div>","<div class='keyboard-toolbar' role='toolbar'>"+(r+=`\n        <div class='right'>\n            <div class='action'\n                data-command='"copyToClipboard"'\n                data-ML__tooltip='${Pc("tooltip.copy to clipboard")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-copy' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"undo"'\n                data-ML__tooltip='${Pc("tooltip.undo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-undo' /></svg>\n            </div>\n            <div class='action disabled'\n                data-command='"redo"'\n                data-ML__tooltip='${Pc("tooltip.redo")}' data-placement='top' data-delay='1s'>\n                <svg><use xlink:href='#svg-redo' /></svg>\n            </div>\n        </div>\n    `)+"</div>"}function bd(e,t,i){var n;for(let r=0;r<t.length;++r){const o=t[r];let s;o.getAttribute("data-latex")?s=yd(o.getAttribute("data-latex").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\scriptstyle \\char"2B1A}}'},e):o.getAttribute("data-insert")&&""===o.innerHTML?s=yd(o.getAttribute("data-insert").replace(/&quot;/g,'"'),{"?":'{\\color{#555}{\\scriptstyle \\char"2B1A}}'},e):o.getAttribute("data-content")&&(s=o.getAttribute("data-content").replace(/&quot;/g,'"')),o.getAttribute("data-aside")&&(s=(null!=s?s:"")+"<aside>"+o.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),void 0!==s&&(o.innerHTML=e.options.createHTML(s)),o.getAttribute("data-classes")&&o.classList.add(o.getAttribute("data-classes"));const a=null===(n=o.getAttribute("data-insert"))||void 0===n?void 0:n.replace(/&quot;/g,'"');let l;if(a&&ud[a]&&(o.setAttribute("data-shifted",ud[a][0]),o.setAttribute("data-shifted-command",JSON.stringify(["insertAndUnshiftKeyboardLayer",ud[a][1]]))),l=o.getAttribute("data-command")?JSON.parse(o.getAttribute("data-command")):o.getAttribute("data-insert")?["insert",o.getAttribute("data-insert"),{focus:!0,feedback:!0,mode:"math",format:"latex",resetStyle:!0}]:o.getAttribute("data-latex")?["insert",o.getAttribute("data-latex"),{focus:!0,feedback:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",o.getAttribute("data-key")||o.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}],i&&(l=[i,l]),o.getAttribute("data-alt-keys")){const e=fd[o.getAttribute("data-alt-keys")];e?l={default:l,pressAndHoldStart:["showAlternateKeys",o.getAttribute("data-alt-keys"),e],pressAndHoldEnd:"hideAlternateKeys"}:console.warn('Unknown alt key set: "'+o.getAttribute("data-alt-keys"))}Nl(e,o,l)}}function xd(e,t){const i={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},n=i[e.options.virtualKeyboardLayout]?i[e.options.virtualKeyboardLayout]:i.qwerty;let r,o=t,s=(o=o.replace(/<arrows\/>/g,"\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToPreviousChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-left\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToPreviousChar\"]'>\n            <svg><use xlink:href='#svg-arrow-left' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextChar\"]'\n            data-shifted='<svg><use xlink:href=\"#svg-angle-double-right\" /></svg>'\n            data-shifted-command='[\"performWithFeedback\",\"extendToNextChar\"]'>\n            <svg><use xlink:href='#svg-arrow-right' /></svg>\n        </li>\n        <li class='action' data-command='[\"performWithFeedback\",\"moveToNextPlaceholder\"]'>\n        <svg><use xlink:href='#svg-tab' /></svg></li>")).match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;s;){r="";const e=s[2].match(/[a-zA-Z][a-zA-Z0-9-]*=(['"])(.*?)\1/g),t={};for(const i of e){const e=i.match(/([a-zA-Z][a-zA-Z0-9-]*)=(['"])(.*?)\2/);t[e[1]]=e[3]}let a=n[t.name];if(a||(a=i.qwerty[t.name]),a)for(const i of a){let e=t.class||"";e&&(e=" "+e),"~"===i?(r+="<li class='action font-glyph bottom right ",r+=a.length-(a.match(/ /g)||[]).length/2==10?"w10":"w15",r+='\' data-shifted=\'<span class="warning"><svg><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deletePreviousChar"]\'\n                        >&#x232b;</li>'):" "===i?r+="<li class='separator w5'></li>":"^"===i?r+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+t["shift-layer"]+"'>&#x21e7;</li>":"/"===i?r+="<li class='keycap"+e+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":"*"===i?r+="<li class='keycap"+e+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===i?r+="<li class='keycap"+e+"' data-alt-keys='-' data-key='-' data-alt-keys='-'>&#x2212;</li>":/tt/.test(e)?r+="<li class='keycap"+e+"' data-alt-keys='"+i+'\' data-command=\'["typedText","'+i+'",{"commandMode":true, "focus":true, "feedback":true}]\'>'+i+"</li>":r+="<li class='keycap"+e+"' data-alt-keys='"+i+"'>"+i+"</li>"}else console.warn("Unknown roman keyboard row: "+t.name);s=(o=o.replace(new RegExp(s[1]+s[2]+s[3]),r)).match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return o}function kd(){const e=document.getElementById("mathlive-alternate-keys-panel");return e&&(e.classList.remove("is-visible"),e.innerHTML="",Dl(e)),!1}function _d(e){var t;if(!Tl(e))return!1;kd();const i=null===(t=e.virtualKeyboard)||void 0===t?void 0:t.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(i)for(let n=0;n<i.length;n++){const t=i[n],r=t.getAttribute("data-unshifted-content");r&&(t.innerHTML=e.options.createHTML(r));const o=t.getAttribute("data-unshifted-command");o&&t.setAttribute("data-"+e.options.namespace+"command",o)}return!1}function wd(e){var t;const i=null===(t=e.virtualKeyboard)||void 0===t?void 0:t.element.querySelector(".keyboard-toolbar");if(i){const t=i.querySelector("[data-command='\"undo\"']"),n=i.querySelector("[data-command='\"redo\"']");e.canRedo()?n.classList.remove("disabled"):n.classList.add("disabled"),e.canUndo()?t.classList.remove("disabled"):t.classList.add("disabled")}}function Md(e,t){var i;if("off"!==e.options.virtualKeyboardMode){"lower-command"!==t&&"upper-command"!==t&&"symbols-command"!==t&&Ic(e),zd(e),kd(),_d(e);const n=null===(i=e.virtualKeyboard)||void 0===i?void 0:i.element.getElementsByClassName("keyboard-layer");let r=!1;for(let e=0;e<n.length;e++)if(n[e].dataset.layer===t){r=!0;break}if(r)for(let e=0;e<n.length;e++)n[e].dataset.layer===t?n[e].classList.add("is-visible"):n[e].classList.remove("is-visible");e.focus()}return!0}function zd(e,t=""){return e.virtualKeyboardVisible=!1,Ld(e,t),!1}function Sd(e){return e.virtualKeyboardVisible=!0,Ld(e),!1}function Ld(e,t){var i,n,r;return e.virtualKeyboardVisible=!e.virtualKeyboardVisible,e.virtualKeyboardVisible?(e.focus(),(null===(i=e.virtualKeyboard)||void 0===i?void 0:i.element)?e.virtualKeyboard.element.classList.add("is-visible"):(e.virtualKeyboard=function(e,t){var i,n;let r='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n            <symbol id="svg-command" viewBox="0 0 640 512">\n                <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n            </symbol>\n\n            <symbol id="svg-undo" viewBox="0 0 512 512">\n                <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n            </symbol>\n            <symbol id="svg-redo" viewBox="0 0 512 512">\n                <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-arrow-left" viewBox="0 0 192 512">\n                <path d="M25.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L64.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L25 264.5c-4.6-4.7-4.6-12.3.1-17z"/>\n            </symbol>\n            <symbol id="svg-arrow-right" viewBox="0 0 192 512">\n                    <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17z"/>\n            </symbol>\n            <symbol id="svg-tab" viewBox="0 0 448 512">\n                    <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n            </symbol>\n            <symbol id="svg-copy" viewBox="0 0 448 512">\n                <path d="M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM352 32.491a15.88 15.88 0 0 1 7.431 4.195l51.882 51.883A15.885 15.885 0 0 1 415.508 96H352V32.491zM288 464c0 8.822-7.178 16-16 16H48c-8.822 0-16-7.178-16-16V144c0-8.822 7.178-16 16-16h80v240c0 26.51 21.49 48 48 48h112v48zm128-96c0 8.822-7.178 16-16 16H176c-8.822 0-16-7.178-16-16V48c0-8.822 7.178-16 16-16h144v72c0 13.2 10.8 24 24 24h72v240z"/>\n            </symbol>\n            <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n                <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n            </symbol>\n            <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n                <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n            </symbol>\n            <symbol id="svg-trash" viewBox="0 0 448 512">\n                <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n            </symbol>\n        </svg>\n        ';da(null,'.ML__keyboard{--keyboard-background:rgba(209,213,217,0.97);--keyboard-text:#000;--keyboard-text-active:var(--primary,hsl(var(--hue,212),40%,50%));--keyboard-background-border:#ddd;--keycap-background:#fff;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:#e5e5e5;--keyboard-alternate-text:#000;position:fixed;left:0;bottom:-267px;width:100vw;z-index:var(--keyboard-zindex,105);padding-top:5px;transform:translate(0);opacity:0;visibility:hidden;transition:.28s cubic-bezier(0,0,.2,1);transition-property:transform,opacity;-webkit-backdrop-filter:grayscale(50%);backdrop-filter:grayscale(50%);background-color:var(--keyboard-background);border:1px solid var(--keyboard-background-border);font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:16px;font-weight:400;margin:0;text-shadow:none;box-sizing:border-box;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.ML__keyboard.is-visible{transform:translateY(-267px);opacity:1;visibility:visible;transition-timing-function:cubic-bezier(.4,0,1,1)}.ML__keyboard .tex{font-family:KaTeX_Main,Cambria Math,Asana Math,OpenSymbol,Symbola,STIX,Times,serif!important}.ML__keyboard .tex-math{font-family:KaTeX_Math,Cambria Math,Asana Math,OpenSymbol,Symbola,STIX,Times,serif!important}.ML__keyboard .tt{font-family:IBM Plex Mono,Source Code Pro,Consolas,Roboto Mono,Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Courier,monospace!important;font-size:30px;font-weight:400}.ML__keyboard.alternate-keys{visibility:hidden;max-width:286px;background-color:var(--keyboard-alternate-background);text-align:center;border-radius:6px;position:fixed;bottom:auto;top:0;box-sizing:content-box;transform:none;z-index:calc(var(--keyboard-zindex, 105) + 1);display:flex;flex-direction:row;justify-content:center;align-content:center;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);transition:none}@media only screen and (max-height:412px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys ul{list-style:none;margin:3px;padding:0;display:flex;flex-flow:row wrap-reverse;justify-content:center}.ML__keyboard.alternate-keys ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;font-size:30px;height:70px;width:70px;box-sizing:border-box;margin:0;background:transparent;border:1px solid transparent;border-radius:5px;pointer-events:all;color:var(--keyboard-alternate-text);fill:currentColor}@media only screen and (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li.active,.ML__keyboard.alternate-keys ul>li.pressed,.ML__keyboard.alternate-keys ul>li:hover{box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);background:var(--keyboard-alternate-background-active);color:var(--keyboard-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:18px}.ML__keyboard.alternate-keys ul>li.small-button{width:42px;height:42px;margin:2px;background:#fbfbfb}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,.24)}.ML__keyboard.alternate-keys ul>li .warning{min-height:60px;min-width:60px;background:#cd0030;color:#fff;padding:5px;display:flex;align-items:center;justify-content:center;border-radius:5px}.ML__keyboard.alternate-keys ul>li .warning.active,.ML__keyboard.alternate-keys ul>li .warning.pressed,.ML__keyboard.alternate-keys ul>li .warning:hover{background:red}.ML__keyboard.alternate-keys ul>li .warning svg{width:50px;height:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:12px;line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard>div.keyboard-layer{display:none;outline:none}.ML__keyboard>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;width:736px}@media only screen and (min-width:768px) and (max-width:1024px){.ML__keyboard>div>div.keyboard-toolbar{width:556px}}@media only screen and (max-width:767px){.ML__keyboard>div>div.keyboard-toolbar{width:365px;max-width:100vw}}.ML__keyboard>div>div.keyboard-toolbar svg{height:20px;width:20px}@media only screen and (max-width:767px){.ML__keyboard>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard>div>div.keyboard-toolbar>.left{position:relative;display:flex;justify-content:flex-start;flex-flow:row}.ML__keyboard>div>div.keyboard-toolbar>.right{display:flex;justify-content:flex-end;flex-flow:row}.ML__keyboard>div>div.keyboard-toolbar>div>div{display:flex;align-items:baseline;justify-content:center;pointer-events:all;color:var(--keyboard-text);fill:currentColor;background:0;font-size:110%;cursor:pointer;min-height:0;padding:4px 10px;margin:7px 4px 6px;box-shadow:none;border:none;border-bottom:2px solid transparent}.ML__keyboard>div>div.keyboard-toolbar>div>div.disabled.pressed svg,.ML__keyboard>div>div.keyboard-toolbar>div>div.disabled:hover svg,.ML__keyboard>div>div.keyboard-toolbar>div>div.disabled svg{color:var(--keyboard-text);opacity:.2}@media only screen and (max-width:414px){.ML__keyboard>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media only screen and (max-width:767px){.ML__keyboard>div>div.keyboard-toolbar>div>div{padding-left:4px;padding-right:4px;font-size:90%}}.ML__keyboard>div>div.keyboard-toolbar>div>div.active,.ML__keyboard>div>div.keyboard-toolbar>div>div.pressed,.ML__keyboard>div>div.keyboard-toolbar>div>div:active,.ML__keyboard>div>div.keyboard-toolbar>div>div:hover{color:var(--keyboard-text-active)}.ML__keyboard>div>div.keyboard-toolbar>div>div.selected{color:var(--keyboard-text-active);border-bottom:2px solid var(--keyboard-text-active);margin-bottom:8px;padding-bottom:0}.ML__keyboard div .rows{border:0;border-collapse:separate;clear:both;margin:auto;display:flex;flex-flow:column;align-items:center}.ML__keyboard div .rows>ul{list-style:none;height:40px;margin:0 0 3px;padding:0}.ML__keyboard div .rows>ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;width:34px;margin-right:2px;height:40px;box-sizing:border-box;padding:8px 0;vertical-align:top;text-align:center;float:left;color:var(--keycap-text);fill:currentColor;font-size:20px;background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;pointer-events:all;position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ML__keyboard div .rows>ul>li:last-child{margin-right:0}.ML__keyboard div .rows>ul>li.small{font-size:16px}.ML__keyboard div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard div .rows>ul>li svg{width:20px;height:20px}.ML__keyboard div .rows>ul>li .warning{height:25px;width:25px;min-height:25px;min-width:25px;background:#cd0030;color:#fff;border-radius:100%;padding:5px;display:flex;align-items:center;justify-content:center;margin-bottom:-2px}.ML__keyboard div .rows>ul>li .warning svg{width:16px;height:16px}@media only screen and (max-width:768px){.ML__keyboard div .rows>ul>li .warning{height:16px;width:16px;min-height:16px;min-width:16px}.ML__keyboard div .rows>ul>li .warning svg{width:14px;height:14px}}.ML__keyboard div .rows>ul>li>.w0{width:0}.ML__keyboard div .rows>ul>li>.w5{width:16px}.ML__keyboard div .rows>ul>li>.w15{width:52px}.ML__keyboard div .rows>ul>li>.w20{width:70px}.ML__keyboard div .rows>ul>li>.w50{width:178px}.ML__keyboard div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}@media only screen and (max-width:560px){.ML__keyboard div .rows>ul>li.if-wide{display:none}}.ML__keyboard div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard div .rows>ul>li.pressed,.ML__keyboard div .rows>ul>li:hover{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard div .rows>ul>li.action.active,.ML__keyboard div .rows>ul>li.action:active,.ML__keyboard div .rows>ul>li.keycap.active,.ML__keyboard div .rows>ul>li.keycap:active{transform:translateY(-20px) scale(1.4);z-index:calc(var(--keyboard-zindex, 105) - 5);color:var(--keyboard-text-active)}.ML__keyboard div .rows>ul>li.modifier.active,.ML__keyboard div .rows>ul>li.modifier:active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard div .rows>ul>li.action.font-glyph,.ML__keyboard div .rows>ul>li.modifier.font-glyph{font-size:18px}@media only screen and (max-width:767px){.ML__keyboard div .rows>ul>li.action.font-glyph,.ML__keyboard div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media only screen and (max-width:767px){.ML__keyboard div .rows>ul>li.bigfnbutton,.ML__keyboard div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard div .rows>ul>li.bigfnbutton{font-size:14px}@media only screen and (max-width:767px){.ML__keyboard div .rows>ul>li.bigfnbutton{font-size:9px}}.ML__keyboard div .rows>ul>li.action,.ML__keyboard div .rows>ul>li.modifier{background-color:var(--keycap-modifier-background);border-bottom-color:var(--keycap-modifier-border);border-color:var(--keycap-modifier-border) var(--keycap-modifier-border) var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard div .rows>ul>li.action.selected,.ML__keyboard div .rows>ul>li.modifier.selected{color:var(--keyboard-text-active)}.ML__keyboard div .rows>ul>li.action.selected.active,.ML__keyboard div .rows>ul>li.action.selected.pressed,.ML__keyboard div .rows>ul>li.action.selected:active,.ML__keyboard div .rows>ul>li.action.selected:hover,.ML__keyboard div .rows>ul>li.modifier.selected.active,.ML__keyboard div .rows>ul>li.modifier.selected.pressed,.ML__keyboard div .rows>ul>li.modifier.selected:active,.ML__keyboard div .rows>ul>li.modifier.selected:hover{color:#fff}.ML__keyboard div .rows>ul>li.keycap.w50{font-size:80%;padding-top:10px;font-weight:100}.ML__keyboard div .rows>ul>li small{color:#555}@media only screen and (max-width:767px){.ML__keyboard div .rows>ul>li small{font-size:9px}}.ML__keyboard div .rows>ul>li aside{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:10px;line-height:10px;color:#666}@media only screen and (max-width:767px){.ML__keyboard div .rows>ul>li aside{display:none}}@media only screen and (max-width:414px){.ML__keyboard div .rows>ul>li{width:calc(10vw - 2px);margin-right:2px}.ML__keyboard div .rows>ul>.w5{width:calc(5vw - 2px)}.ML__keyboard div .rows>ul>.w15{width:calc(15vw - 2px)}.ML__keyboard div .rows>ul>.w20{width:calc(20vw - 2px)}.ML__keyboard div .rows>ul>.w50{width:calc(50vw - 2px)}}@media only screen and (min-width:415px) and (max-width:768px){.ML__keyboard div .rows>ul>li{width:37px;margin-right:3px}.ML__keyboard div .rows>ul>.w5{width:17px}.ML__keyboard div .rows>ul>.w15{width:57px}.ML__keyboard div .rows>ul>.w20{width:77px}.ML__keyboard div .rows>ul>.w50{width:197px}}@media only screen and (min-width:768px) and (max-width:1024px){.ML__keyboard div .rows>ul{height:52px}.ML__keyboard div .rows>ul>li{height:52px;width:51px;margin-right:4px}.ML__keyboard div .rows>ul>.w5{width:23.5px}.ML__keyboard div .rows>ul>.w15{width:78.5px}.ML__keyboard div .rows>ul>.w20{width:106px}.ML__keyboard div .rows>ul>.w50{width:271px}}@media only screen and (min-width:1025px){.ML__keyboard div .rows>ul{height:52px}.ML__keyboard div .rows>ul>li{height:52px;width:66px;margin-right:6px}.ML__keyboard div .rows>ul>.action,.ML__keyboard div .rows>ul>.modifier{font-size:80%}.ML__keyboard div .rows>ul>.w5{width:30px}.ML__keyboard div .rows>ul>.w15{width:102px}.ML__keyboard div .rows>ul>.w20{width:138px}.ML__keyboard div .rows>ul>.w50{width:354px}}@media (prefers-color-scheme:dark){body:not([theme=light]) .ML__keyboard{--hue:206;--keyboard-background:hsl(var(--hue,212),19%,38%);--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue,212),100%,60%);--keyboard-background-border:#333;--keycap-background:hsl(var(--hue,212),25%,39%);--keycap-background-active:hsl(var(--hue,212),35%,42%);--keycap-background-border:hsl(var(--hue,212),25%,35%);--keycap-background-border-bottom:#426b8a;--keycap-text:#d0d0d0;--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:hsl(var(--hue,212),35%,40%);--keycap-modifier-border:hsl(var(--hue,212),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue,212),35%,42%);--keyboard-alternate-background:hsl(var(--hue,212),19%,38%);--keyboard-alternate-background-active:hsl(var(--hue,212),35%,42%);--keyboard-alternate-text:#d1d1d1}}body[theme=dark] .ML__keyboard{--hue:206;--keyboard-background:hsl(var(--hue,212),19%,38%);--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue,212),100%,60%);--keyboard-background-border:#333;--keycap-background:hsl(var(--hue,212),25%,39%);--keycap-background-active:hsl(var(--hue,212),35%,42%);--keycap-background-border:hsl(var(--hue,212),25%,35%);--keycap-background-border-bottom:#426b8a;--keycap-text:#d0d0d0;--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:hsl(var(--hue,212),35%,40%);--keycap-modifier-border:hsl(var(--hue,212),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue,212),35%,42%);--keyboard-alternate-background:hsl(var(--hue,212),19%,38%);--keyboard-alternate-background-active:hsl(var(--hue,212),35%,42%);--keyboard-alternate-text:#d1d1d1}div.ML__keyboard.material{--keyboard-background:rgba(209,213,217,0.9);--keyboard-background-border:#ddd;--keycap-background:transparent;--keycap-background-active:#cccfd1;--keycap-background-border:transparent;--keyboard-alternate-background:#efefef;--keyboard-alternate-text:#000;font-family:Roboto,sans-serif}div.ML__keyboard.material.alternate-keys{background:var(--keyboard-alternate-background);border:1px solid transparent;border-radius:5px;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22)}div.ML__keyboard.material.alternate-keys ul li.active,div.ML__keyboard.material.alternate-keys ul li.pressed,div.ML__keyboard.material.alternate-keys ul li:active,div.ML__keyboard.material.alternate-keys ul li:hover{border:1px solid transparent;background:#5f97fc;color:#fff;fill:currentColor}div.ML__keyboard.material .keyboard-toolbar>div>div{font-size:16px}div.ML__keyboard.material .keyboard-toolbar div.div.active,div.ML__keyboard.material .keyboard-toolbar div.div.pressed,div.ML__keyboard.material .keyboard-toolbar div div:active,div.ML__keyboard.material .keyboard-toolbar div div:hover{color:#5f97fc;fill:currentColor}div.ML__keyboard.material .keyboard-toolbar>div>.selected{color:#5f97fc;fill:currentColor;border-bottom:2px solid #5f97fc;margin-bottom:8px;padding-bottom:0}div.ML__keyboard.material div>.rows>ul>.keycap{background:transparent;border:1px solid transparent;border-radius:5px;color:var(--keycap-text);fill:currentColor;transition:none}div.ML__keyboard.material div>.rows>ul>.keycap.tt{color:#5f97fc}div.ML__keyboard.material div>.rows>ul>.keycap[data-key=" "]{margin-top:10px;margin-bottom:10px;height:20px;background:#e0e0e0}div.ML__keyboard.material div>.rows>ul>.keycap[data-key=" "].active,div.ML__keyboard.material div>.rows>ul>.keycap[data-key=" "].pressed,div.ML__keyboard.material div>.rows>ul>.keycap[data-key=" "]:active,div.ML__keyboard.material div>.rows>ul>.keycap[data-key=" "]:hover{background:#d0d0d0;box-shadow:none;transform:none}div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]):hover{border:1px solid transparent;background:var(--keycap-background-active);box-shadow:none}div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).active,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).pressed,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]):active{background:var(--keyboard-alternate-background);color:var(--keyboard-alternate-text);box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23)}@media only screen and (max-width:767px){div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).active,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).pressed,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]):active{box-shadow:0 10px 20px rgba(0,0,0,.19),0 6px 6px rgba(0,0,0,.23);font-size:10px;vertical-align:top;width:19.5px;margin-right:10px;margin-left:10px;transform:translateY(-20px) scale(2);transition:none;justify-content:flex-start;padding:2px 0 0;z-index:calc(var(--ML_keyboard-zindex, 105) - 5)}}@media only screen and (max-width:414px){div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).active,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]).pressed,div.ML__keyboard.material div>.rows>ul>.keycap:not([data-key=" "]):active{width:16.5px}}@media only screen and (max-width:767px){div.ML__keyboard.material div>.rows>ul>.keycap:last-child.active,div.ML__keyboard.material div>.rows>ul>.keycap:last-child:active{margin-right:0;margin-left:14px}}div.ML__keyboard.material div div.rows ul li.action,div.ML__keyboard.material div div.rows ul li.modifier{background:transparent;border:0;color:#869096;fill:currentColor;font-size:16px;transition:none}div.ML__keyboard.material div div.rows ul li.action.selected,div.ML__keyboard.material div div.rows ul li.modifier.selected{color:#5f97fc;border-radius:0;border-bottom:2px solid #5f97fc}div.ML__keyboard.material div div.rows ul li.action.active,div.ML__keyboard.material div div.rows ul li.action.pressed,div.ML__keyboard.material div div.rows ul li.action:active,div.ML__keyboard.material div div.rows ul li.action:hover,div.ML__keyboard.material div div.rows ul li.modifier.active,div.ML__keyboard.material div div.rows ul li.modifier.pressed,div.ML__keyboard.material div div.rows ul li.modifier:active,div.ML__keyboard.material div div.rows ul li.modifier:hover{border:0;color:var(--keycap-text);background:var(--keycap-background-active);box-shadow:none}div.ML__keyboard.material div div.rows ul li.bigfnbutton,div.ML__keyboard.material div div.rows ul li.fnbutton{background:transparent;border:0}div.ML__keyboard.material div div.rows ul li.bigfnbutton.selected,div.ML__keyboard.material div div.rows ul li.fnbutton.selected{color:#5f97fc;fill:currentColor;border-radius:0;border-bottom:2px solid #5f97fc}div.ML__keyboard.material div div.rows ul li.bigfnbutton.active,div.ML__keyboard.material div div.rows ul li.bigfnbutton.pressed,div.ML__keyboard.material div div.rows ul li.bigfnbutton:active,div.ML__keyboard.material div div.rows ul li.bigfnbutton:hover,div.ML__keyboard.material div div.rows ul li.fnbutton.active,div.ML__keyboard.material div div.rows ul li.fnbutton.pressed,div.ML__keyboard.material div div.rows ul li.fnbutton:active,div.ML__keyboard.material div div.rows ul li.fnbutton:hover{border:0;color:#5f97fc;fill:currentColor;background:var(--keycap-background-active);box-shadow:none}@media (prefers-color-scheme:dark){body:not([theme=light]) div.ML__keyboard.material{--hue:198;--keyboard-background:hsl(var(--hue,212),19%,18%);--keyboard-text:#d4d6d7;--keyboard-text-active:#5f97fc;--keyboard-background-border:#333;--keycap-background:hsl(var(--hue,212),25%,39%);--keycap-background-active:#5f97fc;--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:#d0d0d0;--keycap-text-active:#d4d6d7;--keycap-secondary-text:#5f97fc;--keycap-modifier-background:hsl(var(--hue,212),35%,40%);--keycap-modifier-border:hsl(var(--hue,212),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue,212),35%,42%);--keyboard-alternate-background:hsl(var(--hue,212),8%,2%);--keyboard-alternate-background-active:hsl(var(--hue,212),35%,42%);--keyboard-alternate-text:#d1d1d1}}body[theme=dark] div.ML__keyboard.material{--hue:198;--keyboard-background:hsl(var(--hue,212),19%,18%);--keyboard-text:#d4d6d7;--keyboard-text-active:#5f97fc;--keyboard-background-border:#333;--keycap-background:hsl(var(--hue,212),25%,39%);--keycap-background-active:#5f97fc;--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:#d0d0d0;--keycap-text-active:#d4d6d7;--keycap-secondary-text:#5f97fc;--keycap-modifier-background:hsl(var(--hue,212),35%,40%);--keycap-modifier-border:hsl(var(--hue,212),35%,35%);--keycap-modifier-border-bottom:hsl(var(--hue,212),35%,42%);--keyboard-alternate-background:hsl(var(--hue,212),8%,2%);--keyboard-alternate-background-active:hsl(var(--hue,212),35%,42%);--keyboard-alternate-text:#d1d1d1}'),md["foreground-color"]=[];for(const h of bs)md["foreground-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+h+'"></span>',command:'["applyStyle",{"color":"'+h+'"}]'});md["background-color"]=[];for(const h of vs)md["background-color"].push({classes:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+h+'"></span>',command:'["applyStyle",{"backgroundColor":"'+h+'"}]'});fd={...md},Object.keys(fd).forEach(e=>{fd[e]=fd[e].slice()});for(let h=0;h<26;h++){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[h];fd[e]||(fd[e]=[]),fd[e].unshift({latex:"\\mathbb{"+e+"}",aside:"blackboard",insert:"\\mathbb{"+e+"}"}),fd[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fd[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),fd[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fd[e].unshift({latex:"\\mathcal{"+e+"}",aside:"calligraphy",insert:"\\mathcal{"+e+"}"}),fd[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}for(let h=0;h<=26;h++){const e="abcdefghijklmnopqrstuvwxyz"[h];fd[e]||(fd[e]=[]),fd[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),fd[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fd[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fd[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}for(let h=0;h<10;h++){const e="0123456789"[h];fd[e]||(fd[e]=[]),fd[e].unshift({latex:"\\mathbf{"+e+"}",aside:"bold",insert:"\\mathbf{"+e+"}"}),fd[e].unshift({latex:"\\mathsf{"+e+"}",aside:"sans",insert:"\\mathsf{"+e+"}"}),fd[e].unshift({latex:"\\mathtt{"+e+"}",aside:"monospace",insert:"\\mathtt{"+e+"}"}),fd[e].unshift({latex:"\\mathcal{"+e+"}",aside:"script",insert:"\\mathcal{"+e+"}"}),fd[e].unshift({latex:"\\mathfrak{"+e+"}",aside:"fraktur",insert:"\\mathfrak{"+e+"}"})}let o=e.options.virtualKeyboards;o||(o="all"),o=o.replace(/\ball\b/i,"numeric functions symbols roman  greek");const s={...gd,...null!==(i=e.options.customVirtualKeyboardLayers)&&void 0!==i?i:{}},a={...hd,...null!==(n=e.options.customVirtualKeyboards)&&void 0!==n?n:{}},l=o.replace(/\s+/g," ").split(" ");for(const h of l){if(!a[h]){console.error('Unknown virtual keyboard "'+h+'"');break}let t=a[h].layers||[];a[h].layer&&t.push(a[h].layer),t=Array.from(new Set(t));for(const i of t){if(!s[i]){console.error('Unknown virtual keyboard layer: "'+i+'"');break}if("object"==typeof s[i]){const e=s[i];let t="";if(e.styles&&(t+=`<style>${e.styles}</style>`),e.backdrop&&(t+=`<div class='${e.backdrop}'>`),e.container&&(t+=`<div class='${e.container}'>`),e.rows){t+="<div class='rows'>";for(const i of e.rows){t+="<ul>";for(const e of i)t+="<li",e.class&&(t+=` class="${e.class}"`),e.key&&(t+=` data-key="${e.key}"`),e.command&&("string"==typeof e.command?t+=` data-command='"${e.command}"'`:(t+=" data-command='",t+=JSON.stringify(e.command),t+="'")),e.insert&&(t+=` data-insert="${e.insert}"`),e.latex&&(t+=` data-latex="${e.latex}"`),e.aside&&(t+=` data-aside="${e.aside}"`),e.altKeys&&(t+=` data-alt-keys="${e.altKeys}"`),e.shifted&&(t+=` data-shifted="${e.shifted}"`),e.shiftedCommand&&(t+=` data-shifted-command="${e.shiftedCommand}"`),t+=`>${e.label?e.label:""}</li>`;t+="</ul>"}t+="</div>"}e.container&&(t+="</div>"),e.backdrop&&(t+="</div>"),s[i]=t}r+="<div tabindex=\"-1\" class='keyboard-layer' data-layer='"+i+"'>",r+=vd(e,o,h),r+=xd(e,s[i]),r+="</div>"}}const c=new pd(e);c.element.className="ML__keyboard",t?c.element.classList.add(t):e.options.virtualKeyboardTheme&&c.element.classList.add(e.options.virtualKeyboardTheme),c.element.innerHTML=e.options.createHTML(r),bd(e,[].slice.call(c.element.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton")));const d=c.element.getElementsByClassName("layer-switch");for(let h=0;h<d.length;++h)d[h].classList.contains("shift")?Nl(e,d[h],{pressed:["shiftKeyboardLayer","shift"],default:["switchKeyboardLayer",d[h].getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):Nl(e,d[h],{default:["switchKeyboardLayer",d[h].getAttribute("data-layer")]});const p=c.element.getElementsByClassName("keyboard-layer");return Array.from(p).forEach(e=>{e.addEventListener("mousedown",e=>{e.preventDefault(),e.stopPropagation()}),e.addEventListener("touchstart",e=>{e.preventDefault(),e.stopPropagation()},{passive:!1})}),p[0].classList.add("is-visible"),c}(e,t),Ll(e.virtualKeyboard.element,"touchstart:passive mousedown",()=>{e.focus()}),document.body.appendChild(e.virtualKeyboard.element)),window.setTimeout(()=>{var t;null===(t=e.virtualKeyboard)||void 0===t||t.element.classList.add("is-visible")},1)):(null===(n=e.virtualKeyboard)||void 0===n?void 0:n.element)&&e.virtualKeyboard.element.classList.remove("is-visible"),(null===(r=e.virtualKeyboard)||void 0===r?void 0:r.element)&&"function"==typeof e.options.onVirtualKeyboardToggle&&e.options.onVirtualKeyboardToggle(e,e.virtualKeyboardVisible,e.virtualKeyboard.element),!1}dc({showAlternateKeys:(e,t,i)=>{var n,r;const o=Al("mathlive-alternate-keys-panel","ML__keyboard alternate-keys");(null===(n=e.virtualKeyboard)||void 0===n?void 0:n.element.classList.contains("material"))&&o.classList.add("material"),i.length>=7?o.style.width="286px":4===i.length||2===i.length?o.style.width="146px":1===i.length?o.style.width="86px":o.style.width="146px",o.style.height="auto";let s="";for(const l of i)s+="<li","string"==typeof l?s+=' data-latex="'+l.replace(/"/g,"&quot;")+'"':(l.latex&&(s+=' data-latex="'+l.latex.replace(/"/g,"&quot;")+'"'),l.content&&(s+=' data-content="'+l.content.replace(/"/g,"&quot;")+'"'),l.insert&&(s+=' data-insert="'+l.insert.replace(/"/g,"&quot;")+'"'),l.command&&(s+=" data-command='"+l.command.replace(/"/g,"&quot;")+"'"),l.aside&&(s+=' data-aside="'+l.aside.replace(/"/g,"&quot;")+'"'),l.classes&&(s+=' data-classes="'+l.classes+'"')),s+=">",s+=l.label||"",s+="</li>";s="<ul>"+s+"</ul>",o.innerHTML=e.options.createHTML(s),bd(e,[].slice.call(o.getElementsByTagName("li")),"performAlternateKeys");const a=(null===(r=e.virtualKeyboard)||void 0===r?void 0:r.element.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+t+'"]')).getBoundingClientRect();if(a){a.top-o.clientHeight<0&&(o.style.width="auto",i.length<=6?o.style.height="56px":i.length<=12?o.style.height="108px":o.style.height="205px");const e=(a.top-o.clientHeight+5).toString()+"px",t=Math.max(0,Math.min(window.innerWidth-o.offsetWidth,(a.left+a.right-o.offsetWidth)/2))+"px";o.style.transform="translate("+t+","+e+")",o.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),dc({shiftKeyboardLayer:e=>{var t;const i=null===(t=e.virtualKeyboard)||void 0===t?void 0:t.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(i)for(let n=0;n<i.length;n++){const t=i[n];let r=t.getAttribute("data-shifted");if(r||/^[a-z]$/.test(t.innerHTML)){t.setAttribute("data-unshifted-content",t.innerHTML),r||(r=t.innerHTML.toUpperCase()),t.innerHTML=e.options.createHTML(r);const i=t.getAttribute("data-"+e.options.namespace+"command");if(i){t.setAttribute("data-unshifted-command",i);const n=t.getAttribute("data-shifted-command");if(n)t.setAttribute("data-"+e.options.namespace+"command",n);else{const n=JSON.parse(i);Jr(n)&&(n[1]=n[1].toUpperCase()),t.setAttribute("data-"+e.options.namespace+"command",JSON.stringify(n))}}}}return!1}},{target:"virtual-keyboard"}),dc({hideAlternateKeys:()=>kd(),performAlternateKeys:(e,t)=>(kd(),e.executeCommand(t)),switchKeyboardLayer:(e,t)=>Md(e,t),unshiftKeyboardLayer:e=>_d(e),insertAndUnshiftKeyboardLayer:(e,t)=>(e.insert(t),_d(e),!0)},{target:"virtual-keyboard"}),dc({toggleVirtualKeyboardAlt:e=>{var t,i;let n=!1;return(null===(t=e.virtualKeyboard)||void 0===t?void 0:t.element)&&(n=null===(i=e.virtualKeyboard)||void 0===i?void 0:i.element.classList.contains("material"),e.virtualKeyboard.dispose(),delete e.virtualKeyboard),zd(e,n?"":"material"),!1},toggleVirtualKeyboardShift:e=>{var t,i;e.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[e.options.virtualKeyboardLayout];const n=null!==(i=null===(t=e.virtualKeyboard)||void 0===t?void 0:t.element.querySelector("div.keyboard-layer.is-visible").id)&&void 0!==i?i:"";return e.virtualKeyboard&&(e.virtualKeyboard.dispose(),delete e.virtualKeyboard),zd(e),n&&Md(e,n),!1}},{target:"virtual-keyboard"}),dc({toggleVirtualKeyboard:(e,t)=>Ld(e,t),hideVirtualKeyboard:e=>Sd(e),showVirtualKeyboard:(e,t)=>zd(e,t)},{target:"virtual-keyboard"});const Cd={"\\imaginaryI":"","\\imaginaryJ":"","\\pi":"","\\exponentialE":"","":"+","":"+","":"-","-":"-","":"-","":"-","\\times":"*","\\cdot":"*","":"*","":"*","":"*",".":"*","":"/","":"/","":"/","!":"factorial","\\mp":"minusplus","\\ne":"!=","\\coloneq":":=","\\questeq":"?=","\\approx":"approx","\\cong":"congruent","\\sim":"similar","\\equiv":"equiv","\\pm":"plusminus","\\land":"and","\\wedge":"and","\\lor":"or","\\vee":"or","\\oplus":"xor","\\veebar":"xor","\\lnot":"not","\\neg":"not","\\exists":"exists","\\nexists":"!exists","\\forall":"forAll","\\backepsilon":"suchThat","\\therefore":"therefore","\\because":"because","\\nabla":"nabla","\\circ":"circle","\\ominus":"ominus","\\odot":"odot","\\otimes":"otimes","\\zeta":"Zeta","\\Gamma":"Gamma","\\min":"min","\\max":"max","\\mod":"mod","\\lim":"lim","\\sum":"sum","\\prod":"prod","\\int":"integral","\\iint":"integral2","\\iiint":"integral3","\\Re":"Re","\\gothicCapitalR":"Re","\\Im":"Im","\\gothicCapitalI":"Im","\\binom":"nCr","\\partial":"partial","\\differentialD":"differentialD","\\capitalDifferentialD":"capitalDifferentialD","\\Finv":"Finv","\\Game":"Game","\\wp":"wp","\\ast":"ast","\\star":"star","\\asymp":"asymp","\\to":"to","\\gets":"gets","\\in":"elementof","\\notin":"!elementof","\\ni":"ownedby","\\owns":"ownedby","\\subset":"subset","\\supset":"superset","\\complement":"complement","\\rightarrow":"shortLogicalImplies","\\leftarrow":"shortLogicalImpliedBy","\\leftrightarrow":"shortLogicalEquivalent","\\longrightarrow":"logicalImplies","\\longleftarrow":"logicalImpliedBy","\\longleftrightarrow":"logicalEquivalent","\\Rightarrow":"shortImplies","\\Leftarrow":"shortImpliedBy","\\Leftrightarrow":"shortEquivalent","\\implies":"implies","\\Longrightarrow":"implies","\\impliedby":"impliedBy","\\Longleftarrow":"impliedBy","\\iff":"equivalent","\\Longleftrightarrow":"equivalent"},Ad={"+":"add","*":"multiply","-":"subtract","/":"divide","=":"equal",":=":"assign","!=":"ne","?=":"questeq",approx:"approx",congruent:"congruent",similar:"similar",equiv:"equiv","<":"lt",">":"gt","<=":"le",">=":"ge","":"le","":"ge",">>":"gg","<<":"ll","**":"pow","++":"increment","--":"decrement"},Dd={equal:"%0 = %1",ne:"%0 \\ne %1",questeq:"%0 \\questeq %1",approx:"%0 \\approx %1",congruent:"%0 \\cong %1",similar:"%0 \\sim %1",equiv:"%0 \\equiv %1",assign:"%0 := %1",lt:"%0 < %1",gt:"%0 > %1",le:"%0 \\le %1",ge:"%0 \\ge %1",sin:"\\sin%_%^ %0",cos:"\\cos%_%^ %0",tan:"\\tan%_%^ %0",cot:"\\cot%_%^ %0",sec:"\\sec%_%^ %0",csc:"\\csc%_%^ %0",sinh:"\\sinh %0",cosh:"\\cosh %0",tanh:"\\tanh %0",csch:"\\csch %0",sech:"\\sech %0",coth:"\\coth %0",arcsin:"\\arcsin %0",arccos:"\\arccos %0",arctan:"\\arctan %0",arccot:"\\arcctg %0",arcsec:"\\arcsec %0",arccsc:"\\arccsc %0",arsinh:"\\arsinh %0",arcosh:"\\arcosh %0",artanh:"\\artanh %0",arcsch:"\\arcsch %0",arsech:"\\arsech %0",arcoth:"\\arcoth %0",ln:"\\ln%_%^ %",log:"\\log%_%^ %",lg:"\\lg %",lb:"\\lb %",sum:"\\sum%_%^ %0",prod:"\\prod%_%^ %0",Zeta:"\\zeta%_%^ %",Gamma:"\\Gamma %",min:"\\min%_%^ %",max:"\\max%_%^ %",mod:"\\mod%_%^ %",lim:"\\lim%_%^ %",binom:"\\binom %",nabla:"\\nabla %",curl:"\\nabla\\times %0",div:"\\nabla\\cdot %0",floor:"\\lfloor %0 \\rfloor%_%^",ceil:"\\lceil %0 \\rceil%_%^",abs:"\\left| %0 \\right|%_%^",norm:"\\lVert %0 \\rVert%_%^",ucorner:"\\ulcorner %0 \\urcorner%_%^",lcorner:"\\llcorner %0 \\lrcorner%_%^",angle:"\\langle %0 \\rangle%_%^",group:"\\lgroup %0 \\rgroup%_%^",moustache:"\\lmoustache %0 \\rmoustache%_%^",brace:"\\lbrace %0 \\rbrace%_%^","sqrt[]":"\\sqrt[%^]{%0}",sqrt:"\\sqrt{%0}",lcm:"\\operatorname{lcm}%",gcd:"\\operatorname{gcd}%",erf:"\\operatorname{erf}%",erfc:"\\operatorname{erfc}%",randomReal:"\\operatorname{randomReal}%",randomInteger:"\\operatorname{randomInteger}%",and:"%0 \\land %1",or:"%0 \\lor %1",xor:"%0 \\oplus %1",not:"%0 \\lnot %1",circle:"%0 \\circ %1",ast:"%0 \\ast %1",star:"%0 \\star %1",asymp:"%0 \\asymp %1","/":"\\frac{%0}{%1}",Re:"\\Re{%0}",Im:"\\Im{%0}",factorial:"%0!",factorial2:"%0!!"},Td={degree:880,nabla:740,curl:740,partial:740,differentialD:740,capitalDifferentialD:740,"**":720,odot:710,not:680,div:660,solidus:660,"/":660,setminus:650,"%":640,otimes:410,union:350,intersection:350,"*":390,ast:390,".":390,oplus:300,ominus:300,"+":275,"-":275,"+-":275,"-+":275,circle:265,circledast:265,circledcirc:265,star:265,"..":263,to:262,in:262,"|":261,congruent:265,equiv:260,"=":260,"!=":255,"?=":255,similar:250,approx:247,"<":245,">":243,">=":242,"":242,"<=":241,complement:240,subset:240,superset:240,elementof:240,"!elementof":240,exists:230,"!exists":230,forall:230,and:200,xor:195,or:190,suchThat:110,":":100,assign:80,":=":80,therefore:70,because:70,shortLogicalImplies:52,shortImplies:51,logicalImplies:50,implies:49,shortLogicalImpliedBy:48,shortImpliedBy:47,logicalImpliedBy:46,impliedBy:45,shortLogicalEquivalent:44,shortEquivalent:43,logicalEquivalent:42,equivalent:41,",":40,";":30};function $d(e,t){return Jr(e.arg)?e.arg[t]:void 0}function Od(e){return e&&Td[e]||-1}function Nd(e){return/=|=>/.test(e)?"right":"left"}function Ed(e){if("f"===e||"g"===e)return!0;const t=Dd[e];return!!t&&!!/%[^01_^]?/.test(t)}function qd(e){e=(e||"").trim();let t=Cd[e];if(!t)if(/^\\[^{}]+$/.test(e)){const i=as(e,"math",{});t=i&&i.value||e.slice(1)}else t=e;return t}function Kd(e){if(!e)return null;const t=qd(Vd(e)),i=[Od(t),Nd(t)];return i[0]<=0?null:i}function Bd(e){return null!==Kd(e)}const Pd={"\\lfloor\\rfloor":"floor","\\lceil\\rceil":"ceil","\\vert\\vert":"abs","\\lvert\\rvert":"abs","||":"abs","\\Vert\\Vert":"norm","\\lVert\\rVert":"norm","\\ulcorner\\urcorner":"ucorner","\\llcorner\\lrcorner":"lcorner","\\langle\\rangle":"angle","\\lgroup\\rgroup":"group","\\lmoustache\\rmoustache":"moustache","\\lbrace\\rbrace":"brace"},Rd={"!":"factorial","\\dag":"dagger","\\dagger":"dagger","\\ddagger":"dagger2","\\maltese":"maltese","\\backprime":"backprime","\\backdoubleprime":"backprime2","\\prime":"prime","\\doubleprime":"prime2","\\$":"$","\\%":"%","\\_":"_","\\degree":"degree"},Id={"+":"add","-":"add","*":"multiply","=":"equal",",":"list",";":"list2",and:"and",or:"or",xor:"xor",union:"union",shortLogicalEquivalent:"logicalEquivalent",logicalEquivalent:"logicalEquivalent",shortEquivalent:"equivalent",equivalent:"equivalent"},Fd={",":"list",";":"list2"};function Vd(e){if("string"==typeof e)return e;if(Jr(e)){let t="";for(const i of e)t+=Vd(i);return t}if(e.symbol&&!/^\\math(op|bin|rel|open|punct|ord|inner)/.test(e.symbol))return e.symbol;if("leftright"===e.type)return"";if("string"==typeof e.body)return e.body;if(Jr(e.body)){let t="";for(const i of e.body)t+=Vd(i);return t}return""}function Wd(e){return"string"==typeof e.sym?function(e){let t=Dd[e];return t?t.replace("%1","").replace("%0","").replace("%",""):(e.length>1&&(t="\\"+e),t||(t=is("math",e)),t)}(e.sym)||e.sym:""}function jd(e){return parseFloat(e.num)}function Hd(e){return"object"==typeof e&&void 0!==e.num}function Ud(e){let t=0;return Hd(e)&&(t="object"==typeof e.num?void 0!==e.num.re?mp(e.num.re):0:parseFloat(e.num)),t}function Xd(e){let t=0;return Hd(e)&&"object"==typeof e.num&&(t=void 0!==e.num.im?mp(e.num.im):0),t}function Zd(e){return e&&void 0!==e.sup}function Jd(e){return e&&void 0!==e.sub}function Gd(e,t,i){let n=!1;const r=e.atoms[e.index];return r&&r.type===t&&(n=void 0===i||Vd(r)===i),n}function Yd(e,...t){const i={fn:e,arg:void 0};if(t){const e=[];for(const i of t)i&&e.push(i);e.length>0&&(i.arg=e)}return i}function Qd(e){return"number"==typeof e?{num:e.toString()}:"string"==typeof e?{num:e}:"object"==typeof e?(console.assert("string"==typeof e.re||"string"==typeof e.im),{num:e}):void 0}function ep(e){if(Hd(e)){const t=Ud(e),i=Xd(e);return 0!==i?(0!==t&&(e.num.re=(-t).toString()),e.num.im=(-i).toString()):e.num=(-t).toString(),e}return Yd("negate",e)}function tp(e){const t=e.atoms[e.index+1];return t&&"msubsup"===t.type}function ip(e,t){let i=e.atoms[e.index];return!i||void 0===i.superscript&&void 0===i.subscript?i=null:e.index+=1,i||((i=e.atoms[e.index+1])&&"msubsup"===i.type&&(i.superscript||i.subscript)?e.index+=2:i=null),i?(void 0!==i.subscript&&(e.ast.sub=dp(i.subscript,t)),void 0!==i.superscript&&("msubsup"===i.type?/['\u2032]|\\prime/.test(Vd(i.superscript))?(e.index+=1,(i=e.atoms[e.index+1])&&"msubsup"===i.type&&/['\u2032]|\\prime/.test(Vd(i.superscript))?e.ast.sup={sym:""}:(e.ast.sup={sym:""},e.index-=1)):/['\u2033]|\\doubleprime/.test(Vd(i.superscript))?e.ast.sup={sym:""}:e.ast&&(e.ast.sup=dp(i.superscript,t)):e.ast.sup=dp(i.superscript,t))):e.index+=1,e}function np(e,t){const i=e.ast;if(op(e,"!!"))return e.index+=1,e.ast=Yd("factorial2",i),np(e=ip(e,t),t);if(op(e,"++"))return e.index+=1,e.ast=Yd("increment",i),np(e=ip(e,t),t);if(op(e,"--"))return e.index+=1,e.ast=Yd("decrement",i),np(e=ip(e,t),t);const n=e.atoms[e.index];return(null==n?void 0:n.symbol)&&Rd[n.symbol]&&(e.ast=Yd(Rd[n.symbol],i),e=np(e=ip(e,t),t)),e}function rp(e,t,i,n){if(e.index=e.index||0,0===e.atoms.length||e.index>=e.atoms.length)return e.ast=void 0,e;const r=e.minPrec;e.minPrec=0;let o=e.atoms[e.index];if(t){if("mopen"===o.type&&Vd(o)===t)e.index+=1,(o=(e=ap(e,n)).atoms[e.index])&&"mclose"===o.type&&Vd(o)===i&&(tp(e)&&(e.ast={group:e.ast}),e=np(e=ip(e,n),n));else if("textord"===o.type&&Vd(o)===t)e.index+=1,(o=(e=ap(e,n)).atoms[e.index])&&"textord"===o.type&&Vd(o)===i&&(e.index+=1,e=np(e=ip(e,n),n));else if("\\lVert"===t&&"textord"===o.type&&"|"===o.symbol){if((o=e.atoms[e.index+1])&&"textord"===o.type&&"|"===o.symbol){e.index+=2,o=(e=ap(e,n)).atoms[e.index];const t=e.atoms[e.index+1];o&&"textord"===o.type&&"|"===o.symbol&&t&&"textord"===t.type&&"|"===t.symbol&&(e.index+=2,e=np(e=ip(e,n),n))}}else if("sizeddelim"===o.type&&o.delim===t)e.index+=1,(o=(e=ap(e,n)).atoms[e.index])&&"sizeddelim"===o.type&&o.delim===i&&(e.index+=1,e=np(e=ip(e,n),n));else{if("leftright"!==o.type||o.leftDelim!==t||"?"!==o.rightDelim&&o.rightDelim!==i)return;e.ast=dp(o.body,n),tp(e)&&(e.ast={group:e.ast}),e=np(e=ip(e,n),n)}return e.minPrec=r,e}{let s=!0;if("mopen"===o.type?(t=o.symbol,i=Wo[t]):"sizeddelim"===o.type?(t=o.delim,i=Wo[t]):"leftright"===o.type?(s=!1,t=o.leftDelim,"?"===(i=o.rightDelim)&&(i=Wo[t])):"textord"===o.type&&(t=o.symbol,i=Wo[t]),t&&i){if("|"===t&&"|"===i){const n=e.atoms[e.index+1];n&&"textord"===n.type&&"|"===n.symbol&&(t="\\lVert",i="\\rVert")}if(e=rp(e,t,i,n))return s&&(e.index+=1),e.ast={fn:Pd[t+i]||t+i,arg:[e.ast]},e.minPrec=r,e}}}function op(e,t){return e.index=e.index||0,!(e.atoms.length<=1||e.index>=e.atoms.length-1)&&t===Vd(e.atoms[e.index])+Vd(e.atoms[e.index+1])}function sp(e){if(e.index=e.index||0,!(e.atoms.length<=1||e.index>=e.atoms.length-1)){if(!Gd(e,"textord","\\nabla")){const t=e.atoms[e.index].symbol+e.atoms[e.index+1].symbol,i=/^(>=|<=|>>|<<|:=|!=)$/.test(t)?t:"";return i&&(e.index+=1),i}return e.index+=1,Gd(e,"mbin","\\times")?(e.index+=1,e.ast="curl",e):Gd(e,"mbin","\\cdot")?(e.index+=1,e.ast="div",e):void(e.index-=1)}}function ap(e,t){if(e.index=e.index||0,e.ast=void 0,0===e.atoms.length||e.index>=e.atoms.length)return e;e.minPrec=e.minPrec||0;let i=function e(t,i){if(t.index=t.index||0,t.ast=void 0,0===t.atoms.length||t.index>=t.atoms.length)return t;let n=t.atoms[t.index];if("text"===n.mode){let e="";for(;t.atoms[t.index]&&"text"===t.atoms[t.index].mode;)e+=t.atoms[t.index].body,t.index+=1;return t.ast={text:e},t}const r=qd(Vd(n));if(sp(t))t.ast=Yd(t.ast,e(t,i).ast);else{if("root"===n.type)return t.index=0,t.atoms=n.body,e(t,i);if("mbin"===n.type&&"-"===r)t.index+=1,(t=e(t,i)).ast=ep(t.ast);else if("mbin"===n.type&&"+"===r)t.index+=1,(t=e(t,i)).ast=Yd("add",t.ast);else if("mord"===n.type&&/^[0-9.]$/.test(n.symbol)){let r="",o=!1,s=/^[0-9.eEdD]$/;for(;t.index<t.atoms.length&&!o&&(Gd(t,"spacing")||(Gd(t,"mord")||Gd(t,"mpunct",",")||Gd(t,"mbin"))&&s.test(t.atoms[t.index].symbol));)if("spacing"===t.atoms[t.index].type)t.index+=1;else if(void 0!==t.atoms[t.index].superscript||void 0!==t.atoms[t.index].subscript)o=!0;else{let e=t.atoms[t.index].symbol;"d"===e||"D"===e?(e="e",s=/^[0-9+-.]$/):"e"!==e&&"E"!==e||(tp(t)?(e="",t.index-=1,o=!0):(e="E",s=/^[0-9+-.]$/)),r+=","===e?"":e,t.index+=1}if(t.ast=r?Qd(r):void 0,(n=t.atoms[t.index])&&"genfrac"===n.type&&!isNaN(t.ast.num)){const n=t.ast;(t=e(t,i)).ast=Yd("add",n,t.ast)}if(n&&"group"===n.type&&n.symbol&&n.symbol.startsWith("\\nicefrac")){const n=t.ast;(t=e(t,i)).ast=Yd("add",n,t.ast)}n&&"msubsup"===n.type&&(t=ip(t,i)),t=np(t,i)}else if("genfrac"===n.type||"surd"===n.type)t.ast=lp(n,i),t=np(t=ip(t,i),i);else if("mord"===n.type||"mbin"===n.type){if(Ed(r)&&!Bd(n)){t.ast={fn:r};const n=(t=ip(t,i)).ast,o=e(t,i).ast;o&&/^(list0|list|list2)$/.test(o.fn)?n.arg=o.arg:o&&(n.arg=[o]),t.ast=n}else t.ast=lp(n,i),""===t.ast.sym&&(t.ast=Qd({im:"1"})),t=ip(t,i);t=np(t,i)}else if("textord"===n.type){if(!Bd(n)&&!Wo[n.symbol||n.body])if(Ed(r)){t.ast={fn:r};const n=(t=ip(t,i)).ast;t.index+=1,n.arg=[e(t,i).ast],t.ast=n,t=np(t,i)}else t.ast=lp(n,i),void 0===n.superscript&&(t.index+=1),t=np(t=ip(t,i),i)}else if("mop"===n.type){if((/^\\(mathop|operatorname|operatorname\*)/.test(n.symbol)||Ed(r))&&!Bd(n))if(t.ast={fn:/^\\(mathop|operatorname|operatorname\*)/.test(n.symbol)?Vd(n.body):r},Zd((t=ip(t,i)).ast)){const n={sin:"arcsin",cos:"arccos",tan:"arctan",cot:"arccot",sec:"arcsec",csc:"arccsc",sinh:"arsinh",cosh:"arcosh",tanh:"artanh",csch:"arcsch",sech:"arsech",coth:"arcoth"};if(-1===jd(t.ast.sup)&&n[r])t.ast=Yd(n[r],e(t,i).ast);else{const n=t.ast;n.arg=[e(t,i).ast],t.ast=n}}else{const n=t.ast,r=e(t,i).ast;r&&/^(list0|list|list2)$/.test(r.fn)?n.arg=r.arg:r&&(n.arg=[r]),t.ast=n}}else if("array"===n.type)t.index+=1,t.ast=lp(n,i);else if("group"===n.type)t.index+=1,t.ast=lp(n,i);else{if("mclose"===n.type)return t;if("error"===n.type)return t.index+=1,t.ast={error:n.symbol},t}}if(void 0===t.ast){const e=rp(t,"(",")",i)||rp(t,null,null,i);e?t=e:Bd(n)||("placeholder"===n.type?t.ast=Qd(0):(t.ast={text:"?"},t.ast.error="Unexpected token '"+n.type+"'",n.latex?t.ast.latex=n.latex:n.body&&n.toLatex&&(t.ast.latex=n.toLatex())),t.index+=1)}if((n=t.atoms[t.index])&&("mord"===n.type||"surd"===n.type||"mop"===n.type||"mopen"===n.type||"sizeddelim"===n.type||"leftright"===n.type)){if("sizeddelim"===n.type)for(const e in Wo)if(n.delim===Wo[e])return t.index+=1,t;if(("mord"===n.type||"mop"===n.type)&&Bd(n))return t;const r=t.ast;t.ast={},(null==(t=e(t,i))?void 0:t.ast)&&r?Ed(r.fn)&&void 0===r.arg||Jr(r.arg)&&0===r.arg.length?"list2"===t.ast.fn||"list"===t.ast.fn?t.ast=Yd(r.fn,t.ast.arg):t.ast=Yd("multiply",r,t.ast):"multiply"===t.ast.fn?t.ast.arg.unshift(r):0===Xd(r)&&0!==Ud(r)&&1===Xd(t.ast)&&0===Ud(t.ast)?t.ast=Qd({im:Ud(r).toString()}):t.ast=Yd("multiply",r,t.ast):t.ast=r}return t}(e,t).ast,n=!1;const r=e.minPrec;for(;!n;){const o=e.atoms[e.index],s=sp(e);let a,l;if((n=!o||"text"===o.mode||!s&&!Bd(o))||([a,l]=s?[Od(s),Nd(s)]:Kd(o),n=a<r),!n){const r=s||qd(Vd(o));if(e.minPrec="left"===l?a+1:a,e.index+=1,"|"===r)if(void 0!==o.subscript||e.atoms[e.index]&&void 0!==e.atoms[e.index].subscript&&"msubsup"===e.atoms[e.index].type){e.ast={};const n=ip(e,t).ast.sub;if(i=Yd("bind",i),n&&"equal"===n.fn&&i.arg)i.arg.push($d(n,0)),i.arg.push($d(n,1));else if(n&&i.arg&&("list"===n.fn||"list2"===n.fn)){let e={sym:"x"};for(let t=0;t<n.arg.length;t++)"equal"===n.arg[t].fn?(e=$d(n.arg[t],0),i.arg.push(e),i.arg.push($d(n.arg[t],1))):(i.arg.push(e),i.arg.push(n.arg[t]))}else n&&(i.arg.push({sym:"x"}),i.arg.push(n))}else n=!0;else{const n=ap(e,t).ast;let o=Fd[r];o&&i&&i.fn!==o&&(i=Yd(o,i)),"-"===r?(null==i?void 0:i.arg)&&"add"===i.fn?void 0!==n&&i.arg.push(ep(n)):i=i&&"subtract"===i.fn?Yd("add",$d(i,0),ep($d(i,1)),ep(n)):!Hd(i)||Zd(i)||!Hd(n)||Zd(n)||void 0!==n.num.re&&"0"!==n.num.re||void 0===n.num.im?Yd("subtract",i,n):{num:{re:i.num,im:(-parseFloat(n.num.im)).toString()}}:"add"===(o=Id[r])&&i&&"subtract"===i.fn?i=Yd("add",$d(i,0),ep($d(i,1)),n):o&&i&&i.fn===o&&!Zd(i)?void 0!==n&&(n.fn===o&&!Zd(n)&&n.arg?i.arg=[...i.arg,...n.arg]:i.arg&&i.arg.push(n)):o&&n&&n.arg&&n.fn===o?(n.arg.unshift(i),i=n):i="multiply"===o&&Hd(i)&&!Zd(i)&&n&&10===jd(n)&&Hd(n.sup)?Qd(jd(i)*Math.pow(10,jd(n.sup))):"add"===o&&Hd(i)&&!Zd(i)&&n&&0!==Xd(n)&&!Zd(n)?{num:{re:i.num,im:n.num.im}}:Yd(o||Ad[r]||r,i,n)}}}return e.ast=i,e}function lp(e,t){var i,n,r;let o,s,a,l,c={},d="",p={"double-struck":"double-struck",calligraphic:"script",script:"script",fraktur:"fraktur","sans-serif":"sans-serif",monospace:"monospace"}[e.variant+(e.variantStyle&&"up"!==e.variantStyle?"-"+e.variantStyle:"")],h="";"b"===e.fontSeries&&(h+="bold"),"it"===e.fontShape&&(h+="italic");const u=e.symbol;switch(e.type){case"root":case"group":(null===(i=e.symbol)||void 0===i?void 0:i.startsWith("\\nicefrac"))?(o=e.symbol.slice(9).match(/({.*}|[^}])({.*}|[^}])/))?(s=sa(s=1===o[1].length?o[1]:o[1].substr(1,o[1].length-2),"math",null,t.macros),a=sa(a=1===o[2].length?o[2]:o[2].substr(1,o[2].length-2),"math",null,t.macros),c=Yd("divide",dp(s,t),dp(a,t))):c={fn:"divide"}:c={group:dp(e.body,t)};break;case"genfrac":c=Yd("divide",dp(e.numer,t),"placeholder"===(null===(r=null===(n=e.denom)||void 0===n?void 0:n[0])||void 0===r?void 0:r.type)?Qd(1):dp(e.denom,t));break;case"surd":c=e.index?Yd("pow",dp(e.body,t),Yd("divide",Qd(1),dp(e.index,t))):Yd("sqrt",dp(e.body,t));break;case"rule":case"overlap":case"overunder":break;case"mord":case"textord":case"mbin":(o=u?u.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):void 0)?d=String.fromCodePoint(parseInt(o[1],16)):(d=qd(Vd(e))).length>0&&"\\"===d.charAt(0)&&"string"==typeof e.body&&(d=e.body),(l=es(d,p,h).replace(/[\\]/g,"\\\\").replace(/["]/g,'\\"').replace(/[\b]/g,"\\b").replace(/[\f]/g,"\\f").replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t"))!==d?(c={sym:l},p="normal"):c={sym:d};break;case"minner":case"mop":break;case"box":c=dp(e.body,t);break;case"enclose":break;case"array":if("cardinality"===e.environmentName)c=Yd("card",dp(e.array,t));else if(/array|matrix|pmatrix|bmatrix/.test(e.environmentName)){c={fn:"array",args:[]};for(const i of e.array)c.args.push(i.map(e=>dp(e,t)))}else if("cases"===e.environmentName){c={fn:"cases",args:[]};for(const i of e.array)if(i[0]){const e=[];e.push(dp(i[0],t));let n=dp(i[1],t);n&&"text"===n.fn&&n.arg&&/^(if|when|for)$/i.test(n.arg[0].trim())&&(n=n.arg.filter(e=>"string"!=typeof e)),e.push(null!=n?n:{}),c.args.push(e)}}break;case"spacing":case"space":case"mathstyle":break;default:c=void 0,console.warn('Unhandled atom "'+e.type+'" in "'+(e.symbol||e.body)+'"')}return c&&p&&"normal"!==p&&(c.variant=p),c&&"string"==typeof e.cssClass&&(c.class=e.cssClass),c&&"string"==typeof e.cssId&&(c.id=e.cssId),c}function cp(e){if(!e)return[];let t;if(Jr(e)){t=[];for(const i of e){const e=cp(i);t=t.concat(e)}}else{if("spacing"===e.type||"first"===e.type)return[];"box"===e.type?t=cp(e.body):(e.body&&Jr(e.body)&&(e.body=cp(e.body)),e.superscript&&Jr(e.superscript)&&(e.superscript=cp(e.superscript)),e.subscript&&Jr(e.subscript)&&(e.subscript=cp(e.subscript)),e.index&&Jr(e.index)&&(e.index=cp(e.index)),e.denom&&Jr(e.denom)&&(e.denom=cp(e.denom)),e.numer&&Jr(e.numer)&&(e.numer=cp(e.numer)),e.array&&Jr(e.array)&&(e.array=e.array.map(e=>e.map(e=>cp(e)))),t=[e])}return t}function dp(e,t){return function(e,t){e.index=e.index||0,e.ast=void 0;const i=[];for(;e.atoms[e.index];)if("text"===e.atoms[e.index].mode){let t="";for(;e.atoms[e.index]&&"text"===e.atoms[e.index].mode;)t+=e.atoms[e.index].body,e.index+=1;i.push(Yd("text",t))}else{const n=ap(e,t).ast;if(!n)return;i.push(n)}return i.length>1?Yd("sequence",...i):i[0]||void 0}({atoms:cp(e)},t)}function pp(e,t){return dp(e,t)}function hp(e,...t){e=e||".. ";let i="";if(t.length>0){"."!==e[0]&&(i+=e[0]);let n="";for(const r of t)i+=n+r,n=e[2];"."!==e[1]&&(i+=e[1])}return i}function up(e,t){const i=e.length;e=e.substr(0,t.precision-2);for(let n=0;n<e.length-16;n++){const i=e.substr(0,n);for(let r=0;r<17;r++){const o=e.substr(n,r+1),s=Math.floor((e.length-i.length)/o.length);if(s>1&&(i+o.repeat(s+1)).startsWith(e))return"0"===o?i.replace(/(\d{3})/g,"$1"+t.groupSeparator):i.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.beginRepeatingDigits+o.replace(/(\d{3})/g,"$1"+t.groupSeparator)+t.endRepeatingDigits}}return i!==e.length&&(e+="\\ldots"),e.replace(/(\d{3})/g,"$1"+t.groupSeparator)}function mp(e){return parseFloat(parseFloat(e).toPrecision(15))}function fp(e,t){let i,n="";if("number"==typeof t.precision){if("number"!=typeof e){let i="",n="";if("-"===e[0]?(i="-",e=e.substr(1)):"+"===e[0]&&(e=e.substr(1)),e.indexOf(".")>=0){const r=e.match(/(\d*).(\d*)([e|E]([-+]?[0-9]*))?/),o=r[1],s=r[2].substring(0,Math.min(t.precision-o.length,r[2].length));if(n=r[4]||"","0"===o){let n=0;for(;"0"===s[n]&&n<s.length;)n+=1;let r="";if(n<=4)r="0"+t.decimalMarker,r+=s.substr(0,n),r+=up(e.substr(r.length),t);else if(n+1>=t.precision)r="0",i="";else{r=e[n];const i=up(e.substr(n+1),t);i&&(r+=t.decimalMarker+i)}"0"!==r&&(e.length-1>t.precision&&!r.endsWith("}")&&!r.endsWith("\\ldots")&&(r+="\\ldots"),n>4&&(r+=t.exponentProduct,t.exponentMarker?r+=t.exponentMarker+(1-n).toString():r+="10^{"+(1-n).toString()+"}")),e=r}else{e=o.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator);const i=up(s,t);i&&(e+=t.decimalMarker+i)}}else if(e.length>t.precision){const i=e.length;let n=e[0];const r=up(e.substr(2),t);r&&("}"!==(n+=t.decimalMarker+r)[n.length-1]&&(n+="\\ldots")),"1"!==n?n+=t.exponentProduct:n="",t.exponentMarker?n+=t.exponentMarker+(i-2).toString():n+="10^{"+(i-2).toString()+"}",e=n}else e=e.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator);return n&&(n=t.exponentMarker?t.exponentMarker+n:t.exponentProduct+" 10^{"+n+"}"),i+e+n}i=mp(e)}if("engineering"===t.scientificNotation)if(0===i)n="0";else{const e=Math.abs(i);let r=Math.round(Math.log10(e));r-=r%3,e<1e3&&(r=0);const o=e/Math.pow(10,r);let s="";const a=o.toString().match(/^(.*)\.(.*)$/);(null==a?void 0:a[1])&&a[2]&&(s=a[1]+t.decimalMarker+a[2]),t.groupSeparator&&(s=up(o.toExponential(),t));let l="";n=(i<0?"-":"")+s+(l=0===r?"":t.exponentMarker?t.exponentMarker+r:t.exponentProduct+" 10^{"+r+"}")}else{const i="string"==typeof e?e:e.toString();let r,o,s,a=i.match(/^(.*)[e|E]([-+]?[0-9]*)$/i);r=i,s="",(null==a?void 0:a[1])&&a[2]&&(r=a[1],o=t.exponentMarker?t.exponentMarker+a[2]:t.exponentProduct+" 10^{"+a[2]+"}"),(null==(a=r.match(/^(.*)\.(.*)$/))?void 0:a[1])&&a[2]&&(r=a[1],s=a[2]),t.groupSeparator&&(r=r.replace(/\B(?=(\d{3})+(?!\d))/g,t.groupSeparator),s=up(s,t)),s&&(s=t.decimalMarker+s),n=r+s+(o||"")}return n}class gp{constructor(e,t){var i;this.stylesheets=[],this.eventHandlingInProgress="",this.options=Yc(ed(),t),this.element=e,e.mathfield=this,this.originalContent=e.innerHTML;let n=this.element.textContent;n&&(n=n.trim()),async function(e,t){var i;if((null===(i=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))||void 0===i||!i)&&"fonts"in document){const i=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"];let n=!1;if(!/firefox/i.test(navigator.userAgent))try{n=i.every(e=>document.fonts.check("16px "+e))}catch(e){n=!1}if(!n){if(document.body.classList.contains("ML__fonts-loading"))return;document.body.classList.add("ML__fonts-loading");const i=new URL(null!=e?e:"./fonts",ca).toString(),n=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(e=>(function(e,t,i={}){return new FontFace(e,`url(${t}.woff2) format('woff2'), url(${t}.woff) format('woff')`,i)})(e[0].replace(/-[a-zA-Z]+$/,""),i+"/"+e[0],e[1]));try{(await Promise.all(n.map(e=>{try{return e.load()}catch(e){"function"==typeof t&&t({code:"font-not-found",arg:e})}}))).forEach(e=>document.fonts.add(e)),document.body.classList.remove("ML__fonts-loading")}catch(e){console.error(e)}}}}(this.options.fontsDirectory,this.options.onError),this.stylesheets.push(da(e,'.ML__sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:700}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:400}.ML__mathbfit{font-family:KaTeX_Math;font-weight:700;font-style:italic}.ML__ams,.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_el,.ML__series_ul{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px #000;text-stroke:1px #000;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__mathlive{display:inline-block;line-height:0;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main;font-style:normal;font-size-adjust:none;letter-spacing:normal;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;transform:translateZ(0)}.ML__mathlive .reset-textstyle.scriptstyle{font-size:.7em}.ML__mathlive .reset-textstyle.scriptscriptstyle{font-size:.5em}.ML__mathlive .reset-scriptstyle.textstyle{font-size:1.42857em}.ML__mathlive .reset-scriptstyle.scriptscriptstyle{font-size:.71429em}.ML__mathlive .reset-scriptscriptstyle.textstyle{font-size:2em}.ML__mathlive .reset-scriptscriptstyle.scriptstyle{font-size:1.4em}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .vlist{display:inline-block}.ML__mathlive .vlist>span{display:block;height:0;position:relative;line-height:0}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .mfrac>span{text-align:center}.ML__mathlive .mfrac .frac-line{width:100%}.ML__mathlive .mfrac .frac-line:after{content:"";display:block;margin-top:-.04em;min-height:.04em;background:currentColor;box-sizing:content-box;transform:translate(0)}.ML__mathlive .rspace.negativethinspace{margin-right:-.16667em}.ML__mathlive .rspace.thinspace{margin-right:.16667em}.ML__mathlive .rspace.negativemediumspace{margin-right:-.22222em}.ML__mathlive .rspace.mediumspace{margin-right:.22222em}.ML__mathlive .rspace.thickspace{margin-right:.27778em}.ML__mathlive .rspace.sixmuspace{margin-right:.333333em}.ML__mathlive .rspace.eightmuspace{margin-right:.444444em}.ML__mathlive .rspace.enspace{margin-right:.5em}.ML__mathlive .rspace.twelvemuspace{margin-right:.666667em}.ML__mathlive .rspace.quad{margin-right:1em}.ML__mathlive .rspace.qquad{margin-right:2em}.ML__mathlive .mspace{display:inline-block}.ML__mathlive .mspace.negativethinspace{margin-left:-.16667em}.ML__mathlive .mspace.thinspace{width:.16667em}.ML__mathlive .mspace.negativemediumspace{margin-left:-.22222em}.ML__mathlive .mspace.mediumspace{width:.22222em}.ML__mathlive .mspace.thickspace{width:.27778em}.ML__mathlive .mspace.sixmuspace{width:.333333em}.ML__mathlive .mspace.eightmuspace{width:.444444em}.ML__mathlive .mspace.enspace{width:.5em}.ML__mathlive .mspace.twelvemuspace{width:.666667em}.ML__mathlive .mspace.quad{width:1em}.ML__mathlive .mspace.qquad{width:2em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:0 solid;position:relative}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:"";display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:after,.ML__mathlive .stretchy:before{content:""}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{left:0}.ML__mathlive .slice-1-of-2,.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{right:0}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .sqrt{display:inline-block}.ML__mathlive .sqrt>.sqrt-sign{font-family:KaTeX_Main;position:relative}.ML__mathlive .sqrt .sqrt-line{height:.04em;width:100%}.ML__mathlive .sqrt .sqrt-line:before{content:"";display:block;margin-top:-.04em;min-height:.04em;background:currentColor}.ML__mathlive .sqrt .sqrt-line:after{border-bottom-width:1px;content:" ";display:block;margin-top:-.1em;transform:translate(0)}.ML__mathlive .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.ML__mathlive .fontsize-ensurer,.ML__mathlive .sizing{display:inline-block}.ML__mathlive .fontsize-ensurer.reset-size1.size1,.ML__mathlive .sizing.reset-size1.size1{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size1.size2,.ML__mathlive .sizing.reset-size1.size2{font-size:1.4em}.ML__mathlive .fontsize-ensurer.reset-size1.size3,.ML__mathlive .sizing.reset-size1.size3{font-size:1.6em}.ML__mathlive .fontsize-ensurer.reset-size1.size4,.ML__mathlive .sizing.reset-size1.size4{font-size:1.8em}.ML__mathlive .fontsize-ensurer.reset-size1.size5,.ML__mathlive .sizing.reset-size1.size5{font-size:2em}.ML__mathlive .fontsize-ensurer.reset-size1.size6,.ML__mathlive .sizing.reset-size1.size6{font-size:2.4em}.ML__mathlive .fontsize-ensurer.reset-size1.size7,.ML__mathlive .sizing.reset-size1.size7{font-size:2.88em}.ML__mathlive .fontsize-ensurer.reset-size1.size8,.ML__mathlive .sizing.reset-size1.size8{font-size:3.46em}.ML__mathlive .fontsize-ensurer.reset-size1.size9,.ML__mathlive .sizing.reset-size1.size9{font-size:4.14em}.ML__mathlive .fontsize-ensurer.reset-size1.size10,.ML__mathlive .sizing.reset-size1.size10{font-size:4.98em}.ML__mathlive .fontsize-ensurer.reset-size2.size1,.ML__mathlive .sizing.reset-size2.size1{font-size:.71428571em}.ML__mathlive .fontsize-ensurer.reset-size2.size2,.ML__mathlive .sizing.reset-size2.size2{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size2.size3,.ML__mathlive .sizing.reset-size2.size3{font-size:1.14285714em}.ML__mathlive .fontsize-ensurer.reset-size2.size4,.ML__mathlive .sizing.reset-size2.size4{font-size:1.28571429em}.ML__mathlive .fontsize-ensurer.reset-size2.size5,.ML__mathlive .sizing.reset-size2.size5{font-size:1.42857143em}.ML__mathlive .fontsize-ensurer.reset-size2.size6,.ML__mathlive .sizing.reset-size2.size6{font-size:1.71428571em}.ML__mathlive .fontsize-ensurer.reset-size2.size7,.ML__mathlive .sizing.reset-size2.size7{font-size:2.05714286em}.ML__mathlive .fontsize-ensurer.reset-size2.size8,.ML__mathlive .sizing.reset-size2.size8{font-size:2.47142857em}.ML__mathlive .fontsize-ensurer.reset-size2.size9,.ML__mathlive .sizing.reset-size2.size9{font-size:2.95714286em}.ML__mathlive .fontsize-ensurer.reset-size2.size10,.ML__mathlive .sizing.reset-size2.size10{font-size:3.55714286em}.ML__mathlive .fontsize-ensurer.reset-size3.size1,.ML__mathlive .sizing.reset-size3.size1{font-size:.625em}.ML__mathlive .fontsize-ensurer.reset-size3.size2,.ML__mathlive .sizing.reset-size3.size2{font-size:.875em}.ML__mathlive .fontsize-ensurer.reset-size3.size3,.ML__mathlive .sizing.reset-size3.size3{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size3.size4,.ML__mathlive .sizing.reset-size3.size4{font-size:1.125em}.ML__mathlive .fontsize-ensurer.reset-size3.size5,.ML__mathlive .sizing.reset-size3.size5{font-size:1.25em}.ML__mathlive .fontsize-ensurer.reset-size3.size6,.ML__mathlive .sizing.reset-size3.size6{font-size:1.5em}.ML__mathlive .fontsize-ensurer.reset-size3.size7,.ML__mathlive .sizing.reset-size3.size7{font-size:1.8em}.ML__mathlive .fontsize-ensurer.reset-size3.size8,.ML__mathlive .sizing.reset-size3.size8{font-size:2.1625em}.ML__mathlive .fontsize-ensurer.reset-size3.size9,.ML__mathlive .sizing.reset-size3.size9{font-size:2.5875em}.ML__mathlive .fontsize-ensurer.reset-size3.size10,.ML__mathlive .sizing.reset-size3.size10{font-size:3.1125em}.ML__mathlive .fontsize-ensurer.reset-size4.size1,.ML__mathlive .sizing.reset-size4.size1{font-size:.55555556em}.ML__mathlive .fontsize-ensurer.reset-size4.size2,.ML__mathlive .sizing.reset-size4.size2{font-size:.77777778em}.ML__mathlive .fontsize-ensurer.reset-size4.size3,.ML__mathlive .sizing.reset-size4.size3{font-size:.88888889em}.ML__mathlive .fontsize-ensurer.reset-size4.size4,.ML__mathlive .sizing.reset-size4.size4{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size4.size5,.ML__mathlive .sizing.reset-size4.size5{font-size:1.11111111em}.ML__mathlive .fontsize-ensurer.reset-size4.size6,.ML__mathlive .sizing.reset-size4.size6{font-size:1.33333333em}.ML__mathlive .fontsize-ensurer.reset-size4.size7,.ML__mathlive .sizing.reset-size4.size7{font-size:1.6em}.ML__mathlive .fontsize-ensurer.reset-size4.size8,.ML__mathlive .sizing.reset-size4.size8{font-size:1.92222222em}.ML__mathlive .fontsize-ensurer.reset-size4.size9,.ML__mathlive .sizing.reset-size4.size9{font-size:2.3em}.ML__mathlive .fontsize-ensurer.reset-size4.size10,.ML__mathlive .sizing.reset-size4.size10{font-size:2.76666667em}.ML__mathlive .fontsize-ensurer.reset-size5.size1,.ML__mathlive .sizing.reset-size5.size1{font-size:.5em}.ML__mathlive .fontsize-ensurer.reset-size5.size2,.ML__mathlive .sizing.reset-size5.size2{font-size:.7em}.ML__mathlive .fontsize-ensurer.reset-size5.size3,.ML__mathlive .sizing.reset-size5.size3{font-size:.8em}.ML__mathlive .fontsize-ensurer.reset-size5.size4,.ML__mathlive .sizing.reset-size5.size4{font-size:.9em}.ML__mathlive .fontsize-ensurer.reset-size5.size5,.ML__mathlive .sizing.reset-size5.size5{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size5.size6,.ML__mathlive .sizing.reset-size5.size6{font-size:1.2em}.ML__mathlive .fontsize-ensurer.reset-size5.size7,.ML__mathlive .sizing.reset-size5.size7{font-size:1.44em}.ML__mathlive .fontsize-ensurer.reset-size5.size8,.ML__mathlive .sizing.reset-size5.size8{font-size:1.73em}.ML__mathlive .fontsize-ensurer.reset-size5.size9,.ML__mathlive .sizing.reset-size5.size9{font-size:2.07em}.ML__mathlive .fontsize-ensurer.reset-size5.size10,.ML__mathlive .sizing.reset-size5.size10{font-size:2.49em}.ML__mathlive .fontsize-ensurer.reset-size6.size1,.ML__mathlive .sizing.reset-size6.size1{font-size:.41666667em}.ML__mathlive .fontsize-ensurer.reset-size6.size2,.ML__mathlive .sizing.reset-size6.size2{font-size:.58333333em}.ML__mathlive .fontsize-ensurer.reset-size6.size3,.ML__mathlive .sizing.reset-size6.size3{font-size:.66666667em}.ML__mathlive .fontsize-ensurer.reset-size6.size4,.ML__mathlive .sizing.reset-size6.size4{font-size:.75em}.ML__mathlive .fontsize-ensurer.reset-size6.size5,.ML__mathlive .sizing.reset-size6.size5{font-size:.83333333em}.ML__mathlive .fontsize-ensurer.reset-size6.size6,.ML__mathlive .sizing.reset-size6.size6{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size6.size7,.ML__mathlive .sizing.reset-size6.size7{font-size:1.2em}.ML__mathlive .fontsize-ensurer.reset-size6.size8,.ML__mathlive .sizing.reset-size6.size8{font-size:1.44166667em}.ML__mathlive .fontsize-ensurer.reset-size6.size9,.ML__mathlive .sizing.reset-size6.size9{font-size:1.725em}.ML__mathlive .fontsize-ensurer.reset-size6.size10,.ML__mathlive .sizing.reset-size6.size10{font-size:2.075em}.ML__mathlive .fontsize-ensurer.reset-size7.size1,.ML__mathlive .sizing.reset-size7.size1{font-size:.34722222em}.ML__mathlive .fontsize-ensurer.reset-size7.size2,.ML__mathlive .sizing.reset-size7.size2{font-size:.48611111em}.ML__mathlive .fontsize-ensurer.reset-size7.size3,.ML__mathlive .sizing.reset-size7.size3{font-size:.55555556em}.ML__mathlive .fontsize-ensurer.reset-size7.size4,.ML__mathlive .sizing.reset-size7.size4{font-size:.625em}.ML__mathlive .fontsize-ensurer.reset-size7.size5,.ML__mathlive .sizing.reset-size7.size5{font-size:.69444444em}.ML__mathlive .fontsize-ensurer.reset-size7.size6,.ML__mathlive .sizing.reset-size7.size6{font-size:.83333333em}.ML__mathlive .fontsize-ensurer.reset-size7.size7,.ML__mathlive .sizing.reset-size7.size7{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size7.size8,.ML__mathlive .sizing.reset-size7.size8{font-size:1.20138889em}.ML__mathlive .fontsize-ensurer.reset-size7.size9,.ML__mathlive .sizing.reset-size7.size9{font-size:1.4375em}.ML__mathlive .fontsize-ensurer.reset-size7.size10,.ML__mathlive .sizing.reset-size7.size10{font-size:1.72916667em}.ML__mathlive .fontsize-ensurer.reset-size8.size1,.ML__mathlive .sizing.reset-size8.size1{font-size:.28901734em}.ML__mathlive .fontsize-ensurer.reset-size8.size2,.ML__mathlive .sizing.reset-size8.size2{font-size:.40462428em}.ML__mathlive .fontsize-ensurer.reset-size8.size3,.ML__mathlive .sizing.reset-size8.size3{font-size:.46242775em}.ML__mathlive .fontsize-ensurer.reset-size8.size4,.ML__mathlive .sizing.reset-size8.size4{font-size:.52023121em}.ML__mathlive .fontsize-ensurer.reset-size8.size5,.ML__mathlive .sizing.reset-size8.size5{font-size:.57803468em}.ML__mathlive .fontsize-ensurer.reset-size8.size6,.ML__mathlive .sizing.reset-size8.size6{font-size:.69364162em}.ML__mathlive .fontsize-ensurer.reset-size8.size7,.ML__mathlive .sizing.reset-size8.size7{font-size:.83236994em}.ML__mathlive .fontsize-ensurer.reset-size8.size8,.ML__mathlive .sizing.reset-size8.size8{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size8.size9,.ML__mathlive .sizing.reset-size8.size9{font-size:1.19653179em}.ML__mathlive .fontsize-ensurer.reset-size8.size10,.ML__mathlive .sizing.reset-size8.size10{font-size:1.43930636em}.ML__mathlive .fontsize-ensurer.reset-size9.size1,.ML__mathlive .sizing.reset-size9.size1{font-size:.24154589em}.ML__mathlive .fontsize-ensurer.reset-size9.size2,.ML__mathlive .sizing.reset-size9.size2{font-size:.33816425em}.ML__mathlive .fontsize-ensurer.reset-size9.size3,.ML__mathlive .sizing.reset-size9.size3{font-size:.38647343em}.ML__mathlive .fontsize-ensurer.reset-size9.size4,.ML__mathlive .sizing.reset-size9.size4{font-size:.43478261em}.ML__mathlive .fontsize-ensurer.reset-size9.size5,.ML__mathlive .sizing.reset-size9.size5{font-size:.48309179em}.ML__mathlive .fontsize-ensurer.reset-size9.size6,.ML__mathlive .sizing.reset-size9.size6{font-size:.57971014em}.ML__mathlive .fontsize-ensurer.reset-size9.size7,.ML__mathlive .sizing.reset-size9.size7{font-size:.69565217em}.ML__mathlive .fontsize-ensurer.reset-size9.size8,.ML__mathlive .sizing.reset-size9.size8{font-size:.83574879em}.ML__mathlive .fontsize-ensurer.reset-size9.size9,.ML__mathlive .sizing.reset-size9.size9{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size9.size10,.ML__mathlive .sizing.reset-size9.size10{font-size:1.20289855em}.ML__mathlive .fontsize-ensurer.reset-size10.size1,.ML__mathlive .sizing.reset-size10.size1{font-size:.20080321em}.ML__mathlive .fontsize-ensurer.reset-size10.size2,.ML__mathlive .sizing.reset-size10.size2{font-size:.2811245em}.ML__mathlive .fontsize-ensurer.reset-size10.size3,.ML__mathlive .sizing.reset-size10.size3{font-size:.32128514em}.ML__mathlive .fontsize-ensurer.reset-size10.size4,.ML__mathlive .sizing.reset-size10.size4{font-size:.36144578em}.ML__mathlive .fontsize-ensurer.reset-size10.size5,.ML__mathlive .sizing.reset-size10.size5{font-size:.40160643em}.ML__mathlive .fontsize-ensurer.reset-size10.size6,.ML__mathlive .sizing.reset-size10.size6{font-size:.48192771em}.ML__mathlive .fontsize-ensurer.reset-size10.size7,.ML__mathlive .sizing.reset-size10.size7{font-size:.57831325em}.ML__mathlive .fontsize-ensurer.reset-size10.size8,.ML__mathlive .sizing.reset-size10.size8{font-size:.69477912em}.ML__mathlive .fontsize-ensurer.reset-size10.size9,.ML__mathlive .sizing.reset-size10.size9{font-size:.8313253em}.ML__mathlive .fontsize-ensurer.reset-size10.size10,.ML__mathlive .sizing.reset-size10.size10{font-size:1em}.ML__mathlive .delimsizing.size1{font-family:KaTeX_Size1}.ML__mathlive .delimsizing.size2{font-family:KaTeX_Size2}.ML__mathlive .delimsizing.size3{font-family:KaTeX_Size3}.ML__mathlive .delimsizing.size4{font-family:KaTeX_Size4}.ML__mathlive .delimsizing.mult .delim-size1{font-family:KaTeX_Size1;vertical-align:top}.ML__mathlive .delimsizing.mult .delim-size4{font-family:KaTeX_Size4;vertical-align:top}.ML__mathlive .nulldelimiter{width:.12em}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .op-limits .vlist>span{text-align:center}.ML__mathlive .op-over-under{position:relative}.ML__mathlive .op-over-under>.vlist>span:first-child,.ML__mathlive .op-over-under>.vlist>span:last-child{text-align:center}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .accent .accent-body>span{font-family:KaTeX_Main;width:0}.ML__mathlive .accent .accent-body.accent-vec>span{position:relative;left:.326em}.ML__mathlive .mtable .vertical-separator{display:inline-block;margin:0 -.025em;border-right:.05em solid}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist{text-align:right}.ML__error{background-image:radial-gradient(ellipse at center,#cc0041,transparent 70%);background-repeat:repeat-x;background-size:3px 3px;background-position:0 98%}.ML__composition{background:#fff1c2;color:#000;-webkit-text-decoration:underline var(--caret,hsl(var(--hue,212),40%,49%));text-decoration:underline var(--caret,hsl(var(--hue,212),40%,49%))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:#fff}}.ML__placeholder{opacity:.7;padding-left:.4ex;padding-right:.4ex;padding-top:.4ex}')),this.stylesheets.push(da(e,'@-webkit-keyframes ML__caret-blink{0%,to{opacity:1}50%{opacity:0}}@keyframes ML__caret-blink{0%,to{opacity:1}50%{opacity:0}}.ML__caret:after{content:"";border:none;border-radius:2px;border-right:2px solid var(--caret,hsl(var(--hue,212),40%,49%));margin-right:-2px;position:relative;left:-1px;-webkit-animation:ML__caret-blink 1.05s step-end infinite forwards;animation:ML__caret-blink 1.05s step-end infinite forwards}.ML__text-caret:after{content:"";border:none;border-radius:1px;border-right:1px solid var(--caret,hsl(var(--hue,212),40%,49%));margin-right:-1px;position:relative;left:0;-webkit-animation:ML__caret-blink 1.05s step-end infinite forwards;animation:ML__caret-blink 1.05s step-end infinite forwards}.ML__command-caret:after{content:"_";border:none;margin-right:-1ex;position:relative;color:var(--caret,hsl(var(--hue,212),40%,49%));-webkit-animation:ML__caret-blink 1.05s step-end infinite forwards;animation:ML__caret-blink 1.05s step-end infinite forwards}.ML__fieldcontainer{display:flex;flex-flow:row;justify-content:space-between;align-items:flex-end;min-height:39px;touch-action:none;width:100%;--hue:212;--secondary:hsl(var(--hue,212),19%,26%);--on-secondary:hsl(var(--hue,212),19%,26%)}.ML__fieldcontainer__field{align-self:center;position:relative;overflow:hidden;line-height:0;padding:2px;width:100%}.ML__virtual-keyboard-toggle{display:flex;align-self:center;align-items:center;flex-shrink:0;flex-direction:column;justify-content:center;width:34px;height:34px;padding:0;margin-right:4px;cursor:pointer;box-sizing:border-box;border-radius:50%;border:1px solid transparent;transition:background .2s cubic-bezier(.64,.09,.08,1);color:var(--primary,hsl(var(--hue,212),40%,50%));fill:currentColor;background:transparent}.ML__virtual-keyboard-toggle:hover{background:hsl(var(--hue,212),25%,35%);color:#fafafa;fill:currentColor;border-radius:50%;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)}.ML__popover{visibility:hidden;min-width:160px;background-color:rgba(97,97,97,.95);color:#fff;text-align:center;border-radius:6px;position:fixed;z-index:1;display:flex;flex-direction:column;justify-content:center;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);transition:all .2s cubic-bezier(.64,.09,.08,1)}.ML__popover:after{content:"";position:absolute;top:-5px;left:calc(50% - 3px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;font-size:1rem;border-bottom:5px solid rgba(97,97,97,.9)}.ML__popover--reverse-direction:after{top:auto;bottom:-5px;border-top:5px solid rgba(97,97,97,.9);border-bottom:0}.ML__textarea__textarea{transform:scale(0);resize:none;outline:none;border:none;position:absolute;clip:rect(0 0 0 0);width:1px;height:1px;font-size:1em;font-family:KaTeX_Main}.ML__focused .ML__text{background:hsla(var(--hue,212),40%,50%,.1)}.ML__smart-fence__close{opacity:.5}.ML__selection{background:var(--highlight-inactive,#ccc);box-sizing:border-box}.ML__focused .ML__selection{background:var(--highlight,hsl(var(--hue,212),97%,85%))!important;color:var(--on-highlight)}.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open,.sqrt.ML__contains-caret>.sqrt-sign,.sqrt.ML__contains-caret>.vlist>span>.sqrt-line{color:var(--caret,hsl(var(--hue,212),40%,49%))}.ML__command{font-family:IBM Plex Mono,Source Code Pro,Consolas,Roboto Mono,Menlo,Bitstream Vera Sans Mono,DejaVu Sans Mono,Monaco,Courier,monospace;letter-spacing:-1px;font-weight:400;line-height:1em;color:var(--primary,hsl(var(--hue,212),40%,50%))}:not(.ML__command)+.ML__command{margin-left:.25em}.ML__command+:not(.ML__command){padding-left:.25em}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.pressed{background:hsla(0,0%,70%,.5)}.ML__virtual-keyboard-toggle:focus{outline:none;border-radius:50%;border:2px solid var(--primary,hsl(var(--hue,212),40%,50%))}.ML__virtual-keyboard-toggle.active,.ML__virtual-keyboard-toggle.active:hover{background:hsla(0,0%,70%,.5);color:#000;fill:currentColor}.ML__scroller{position:fixed;z-index:1;top:0;height:100vh;width:200px}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement=top]:after{top:inherit;bottom:100%}[data-ML__tooltip]:after{position:absolute;display:none;content:attr(data-ML__tooltip);top:110%;width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:200px;padding:8px;background:#616161;color:#fff;text-align:center;z-index:2;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);border-radius:2px;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:400;font-size:12px;opacity:0;transform:scale(.5);transition:all .15s cubic-bezier(.4,0,1,1)}@media only screen and (max-width:767px){[data-ML__tooltip]:after{padding:8px 16px;font-size:14px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover:after{visibility:visible;display:inline-table;opacity:1;transform:scale(1)}[data-ML__tooltip][data-delay]:after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover:after{transition-delay:1s}'));let r="";this.options.substituteTextArea?"string"==typeof this.options.substituteTextArea?r+=this.options.substituteTextArea:r+="<span></span>":/android|ipad|ipod|iphone/i.test(null===navigator||void 0===navigator?void 0:navigator.userAgent)?r+="<span class='ML__textarea'>\n                <span class='ML__textarea__textarea'\n                    tabindex=\"-1\" role=\"textbox\"\n                    style='display:inline-block;height:1px;width:1px' >\n                </span>\n            </span>":r+=`<span class="ML__textarea"><textarea class="ML__textarea__textarea" autocapitalize="off" autocomplete="off" autocorrect="off" spellcheck="false" aria-hidden="true" tabindex="${null!==(i=e.tabIndex)&&void 0!==i?i:0}"></textarea></span>`,r+='<span class="ML__fieldcontainer"><span class="ML__fieldcontainer__field"></span>',"manual"===this.options.virtualKeyboardMode?(r+=`<div part='virtual-keyboard-toggle' class="ML__virtual-keyboard-toggle" role="button" data-ML__tooltip="${Pc("tooltip.toggle virtual keyboard")}">`,this.options.virtualKeyboardToggleGlyph?r+=this.options.virtualKeyboardToggleGlyph:r+='<span style="width: 21px; margin-top: 4px;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>',r+="</div>"):r+="<span ></span>",r+="</span>",r+='\n        <div class="ML__sr-only">\n            <span aria-live="assertive" aria-atomic="true"></span>\n            <span></span>\n        </div>\n    ',this.element.innerHTML=this.options.createHTML(r);let o,s=0;o="function"==typeof this.options.substituteTextArea?this.options.substituteTextArea():this.element.children[s++].firstElementChild,this.field=this.element.children[s].children[0],this.field.addEventListener("wheel",e=>{e.preventDefault(),e.stopPropagation();const t=void 0===e.deltaX?e.detail:-e.deltaX;isFinite(t)&&this.field.scroll({top:0,left:this.field.scrollLeft-5*t})},{passive:!1}),this.virtualKeyboardToggle=this.element.children[s++].children[1],Nl(this,this.virtualKeyboardToggle,{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.children[s].children[0],this.accessibleNode=this.element.children[s++].children[1],this.popover=Al("mathlive-popover-panel","ML__popover"),this.stylesheets.push(da(null,"div.ML__popover.is-visible{visibility:inherit;-webkit-animation:ML__fade-in .15s cubic-bezier(0,0,.2,1);animation:ML__fade-in .15s cubic-bezier(0,0,.2,1)}@-webkit-keyframes ML__fade-in{0%{opacity:0}to{opacity:1}}@keyframes ML__fade-in{0%{opacity:0}to{opacity:1}}.ML__popover__content{border-radius:6px;padding:2px;cursor:pointer;min-height:100px;display:flex;flex-direction:column;justify-content:center;margin-left:8px;margin-right:8px}.ML__popover__content a{color:#5ea6fd;padding-top:.3em;margin-top:.4em;display:block}.ML__popover__content a:hover{color:#5ea6fd;text-decoration:underline}.ML__popover__content.active,.ML__popover__content.pressed,.ML__popover__content:hover{background:hsla(0,0%,100%,.1)}.ML__popover__command{font-size:1.6rem}.ML__popover__prev-shortcut{height:31px;opacity:.1;cursor:pointer;margin-left:8px;margin-right:8px;padding-top:4px;padding-bottom:2px}.ML__popover__next-shortcut:hover,.ML__popover__prev-shortcut:hover{opacity:.3}.ML__popover__next-shortcut.active,.ML__popover__next-shortcut.pressed,.ML__popover__prev-shortcut.active,.ML__popover__prev-shortcut.pressed{opacity:1}.ML__popover__next-shortcut>span,.ML__popover__prev-shortcut>span{padding:5px;border-radius:50%;width:20px;height:20px;display:inline-block}.ML__popover__prev-shortcut>span>span{margin-top:-2px;display:block}.ML__popover__next-shortcut>span>span{margin-top:2px;display:block}.ML__popover__next-shortcut:hover>span,.ML__popover__prev-shortcut:hover>span{background:hsla(0,0%,100%,.1)}.ML__popover__next-shortcut{height:34px;opacity:.1;cursor:pointer;margin-left:8px;margin-right:8px;padding-top:2px;padding-bottom:4px}.ML__popover__shortcut{font-size:.8em;margin-top:.25em}.ML__popover__note,.ML__popover__shortcut{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;opacity:.7;padding-top:.25em}.ML__popover__note{font-size:.8rem;line-height:1em;padding-left:.5em;padding-right:.5em}.ML__shortcut-join{opacity:.5}")),this.keystrokeCaption=Al("mathlive-keystroke-caption-panel","ML__keystroke-caption"),this.stylesheets.push(da(null,".ML__keystroke-caption{visibility:hidden;background:var(--secondary);border-color:var(--secondary-border);box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);text-align:center;border-radius:6px;padding:16px;position:absolute;z-index:1;display:flex;flex-direction:row;justify-content:center;--keystroke:#fff;--on-keystroke:#555;--keystroke-border:#f7f7f7}@media (prefers-color-scheme:dark){body:not([theme=light]) .ML__keystroke-caption{--keystroke:hsl(var(--hue,212),50%,30%);--on-keystroke:#fafafa;--keystroke-border:hsl(var(--hue,212),50%,25%)}}body[theme=dark] .ML__keystroke-caption{--keystroke:hsl(var(--hue,212),50%,30%);--on-keystroke:#fafafa;--keystroke-border:hsl(var(--hue,212),50%,25%)}.ML__keystroke-caption>span{min-width:14px;margin:0 8px 0 0;padding:4px;background-color:var(--keystroke);color:var(--on-keystroke);fill:currentColor;font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-size:1em;border-radius:6px;border:2px solid var(--keystroke-border)}")),this.keystrokeCaptionVisible=!1,this.virtualKeyboardVisible=!1,this.keystrokeBuffer="",this.keystrokeBufferStates=[],this.keystrokeBufferResetTimer=null,this.suggestionIndex=0,this.mode=this.options.defaultMode,this.smartModeSuppressed=!1,this.style={},this.blurred=!0,Ll(this.element,"focus",this),Ll(this.element,"blur",this),this.keyboardDelegate=function(e,t){let i,n=null,r=null,o=!1,s=!1,a=!1;function l(e){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),e()})}function c(){if(e.selectionStart!==e.selectionEnd)return;const i=e.value;e.value="",i.length>0&&t.typedText(i)}const d=e;return d.addEventListener("keydown",i=>{o||"Process"===i.key||"CapsLock"===i.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(i.code)?n=null:(n=i,r=null,t.keystroke($c(i),i)||(n=null,e.value=""))},!0),d.addEventListener("keypress",e=>{o||o||(n&&r&&t.keystroke($c(n),n),r=e,l(c))},!0),d.addEventListener("keyup",()=>{o||n&&!r&&c()},!0),d.addEventListener("paste",i=>{e.focus(),e.value="",t.paste(i)},!0),d.addEventListener("cut",()=>{t.cut()},!0),d.addEventListener("copy",e=>{t.copy(e)},!0),d.addEventListener("blur",e=>{a||s||(a=!0,n=null,r=null,t.blur&&t.blur(),a=!1)},!0),d.addEventListener("focus",e=>{a||s||(s=!0,t.focus&&t.focus(),s=!1)},!0),d.addEventListener("compositionstart",i=>{o=!0,e.value="",t.compositionStart&&t.compositionStart(i.data)},!0),d.addEventListener("compositionupdate",e=>{o&&t.compositionUpdate&&t.compositionUpdate(e.data)},!0),d.addEventListener("compositionend",i=>{e.value="",o&&(o=!1,t.compositionEnd&&t.compositionEnd(i.data))},!0),d.addEventListener("input",e=>{if(!o&&"insertCompositionText"!==e.inputType)return"insertFromPaste"===e.inputType?(e.preventDefault(),void e.stopPropagation()):void l(c)}),{cancelComposition:()=>{const i=t.blur,n=t.focus;t.blur=null,t.focus=null,e.blur(),e.focus(),t.blur=i,t.focus=n},blur:()=>{"function"==typeof e.blur&&e.blur()},focus:()=>{"function"==typeof e.blur&&e.focus()},hasFocus:()=>Oc(document)===e,setValue:t=>{t?(e.value=t,Oc(document)===e&&e.select&&e.select()):(e.value="",e.setAttribute("aria-label",""))},setAriaLabel:t=>{e.setAttribute("aria-label","after: "+t)},moveTo:(t,i)=>{e.style.top=i+"px",e.style.left=t+"px"}}}(o,{typedText:e=>od(this,e),cut:()=>{return e=this,setTimeout(function(){e.$clearSelection(),ac(e)}.bind(e),0),!0;var e},copy:e=>{return i=e,rl((t=this).model)?(i.clipboardData.setData("text/plain","$$"+t.getValue("latex-expanded")+"$$"),i.clipboardData.setData("application/json",t.getValue("json")),i.clipboardData.setData("application/xml",t.getValue("mathML"))):(i.clipboardData.setData("text/plain","$$"+t.getValue(t.selection,"latex-expanded")+"$$"),i.clipboardData.setData("application/json",t.getValue(t.selection,"json")),i.clipboardData.setData("application/xml",t.getValue(t.selection,"mathML"))),void i.preventDefault();var t,i},paste:e=>(function(e,t){let i="";const n=t.clipboardData.getData("application/json");if(n)try{i=function(e,t){return function e(t,i){const n=Object.assign({precision:14,decimalMarker:".",groupSeparator:"\\, ",product:"\\cdot ",exponentProduct:"\\cdot ",exponentMarker:"",arcSeparator:"\\,",scientificNotation:"auto",beginRepeatingDigits:"\\overline{",endRepeatingDigits:"}"},i);let r="";if(void 0===t)return"";if("string"==typeof t)r=t;else if(t.latex)r=t.latex;else if(Hd(t)){const i=jd(t);if(i===-1/0)r="-\\infty ";else if(i===1/0)r="\\infty ";else if("object"!=typeof t.num||"string"!=typeof t.num.re&&"string"!=typeof t.num.im)r=isNaN(i)?"\\text{NaN}":fp(t.num,n);else{const e=Ud(t),i=Xd(t);isNaN(e)||isNaN(i)?r="\\text{NaN}":Math.abs(i)<=Number.EPSILON&&Math.abs(e)<=Number.EPSILON?r="0":(Math.abs(e)>Number.EPSILON&&(r=fp(e,n)),Math.abs(i)>Number.EPSILON&&(Math.abs(e)>Number.EPSILON&&(r+=i>0?"+":""),r+=(1!==Math.abs(i)?fp(i,n):"")+"\\imaginaryI "))}Zd(t)&&(r+="^{"+e(t.sup,n)+"}"),Jd(t)&&(r+="_{"+e(t.sub,n)+"}")}else if(t.group)r=e(t.group,n),Hd(t.group)||Wd(t.group)?0!==Xd(t.group)&&(r=hp(t.fence||"(),",r)):r=hp(t.fence||"(),",r),Zd(t)&&(r+="^{"+e(t.sup,n)+"}"),Jd(t)&&(r+="_{"+e(t.sub,n)+"}");else if(t.fn)if("bind"===t.fn){if(r=e($d(t,0),n)+"|_{",t.arg&&2===t.arg.length)r+=e($d(t,1));else{let i="";for(let n=1;n<t.arg.length;n+=2)r+=i+e($d(t,n))+" = "+e($d(t,n+1)),i=", "}r+="}"}else if("divide"===t.fn)r="\\frac{"+e($d(t,0),n)+"}{"+e($d(t,1),n)+"}";else if("negate"===t.fn)r="-"+e($d(t,0),n);else if("subtract"===t.fn)r=e($d(t,0),n)+" - "+e($d(t,1),n);else if("add"!==t.fn&&"multiply"!==t.fn||!Jr(t.arg))if("list"===t.fn||"list2"===t.fn){const i=[];if(t.arg)for(const r of t.arg)i.push(e(r,n));r=i.join("list2"===t.fn?"; ":", ")}else if("sequence"===t.fn)r=Us(t.arg.map(t=>e(t,n)));else if("text"===t.fn)r="\\text{"+(t.arg[0]||"")+"}";else if("pow"===t.fn&&Jr(t.arg)&&t.arg.length>=2)r=e($d(t,0),n),Hd($d(t,0))||Wd($d(t,0))||(r=hp(t.fence||"(),",r)),r+="^{"+e($d(t,1),n)+"}";else if("equal"===t.fn&&t.arg&&t.arg.length>2)r=t.arg.map(t=>e(t,n)).join(" = ");else{const i=function(e){let t=Dd[e];return t||(t=e.length>1?"\\operatorname{"+e+"}%^%_ %":e+"%^%_ %"),t}(t.fn);r=i;let o="";if(/%(?![01_^])/.test(i)&&Jr(t.arg)&&t.arg.length>1)r+=hp(t.fence||"(),",...t.arg.map(t=>e(t,n)));else if(Jr(t.arg)&&t.arg.length>0){const s=e($d(t,0),n),a=e($d(t,1),n),l=[...t.arg];/%0/.test(i)&&(r=r.replace("%0",s),l.shift()),/%1/.test(i)&&(r=r.replace("%1",a),l.shift()),l.length>0&&(o=hp(t.fence||"(),",...l.map(t=>e(t,n))))}else o=hp(t.fence||"(),","");r=Zd(t)?r.replace("%^","^{"+e(t.sup,n)+"}"):r.replace("%^",""),r=(r=(r=Jd(t)?r.replace("%_","_{"+e(t.sub,n)+"}"):r.replace("%_","")).replace(/%(?![01_^])/,o)).replace("%0","").replace("%1","")}else{const i=[];for(const r of t.arg)"add"===r.fn||"subtract"===r.fn||0!==Ud(o=r)&&0!==Xd(o)||Zd(t)&&0!==Xd(r)&&1!==Xd(r)?i.push(hp("() ",e(r,n))):i.push(e(r,n));if("multiply"===t.fn)r=!t.arg||2!==t.arg.length||!Hd(t.arg[0])&&"divide"!==t.arg[0].fn||Hd(t.arg[1])&&(0!==Ud(t.arg[1])||1!==Xd(t.arg[1]))?i.join(" \\times "):i[0]+i[1];else if(t.arg&&1===t.arg.length)r="negate"===t.arg[0].fn||Hd(t.arg[0])&&jd(t.arg[0])<0?i[0]:"+"+i[0];else{r=i[0];for(let e=1;e<t.arg.length;e++)"negate"===t.arg[e].fn||Hd(t.arg[e])&&jd(t.arg[e])<0?r+=i[e]:r+=" + "+i[e]}}else if("string"==typeof t.sym){let i=(r=Wd(t)).match(/^&#x([0-9a-f]+);$/i);(null==i?void 0:i[1])?r=String.fromCodePoint(parseInt(i[1],16)):(null==(i=r.match(/^&#([0-9]+);$/i))?void 0:i[1])&&(r=String.fromCodePoint(parseInt(i[1]))),"string"==typeof t.variant&&(r="\\"+{normal:"mathrm","double-struck":"mathbb",bold:"mathbf",fraktur:"mathfrak",script:"mathscr","sans-serif":"mathsf",monospace:"mathtt"}[t.variant]+"{"+r+"}"),Zd(t)&&(r+="^{"+e(t.sup,n)+"}"),Jd(t)&&(r+="_{"+e(t.sub,n)+"}")}else"string"==typeof t.text&&(r="\\text{"+t.text+"}");var o;return"string"==typeof t.error&&(r="\\bbox[#F56165]{"+r+"}"),r}("string"==typeof e?JSON.parse(e):e,{})}(n)}catch(e){i=""}return i||(i=t.clipboardData.getData("text/plain")),i&&(xc(e.model,i,{smartFence:e.options.smartFence,mode:"math"}),ac(e),t.preventDefault(),t.stopPropagation()),!0})(this,e),keystroke:(e,t)=>rd(this,e,t),focus:()=>this.onFocus(),blur:()=>this.onBlur(),compositionStart:e=>this.onCompositionStart(e),compositionUpdate:e=>this.onCompositionUpdate(e),compositionEnd:e=>this.onCompositionEnd(e)}),window.PointerEvent?Ll(this.field,"pointerdown",this):Ll(this.field,"touchstart:active mousedown",this),Ll(window,"resize",this),this.model=new Cc({mode:this.options.defaultMode,macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onContentDidChange:e=>this.options.onContentDidChange(this),onSelectionDidChange:e=>this._onSelectionDidChange(),onContentWillChange:()=>this.options.onContentWillChange(this),onSelectionWillChange:()=>this.options.onSelectionWillChange(this),onError:this.options.onError},{announce:(e,t,i,n)=>{var r,o;return null===(o=(r=this.options).onAnnounce)||void 0===o?void 0:o.call(r,this,t,i,n)},moveOut:(e,t)=>this.options.onMoveOutOf(this,t),tabOut:(e,t)=>this.options.onTabOutOf(this,t)},this),this.undoManager=new Ec(this.model),xc(this.model,n,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:!0,macros:this.options.macros}),this.undoManager.startRecording(),this.undoManager.snapshot(this.options),this.model.setListeners({onContentDidChange:e=>this.options.onContentDidChange(this),onSelectionDidChange:e=>this._onSelectionDidChange(),onContentWillChange:()=>this.options.onContentWillChange(this),onSelectionWillChange:()=>this.options.onSelectionWillChange(this),onError:this.options.onError}),this.model.setHooks({announce:(e,t,i,n)=>{var r,o;return null===(o=(r=this.options).onAnnounce)||void 0===o?void 0:o.call(r,this,t,i,n)},moveOut:(e,t)=>this.options.onMoveOutOf(this,t),tabOut:(e,t)=>this.options.onTabOutOf(this,t)}),this.options.locale.startsWith(xl().locale)||bl(this.options.locale),this.keybindings=Sl(this.options.keybindings,e=>{"function"==typeof this.options.onError&&this.options.onError({code:"invalid-keybinding",arg:e.join("\n")}),console.log(e.join("\n"))}),ac(this)}$setConfig(e){yp("$setConfig"),this.setOptions(e)}setOptions(e){this.options=Yc(this.options,e),this.model.setListeners({onContentDidChange:e=>this.options.onContentDidChange(this),onSelectionDidChange:e=>this._onSelectionDidChange(),onContentWillChange:()=>this.options.onContentWillChange(this),onSelectionWillChange:()=>this.options.onSelectionWillChange(this),onError:this.options.onError}),this.model.setHooks({announce:(e,t,i,n)=>{var r,o;return null===(o=(r=this.options).onAnnounce)||void 0===o?void 0:o.call(r,this,t,i,n)},moveOut:(e,t)=>this.options.onMoveOutOf(this,t),tabOut:(e,t)=>this.options.onTabOutOf(this,t)}),this.options.locale.startsWith(xl().locale)||bl(this.options.locale),this.keybindings=Sl(this.options.keybindings,e=>{"function"==typeof this.options.onError&&this.options.onError({code:"invalid-keybinding",arg:e.join("\n")}),console.log(e.join("\n"))}),this.options.readOnly||this.onBlur();const t=this.model.root.toLatex();xc(this.model,t,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:!0,macros:this.options.macros}),ac(this)}getConfig(e){return yp("$getConfig"),Qc(this.options,e)}getOptions(e){return Qc(this.options,e)}getOption(e){return Qc(this.options,e)}handleEvent(e){switch(e.type){case"focus":this.eventHandlingInProgress||(this.eventHandlingInProgress="focus",this.onFocus(),this.eventHandlingInProgress="");break;case"blur":this.eventHandlingInProgress||(this.eventHandlingInProgress="blur",this.onBlur(),this.eventHandlingInProgress="");break;case"touchstart":case"mousedown":case"pointerdown":!function(e,t){const i=e;let n,r=!1,o=!1,s=!1;if(1!==t.buttons&&0!==t.buttons)return;let a=!1,l=!1;const c=t.touches?t.touches[0].clientX:t.clientX,d=t.touches?t.touches[0].clientY:t.clientY,p=Date.now(),h=setInterval(()=>{a?i.field.scroll({top:0,left:i.field.scrollLeft-16}):l&&i.field.scroll({top:0,left:i.field.scrollLeft+16})},32);function u(e){window.PointerEvent?(Cl(i.field,"pointermove",m),Cl(i.field,"pointerup pointercancel",u),i.field.releasePointerCapture(e.pointerId)):(Cl(i.field,"touchmove",m),Cl(i.field,"touchcancel touchend",u),Cl(window,"mousemove",m),Cl(window,"mouseup blur",u)),r=!1,clearInterval(h),e.preventDefault(),e.stopPropagation()}function m(t){const r=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,h="touch"===t.pointerType?20:5;if(Date.now()<p+500&&Math.abs(c-r)<h&&Math.abs(d-s)<h)return t.preventDefault(),void t.stopPropagation();const u=i.field.getBoundingClientRect();l=r>u.right,a=r<u.left;let m=n;window.PointerEvent?t.isPrimary||(m=dd(i,t.clientX,t.clientY,{bias:0})):t.touches&&2===t.touches.length&&(m=dd(i,t.touches[1].clientX,t.touches[1].clientY,{bias:0}));const f=dd(i,r,s,{bias:r<=c?r===c?0:-1:1});f&&cl(i.model,m,f,{extendToWordBoundary:o})&&ac(e),t.preventDefault(),t.stopPropagation()}ld&&Math.abs(ld.x-c)<5&&Math.abs(ld.y-d)<5&&Date.now()<ld.time+500?(cd+=1,ld.time=p):(ld={x:c,y:d,time:p},cd=1);const f=e.field.getBoundingClientRect();if(c>=f.left&&c<=f.right&&d>=f.top&&d<=f.bottom){e.hasFocus()||(s=!0,e.keyboardDelegate.focus()),e.resetKeystrokeBuffer(),e.smartModeSuppressed=!1;const a=e.field.querySelector(".ML__mathlive").getBoundingClientRect();(n=c>a.right?[{relation:"body",offset:e.model.root.body.length-1}]:dd(e,c,d,{bias:0}))&&(e.element.classList.add("tracking"),t.shiftKey?(cl(e.model,e.model.path,n),(n=va(e.model.path))[n.length-1].offset-=1):Ia(e.model,n,0),s=!0,e.style={},3===t.detail||cd>2?(u(t),3!==t.detail&&3!==cd||nl(e.model)):r||(r=!0,window.PointerEvent?(Ll(i.field,"pointermove",m),Ll(i.field,"pointerup pointercancel",u),i.field.setPointerCapture(t.pointerId)):(Ll(window,"blur",u),t.touches?(Ll(t.target,"touchmove",m),Ll(t.target,"touchcancel touchend",u)):(Ll(window,"mousemove",m),Ll(window,"mouseup",u))),2!==t.detail&&2!==cd||(o=!0,il(e.model))))}else ld=null;s&&ac(e),t.preventDefault()}(this,e);break;case"resize":this.resizeTimer&&window.cancelAnimationFrame(this.resizeTimer),this.resizeTimer=window.requestAnimationFrame(()=>Tl(this)&&this.onResize());break;default:console.warn("Unexpected event type",e.type)}}$revertToOriginalContent(){yp("$revertToOriginalContent"),this.dispose(),this.element.innerHTML=this.options.createHTML(this.originalContent)}dispose(){this.element.innerHTML="$$"+this.getValue()+"$$",delete this.element.mathfield,delete this.accessibleNode,delete this.ariaLiveText,delete this.field,delete this.keyboardDelegate,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,Dl(this.popover),delete this.popover,Dl(this.keystrokeCaption),delete this.keystrokeCaption,this.virtualKeyboard&&(this.virtualKeyboard.dispose(),delete this.virtualKeyboard),Cl(this.element,"pointerdown",this),Cl(this.element,"touchstart:active mousedown",this),Cl(this.element,"focus",this),Cl(this.element,"blur",this),Cl(window,"resize",this),delete this.element,this.stylesheets.forEach(e=>e.release())}resetKeystrokeBuffer(e){(e=null!=e?e:{defer:!1}).defer?this.options.inlineShortcutTimeout&&(this.keystrokeBufferResetTimer=setTimeout(()=>{this.resetKeystrokeBuffer()},this.options.inlineShortcutTimeout)):(this.keystrokeBuffer="",this.keystrokeBufferStates=[],clearTimeout(this.keystrokeBufferResetTimer))}_onSelectionDidChange(){!function(e){const t=ja(e);if(t){const i=e.siblings(),n=e.anchorOffset()+1;for(let e=t.start;e<n;e++)i[e]&&(i[e].isSuggestion=!1)}}(this.model);const e=rl(this.model)?"":ea("math",tl(this.model)).toLatex(!1);this.keyboardDelegate.setValue(e);{const e=this.mode;this.mode=Ha(this.model)||this.options.defaultMode,this.mode!==e&&"function"==typeof this.options.onModeChange&&this.options.onModeChange(this,this.mode),"command"===e&&"command"!==this.mode&&(Pl(this),Vl(this.model))}Kl(this,{deferred:!0}),"function"==typeof this.options.onSelectionDidChange&&this.options.onSelectionDidChange(this)}onFocus(){this.options.readOnly||this.blurred&&(this.blurred=!1,this.keyboardDelegate.focus(),"onfocus"===this.options.virtualKeyboardMode&&zd(this),Kl(this),this.options.onFocus&&this.options.onFocus(this),this.valueOnFocus=this.getValue(),ac(this))}onBlur(){this.blurred||(this.blurred=!0,this.ariaLiveText.textContent="",/onfocus|manual/.test(this.options.virtualKeyboardMode)&&Sd(this),Ic(this,{discard:!0}),ac(this),"function"==typeof this.options.onBlur&&this.options.onBlur(this),"function"==typeof this.options.onCommit&&this.getValue()!==this.valueOnFocus&&this.options.onCommit(this))}onCompositionStart(e){yc(this.model),requestAnimationFrame(()=>{lc(this);const e=$l(this.field);e&&this.keyboardDelegate.moveTo(e.x,e.y)})}onCompositionUpdate(e){!function(e,t){const i=Ra(e);if("composition"===i.type)i.body=t;else{const n=i.caret;i.caret="";const r=new Qs(i.mode,"composition",t);r.caret=n,e.siblings().splice(e.anchorOffset()+1,0,r),e.path[e.path.length-1].offset+=1}}(this.model,e),ac(this)}onCompositionEnd(e){var t;"composition"===Ra(t=this.model).type&&(t.siblings().splice(t.anchorOffset(),1),t.path[t.path.length-1].offset-=1),od(this,e,{simulateKeystroke:!0})}onResize(){this.element.classList.remove("ML__isNarrowWidth","ML__isWideWidth","ML__isExtendedWidth"),window.innerWidth>=1024?this.element.classList.add("ML__isExtendedWidth"):window.innerWidth>=768?this.element.classList.add("ML__isWideWidth"):this.element.classList.add("ML__isNarrowWidth"),Kl(this)}$perform(e){return yp("$perform"),this.executeCommand(e)}executeCommand(e){return function(e,t){var i;if(!t)return!1;let n,r=[],o=!1,s=!1;if(Jr(t)?(n=t[0],r=t.slice(1)):n=t,n=n.replace(/-\w/g,e=>e[1].toUpperCase()),"model"===(null===(i=cc[n])||void 0===i?void 0:i.target)){if(/^(delete|transpose|add)/.test(n)&&"deletePreviousChar"!==n&&e.resetKeystrokeBuffer(),/^(delete|transpose|add)/.test(n)&&"command"!==e.mode&&(e.popUndoStack(),e.snapshot()),cc[n].fn(e.model,...r),/^(delete|transpose|add)/.test(n)&&"command"!==e.mode&&e.snapshot(),/^(delete)/.test(n)&&"command"===e.mode){const t=ls(Rl(e.model));0===t.length?Pl(e):ql(e,t[0].match,t.length>1)}s=!0,o=!0}else{if(!cc[n])throw Error('Unknown command "'+n+'"');s=cc[n].fn(e,...r),o=!0}return rl(e.model)&&!/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(n)||(e.resetKeystrokeBuffer(),e.style={}),s&&ac(e),o}(this,e)}atomToString(e,t){let i="";if("latex"===(t=t||"latex")||"latex-expanded"===t)i=e.toLatex("latex-expanded"===t);else if("mathML"===t)i=oc(e,this.options);else if("spoken"===t)i=Hc(e,this.options);else if("spoken-text"===t){const t=this.options.textToSpeechMarkup;this.options.textToSpeechMarkup="",i=Hc(e,this.options),this.options.textToSpeechMarkup=t}else if("spoken-ssml"===t||"spoken-ssml-withHighlighting"===t){const t=this.options.textToSpeechMarkup;this.options.textToSpeechMarkup="ssml",i=Hc(e,this.options),this.options.textToSpeechMarkup=t}else if("json"===t){console.log("deprecated format. Use MathJSON");const t=pp(e);i=JSON.stringify(t)}else if("json-2"===t){console.log("deprecated format. Use MathJSON");const t=pp(e);i=JSON.stringify(t,null,2)}else"ASCIIMath"===t?i=function e(t){if(!t)return"";if(Jr(t)){let i="";if(0===t.length)return"";if("first"===t[0].type&&(t=t.slice(1)),0===t.length)return"";if("text"===t[0].mode){let n=0;for(i='"';t[n]&&"text"===t[n].mode;)i+=t[n].body,n++;i+='"'+e(t.slice(n))}else if("math"===t[0].mode){let n=0;for(;t[n]&&"math"===t[n].mode;)i+=e(t[n]),n++;i+=e(t.slice(n))}else console.warn("toASCIIMath: Unexpected mode");return i.trim()}if("text"===t.mode)return'"'+t.body+'"';let i="";const n=t.symbol;let r;switch(t.type){case"group":case"root":i=e(t.body);break;case"array":break;case"genfrac":(t.leftDelim||t.rightDelim)&&(i+="."!==t.leftDelim&&t.leftDelim?t.leftDelim:"{:"),t.hasBarLine?(i+="(",i+=e(t.numer),i+=")/(",i+=e(t.denom),i+=")"):(i+="("+e(t.numer)+"),",i+="("+e(t.denom)+")"),(t.leftDelim||t.rightDelim)&&(i+="."!==t.rightDelim&&t.rightDelim?t.rightDelim:"{:");break;case"surd":t.index?i+="root("+e(t.index)+")("+e(t.body)+")":i+="sqrt("+e(t.body)+")";break;case"leftright":i+="."!==t.leftDelim&&t.leftDelim?t.leftDelim:"{:",i+=e(t.body),i+="."!==t.rightDelim&&t.rightDelim?t.rightDelim:":}";break;case"sizeddelim":case"delim":case"overlap":case"overunder":break;case"mord":"\\"===(i=qc[n]||n||("string"==typeof t.body?t.body:""))[0]&&(i=String(i)),(r=n?n.match(/[{]?\\char"([0-9abcdefABCDEF]*)[}]?/):null)?i=String.fromCharCode(parseInt("0x"+r[1])):i.length>0&&"\\"===i.charAt(0)&&(i="string"==typeof t.body?t.body.charAt(0):t.symbol);break;case"mbin":case"mrel":case"textord":case"minner":i=n&&qc[n]?qc[n]:n&&Kc[n]?Kc[n]:t.body;break;case"mopen":case"mclose":i+=t.body;break;case"mpunct":i=Kc[n]||n;break;case"mop":""!==t.body&&(i="",i+="\\operatorname"===n?e(t.body):t.body||n,i+=" ");break;case"mathstyle":case"box":case"spacing":case"enclose":break;case"space":i=" "}if(t.subscript){i+="_";const n=e(t.subscript);n.length>1&&!/^(-)?\d+(\.\d*)?$/.test(n)?i+="("+n+")":i+=n}if(t.superscript){i+="^";const n=e(t.superscript);n.length>1&&!/^(-)?\d+(\.\d*)?$/.test(n)?i+="("+n+")":i+=n}return i}(e):console.warn("Unknown format :",t);return i}get lastPosition(){return this.model.lastPosition}get selection(){return this.model.selection}set selection(e){this.model.selection=e}$text(e){return this.atomToString(this.model.root,e)}getValue(e,t,i){if(void 0===e)return this.atomToString(this.model.root,"latex");let n,r;if("string"==typeof e)return n=e,this.atomToString(this.model.root,n);"number"!=typeof e||"number"!=typeof t&&void 0!==t?Array.isArray(e)?(r=e,n=t):(r=[e],n=t):(r=[{start:e,end:null!=t?t:-1}],n=null!=i?i:"latex");const o=new Mc(this.model.root);return r.map(e=>{let t="";if(!(e=ma(o,e)).collapsed){const i=o.at(e.start).depth;for(let r=e.start+1;r<=e.end;r++)o.at(r).depth===i&&(t+=this.atomToString(o.at(r).atom,n))}return t}).join("")}setValue(e,t){e!==this.getValue()&&(t=null!=t?t:{mode:"math"},xc(this.model,e,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:t.suppressChangeNotifications,macros:this.options.macros}),this.undoManager.snapshot(this.options),ac(this))}find(e){const t=[],i=new Mc(this.model.root),n=i.lastPosition;for(let r=0;r<n;r++){const o=i.at(r).depth;for(let s=r;s<n;s++){let n="";for(let e=r+1;e<=s;e++)i.at(e).depth===o&&(n+=this.atomToString(i.at(e).atom,"latex"),console.log(`value(${r+1}, ${s}) = "${n}" = '${this.getValue(r,s)}'`));n===e&&t.push(ma(i,{start:r,end:s}))}}return t}$selectedText(e){yp("$selectedText");const t=tl(this.model);return t?this.atomToString(ea("math",t),e):""}$selectionIsCollapsed(){return yp("$selectionIsCollapsed"),rl(this.model)}$selectionDepth(){return yp("$selectionDepth"),this.model.path.length}$selectionAtStart(){return yp("$selectionAtStart"),!1}$selectionAtEnd(){return yp("$selectionAtEnd"),!1}$latex(e,t){return yp("$latex"),"string"==typeof e?(e!==this.model.root.toLatex()&&(t=null!=t?t:{mode:"math"},xc(this.model,e,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",mode:"math",suppressChangeNotifications:t.suppressChangeNotifications,macros:this.options.macros}),this.undoManager.snapshot(this.options),ac(this)),e):this.model.root.toLatex()}$el(){return yp("$el"),this.element}scrollIntoView(){var e;this.dirty&&lc(this);let t=null===(e=$l(this.field))||void 0===e?void 0:e.x;const i=this.field.getBoundingClientRect();if(void 0===t){const e=Ol(this.field);null!==e&&(t=e.right+i.left-this.field.scrollLeft)}if(void 0!==t){const e=t-window.scrollX;e<i.left?this.field.scroll({top:0,left:e-i.left+this.field.scrollLeft-20,behavior:"smooth"}):e>i.right&&this.field.scroll({top:0,left:e-i.right+this.field.scrollLeft+20,behavior:"smooth"})}}$insert(e,t){return yp("$insert"),this.insert(e,t)}insert(e,t){if("string"==typeof e&&e.length>0){if((t=null!=t?t:{mode:"math"}).focus&&this.focus(),t.feedback&&(this.options.keypressVibration&&(null===navigator||void 0===navigator?void 0:navigator.vibrate)&&navigator.vibrate(3),this.keypressSound&&(this.keypressSound.load(),this.keypressSound.play())),"\\\\"===e)mc(this.model);else if("&"===e)fc(this.model);else{const i=this.style;xc(this.model,e,{mode:this.mode,style:Va(this.model),...t}),t.resetStyle&&(this.style=i)}return this.undoManager.snapshot(this.options),ac(this),!0}return!1}switchMode(e,t="",i=""){this.mode!==e&&(this.resetKeystrokeBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(e),t&&this.insert(t,{format:"latex",mode:{math:"text",text:"math"}[e]}),Il(this.model,!1),"command"===e?(ha(this.model),Pl(this),this.suggestionIndex=0,this.virtualKeyboardVisible&&Md(this,"lower-command"),xc(this.model,"",{mode:"math"})):this.mode=e,i&&this.insert(i,{format:"latex",mode:e}),"function"==typeof this.options.onModeChange&&this.options.onModeChange(this,this.mode),ac(this))}$hasFocus(){return yp("$hasFocus"),this.hasFocus()}hasFocus(){return document.hasFocus()&&this.keyboardDelegate.hasFocus()}focus(){this.hasFocus()||(this.keyboardDelegate.focus(),this.model.announce("line"))}blur(){this.hasFocus()&&this.keyboardDelegate.blur()}$focus(){return yp("$focus"),this.focus()}$blur(){return yp("$blur"),this.blur()}$select(){nl(this.model)}select(){nl(this.model)}$clearSelection(){yp("$clearSelection"),yc(this.model)}applyStyle(e){vc(this.model,e)}$applyStyle(e){vc(this.model,e)}$keystroke(e,t){return yp("$keystroke"),rd(this,e,t)}$typedText(e){yp("$typedText"),od(this,e)}getCaretPoint(){const e=$l(this.field);return e?{x:e.x,y:e.y}:null}setCaretPoint(e,t){const i=this.model.clone(),n=dd(this,e,t,{bias:0}),r=Ia(this.model,n,0);return this.model.announce("move",i),ac(this),r}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){this.undoManager.snapshot({...this.options,onUndoStateDidChange:(e,t)=>{wd(this),this.options.onUndoStateDidChange(e,t)}})}snapshotAndCoalesce(){this.undoManager.snapshotAndCoalesce({...this.options,onUndoStateDidChange:(e,t)=>{wd(this),this.options.onUndoStateDidChange(e,t)}})}getUndoRecord(){return this.undoManager.save()}restoreToUndoRecord(e){this.undoManager.restore(e,{...this.options,suppressChangeNotifications:!0})}undo(){return this.undoManager.undo({...this.options,onUndoStateDidChange:(e,t)=>{wd(this),this.options.onUndoStateDidChange(e,t)}})}redo(){return this.undoManager.redo({...this.options,onUndoStateDidChange:(e,t)=>{wd(this),this.options.onUndoStateDidChange(e,t)}})}}function yp(e){console.warn(`Method "${e}" is deprecated`)}const vp=1200,bp=3e3,xp=4e3;function kp(e,t,i=3e3,n="$0"){t.forEach(t=>{Po[t]&&(Po[t].frequency=i,Po[t].category=e,Po[t].template=n.replace(/\$0/g,t)),Io[t]&&(Io[t]={...Io[t],frequency:i,category:e,template:n.replace(/\$0/g,t)})})}function _p(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function wp(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}var Mp;kp("Trigonometry",["\\cos","\\sin","\\tan"],xp),kp("Trigonometry",["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),kp("Functions",["\\ln","\\log","\\exp","\\lim"],xp),kp("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],bp),kp("Functions",["\\hom"],vp),kp("Decoration",["\\rule"],200,"$0{2em}{1em}"),kp("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),kp("Decoration",["\\overline","\\underline"],bp,"$0{\\placeholder{}}"),kp("Decoration",["\\enclose"],vp,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),kp("Decoration",["\\fcolorbox"],vp,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),kp("Decoration",["\\colorbox"],vp,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),kp("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],vp,"$0{\\placeholder{}}"),kp("Decoration",["\\bbox"],vp,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),kp("Styling",["\\mathbb"],xp,"$0{Don Knuth}"),kp("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],bp,"$0{Don Knuth}"),kp("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId"],vp,"{$0 Don Knuth}"),kp("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],vp,"\\text{$0 Don Knuth}"),kp("Styling",["\\class","\\cssId"],vp,"$0{testIdentifier}{Don Knuth}"),kp("Styling",["\\fontseries"],vp,"\\text{$0{b}Don Knuth}"),kp("Styling",["\\fontfamily"],vp,"\\text{$0{cmtt}Don Knuth}"),kp("Styling",["\\fontshape"],vp,"\\text{$0{sc}Don Knuth}"),kp("Styling",["\\selectfont"],vp,"\\text{$0}"),kp("Styling",["\\emph"],vp,"Don$0{Knuth}"),kp("Styling",["\\em"],vp,"Don{$0 Knuth}"),kp("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],vp,"x=$0{arg}=0"),kp("Layout",["\\middle"],vp,"\\left\\{x$0|x>0\\right\\}"),kp("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],vp,"$0{arg}{x=0}"),kp("Layout",["\\rlap","\\mathrlap"],vp,"$0{/}0"),kp("Layout",["\\llap","\\mathllap"],vp,"o$0{/}"),kp("Fractions",["\\frac"],xp,"$0{\\placeholder{}}{\\placeholder{}}"),kp("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],vp,"$0{\\placeholder{}}{\\placeholder{}}"),kp("Fractions",["\\over","\\atop","\\choose"],vp,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),kp("Fractions",["\\overwithdelims","\\atopwithdelims"],vp,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),kp("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],xp),kp("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],bp),kp("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],vp),kp("Accents",["\\vec"],xp),kp("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],bp,"$0{\\placeholder{}}"),kp("Accents",["\\^","\\`","\\'"],vp,"$0{e}"),kp("Accents",["\\c"],vp,"$0{c}"),kp("Accents",["\\~"],vp,"$0{n}"),kp("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],vp,"$0{\\placeholder{}}"),kp("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],bp,"$0{ABC}"),kp("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],bp,"$0{ABC}"),kp("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],vp,"$0{x=0}"),kp("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],vp,"$0($0)"),kp("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],vp,"$0("),kp("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],vp,"$0)"),kp("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],vp,"$0|"),kp("Letterlike Symbols",["\\nabla","\\partial","\\doubleStruckCapitalN","\\N","\\doubleStruckCapitalR","\\R","\\doubleStruckCapitalQ","\\Q","\\doubleStruckCapitalC","\\C","\\doubleStruckCapitalZ","\\Z","\\exponentialE","\\forall","\\exists","\\nexists","\\$","\\%","\\And","\\degree"],xp),kp("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im"],bp),kp("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],vp),kp("Crosses",["\\dagger","\\dag"],xp),kp("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],vp),kp("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],vp),kp("Various",["\\unicode"],vp,'$0{"2B1A}'),kp("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],xp),kp("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],bp),kp("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],vp),kp("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),kp("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],vp),kp("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],vp,"$0[below]{above}=0"),kp("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],vp),kp("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],vp),kp("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],xp),kp("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],bp),kp("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],vp),kp("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],xp),kp("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],bp),kp("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],vp),kp("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],xp),kp("Logic",["\\models","\\vdash"],bp),kp("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],vp),kp("Operators",["+","-","*","\\cdot"],xp),kp("Operators",["\\sqrt"],xp,"$0{\\placeholder{}}"),kp("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],bp),kp("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],vp),kp("Logic",["\\wedge","\\vee","\\neg"],xp),kp("Logic",["\\lnot"],bp),kp("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],vp),kp("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],bp),kp("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],xp),kp("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],bp),kp("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],vp),kp("Spacing",["\\space, \\quad","\\qquad"],bp,'\\unicode{"203A}$0\\unicode{"2039}'),kp("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],vp,'\\unicode{"203A}$0\\unicode{"2039}'),kp("Spacing",["\\hspace","\\hspace*"],vp,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),kp("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],bp),kp("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],vp),kp("Boxes",["\\square","\\Box"],bp),kp("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],vp),kp("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],bp),kp("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],vp),kp("Triangles",["\\triangle","\\triangleq"],bp),kp("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],vp),kp("Shapes",["\\ast","\\star"],bp),kp("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],vp);const zp=document.createElement("template");zp.innerHTML='<style>\n:host {\n    display: block;\n}\n:host([hidden]) {\n    display: none;\n}\n:host([disabled]) {\n    opacity:  .5;\n}\n:host(:focus), :host(:focus-within) {\n    outline: Highlight auto 1px;    /* For Firefox */\n    outline: -webkit-focus-ring-color auto 1px;\n}\n</style>\n<div></div><slot style="display:none"></slot>';const Sp=new WeakMap;class Lp extends HTMLElement{constructor(e){var t;super(),Mp.set(this,void 0),this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(zp.content.cloneNode(!0));const i=this.shadowRoot.querySelector("slot:not([name])");this.shadowRoot.host.addEventListener("focus",e=>this.focus());try{const t=i.assignedElements().filter(e=>"application/json"!==e.type).map(e=>e.textContent).join("");t&&this.setOptions(JSON.parse(t))}catch(e){console.log(e)}e&&this.setOptions(e),this.hasAttribute("value")?this.value=this.getAttribute("value"):this.value=null!==(t=null==i?void 0:i.assignedNodes().map(e=>3===e.nodeType?e.textContent:"").join("").trim())&&void 0!==t?t:"",i.addEventListener("slotchange",e=>{if(e.target!==i)return;const t=i.assignedNodes().map(e=>3===e.nodeType?e.textContent:"").join("").trim();_p(this,Mp)?_p(this,Mp).setValue(t,{insertionMode:"replaceAll"}):this.value=t})}static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","horizontal-spacing-scale":"number","ignore-spacebar-in-math-mode":"boolean","inline-shortcut-timeout":"number","keypress-vibration":"boolean","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"boolean","smart-fence":"boolean","smart-mode":"boolean","smart-superscript":"boolean","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string"}}static get observedAttributes(){return[...Object.keys(Lp.optionsAttributes),"disabled"]}get mode(){var e;return null===(e=_p(this,Mp))||void 0===e?void 0:e.mode}set mode(e){_p(this,Mp)&&(_p(this,Mp).mode=e)}getOptions(e){return _p(this,Mp)?Qc(_p(this,Mp).options,e):Sp.has(this)?Qc(Yc(ed(),Sp.get(this).options),e):null}getOption(e){return this.getOptions([e])}setOptions(e){_p(this,Mp)?_p(this,Mp).setOptions(e):Sp.has(this)?Sp.set(this,{value:Sp.get(this).value,selection:[{start:0,end:-1}],options:{...Sp.get(this).options,...e}}):Sp.set(this,{value:"",selection:[{start:0}],options:e}),function(e){const t=ed(),i=e.getOptions();Object.keys(Lp.optionsAttributes).forEach(n=>{const r=Cp(n);t[r]!==i[r]&&("boolean"===Lp.optionsAttributes[n]?i[r]?e.setAttribute(n,""):e.removeAttribute(n):e.setAttribute(n,i[r].toString()))})}(this)}executeCommand(e){var t,i;return null!==(i=null===(t=_p(this,Mp))||void 0===t?void 0:t.executeCommand(e))&&void 0!==i&&i}getValue(e,t,i){var n,r;let o,s;if(void 0===e?(s="latex",o=[{start:0,end:-1}]):"string"==typeof e?(s=e,o=[{start:0,end:-1}]):"number"==typeof e&&"number"==typeof t?(o=[{start:e,end:null!=t?t:-1}],s=null!=i?i:"latex"):Array.isArray(e)?(o=e,s=null!==(n=t)&&void 0!==n?n:"latex"):(o=[e],s=null!==(r=t)&&void 0!==r?r:"latex"),_p(this,Mp))return _p(this,Mp).getValue(o,s);if(Sp.has(this)){const e=1===o.length&&0===o[0].start&&-1===o[0].end;if("latex"===s&&e)return Sp.get(this).value}}setValue(e,t){_p(this,Mp)?_p(this,Mp).setValue(e,t):Sp.has(this)?Sp.set(this,{value:e,selection:[{start:0,end:-1,direction:"forward"}],options:Sp.get(this).options}):Sp.set(this,{value:e,selection:[{start:0,end:-1,direction:"forward"}],options:Ap(this)})}hasFocus(){var e,t;return null!==(t=null===(e=_p(this,Mp))||void 0===e?void 0:e.hasFocus())&&void 0!==t&&t}focus(){var e;null===(e=_p(this,Mp))||void 0===e||e.focus()}blur(){var e;null===(e=_p(this,Mp))||void 0===e||e.blur()}select(){var e;null===(e=_p(this,Mp))||void 0===e||e.select()}insert(e,t){var i,n;return null!==(n=null===(i=_p(this,Mp))||void 0===i?void 0:i.insert(e,t))&&void 0!==n&&n}applyStyle(e){var t;return null===(t=_p(this,Mp))||void 0===t?void 0:t.applyStyle(e)}get caretPoint(){var e,t;return null!==(t=null===(e=_p(this,Mp))||void 0===e?void 0:e.getCaretPoint())&&void 0!==t?t:null}set caretPoint(e){var t;null===(t=_p(this,Mp))||void 0===t||t.setCaretPoint(e.x,e.y)}setCaretPoint(e,t){var i,n;return null!==(n=null===(i=_p(this,Mp))||void 0===i?void 0:i.setCaretPoint(e,t))&&void 0!==n&&n}find(e){var t,i;return null!==(i=null===(t=_p(this,Mp))||void 0===t?void 0:t.find(e))&&void 0!==i?i:[]}connectedCallback(){if(this.hasAttribute("role")||this.setAttribute("role","textbox"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),wp(this,Mp,new gp(this.shadowRoot.querySelector(":host > div"),{...Ap(this),...Sp.has(this)?Sp.get(this).options:{},onBlur:()=>{this.dispatchEvent(new Event("blur",{cancelable:!1,bubbles:!1}))},onContentDidChange:()=>{this.dispatchEvent(new Event("input",{cancelable:!1,bubbles:!0}))},onError:e=>{this.dispatchEvent(new CustomEvent("math-error",{detail:{code:e.code,arg:e.arg,latex:e.latex,before:e.before,after:e.after},cancelable:!1,bubbles:!0}))},onFocus:()=>{this.dispatchEvent(new Event("focus",{cancelable:!1,bubbles:!1}))},onKeystroke:(e,t,i)=>this.dispatchEvent(new CustomEvent("keystroke",{detail:{keystroke:t,event:i},cancelable:!0,bubbles:!0})),onModeChange:(e,t)=>{this.dispatchEvent(new Event("mode-change",{cancelable:!1,bubbles:!0}))},onCommit:e=>{this.dispatchEvent(new Event("change",{cancelable:!1,bubbles:!0}))},onMoveOutOf:(e,t)=>this.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:t},cancelable:!0,bubbles:!0})),onTabOutOf:(e,t)=>this.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:t},cancelable:!0,bubbles:!0})),onReadAloudStatus:()=>{this.dispatchEvent(new Event("read-aloud-status-change",{cancelable:!1,bubbles:!0}))},onSelectionDidChange:()=>{this.dispatchEvent(new Event("selection-change",{cancelable:!1,bubbles:!0}))},onUndoStateDidChange:()=>{this.dispatchEvent(new Event("undo-state-change",{cancelable:!1,bubbles:!0}))},onVirtualKeyboardToggle:(e,t,i)=>{this.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1}))}})),Sp.has(this)){const e=_p(this,Mp).model.suppressChangeNotifications;_p(this,Mp).model.suppressChangeNotifications=!0,_p(this,Mp).setValue(Sp.get(this).value),_p(this,Mp).selection=Sp.get(this).selection,Sp.delete(this),_p(this,Mp).model.suppressChangeNotifications=e}this.upgradeProperty("disabled"),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0}))}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0})),!_p(this,Mp))return;const e={};Object.keys(Lp.optionsAttributes).forEach(t=>{e[Cp(t)]=_p(this,Mp).getOption(Cp(t))}),Sp.set(this,{value:_p(this,Mp).getValue(),selection:_p(this,Mp).selection,options:e}),_p(this,Mp).dispose(),wp(this,Mp,null)}upgradeProperty(e){if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this[e]=t}}attributeChangedCallback(e,t,i){if(t===i)return;const n=null!==i;switch(e){case"disabled":this.disabled=n}}set disabled(e){const t=Boolean(e);t?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",t?"true":"false"),this.setOptions({readOnly:t})}get disabled(){return this.hasAttribute("disabled")}set value(e){this.setValue(e)}get value(){return this.getValue()}get selection(){return _p(this,Mp)?_p(this,Mp).selection:Sp.has(this)?Sp.get(this).selection:[{start:0,direction:"forward"}]}set selection(e){_p(this,Mp)&&(_p(this,Mp).selection=e),Sp.has(this)?Sp.set(this,{value:Sp.get(this).value,selection:e,options:Sp.get(this).options}):Sp.set(this,{value:"",selection:e,options:Ap(this)})}get position(){var e;const t=this.selection;return"backward"===t[t.length-1].direction?t[t.length-1].start:null!==(e=t[0].end)&&void 0!==e?e:t[0].start}set position(e){this.selection=[{start:e}]}get lastPosition(){var e,t;return null!==(t=null===(e=_p(this,Mp))||void 0===e?void 0:e.lastPosition)&&void 0!==t?t:-1}}function Cp(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase())}function Ap(e){const t={},i=Lp.optionsAttributes;return Object.keys(i).forEach(n=>{if(e.hasAttribute(n)){const r=e.getAttribute(n);if("boolean"===i[n]){const e=r.toLowerCase();t[Cp(n)]="true"===e||"yes"===e||"on"===e}else"number"===i[n]?t[Cp(n)]=parseFloat(r):t[Cp(n)]=r}}),t}function Dp(e,t){var i;(t=null!=t?t:{}).mathstyle=t.mathstyle||"displaystyle",t.letterShapeStyle=t.letterShapeStyle||"auto",t.macros={...Vo,...null!==(i=t.macros)&&void 0!==i?i:{}};const n=sa(e,"math",null,t.macros,!1,t.onError);let r=Ys({mathstyle:mo[t.mathstyle],letterShapeStyle:t.letterShapeStyle},n);return r=function e(t){if(!t||0===t.length)return[];t[0].children=e(t[0].children);const i=[t[0]];for(let n=1;n<t.length;n++)i[i.length-1].tryCoalesceWith(t[n])||(t[n].children=e(t[n].children),i.push(t[n]));return i}(r),"span"===t.format?r:No($o(r,"ML__base"),"ML__mathlive").toMarkup()}Mp=new WeakMap,window.customElements.get("math-field")||(window.MathfieldElement=Lp,window.customElements.define("math-field",Lp));var Tp=new yt("interface");var $p=function(){function e(t,i,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.interface=Tp.get(i.state).interface,this.node=t,this.outerView=i,this.getPos=n,this.cursorSide="start",this.latex=t.textContent.trim(),this.dom=document.createElement("div"),this.dom.classList.add("mathlive-node"),this.innerView=document.createElement("span"),this.innerView.addEventListener("click",function(){return r.onClick()}),this.latex&&(this.innerView.innerHTML=Dp(this.latex)),this.dom.appendChild(this.innerView)}var t;return(t=[{key:"destroy",value:function(){this.dom.remove()}},{key:"onClick",value:function(){this.outerView.editable&&(this.interface.setNode(this.node),this.interface.setPos(this.getPos()),this.interface.toggleMath(!0))}},{key:"update",value:function(e){if(!e.sameMarkup(this.node))return!1;var t=e.textContent.trim();return this.innerView.innerHTML=Dp(t),this.node=e,!0}},{key:"updateCursorPos",value:function(e){var t=this.getPos(),i=this.node.nodeSize;e.selection.from<t+i&&t<e.selection.to||(this.cursorSide=t<e.selection.from?"end":"start")}},{key:"selectNode",value:function(){this.dom.classList.add("ProseMirror-selectednode")}},{key:"deselectNode",value:function(){this.dom.classList.remove("ProseMirror-selectednode")}},{key:"stopEvent",value:function(e){return void 0!==this.innerView&&void 0!==e.target&&this.innerView.contains(e.target)}},{key:"ignoreMutation",value:function(){return!0}}])&&function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();function Op(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Np,Ep,qp=new yt("mathlive"),Kp=new mt({key:qp,state:{init:function(e,t){return{macros:{},activeNodeViews:[]}},apply:function(e,t,i,n){var r=qp.getState(i);if(r){var o,s=function(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Op(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Op(e,t):void 0}}(e))){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){a=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw o}}}}(r.activeNodeViews);try{for(s.s();!(o=s.n()).done;)o.value.updateCursorPos(n)}catch(e){s.e(e)}finally{s.f()}}return t}},props:{nodeViews:{mathlive:function(e,t,i){var n=qp.getState(t.state);if(!n)throw new Error("no math plugin!");var r=n.activeNodeViews,o=new $p(e,t,i);return r.push(o),o}}}}),Bp=[(Ep={depth:Ep&&Ep.depth||100,newGroupDelay:Ep&&Ep.newGroupDelay||500},new mt({key:Xr,state:{init:function(){return new Rr(Br.empty,Br.empty,null,0)},apply:function(e,t,i){return function(e,t,i,n){var r,o=i.getMeta(Xr);if(o)return o.historyState;i.getMeta(Zr)&&(e=new Rr(e.done,e.undone,null,0));var s=i.getMeta("appendedTransaction");if(0==i.steps.length)return e;if(s&&s.getMeta(Xr))return s.getMeta(Xr).redo?new Rr(e.done.addTransform(i,null,n,Ur(t)),e.undone,Fr(i.mapping.maps[i.steps.length-1]),e.prevTime):new Rr(e.done,e.undone.addTransform(i,null,n,Ur(t)),null,e.prevTime);if(!1===i.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=i.getMeta("rebased"))?new Rr(e.done.rebased(i,r),e.undone.rebased(i,r),Vr(e.prevRanges,i.mapping),e.prevTime):new Rr(e.done.addMaps(i.mapping.maps),e.undone.addMaps(i.mapping.maps),Vr(e.prevRanges,i.mapping),e.prevTime);var a=0==e.prevTime||!s&&(e.prevTime<(i.time||0)-n.newGroupDelay||!function(e,t){if(!t)return!1;if(!e.docChanged)return!0;var i=!1;return e.mapping.maps[0].forEach(function(e,n){for(var r=0;r<t.length;r+=2)e<=t[r+1]&&n>=t[r]&&(i=!0)}),i}(i,e.prevRanges)),l=s?Vr(e.prevRanges,i.mapping):Fr(i.mapping.maps[i.steps.length-1]);return new Rr(e.done.addTransform(i,a?t.selection.getBookmark():null,n,Ur(t)),Br.empty,l,i.time)}(t,i,e,Ep)}},config:Ep})),Kp,(Np={"Ctrl-z":function(e,t){var i=Xr.getState(e);return!(!i||0==i.done.eventCount||(t&&Wr(i,e,t,!1),0))},"Ctrl-y":function(e,t){var i=Xr.getState(e);return!(!i||0==i.undone.eventCount||(t&&Wr(i,e,t,!0),0))},Enter:fr(pr,hr,ur),"Ctrl-Enter":fr(pr,ur),Backspace:fr(ir,function(e,t){var i=e.selection.$from,n=i.nodeBefore;if(!n)return!1;if("mathlive"===n.type.name){var r=i.index(i.depth),o=e.doc.resolve(i.posAtIndex(r-1));return t&&t(e.tr.setSelection(new et(o))),!0}return!1},nr,or),Delete:fr(ir,ar,lr)},new mt({props:{handleKeyDown:function(e){var t=function(e){var t=Object.create(null);for(var i in e)t[$r(i)]=e[i];return t}(Np);return function(e,i){var n,r=function(e){var t=!(Cr&&(e.ctrlKey||e.altKey||e.metaKey)||(Mr||Lr)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?_r:kr)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(i),o=1==r.length&&" "!=r,s=t[Or(r,i,!o)];if(s&&s(e.state,e.dispatch,e))return!0;if(o&&(i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(n=kr[i.keyCode])&&n!=r){var a=t[Or(n,i,!0)];if(a&&a(e.state,e.dispatch,e))return!0}else if(o&&i.shiftKey){var l=t[Or(r,i,!0)];if(l&&l(e.state,e.dispatch,e))return!0}return!1}}()}}))];function Pp(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Rp=function(e){var t=e.editor,i=e.showModal,o=e.selectedNode,s=e.pos,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),2!==i.length);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(e)||function(e,t){if(e){if("string"==typeof e)return Pp(e,2);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Pp(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,n.useState)(o&&o.textContent||"")),l=a[0],c=a[1],d=function(){i(!1)};return(0,n.useEffect)(function(){var e=new Lp({virtualKeyboardMode:"onfocus"});e.addEventListener("input",function(e){return function(e){c(e.currentTarget.value)}(e)}),l&&e.setValue(l),document.getElementById("eWorkspace-keyboard").appendChild(e),e.focus()},[]),r().createElement(r().Fragment,null,r().createElement("div",{className:"eWorkspace-modal-backdrop"}),r().createElement("div",{id:"eWorkspace-modal"},r().createElement("div",{className:"eWorkspace-modal-content"},r().createElement("div",{className:"eWorkspace-modal-top"},r().createElement("div",{className:"eWorkspace-modal-title"},"Equation Editor"),r().createElement("div",null,r().createElement("i",{className:"fas fa-question-circle"}))),r().createElement("div",{id:"eWorkspace-keyboard"}),r().createElement("div",{className:"eWorkspace-modal-actions"},r().createElement("button",{className:"eWorkspace-btn eWorkspace-btn-default",onClick:function(){d()}},"Cancel"),r().createElement("button",{className:"eWorkspace-btn eWorkspace-btn-primary",disabled:!l,onClick:function(){(function(e,t,i){var n=tr.nodes.mathlive;return function(r,o){var s=r.selection.$from,a=s.index();return!!s.parent.canReplaceWith(a,a,n)&&(o&&o(i?t?r.tr.replaceWith(t,t+e.nodeSize,n.createChecked({},tr.text(i))):r.tr.replaceSelectionWith(n.createChecked({},tr.text(i))):r.tr.replaceSelectionWith(n.create({}))),!0)}})(o,s,l)(t.state,function(e){return t.dispatch(e)}),d()}},"Insert")))))},Ip=i(379),Fp=i.n(Ip),Vp=i(425),Wp=(Fp()(Vp.Z,{insert:"head",singleton:!1}),Vp.Z.locals,i(653)),jp=(Fp()(Wp.Z,{insert:"head",singleton:!1}),Wp.Z.locals,i(920));function Hp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Up(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Up(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Up(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Fp()(jp.Z,{insert:"head",singleton:!1}),jp.Z.locals;var Xp=function(e){var t=e.document,i=e.canEdit,o=void 0===i||i,s=e.setText,a=Hp((0,n.useState)(!1),2),l=a[0],c=a[1],d=(0,n.useRef)(null),p=(0,n.useRef)(null),h=Hp((0,n.useState)(null),2),u=h[0],m=h[1],f=Hp((0,n.useState)(null),2),g=f[0],y=f[1];return(0,n.useEffect)(function(){var e,i,n=pt.create({doc:t?tr.nodeFromJSON(JSON.parse(t)):null,schema:tr,plugins:Bp.concat((e={toggleMath:c,setNode:m,setPos:y},i=new mt({key:Tp}),i.interface=e,i))});return p.current=new Hn(d.current,{state:n,dispatchTransaction:function(e){var t=p.current.state.applyTransaction(e),i=t.state,n=t.transactions;p.current.updateState(i),n.some(function(e){return e.docChanged})&&s(JSON.stringify(i.doc))},editable:function(){return o}}),function(){p&&p.current&&p.current.destroy()}},[]),r().createElement(r().Fragment,null,l&&r().createElement(Rp,{editor:p.current,showModal:c,selectedNode:u,pos:g}),r().createElement("div",{className:o?"ProseMirror-container":void 0},o&&r().createElement("div",{className:"ProseMirror-menu"},r().createElement("div",{className:"ProseMirror-menu-actions-left"}),r().createElement("div",{className:"ProseMirror-menu-actions-right"},r().createElement(er,{onClick:function(){c(function(e){return!e}),m(null),y(null)},style:{cursor:"pointer",marginRight:"12px",width:"18px"}}))),r().createElement("div",{id:"ProseMirror-editor",ref:d})))}},653:function(e,t,i){var n=i(645),r=i.n(n),o=i(667),s=i.n(o),a=i(264),l=i(453),c=i(996),d=i(450),p=i(143),h=i(206),u=i(410),m=i(146),f=i(259),g=i(686),y=i(713),v=i(374),b=i(872),x=i(977),k=i(527),_=i(552),w=i(359),M=i(130),z=i(324),S=i(772),L=i(918),C=i(888),A=i(533),D=i(163),T=i(19),$=i(492),O=i(529),N=i(167),E=i(252),q=i(46),K=i(286),B=i(605),P=i(850),R=i(302),I=i(173),F=i(500),V=i(14),W=i(745),j=i(356),H=i(522),U=r()(function(e){return e[1]}),X=s()(a.Z),Z=s()(l.Z),J=s()(c.Z),G=s()(d.Z),Y=s()(p.Z),Q=s()(h.Z),ee=s()(u.Z),te=s()(m.Z),ie=s()(f.Z),ne=s()(g.Z),re=s()(y.Z),oe=s()(v.Z),se=s()(b.Z),ae=s()(x.Z),le=s()(k.Z),ce=s()(_.Z),de=s()(w.Z),pe=s()(M.Z),he=s()(z.Z),ue=s()(S.Z),me=s()(L.Z),fe=s()(C.Z),ge=s()(A.Z),ye=s()(D.Z),ve=s()(T.Z),be=s()($.Z),xe=s()(O.Z),ke=s()(N.Z),_e=s()(E.Z),we=s()(q.Z),Me=s()(K.Z),ze=s()(B.Z),Se=s()(P.Z),Le=s()(R.Z),Ce=s()(I.Z),Ae=s()(F.Z),De=s()(V.Z),Te=s()(W.Z),$e=s()(j.Z),Oe=s()(H.Z);U.push([e.id,"/* 0.59.0 */@font-face{font-family:KaTeX_AMS;src:url("+X+') format("woff2"),url('+Z+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Caligraphic;src:url('+J+') format("woff2"),url('+G+') format("woff");font-weight:700;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Caligraphic;src:url('+Y+') format("woff2"),url('+Q+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Fraktur;src:url('+ee+') format("woff2"),url('+te+') format("woff");font-weight:700;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Fraktur;src:url('+ie+') format("woff2"),url('+ne+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Main;src:url('+re+') format("woff2"),url('+oe+') format("woff");font-weight:700;font-style:italic;font-display:"swap"}@font-face{font-family:KaTeX_Main;src:url('+se+') format("woff2"),url('+ae+') format("woff");font-weight:700;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Main;src:url('+le+') format("woff2"),url('+ce+') format("woff");font-weight:400;font-style:italic;font-display:"swap"}@font-face{font-family:KaTeX_Main;src:url('+de+') format("woff2"),url('+pe+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Math;src:url('+he+') format("woff2"),url('+ue+') format("woff");font-weight:700;font-style:italic;font-display:"swap"}@font-face{font-family:KaTeX_Math;src:url('+me+') format("woff2"),url('+fe+') format("woff");font-weight:400;font-style:italic;font-display:"swap"}@font-face{font-family:"KaTeX_SansSerif";src:url('+ge+') format("woff2"),url('+ye+') format("woff");font-weight:700;font-style:normal;font-display:"swap"}@font-face{font-family:"KaTeX_SansSerif";src:url('+ve+') format("woff2"),url('+be+') format("woff");font-weight:400;font-style:italic;font-display:"swap"}@font-face{font-family:"KaTeX_SansSerif";src:url('+xe+') format("woff2"),url('+ke+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Script;src:url('+_e+') format("woff2"),url('+we+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Size1;src:url('+Me+') format("woff2"),url('+ze+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Size2;src:url('+Se+') format("woff2"),url('+Le+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Size3;src:url('+Ce+') format("woff2"),url('+Ae+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Size4;src:url('+De+') format("woff2"),url('+Te+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}@font-face{font-family:KaTeX_Typewriter;src:url('+$e+') format("woff2"),url('+Oe+') format("woff");font-weight:400;font-style:normal;font-display:"swap"}:root{--ML__static-fonts:true}.ML__sr-only{position:absolute;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:700}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:400}.ML__mathbfit{font-family:KaTeX_Math;font-weight:700;font-style:italic}.ML__ams,.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_el,.ML__series_ul{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px #000;text-stroke:1px #000;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__mathlive{display:inline-block;line-height:0;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main;font-style:normal;font-size-adjust:none;letter-spacing:normal;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:-webkit-min-content;width:-moz-min-content;width:min-content;transform:translateZ(0)}.ML__mathlive .reset-textstyle.scriptstyle{font-size:.7em}.ML__mathlive .reset-textstyle.scriptscriptstyle{font-size:.5em}.ML__mathlive .reset-scriptstyle.textstyle{font-size:1.42857em}.ML__mathlive .reset-scriptstyle.scriptscriptstyle{font-size:.71429em}.ML__mathlive .reset-scriptscriptstyle.textstyle{font-size:2em}.ML__mathlive .reset-scriptscriptstyle.scriptstyle{font-size:1.4em}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .vlist{display:inline-block}.ML__mathlive .vlist>span{display:block;height:0;position:relative;line-height:0}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .mfrac>span{text-align:center}.ML__mathlive .mfrac .frac-line{width:100%}.ML__mathlive .mfrac .frac-line:after{content:"";display:block;margin-top:-.04em;min-height:.04em;background:currentColor;box-sizing:content-box;transform:translate(0)}.ML__mathlive .rspace.negativethinspace{margin-right:-.16667em}.ML__mathlive .rspace.thinspace{margin-right:.16667em}.ML__mathlive .rspace.negativemediumspace{margin-right:-.22222em}.ML__mathlive .rspace.mediumspace{margin-right:.22222em}.ML__mathlive .rspace.thickspace{margin-right:.27778em}.ML__mathlive .rspace.sixmuspace{margin-right:.333333em}.ML__mathlive .rspace.eightmuspace{margin-right:.444444em}.ML__mathlive .rspace.enspace{margin-right:.5em}.ML__mathlive .rspace.twelvemuspace{margin-right:.666667em}.ML__mathlive .rspace.quad{margin-right:1em}.ML__mathlive .rspace.qquad{margin-right:2em}.ML__mathlive .mspace{display:inline-block}.ML__mathlive .mspace.negativethinspace{margin-left:-.16667em}.ML__mathlive .mspace.thinspace{width:.16667em}.ML__mathlive .mspace.negativemediumspace{margin-left:-.22222em}.ML__mathlive .mspace.mediumspace{width:.22222em}.ML__mathlive .mspace.thickspace{width:.27778em}.ML__mathlive .mspace.sixmuspace{width:.333333em}.ML__mathlive .mspace.eightmuspace{width:.444444em}.ML__mathlive .mspace.enspace{width:.5em}.ML__mathlive .mspace.twelvemuspace{width:.666667em}.ML__mathlive .mspace.quad{width:1em}.ML__mathlive .mspace.qquad{width:2em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:0 solid;position:relative}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:"";display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:"";display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:after,.ML__mathlive .stretchy:before{content:""}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{left:0}.ML__mathlive .slice-1-of-2,.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{right:0}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .sqrt{display:inline-block}.ML__mathlive .sqrt>.sqrt-sign{font-family:KaTeX_Main;position:relative}.ML__mathlive .sqrt .sqrt-line{height:.04em;width:100%}.ML__mathlive .sqrt .sqrt-line:before{content:"";display:block;margin-top:-.04em;min-height:.04em;background:currentColor}.ML__mathlive .sqrt .sqrt-line:after{border-bottom-width:1px;content:" ";display:block;margin-top:-.1em;transform:translate(0)}.ML__mathlive .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.ML__mathlive .fontsize-ensurer,.ML__mathlive .sizing{display:inline-block}.ML__mathlive .fontsize-ensurer.reset-size1.size1,.ML__mathlive .sizing.reset-size1.size1{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size1.size2,.ML__mathlive .sizing.reset-size1.size2{font-size:1.4em}.ML__mathlive .fontsize-ensurer.reset-size1.size3,.ML__mathlive .sizing.reset-size1.size3{font-size:1.6em}.ML__mathlive .fontsize-ensurer.reset-size1.size4,.ML__mathlive .sizing.reset-size1.size4{font-size:1.8em}.ML__mathlive .fontsize-ensurer.reset-size1.size5,.ML__mathlive .sizing.reset-size1.size5{font-size:2em}.ML__mathlive .fontsize-ensurer.reset-size1.size6,.ML__mathlive .sizing.reset-size1.size6{font-size:2.4em}.ML__mathlive .fontsize-ensurer.reset-size1.size7,.ML__mathlive .sizing.reset-size1.size7{font-size:2.88em}.ML__mathlive .fontsize-ensurer.reset-size1.size8,.ML__mathlive .sizing.reset-size1.size8{font-size:3.46em}.ML__mathlive .fontsize-ensurer.reset-size1.size9,.ML__mathlive .sizing.reset-size1.size9{font-size:4.14em}.ML__mathlive .fontsize-ensurer.reset-size1.size10,.ML__mathlive .sizing.reset-size1.size10{font-size:4.98em}.ML__mathlive .fontsize-ensurer.reset-size2.size1,.ML__mathlive .sizing.reset-size2.size1{font-size:.71428571em}.ML__mathlive .fontsize-ensurer.reset-size2.size2,.ML__mathlive .sizing.reset-size2.size2{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size2.size3,.ML__mathlive .sizing.reset-size2.size3{font-size:1.14285714em}.ML__mathlive .fontsize-ensurer.reset-size2.size4,.ML__mathlive .sizing.reset-size2.size4{font-size:1.28571429em}.ML__mathlive .fontsize-ensurer.reset-size2.size5,.ML__mathlive .sizing.reset-size2.size5{font-size:1.42857143em}.ML__mathlive .fontsize-ensurer.reset-size2.size6,.ML__mathlive .sizing.reset-size2.size6{font-size:1.71428571em}.ML__mathlive .fontsize-ensurer.reset-size2.size7,.ML__mathlive .sizing.reset-size2.size7{font-size:2.05714286em}.ML__mathlive .fontsize-ensurer.reset-size2.size8,.ML__mathlive .sizing.reset-size2.size8{font-size:2.47142857em}.ML__mathlive .fontsize-ensurer.reset-size2.size9,.ML__mathlive .sizing.reset-size2.size9{font-size:2.95714286em}.ML__mathlive .fontsize-ensurer.reset-size2.size10,.ML__mathlive .sizing.reset-size2.size10{font-size:3.55714286em}.ML__mathlive .fontsize-ensurer.reset-size3.size1,.ML__mathlive .sizing.reset-size3.size1{font-size:.625em}.ML__mathlive .fontsize-ensurer.reset-size3.size2,.ML__mathlive .sizing.reset-size3.size2{font-size:.875em}.ML__mathlive .fontsize-ensurer.reset-size3.size3,.ML__mathlive .sizing.reset-size3.size3{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size3.size4,.ML__mathlive .sizing.reset-size3.size4{font-size:1.125em}.ML__mathlive .fontsize-ensurer.reset-size3.size5,.ML__mathlive .sizing.reset-size3.size5{font-size:1.25em}.ML__mathlive .fontsize-ensurer.reset-size3.size6,.ML__mathlive .sizing.reset-size3.size6{font-size:1.5em}.ML__mathlive .fontsize-ensurer.reset-size3.size7,.ML__mathlive .sizing.reset-size3.size7{font-size:1.8em}.ML__mathlive .fontsize-ensurer.reset-size3.size8,.ML__mathlive .sizing.reset-size3.size8{font-size:2.1625em}.ML__mathlive .fontsize-ensurer.reset-size3.size9,.ML__mathlive .sizing.reset-size3.size9{font-size:2.5875em}.ML__mathlive .fontsize-ensurer.reset-size3.size10,.ML__mathlive .sizing.reset-size3.size10{font-size:3.1125em}.ML__mathlive .fontsize-ensurer.reset-size4.size1,.ML__mathlive .sizing.reset-size4.size1{font-size:.55555556em}.ML__mathlive .fontsize-ensurer.reset-size4.size2,.ML__mathlive .sizing.reset-size4.size2{font-size:.77777778em}.ML__mathlive .fontsize-ensurer.reset-size4.size3,.ML__mathlive .sizing.reset-size4.size3{font-size:.88888889em}.ML__mathlive .fontsize-ensurer.reset-size4.size4,.ML__mathlive .sizing.reset-size4.size4{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size4.size5,.ML__mathlive .sizing.reset-size4.size5{font-size:1.11111111em}.ML__mathlive .fontsize-ensurer.reset-size4.size6,.ML__mathlive .sizing.reset-size4.size6{font-size:1.33333333em}.ML__mathlive .fontsize-ensurer.reset-size4.size7,.ML__mathlive .sizing.reset-size4.size7{font-size:1.6em}.ML__mathlive .fontsize-ensurer.reset-size4.size8,.ML__mathlive .sizing.reset-size4.size8{font-size:1.92222222em}.ML__mathlive .fontsize-ensurer.reset-size4.size9,.ML__mathlive .sizing.reset-size4.size9{font-size:2.3em}.ML__mathlive .fontsize-ensurer.reset-size4.size10,.ML__mathlive .sizing.reset-size4.size10{font-size:2.76666667em}.ML__mathlive .fontsize-ensurer.reset-size5.size1,.ML__mathlive .sizing.reset-size5.size1{font-size:.5em}.ML__mathlive .fontsize-ensurer.reset-size5.size2,.ML__mathlive .sizing.reset-size5.size2{font-size:.7em}.ML__mathlive .fontsize-ensurer.reset-size5.size3,.ML__mathlive .sizing.reset-size5.size3{font-size:.8em}.ML__mathlive .fontsize-ensurer.reset-size5.size4,.ML__mathlive .sizing.reset-size5.size4{font-size:.9em}.ML__mathlive .fontsize-ensurer.reset-size5.size5,.ML__mathlive .sizing.reset-size5.size5{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size5.size6,.ML__mathlive .sizing.reset-size5.size6{font-size:1.2em}.ML__mathlive .fontsize-ensurer.reset-size5.size7,.ML__mathlive .sizing.reset-size5.size7{font-size:1.44em}.ML__mathlive .fontsize-ensurer.reset-size5.size8,.ML__mathlive .sizing.reset-size5.size8{font-size:1.73em}.ML__mathlive .fontsize-ensurer.reset-size5.size9,.ML__mathlive .sizing.reset-size5.size9{font-size:2.07em}.ML__mathlive .fontsize-ensurer.reset-size5.size10,.ML__mathlive .sizing.reset-size5.size10{font-size:2.49em}.ML__mathlive .fontsize-ensurer.reset-size6.size1,.ML__mathlive .sizing.reset-size6.size1{font-size:.41666667em}.ML__mathlive .fontsize-ensurer.reset-size6.size2,.ML__mathlive .sizing.reset-size6.size2{font-size:.58333333em}.ML__mathlive .fontsize-ensurer.reset-size6.size3,.ML__mathlive .sizing.reset-size6.size3{font-size:.66666667em}.ML__mathlive .fontsize-ensurer.reset-size6.size4,.ML__mathlive .sizing.reset-size6.size4{font-size:.75em}.ML__mathlive .fontsize-ensurer.reset-size6.size5,.ML__mathlive .sizing.reset-size6.size5{font-size:.83333333em}.ML__mathlive .fontsize-ensurer.reset-size6.size6,.ML__mathlive .sizing.reset-size6.size6{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size6.size7,.ML__mathlive .sizing.reset-size6.size7{font-size:1.2em}.ML__mathlive .fontsize-ensurer.reset-size6.size8,.ML__mathlive .sizing.reset-size6.size8{font-size:1.44166667em}.ML__mathlive .fontsize-ensurer.reset-size6.size9,.ML__mathlive .sizing.reset-size6.size9{font-size:1.725em}.ML__mathlive .fontsize-ensurer.reset-size6.size10,.ML__mathlive .sizing.reset-size6.size10{font-size:2.075em}.ML__mathlive .fontsize-ensurer.reset-size7.size1,.ML__mathlive .sizing.reset-size7.size1{font-size:.34722222em}.ML__mathlive .fontsize-ensurer.reset-size7.size2,.ML__mathlive .sizing.reset-size7.size2{font-size:.48611111em}.ML__mathlive .fontsize-ensurer.reset-size7.size3,.ML__mathlive .sizing.reset-size7.size3{font-size:.55555556em}.ML__mathlive .fontsize-ensurer.reset-size7.size4,.ML__mathlive .sizing.reset-size7.size4{font-size:.625em}.ML__mathlive .fontsize-ensurer.reset-size7.size5,.ML__mathlive .sizing.reset-size7.size5{font-size:.69444444em}.ML__mathlive .fontsize-ensurer.reset-size7.size6,.ML__mathlive .sizing.reset-size7.size6{font-size:.83333333em}.ML__mathlive .fontsize-ensurer.reset-size7.size7,.ML__mathlive .sizing.reset-size7.size7{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size7.size8,.ML__mathlive .sizing.reset-size7.size8{font-size:1.20138889em}.ML__mathlive .fontsize-ensurer.reset-size7.size9,.ML__mathlive .sizing.reset-size7.size9{font-size:1.4375em}.ML__mathlive .fontsize-ensurer.reset-size7.size10,.ML__mathlive .sizing.reset-size7.size10{font-size:1.72916667em}.ML__mathlive .fontsize-ensurer.reset-size8.size1,.ML__mathlive .sizing.reset-size8.size1{font-size:.28901734em}.ML__mathlive .fontsize-ensurer.reset-size8.size2,.ML__mathlive .sizing.reset-size8.size2{font-size:.40462428em}.ML__mathlive .fontsize-ensurer.reset-size8.size3,.ML__mathlive .sizing.reset-size8.size3{font-size:.46242775em}.ML__mathlive .fontsize-ensurer.reset-size8.size4,.ML__mathlive .sizing.reset-size8.size4{font-size:.52023121em}.ML__mathlive .fontsize-ensurer.reset-size8.size5,.ML__mathlive .sizing.reset-size8.size5{font-size:.57803468em}.ML__mathlive .fontsize-ensurer.reset-size8.size6,.ML__mathlive .sizing.reset-size8.size6{font-size:.69364162em}.ML__mathlive .fontsize-ensurer.reset-size8.size7,.ML__mathlive .sizing.reset-size8.size7{font-size:.83236994em}.ML__mathlive .fontsize-ensurer.reset-size8.size8,.ML__mathlive .sizing.reset-size8.size8{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size8.size9,.ML__mathlive .sizing.reset-size8.size9{font-size:1.19653179em}.ML__mathlive .fontsize-ensurer.reset-size8.size10,.ML__mathlive .sizing.reset-size8.size10{font-size:1.43930636em}.ML__mathlive .fontsize-ensurer.reset-size9.size1,.ML__mathlive .sizing.reset-size9.size1{font-size:.24154589em}.ML__mathlive .fontsize-ensurer.reset-size9.size2,.ML__mathlive .sizing.reset-size9.size2{font-size:.33816425em}.ML__mathlive .fontsize-ensurer.reset-size9.size3,.ML__mathlive .sizing.reset-size9.size3{font-size:.38647343em}.ML__mathlive .fontsize-ensurer.reset-size9.size4,.ML__mathlive .sizing.reset-size9.size4{font-size:.43478261em}.ML__mathlive .fontsize-ensurer.reset-size9.size5,.ML__mathlive .sizing.reset-size9.size5{font-size:.48309179em}.ML__mathlive .fontsize-ensurer.reset-size9.size6,.ML__mathlive .sizing.reset-size9.size6{font-size:.57971014em}.ML__mathlive .fontsize-ensurer.reset-size9.size7,.ML__mathlive .sizing.reset-size9.size7{font-size:.69565217em}.ML__mathlive .fontsize-ensurer.reset-size9.size8,.ML__mathlive .sizing.reset-size9.size8{font-size:.83574879em}.ML__mathlive .fontsize-ensurer.reset-size9.size9,.ML__mathlive .sizing.reset-size9.size9{font-size:1em}.ML__mathlive .fontsize-ensurer.reset-size9.size10,.ML__mathlive .sizing.reset-size9.size10{font-size:1.20289855em}.ML__mathlive .fontsize-ensurer.reset-size10.size1,.ML__mathlive .sizing.reset-size10.size1{font-size:.20080321em}.ML__mathlive .fontsize-ensurer.reset-size10.size2,.ML__mathlive .sizing.reset-size10.size2{font-size:.2811245em}.ML__mathlive .fontsize-ensurer.reset-size10.size3,.ML__mathlive .sizing.reset-size10.size3{font-size:.32128514em}.ML__mathlive .fontsize-ensurer.reset-size10.size4,.ML__mathlive .sizing.reset-size10.size4{font-size:.36144578em}.ML__mathlive .fontsize-ensurer.reset-size10.size5,.ML__mathlive .sizing.reset-size10.size5{font-size:.40160643em}.ML__mathlive .fontsize-ensurer.reset-size10.size6,.ML__mathlive .sizing.reset-size10.size6{font-size:.48192771em}.ML__mathlive .fontsize-ensurer.reset-size10.size7,.ML__mathlive .sizing.reset-size10.size7{font-size:.57831325em}.ML__mathlive .fontsize-ensurer.reset-size10.size8,.ML__mathlive .sizing.reset-size10.size8{font-size:.69477912em}.ML__mathlive .fontsize-ensurer.reset-size10.size9,.ML__mathlive .sizing.reset-size10.size9{font-size:.8313253em}.ML__mathlive .fontsize-ensurer.reset-size10.size10,.ML__mathlive .sizing.reset-size10.size10{font-size:1em}.ML__mathlive .delimsizing.size1{font-family:KaTeX_Size1}.ML__mathlive .delimsizing.size2{font-family:KaTeX_Size2}.ML__mathlive .delimsizing.size3{font-family:KaTeX_Size3}.ML__mathlive .delimsizing.size4{font-family:KaTeX_Size4}.ML__mathlive .delimsizing.mult .delim-size1{font-family:KaTeX_Size1;vertical-align:top}.ML__mathlive .delimsizing.mult .delim-size4{font-family:KaTeX_Size4;vertical-align:top}.ML__mathlive .nulldelimiter{width:.12em}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .op-limits .vlist>span{text-align:center}.ML__mathlive .op-over-under{position:relative}.ML__mathlive .op-over-under>.vlist>span:first-child,.ML__mathlive .op-over-under>.vlist>span:last-child{text-align:center}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .accent .accent-body>span{font-family:KaTeX_Main;width:0}.ML__mathlive .accent .accent-body.accent-vec>span{position:relative;left:.326em}.ML__mathlive .mtable .vertical-separator{display:inline-block;margin:0 -.025em;border-right:.05em solid}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist{text-align:right}.ML__error{background-image:radial-gradient(ellipse at center,#cc0041,transparent 70%);background-repeat:repeat-x;background-size:3px 3px;background-position:0 98%}.ML__composition{background:#fff1c2;color:#000;-webkit-text-decoration:underline var(--caret,hsl(var(--hue,212),40%,49%));text-decoration:underline var(--caret,hsl(var(--hue,212),40%,49%))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:#fff}}.ML__placeholder{opacity:.7;padding-left:.4ex;padding-right:.4ex;padding-top:.4ex}\n',""]),t.Z=U},425:function(e,t,i){var n=i(645),r=i.n(n)()(function(e){return e[1]});r.push([e.id,".eWorkspace-container {\n  margin: 32px 0 32px 80px;\n}\n\n.eWorkspace-new {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 1.5em;\n}\n\n.eWorkspace-header-with-archive {\n  display: flex;\n  justify-content: space-between;\n}\n\n.eWorkspace-header {\n  font-weight: 600;\n}\n\n.eWorkspace-header-new {\n  border-bottom: 1px solid #000000;\n  font-weight: 600;\n}\n\n.eWorkspace-archive-toggle {\n  display: block;\n  cursor: pointer;\n  text-align: right;\n  text-decoration: underline;\n}\n\n.eWorkspace-entry-inner textarea {\n  width: 100%;\n}\n\n.eWorkspace-entry-inner-actions {\n  display: flex;\n  background-color: #f3f3f3;\n  padding: 12px;\n}\n\n.eWorkspace-entry-inner-action {\n  background-color: #f3f3f3;\n  padding: 12px;\n}\n\n.inner-action {\n  cursor: pointer;\n  font-weight: 500;\n  margin-left: 8px;\n  text-decoration: underline;\n}\n\n.inner-actions {\n  margin-top: 16px;\n}\n\n.eWorkspace-entry-inner img {\n  max-width: 100%;\n}\n\n.eWorkspace-editor-textarea {\n  margin-top: 24px;\n  width: 100%;\n}\n\n.eWorkspace-editor-uploaded-image {\n  margin-top: 24px;\n  max-width: 100%;\n}\n\n#eWorkspace-upload-image-input {\n  display: none;\n}\n\n#eWorkspace-table-chevron {\n  text-align: right;\n}\n\ntable.eWorkspace-entries.table button.btn {\n  font-family: Sans-Serif;\n}\n\n.eWorkspace-submission-header {\n  font-family: Sans-Serif;\n  font-weight: bold;\n}\n.eWorkspace-submission-review-date {\n  float: left;\n  margin-bottom: 6px;\n}\n.eWorkspace-submission-archive-toggle {\n  float: right;\n  margin-bottom: 6px;\n}\n\n.eWorkspace-icon-button {\n  border: none;\n  background: none;\n  cursor: pointer;\n}\n\n.eWorkspace-entries {\n  font-family: Sans-Serif;\n}\n.eWorkspace-entries > thead > tr > th {\n  background-color: #233364;\n  border: none;\n  color: white;\n  padding: 12px;\n}\n\ntr.eWorkspace-entry.TEACHER_ANSWER {\n  background-color: #e0e0e0;\n}\ntr.eWorkspace-entry > td {\n  border-top: 1px solid #000000;\n  padding: 12px;\n}\ntr.eWorkspace-entry-content > td {\n  border: 0;\n  padding: 0;\n}\n\n.eWorkspace-submission-editor,\n.eWorkspace-align-right {\n  text-align: right;\n}\n.eWorkspace-container textarea {\n  width: 100%;\n}\nbutton.btn.hide-eWorkspace {\n  display: none;\n}\n\n.eWorkspace-table-header {\n  font-weight: 600;\n}\n\n.eWorkspace-btn {\n  border: 0;\n  border-radius: 4px;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n  font-weight: 500;\n  min-width: 80px;\n  padding: 6px 16px;\n}\n\n.eWorkspace-btn-default {\n  background-color: #e0e0e0;\n  color: #000000;\n  margin-right: 16px;\n}\n\n.eWorkspace-btn-primary {\n  background-color: #233364;\n  color: #ffffff;\n}\n\n.eWorkspace-btn-delete {\n  background-color: #dc3545;\n  color: #ffffff;\n}\n\n.eWorkspace-entry-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 16px;\n}\n\n.eWorkspace-entry-actions-delete {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 16px;\n}\n\n.eWorkspace-editor {\n  display: flex;\n  flex-direction: column;\n}\n\ntable.eWorkspace-entries.table {\n  border: 1px solid #000000;\n  margin-top: 0;\n}\n\n.eWorkspace-entry-inner-body {\n  padding: 12px;\n}\n\n.eWorkspace-selections {\n  align-items: center;\n  display: flex;\n  justify-content: space-evenly;\n}\n\n.eWorkspace-selection {\n  align-items: center;\n  cursor: pointer;\n  display: flex;\n  flex-direction: column;\n}\n\n.eWorkspace-selection-icon {\n  font-size: 64px;\n}\n\n.eWorkspace-selection-btn {\n  align-self: flex-end;\n}\n\n.eWorkspace-close-icon {\n  align-self: flex-end;\n  color: #dc3545;\n  cursor: pointer;\n}\n\nmath-live {\n  border: 1px solid royalblue;\n  display: inline-flex;\n  padding: 2px;\n  margin: 4px;\n}\n\nmath-field {\n  border: 1px solid royalblue;\n}\n\n.mathlive-node {\n  display: inline-flex;\n  padding: 2px;\n  margin: 4px;\n  cursor: pointer !important;\n}\n\n.mathlive-node > .ML__mathlive > span.ML__base {\n  cursor: pointer !important;\n}\n\n.mathlive-node > .ML__mathlive > .ML__base {\n  cursor: pointer !important;\n}\n\n.mathlive-node:hover {\n  color: royalblue;\n  cursor: pointer;\n}\n\n.ProseMirror-container {\n  border: 1px solid darkgray;\n}\n\n.ProseMirror {\n  padding: 8px;\n}\n\n.ProseMirror-menu {\n  background-color: #f3f3f3;\n  border-bottom: 1px solid darkgray;\n  display: flex;\n  justify-content: space-between;\n  padding: 4px;\n}\n\n.ProseMirror-menu > .menu-icon {\n  cursor: pointer;\n  padding: 8px;\n}\n\n.ProseMirror-menu > .menu-icon:hover {\n  background-color: #e0e0e0;\n}\n\n.ProseMirror-focused:focus {\n  outline: none;\n}\n\n.ProseMirror-selectednode {\n  outline: 1px solid royalblue;\n}\n\n.ProseMirror > p {\n  margin: 0;\n  overflow: hidden;\n}\n\n.ProseMirror-menu-actions-right {\n  align-items: center;\n  display: flex;\n}\n\n#eWorkspace-modal {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  z-index: 10001;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  position: fixed;\n}\n\n.eWorkspace-modal-backdrop {\n  background-color: black;\n  z-index: 10000;\n  opacity: 0.5;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  position: fixed;\n}\n\n.eWorkspace-modal-backdrop {\n  background-color: black;\n  z-index: 10000;\n  opacity: 0.5;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  position: fixed;\n}\n\n.eWorkspace-modal-content {\n  padding: 16px;\n  background-color: white;\n  box-shadow: 0px 3px 3px -2px rgba(0, 0, 0, 0.2),\n    0px 3px 4px 0px rgba(0, 0, 0, 0.14), 0px 1px 8px 0px rgba(0, 0, 0, 0.12);\n  display: flex;\n  flex-direction: column;\n  max-width: 400px;\n  position: relative;\n  width: 100%;\n}\n\n.eWorkspace-modal-actions {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 32px;\n}\n\n.eWorkspace-close-modal {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  right: 0;\n}\n\n.eWorkspace-modal-top {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 32px;\n}\n\n.eWorkspace-modal-title {\n  font-weight: 600;\n}\n\n.ML__keyboard {\n  margin-bottom: 25px;\n  z-index: 10001 !important;\n}\n\n.ML__base {\n  cursor: pointer !important;\n}\n",""]),t.Z=r},920:function(e,t,i){var n=i(645),r=i.n(n)()(function(e){return e[1]});r.push([e.id,'.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror li {\n  position: relative;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\n/* Make sure li selections wrap around markers */\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px; top: -2px; bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n',""]),t.Z=r},645:function(e){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i}).join("")},t.i=function(e,i,n){"string"==typeof e&&(e=[[null,e,""]]);var r={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);n&&r[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),t.push(l))}},t}},667:function(e){e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},453:function(e,t,i){t.Z=i.p+"assets/KaTeX_AMS-Regular.woff"},264:function(e,t,i){t.Z=i.p+"assets/KaTeX_AMS-Regular.woff2"},450:function(e,t,i){t.Z=i.p+"assets/KaTeX_Caligraphic-Bold.woff"},996:function(e,t,i){t.Z=i.p+"assets/KaTeX_Caligraphic-Bold.woff2"},206:function(e,t,i){t.Z=i.p+"assets/KaTeX_Caligraphic-Regular.woff"},143:function(e,t,i){t.Z=i.p+"assets/KaTeX_Caligraphic-Regular.woff2"},146:function(e,t,i){t.Z=i.p+"assets/KaTeX_Fraktur-Bold.woff"},410:function(e,t,i){t.Z=i.p+"assets/KaTeX_Fraktur-Bold.woff2"},686:function(e,t,i){t.Z=i.p+"assets/KaTeX_Fraktur-Regular.woff"},259:function(e,t,i){t.Z=i.p+"assets/KaTeX_Fraktur-Regular.woff2"},977:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Bold.woff"},872:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Bold.woff2"},374:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-BoldItalic.woff"},713:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-BoldItalic.woff2"},552:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Italic.woff"},527:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Italic.woff2"},130:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Regular.woff"},359:function(e,t,i){t.Z=i.p+"assets/KaTeX_Main-Regular.woff2"},772:function(e,t,i){t.Z=i.p+"assets/KaTeX_Math-BoldItalic.woff"},324:function(e,t,i){t.Z=i.p+"assets/KaTeX_Math-BoldItalic.woff2"},888:function(e,t,i){t.Z=i.p+"assets/KaTeX_Math-Italic.woff"},918:function(e,t,i){t.Z=i.p+"assets/KaTeX_Math-Italic.woff2"},163:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Bold.woff"},533:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Bold.woff2"},492:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Italic.woff"},19:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Italic.woff2"},167:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Regular.woff"},529:function(e,t,i){t.Z=i.p+"assets/KaTeX_SansSerif-Regular.woff2"},46:function(e,t,i){t.Z=i.p+"assets/KaTeX_Script-Regular.woff"},252:function(e,t,i){t.Z=i.p+"assets/KaTeX_Script-Regular.woff2"},605:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size1-Regular.woff"},286:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size1-Regular.woff2"},302:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size2-Regular.woff"},850:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size2-Regular.woff2"},500:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size3-Regular.woff"},173:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size3-Regular.woff2"},745:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size4-Regular.woff"},14:function(e,t,i){t.Z=i.p+"assets/KaTeX_Size4-Regular.woff2"},522:function(e,t,i){t.Z=i.p+"assets/KaTeX_Typewriter-Regular.woff"},356:function(e,t,i){t.Z=i.p+"assets/KaTeX_Typewriter-Regular.woff2"},379:function(e,t,i){var n,r=function(){var e={};return function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}e[t]=i}return e[t]}}(),o=[];function s(e){for(var t=-1,i=0;i<o.length;i++)if(o[i].identifier===e){t=i;break}return t}function a(e,t){for(var i={},n=[],r=0;r<e.length;r++){var a=e[r],l=t.base?a[0]+t.base:a[0],c=i[l]||0,d="".concat(l," ").concat(c);i[l]=c+1;var p=s(d),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(o[p].references++,o[p].updater(h)):o.push({identifier:d,updater:m(h,t),references:1}),n.push(d)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=i.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),"function"==typeof e.insert)e.insert(t);else{var s=r(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,i,n){var r=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=d(t,r);else{var o=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}var h=null,u=0;function m(e,t){var i,n,r;if(t.singleton){var o=u++;i=h||(h=l(t)),n=p.bind(null,i,o,!1),r=p.bind(null,i,o,!0)}else i=l(t),n=function(e,t,i){var n=i.css,r=i.media,o=i.sourceMap;if(r?e.setAttribute("media",r):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,i,t),r=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(i)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var i=a(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<i.length;n++){var r=s(i[n]);o[r].references--}for(var l=a(e,t),c=0;c<i.length;c++){var d=s(i[c]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}i=l}}}},698:function(t){t.exports=e}},i={};function n(e){if(i[e])return i[e].exports;var r=i[e]={id:e,exports:{}};return t[e](r,r.exports,n),r.exports}return n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e}(),n(207)}()});
},{"react":"AQ6k"}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"gOtw":[function(require,module,exports) {
var define;
var process = require("process");
var e,t=require("process");function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=l();return function(){var n,r=c(e);if(t){var o=c(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?i(e):t}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=y(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function f(e){return g(e)||m(e)||y(e)||h()}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function g(e){if(Array.isArray(e))return w(e)}function v(e,t){return E(e)||x(e,t)||y(e,t)||b()}function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}}function E(e){if(Array.isArray(e))return e}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(t,n){"object"==("undefined"==typeof exports?"undefined":k(exports))&&"object"==("undefined"==typeof module?"undefined":k(module))?module.exports=n(require("react"),require("react-dom")):"function"==typeof e&&e.amd?e(["react","react-dom"],n):"object"==("undefined"==typeof exports?"undefined":k(exports))?exports.Excalidraw=n(require("react"),require("react-dom")):t.Excalidraw=n(t.React,t.ReactDOM)}(self,function(e,r){return function(){var a,i,l,c,d={5374:function(e){function t(e,t,n,r,o,a,i){try{var l=e[a](i),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(r,o)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise(function(o,a){var i=e.apply(n,r);function l(e){t(i,o,a,l,c,"next",e)}function c(e){t(i,o,a,l,c,"throw",e)}l(void 0)})}}},566:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},6950:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},5474:function(e,t,n){var r=n(8387);e.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},8387:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},6009:function(e,t,n){var r=n(487),o=n(8328);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},1395:function(e,t,n){var r=n(487),o=n(6121);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},5574:function(e,t,n){var r=n(487),o=n(7972);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},4518:function(e,t,n){var r=n(487),o=n(190);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},3040:function(e,t,n){var r=n(487),o=n(6718);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8623:function(e,t,n){var r=n(487),o=n(3623);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},4193:function(e,t,n){var r=n(487),o=n(103);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},341:function(e,t,n){var r=n(487),o=n(7061);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},9705:function(e,t,n){var r=n(487),o=n(1498);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},7143:function(e,t,n){var r=n(487),o=n(666);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},7428:function(e,t,n){var r=n(487),o=n(849);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8465:function(e,t,n){var r=n(487),o=n(6915);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8680:function(e,t,n){var r=n(487),o=n(7030);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},205:function(e,t,n){var r=n(487),o=n(3994);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8416:function(e,t,n){var r=n(487),o=n(700);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},2816:function(e,t,n){var r=n(487),o=n(287);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},1575:function(e,t,n){var r=n(487),o=n(5657);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},7287:function(e,t,n){var r=n(487),o=n(7392);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8518:function(e,t,n){var r=n(487),o=n(6065);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},5849:function(e,t,n){var r=n(487),o=n(83);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},9478:function(e,t,n){var r=n(487),o=n(1554);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},2680:function(e,t,n){var r=n(487),o=n(1970);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},3142:function(e,t,n){var r=n(487),o=n(961);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},8234:function(e,t,n){var r=n(487),o=n(4878);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},4651:function(e,t,n){var r=n(487),o=n(1988);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},2189:function(e,t,n){var r=n(487),o=n(3245);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,""]]);r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},487:function(e,t,n){"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function i(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function l(e,t){for(var n={},r=[],o=0;o<e.length;o++){var l=e[o],c=t.base?l[0]+t.base:l[0],s=n[c]||0,u="".concat(c," ").concat(s);n[c]=s+1;var d=i(u),p={css:l[1],media:l[2],sourceMap:l[3]};-1!==d?(a[d].references++,a[d].updater(p)):a.push({identifier:u,updater:h(p,t),references:1}),r.push(u)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var s,u=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function d(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=u(t,o);else{var a=document.createTextNode(o),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}var p=null,f=0;function h(e,t){var n,r,o;if(t.singleton){var a=f++;n=p||(p=c(t)),r=d.bind(null,n,a,!1),o=d.bind(null,n,a,!0)}else n=c(t),r=function(e,t,n){var r=n.css,o=n.media,a=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=l(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=i(n[r]);a[o].references--}for(var c=l(e,t),s=0;s<n.length;s++){var u=i(n[s]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}n=c}}}},2829:function(e){"use strict";e.exports=JSON.parse('{"labels":{"paste":"Paste","pasteCharts":"Paste charts","selectAll":"Select all","multiSelect":"Add element to selection","moveCanvas":"Move canvas","cut":"Cut","copy":"Copy","copyAsPng":"Copy to clipboard as PNG","copyAsSvg":"Copy to clipboard as SVG","bringForward":"Bring forward","sendToBack":"Send to back","bringToFront":"Bring to front","sendBackward":"Send backward","delete":"Delete","copyStyles":"Copy styles","pasteStyles":"Paste styles","stroke":"Stroke","background":"Background","fill":"Fill","strokeWidth":"Stroke width","strokeStyle":"Stroke style","strokeStyle_solid":"Solid","strokeStyle_dashed":"Dashed","strokeStyle_dotted":"Dotted","sloppiness":"Sloppiness","opacity":"Opacity","textAlign":"Text align","edges":"Edges","sharp":"Sharp","round":"Round","arrowheads":"Arrowheads","arrowhead_none":"None","arrowhead_arrow":"Arrow","arrowhead_bar":"Bar","arrowhead_dot":"Dot","fontSize":"Font size","fontFamily":"Font family","onlySelected":"Only selected","withBackground":"With background","exportEmbedScene":"Embed scene into exported file","exportEmbedScene_details":"Scene data will be saved into the exported PNG/SVG file so that the scene can be restored from it.\\nWill increase exported file size.","addWatermark":"Add \\"Made with Excalidraw\\"","handDrawn":"Hand-drawn","normal":"Normal","code":"Code","small":"Small","medium":"Medium","large":"Large","veryLarge":"Very large","solid":"Solid","hachure":"Hachure","crossHatch":"Cross-hatch","thin":"Thin","bold":"Bold","left":"Left","center":"Center","right":"Right","extraBold":"Extra bold","architect":"Architect","artist":"Artist","cartoonist":"Cartoonist","fileTitle":"File title","colorPicker":"Color picker","canvasBackground":"Canvas background","drawingCanvas":"Drawing canvas","layers":"Layers","actions":"Actions","language":"Language","liveCollaboration":"Live collaboration","duplicateSelection":"Duplicate","untitled":"Untitled","name":"Name","yourName":"Your name","madeWithExcalidraw":"Made with Excalidraw","group":"Group selection","ungroup":"Ungroup selection","collaborators":"Collaborators","showGrid":"Show grid","addToLibrary":"Add to library","removeFromLibrary":"Remove from library","libraryLoadingMessage":"Loading library","libraries":"Browse libraries","loadingScene":"Loading scene","align":"Align","alignTop":"Align top","alignBottom":"Align bottom","alignLeft":"Align left","alignRight":"Align right","centerVertically":"Center vertically","centerHorizontally":"Center horizontally","distributeHorizontally":"Distribute horizontally","distributeVertically":"Distribute vertically","viewMode":"View mode","toggleExportColorScheme":"Toggle export color scheme"},"buttons":{"clearReset":"Reset the canvas","export":"Export","exportToPng":"Export to PNG","exportToSvg":"Export to SVG","copyToClipboard":"Copy to clipboard","copyPngToClipboard":"Copy PNG to clipboard","scale":"Scale","save":"Save","saveAs":"Save as","load":"Load","getShareableLink":"Get shareable link","close":"Close","selectLanguage":"Select language","scrollBackToContent":"Scroll back to content","zoomIn":"Zoom in","zoomOut":"Zoom out","resetZoom":"Reset zoom","menu":"Menu","done":"Done","edit":"Edit","undo":"Undo","redo":"Redo","resetLibrary":"Reset library","createNewRoom":"Create new room","fullScreen":"Full screen","darkMode":"Dark mode","lightMode":"Light mode","zenMode":"Zen mode","exitZenMode":"Exit zen mode"},"alerts":{"clearReset":"This will clear the whole canvas. Are you sure?","couldNotCreateShareableLink":"Couldn\'t create shareable link.","couldNotCreateShareableLinkTooBig":"Couldn\'t create shareable link: the scene is too big","couldNotLoadInvalidFile":"Couldn\'t load invalid file","importBackendFailed":"Importing from backend failed.","cannotExportEmptyCanvas":"Cannot export empty canvas.","couldNotCopyToClipboard":"Couldn\'t copy to clipboard. Try using Chrome browser.","decryptFailed":"Couldn\'t decrypt data.","uploadedSecurly":"The upload has been secured with end-to-end encryption, which means that Excalidraw server and third parties can\'t read the content.","loadSceneOverridePrompt":"Loading external drawing will replace your existing content. Do you wish to continue?","collabStopOverridePrompt":"Stopping the session will overwrite your previous, locally stored drawing. Are you sure?\\n\\n(If you want to keep your local drawing, simply close the browser tab instead.)","errorLoadingLibrary":"There was an error loading the third party library.","confirmAddLibrary":"This will add {{numShapes}} shape(s) to your library. Are you sure?","imageDoesNotContainScene":"Importing images isn\'t supported at the moment.\\n\\nDid you want to import a scene? This image does not seem to contain any scene data. Have you enabled this during export?","cannotRestoreFromImage":"Scene couldn\'t be restored from this image file","resetLibrary":"This will clear your library. Are you sure?"},"toolBar":{"selection":"Selection","draw":"Free draw","rectangle":"Rectangle","diamond":"Diamond","ellipse":"Ellipse","arrow":"Arrow","line":"Line","text":"Text","library":"Library","lock":"Keep selected tool active after drawing"},"headings":{"canvasActions":"Canvas actions","selectedShapeActions":"Selected shape actions","shapes":"Shapes"},"hints":{"linearElement":"Click to start multiple points, drag for single line","freeDraw":"Click and drag, release when you\'re finished","text":"Tip: you can also add text by double-clicking anywhere with the selection tool","linearElementMulti":"Click on last point or press Escape or Enter to finish","lockAngle":"You can constrain angle by holding SHIFT","resize":"You can constrain proportions by holding SHIFT while resizing,\\nhold ALT to resize from the center","rotate":"You can constrain angles by holding SHIFT while rotating","lineEditor_info":"Double-click or press Enter to edit points","lineEditor_pointSelected":"Press Delete to remove point, CtrlOrCmd+D to duplicate, or drag to move","lineEditor_nothingSelected":"Select a point to move or remove, or hold Alt and click to add new points"},"canvasError":{"cannotShowPreview":"Cannot show preview","canvasTooBig":"The canvas may be too big.","canvasTooBigTip":"Tip: try moving the farthest elements a bit closer together."},"errorSplash":{"headingMain_pre":"Encountered an error. Try ","headingMain_button":"reloading the page.","clearCanvasMessage":"If reloading doesn\'t work, try ","clearCanvasMessage_button":"clearing the canvas.","clearCanvasCaveat":" This will result in loss of work ","trackedToSentry_pre":"The error with identifier ","trackedToSentry_post":" was tracked on our system.","openIssueMessage_pre":"We were very cautious not to include your scene information on the error. If your scene is not private, please consider following up on our ","openIssueMessage_button":"bug tracker.","openIssueMessage_post":" Please include information below by copying and pasting into the GitHub issue.","sceneContent":"Scene content:"},"roomDialog":{"desc_intro":"You can invite people to your current scene to collaborate with you.","desc_privacy":"Don\'t worry, the session uses end-to-end encryption, so whatever you draw will stay private. Not even our server will be able to see what you come up with.","button_startSession":"Start session","button_stopSession":"Stop session","desc_inProgressIntro":"Live-collaboration session is now in progress.","desc_shareLink":"Share this link with anyone you want to collaborate with:","desc_exitSession":"Stopping the session will disconnect you from the room, but you\'ll be able to continue working with the scene, locally. Note that this won\'t affect other people, and they\'ll still be able to collaborate on their version."},"errorDialog":{"title":"Error"},"helpDialog":{"blog":"Read our blog","click":"click","curvedArrow":"Curved arrow","curvedLine":"Curved line","documentation":"Documentation","drag":"drag","editor":"Editor","github":"Found an issue? Submit","howto":"Follow our guides","or":"or","preventBinding":"Prevent arrow binding","shapes":"Shapes","shortcuts":"Keyboard shortcuts","textFinish":"Finish editing (text)","textNewLine":"Add new line (text)","title":"Help","view":"View","zoomToFit":"Zoom to fit all elements","zoomToSelection":"Zoom to selection"},"encrypted":{"tooltip":"Your drawings are end-to-end encrypted so Excalidraw\'s servers will never see them."},"stats":{"angle":"Angle","element":"Element","elements":"Elements","height":"Height","scene":"Scene","selected":"Selected","storage":"Storage","title":"Stats for nerds","total":"Total","version":"Version","versionCopy":"Click to copy","versionNotAvailable":"Version not available","width":"Width"},"toast":{"copyStyles":"Copied styles.","copyToClipboard":"Copied to clipboard.","copyToClipboardAsPng":"Copied to clipboard as PNG.","fileSaved":"File saved.","fileSavedToFilename":"Saved to {filename}"}}')},2051:function(e){"use strict";e.exports=JSON.parse('{"ar-SA":85,"bg-BG":98,"ca-ES":85,"de-DE":100,"el-GR":100,"en":100,"es-ES":100,"fa-IR":93,"fi-FI":100,"fr-FR":100,"he-IL":85,"hi-IN":96,"hu-HU":85,"id-ID":99,"it-IT":100,"ja-JP":100,"kab-KAB":97,"ko-KR":97,"my-MM":79,"nb-NO":100,"nl-NL":99,"nn-NO":87,"pa-IN":99,"pl-PL":85,"pt-BR":100,"pt-PT":94,"ro-RO":100,"ru-RU":100,"sk-SK":100,"sv-SE":100,"tr-TR":85,"uk-UA":99,"zh-CN":95,"zh-TW":100}')},788:function(e,t,n){var r={"./ar-SA.json":[7294,558],"./bg-BG.json":[3860,384],"./ca-ES.json":[750,351],"./de-DE.json":[7439,43],"./el-GR.json":[9422,526],"./en.json":[2829],"./es-ES.json":[2863,317],"./fa-IR.json":[3853,710],"./fi-FI.json":[5472,472],"./fr-FR.json":[3280,364],"./he-IL.json":[3970,262],"./hi-IN.json":[5599,933],"./hu-HU.json":[1516,661],"./id-ID.json":[7992,491],"./it-IT.json":[5963,465],"./ja-JP.json":[1323,137],"./kab-KAB.json":[9230,164],"./ko-KR.json":[7552,60],"./my-MM.json":[1778,242],"./nb-NO.json":[8751,246],"./nl-NL.json":[4675,196],"./nn-NO.json":[7558,920],"./pa-IN.json":[863,280],"./percentages.json":[2051],"./pl-PL.json":[122,852],"./pt-BR.json":[7443,381],"./pt-PT.json":[2560,149],"./ro-RO.json":[5654,752],"./ru-RU.json":[5609,869],"./sk-SK.json":[8684,401],"./sv-SE.json":[1570,698],"./tr-TR.json":[8146,213],"./uk-UA.json":[9746,583],"./zh-CN.json":[9044,304],"./zh-TW.json":[2939,62]};function o(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then(function(){return n.t(o,3)})}o.keys=function(){return Object.keys(r)},o.id=788,e.exports=o},7154:function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t.apply(this,arguments)}e.exports=t},6479:function(e,t,n){var r=n(7316);e.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},7316:function(e){e.exports=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},8328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(3645),o=n.n(r),a=n(1667),i=n.n(a),l=n(7628),c=n(9638),s=o()(function(e){return e[1]}),u=i()(l.Z),d=i()(c.Z);s.push([e.id,'@font-face{font-family:"Virgil";src:url('+u+');font-display:swap}@font-face{font-family:"Cascadia";src:url('+d+");font-display:swap}",""]);const p=s},6121:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Avatar{width:2.5rem;height:2.5rem;border-radius:1.25rem;display:flex;justify-content:center;align-items:center;color:#fff;cursor:pointer;font-size:.8rem;font-weight:500}",""]);const a=o},7972:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .color-picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}:root[dir=ltr] .excalidraw .color-picker{left:-5.5px}:root[dir=rtl] .excalidraw .color-picker{right:-5.5px}.excalidraw .color-picker-control-container{display:grid;grid-template-columns:auto 1fr;align-items:center}.excalidraw .color-picker-triangle{width:0;height:0;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent var(--popup-bg-color);position:absolute;top:-10px}:root[dir=ltr] .excalidraw .color-picker-triangle{left:12px}:root[dir=rtl] .excalidraw .color-picker-triangle{right:12px}.excalidraw .color-picker-triangle-shadow{border-color:transparent transparent rgba(0,0,0,.1);top:-11px}.excalidraw .color-picker-content{padding:.5rem;display:grid;grid-template-columns:repeat(5, auto);grid-gap:.5rem;border-radius:4px}.excalidraw .color-picker-content:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-picker-content .color-input-container{grid-column:1/span 5}.excalidraw .color-picker-swatch{position:relative;height:1.875rem;width:1.875rem;cursor:pointer;border-radius:4px;margin:0;box-sizing:border-box;border:1px solid #ddd;background-color:currentColor !important;filter:var(--appearance-filter)}.excalidraw .color-picker-swatch:focus{box-shadow:0 0 4px 1px currentColor;border-color:var(--select-highlight-color)}.excalidraw .color-picker-transparent{border-radius:4px;box-shadow:rgba(0,0,0,.1) 0 0 0 1px inset;position:absolute;top:0;right:0;bottom:0;left:0}.excalidraw .color-picker-transparent,.excalidraw .color-picker-label-swatch{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center}.excalidraw .color-picker-hash{background:var(--input-border-color);height:1.875rem;width:1.875rem;color:var(--input-label-color);display:flex;align-items:center;justify-content:center;position:relative}:root[dir=ltr] .excalidraw .color-picker-hash{border-radius:4px 0 0 4px}:root[dir=rtl] .excalidraw .color-picker-hash{border-radius:0 4px 4px 0}.excalidraw .color-input-container:focus-within .color-picker-hash{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .color-input-container:focus-within .color-picker-hash::before,.excalidraw .color-input-container:focus-within .color-picker-hash::after{content:"";width:1px;height:100%;position:absolute;top:0}.excalidraw .color-input-container:focus-within .color-picker-hash::before{background:var(--input-border-color)}:root[dir=ltr] .excalidraw .color-input-container:focus-within .color-picker-hash::before{right:-1px}:root[dir=rtl] .excalidraw .color-input-container:focus-within .color-picker-hash::before{left:-1px}.excalidraw .color-input-container:focus-within .color-picker-hash::after{background:var(--input-bg-color)}:root[dir=ltr] .excalidraw .color-input-container:focus-within .color-picker-hash::after{right:-2px}:root[dir=rtl] .excalidraw .color-input-container:focus-within .color-picker-hash::after{left:-2px}.excalidraw .color-input-container{display:flex}.excalidraw .color-picker-input{width:12ch;margin:0;font-size:1rem;background-color:var(--input-bg-color);color:var(--text-primary-color);border:0;outline:none;height:1.75em;box-shadow:var(--input-border-color) 0 0 0 1px inset;float:left;padding:1px;padding-inline-start:.5em;appearance:none}:root[dir=ltr] .excalidraw .color-picker-input{border-radius:0 4px 4px 0}:root[dir=rtl] .excalidraw .color-picker-input{border-radius:4px 0 0 4px}.excalidraw .color-picker-label-swatch{height:1.875rem;width:1.875rem;margin-inline-end:.25rem;border:1px solid #dee2e6;position:relative;overflow:hidden;background-color:transparent !important;filter:var(--appearance-filter)}.excalidraw .color-picker-label-swatch:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:var(--swatch-color)}.excalidraw .color-picker-keybinding{position:absolute;bottom:2px;font-size:.7em}:root[dir=ltr] .excalidraw .color-picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .color-picker-keybinding{left:2px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .color-picker-keybinding{display:none}}.excalidraw .color-picker-type-canvasBackground .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementBackground .color-picker-keybinding{color:#fff}.excalidraw .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#aaa}.excalidraw .color-picker-type-elementStroke .color-picker-keybinding{color:#d4d4d4}.excalidraw.Appearance_dark .color-picker-type-elementBackground .color-picker-keybinding{color:#000}.excalidraw.Appearance_dark .color-picker-swatch[aria-label=transparent] .color-picker-keybinding{color:#000}',""]);const a=o},190:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .context-menu{position:relative;border-radius:4px;box-shadow:0 3px 10px rgba(0,0,0,.2);padding:0;list-style:none;user-select:none;margin:-0.25rem 0 0 .125rem;padding:.5rem 0;background-color:var(--popup-secondary-bg-color);border:1px solid var(--button-gray-3);cursor:default}.excalidraw .context-menu button{color:var(--popup-text-color)}.excalidraw .context-menu-option{position:relative;width:100%;min-width:9.5rem;margin:0;padding:.25rem 1rem .25rem 1.25rem;text-align:start;border-radius:0;background-color:transparent;border:none;white-space:nowrap;display:grid;grid-template-columns:1fr .2fr;align-items:center}.excalidraw .context-menu-option.checkmark::before{position:absolute;left:6px;margin-bottom:1px;content:""}.excalidraw .context-menu-option.dangerous .context-menu-option__label{color:#f03e3e}.excalidraw .context-menu-option .context-menu-option__label{justify-self:start;margin-inline-end:20px}.excalidraw .context-menu-option .context-menu-option__shortcut{justify-self:end;opacity:.6;font-family:inherit;font-size:.7rem}.excalidraw .context-menu-option:hover{color:var(--popup-bg-color);background-color:var(--select-highlight-color)}.excalidraw .context-menu-option:hover.dangerous{background-color:#fa5252}.excalidraw .context-menu-option:hover.dangerous .context-menu-option__label{color:var(--popup-bg-color)}.excalidraw .context-menu-option:focus{z-index:1}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .context-menu-option{display:block}.excalidraw .context-menu-option .context-menu-option__label{margin-inline-end:0}.excalidraw .context-menu-option .context-menu-option__shortcut{display:none}}.excalidraw .context-menu-option-separator{border:none;border-top:1px solid #adb5bd}',""]);const a=o},6718:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Dialog{user-select:text;cursor:auto}.excalidraw .Dialog__title{display:grid;align-items:center;margin-top:0;grid-template-columns:1fr calc(var(--space-factor) * 7);grid-gap:var(--metric);padding:calc(var(--space-factor) * 2);text-align:center;font-variant:small-caps;font-size:1.2em}.excalidraw .Dialog__titleContent{flex:1}.excalidraw .Dialog .Modal__close{color:var(--icon-fill-color);margin:0}.excalidraw .Dialog__content{padding:0 16px 16px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Dialog{--metric: calc(var(--space-factor) * 4);--inset-left: max(var(--metric), var(--sal));--inset-right: max(var(--metric), var(--sar))}.excalidraw .Dialog__title{grid-template-columns:calc(var(--space-factor) * 7) 1fr calc( var(--space-factor) * 7 );position:sticky;top:0;padding:calc(var(--space-factor) * 2);background:var(--island-bg-color);font-size:1.25em;box-sizing:border-box;border-bottom:1px solid var(--button-gray-2);z-index:1}.excalidraw .Dialog__titleContent{text-align:center}.excalidraw .Dialog .Island{width:100vw;height:100%;box-sizing:border-box;overflow-y:auto;padding-left:max(calc(var(--padding) * var(--space-factor)), var(--sal));padding-right:max(calc(var(--padding) * var(--space-factor)), var(--sar));padding-bottom:max(calc(var(--padding) * var(--space-factor)), var(--sab))}.excalidraw .Dialog .Modal__close{order:-1}}",""]);const a=o},3623:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .ExportDialog__preview{--preview-padding: calc(var(--space-factor) * 4);background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMUlEQVQ4T2NkYGAQYcAP3uCTZhw1gGGYhAGBZIA/nYDCgBDAm9BGDWAAJyRCgLaBCAAgXwixzAS0pgAAAABJRU5ErkJggg==") left center;text-align:center;padding:var(--preview-padding);margin-bottom:calc(var(--space-factor) * 3)}.excalidraw .ExportDialog__preview canvas{max-width:calc(100% - var(--preview-padding) * 2);max-height:25rem}.excalidraw.Appearance_dark .ExportDialog__preview canvas{filter:none}.excalidraw .ExportDialog__actions{width:100%;display:flex;grid-gap:calc(var(--space-factor) * 2);align-items:top;justify-content:space-between}.excalidraw .ExportDialog__name{grid-column:project-name;margin:auto}.excalidraw .ExportDialog__name .TextInput{height:calc(1rem - 3px)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .ExportDialog{display:flex;flex-direction:column}.excalidraw .ExportDialog__actions{flex-direction:column;align-items:center}.excalidraw .ExportDialog__actions>*{margin-bottom:calc(var(--space-factor) * 3)}.excalidraw .ExportDialog__preview canvas{max-height:30vh}.excalidraw .ExportDialog__dialog,.excalidraw .ExportDialog__dialog .Island{height:100%;box-sizing:border-box}.excalidraw .ExportDialog__dialog .Island{overflow-y:auto}}',""]);const a=o},103:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .FixedSideContainer{--margin: 0.25rem;position:absolute;pointer-events:none}.excalidraw .FixedSideContainer>*{pointer-events:all}.excalidraw .FixedSideContainer_side_top{left:var(--margin);top:var(--margin);right:var(--margin);z-index:2}.excalidraw .FixedSideContainer_side_top.zen-mode{right:42px}",""]);const a=o},7061:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .HelpDialog h3{border-bottom:1px solid var(--button-gray-2);padding-bottom:4px}.excalidraw .HelpDialog--island{border:1px solid var(--button-gray-2);margin-bottom:16px}.excalidraw .HelpDialog--island-title{margin:0;padding:4px;background-color:var(--button-gray-1);text-align:center}.excalidraw .HelpDialog--shortcut{border-top:1px solid var(--button-gray-2)}.excalidraw .HelpDialog--key{word-break:keep-all;border:1px solid var(--button-gray-2);padding:2px 8px;margin:auto 4px;background-color:var(--button-gray-1);border-radius:2px;font-size:.8em;min-height:26px;box-sizing:border-box;display:flex;align-items:center;font-family:inherit}.excalidraw .HelpDialog--header{display:flex;flex-direction:row;justify-content:space-evenly;margin-bottom:32px;padding-bottom:16px}.excalidraw .HelpDialog--btn{border:1px solid var(--link-color);padding:8px 32px;border-radius:4px}.excalidraw .HelpDialog--btn:hover{text-decoration:none}",""]);const a=o},1498:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .HintViewer{pointer-events:none;box-sizing:border-box;position:absolute;display:flex;justify-content:center;left:0;top:100%;max-width:100%;width:100%;margin-top:6px;text-align:center;color:#868e96;font-size:.8rem}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .HintViewer{position:static;padding-right:2em}}.excalidraw .HintViewer>span{padding:.2rem .4rem;background-color:var(--overlay-bg-color);border-radius:4px}",""]);const a=o},666:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .picker-container{display:inline-block;box-sizing:border-box;margin-right:.25rem}.excalidraw .picker{background:var(--popup-bg-color);border:0 solid rgba(255,255,255,.25);box-shadow:rgba(0,0,0,.25) 0 1px 4px;border-radius:4px;position:absolute}.excalidraw .picker-container button,.excalidraw .picker button{position:relative;display:flex;align-items:center;justify-content:center}.excalidraw .picker-container button:focus,.excalidraw .picker button:focus{outline:transparent;background-color:var(--button-gray-2)}.excalidraw .picker-container button:focus svg,.excalidraw .picker button:focus svg{opacity:1}.excalidraw .picker-container button:hover,.excalidraw .picker button:hover{background-color:var(--button-gray-2)}.excalidraw .picker-container button:active,.excalidraw .picker button:active{background-color:var(--button-gray-3)}.excalidraw .picker-container button:disabled,.excalidraw .picker button:disabled{cursor:not-allowed}.excalidraw .picker-container button svg,.excalidraw .picker button svg{margin:0;width:36px;height:18px;opacity:.6;pointer-events:none}.excalidraw .picker button{padding:.25rem .28rem .35rem .25rem}.excalidraw .picker-triangle{width:0;height:0;position:relative;top:-10px;z-index:10}:root[dir=ltr] .excalidraw .picker-triangle{left:12px}:root[dir=rtl] .excalidraw .picker-triangle{right:12px}.excalidraw .picker-triangle:before{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent rgba(0,0,0,.1);top:-1px}.excalidraw .picker-triangle:after{content:"";position:absolute;border-style:solid;border-width:0 9px 10px;border-color:transparent transparent var(--popup-bg-color)}.excalidraw .picker-content{padding:.5rem;display:grid;grid-auto-flow:column;grid-gap:.5rem;border-radius:4px}:root[dir=rtl] .excalidraw .picker-content{padding:.4rem}.excalidraw .picker-keybinding{position:absolute;bottom:2px;font-size:.7em;color:var(--keybinding-color)}:root[dir=ltr] .excalidraw .picker-keybinding{right:2px}:root[dir=rtl] .excalidraw .picker-keybinding{left:2px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .picker-keybinding{display:none}}.excalidraw .picker-type-canvasBackground .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementBackground .picker-keybinding{color:#fff}.excalidraw .picker-swatch[aria-label=transparent] .picker-keybinding{color:#aaa}.excalidraw .picker-type-elementStroke .picker-keybinding{color:#d4d4d4}.excalidraw.Appearance_dark .picker-type-elementBackground .picker-keybinding{color:#000}.excalidraw.Appearance_dark .picker-swatch[aria-label=transparent] .picker-keybinding{color:#000}',""]);const a=o},849:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .Island{--padding: 0;background-color:var(--island-bg-color);backdrop-filter:saturate(100%) blur(10px);box-shadow:var(--shadow-island);border-radius:4px;padding:calc(var(--padding) * var(--space-factor));position:relative;transition:box-shadow .5s ease-in-out}.excalidraw .Island.zen-mode{box-shadow:none}",""]);const a=o},6915:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .layer-ui__library{margin:auto;display:flex;align-items:center;justify-content:center}.excalidraw .layer-ui__library .layer-ui__library-header{display:flex;align-items:center;width:100%;margin:2px 0}.excalidraw .layer-ui__library .layer-ui__library-header button{margin:0 2px}.excalidraw .layer-ui__library .layer-ui__library-header a{margin-inline-start:auto;padding-inline-end:18px;white-space:nowrap}.excalidraw .layer-ui__library-message{padding:10px 20px;max-width:200px}.excalidraw .layer-ui__library-items{max-height:50vh;overflow:auto}.excalidraw .layer-ui__wrapper{z-index:var(--zIndex-layerUI)}.excalidraw .layer-ui__wrapper .encrypted-icon{position:relative;margin-inline-start:15px;display:flex;justify-content:center;align-items:center;border-radius:var(--space-factor);color:#2b8a3e}.excalidraw .layer-ui__wrapper .encrypted-icon svg{width:1.2rem;height:1.2rem}.excalidraw .layer-ui__wrapper__github-corner{top:0;position:absolute;width:40px}:root[dir=ltr] .excalidraw .layer-ui__wrapper__github-corner{right:0}:root[dir=rtl] .excalidraw .layer-ui__wrapper__github-corner{left:0}.excalidraw .layer-ui__wrapper__footer{position:absolute;z-index:100;bottom:0;width:190px}:root[dir=ltr] .excalidraw .layer-ui__wrapper__footer{right:0}:root[dir=rtl] .excalidraw .layer-ui__wrapper__footer{left:0}.excalidraw .layer-ui__wrapper .zen-mode-transition{transition:transform .5s ease-in-out}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(-999px, 0)}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-left{transform:translate(999px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.transition-right{transform:translate(-999px, 0)}:root[dir=ltr] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left{transform:translate(-92px, 0)}:root[dir=rtl] .excalidraw .layer-ui__wrapper .zen-mode-transition.App-menu_bottom--transition-left{transform:translate(92px, 0)}.excalidraw .layer-ui__wrapper .disable-zen-mode{height:30px;position:absolute;bottom:10px;font-size:10px;padding:10px;font-weight:500;opacity:0;visibility:hidden;transition:visibility 0s linear 0s,opacity .5s}[dir=ltr] .excalidraw .layer-ui__wrapper .disable-zen-mode{right:15px}[dir=rtl] .excalidraw .layer-ui__wrapper .disable-zen-mode{left:15px}.excalidraw .layer-ui__wrapper .disable-zen-mode--visible{opacity:1;visibility:visible;transition:visibility 0s linear 300ms,opacity .5s;transition-delay:.8s}",""]);const a=o},7030:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .library-unit{align-items:center;border:1px solid var(--button-gray-2);display:flex;justify-content:center;position:relative;width:63px;height:63px}.excalidraw .library-unit__dragger{display:flex;height:100%;width:100%}.excalidraw .library-unit__dragger>svg{filter:var(--appearance-filter);flex-grow:1;max-height:100%;max-width:100%}.excalidraw .library-unit__removeFromLibrary,.excalidraw .library-unit__removeFromLibrary:hover,.excalidraw .library-unit__removeFromLibrary:active{align-items:center;background:none;border:none;color:var(--icon-fill-color);display:flex;justify-content:center;margin:0;padding:0;position:absolute;right:5px;top:5px}.excalidraw .library-unit__removeFromLibrary>svg{height:16px;width:16px}.excalidraw .library-unit__pulse{transform:scale(1);animation:library-unit__pulse-animation 1s ease-in infinite}.excalidraw .library-unit__adder{position:absolute;left:50%;top:50%;width:20px;height:20px;margin-left:-10px;margin-top:-10px;pointer-events:none}.excalidraw .library-unit__active{cursor:pointer}@keyframes library-unit__pulse-animation{0%{transform:scale(0.95)}50%{transform:scale(1)}100%{transform:scale(0.95)}}",""]);const a=o},3994:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw.excalidraw-modal-container{position:absolute;z-index:10}.excalidraw .Modal{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;overflow:auto;padding:calc(var(--space-factor) * 10)}.excalidraw .Modal__background{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background-color:rgba(0,0,0,.3);backdrop-filter:blur(2px)}.excalidraw .Modal__content{position:relative;z-index:2;width:100%;max-width:var(--max-width);max-height:100%;opacity:0;transform:translateY(10px);animation:Modal__content_fade-in .1s ease-out .05s forwards;position:relative;overflow-y:auto;background:var(--island-bg-color);backdrop-filter:none;border:1px solid var(--dialog-border-color);box-shadow:0 2px 10px rgba(0,0,0,.25);border-radius:6px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Modal__content{max-width:100%;border:0;border-radius:0}}@keyframes Modal__content_fade-in{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.excalidraw .Modal__close{width:calc(var(--space-factor) * 7);height:calc(var(--space-factor) * 7);display:flex;align-items:center;justify-content:center}.excalidraw .Modal__close svg{height:calc(var(--space-factor) * 5)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .Modal{padding:0}.excalidraw .Modal__content{position:absolute;top:0;left:0;right:0;bottom:0}}",""]);const a=o},700:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .PasteChartDialog .Island{display:flex;flex-direction:column}}.excalidraw .PasteChartDialog .container{display:flex;align-items:center;justify-content:space-around;flex-wrap:wrap}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .PasteChartDialog .container{flex-direction:column;justify-content:center}}.excalidraw .PasteChartDialog .ChartPreview{margin:8px;text-align:center;width:192px;height:128px;border-radius:2px;padding:1px;border:1px solid #ced4da;display:flex;align-items:center;justify-content:center;background:transparent}.excalidraw .PasteChartDialog .ChartPreview div{display:inline-block}.excalidraw .PasteChartDialog .ChartPreview svg{max-height:120px;max-width:186px}.excalidraw .PasteChartDialog .ChartPreview:hover{padding:0;border:2px solid #339af0}",""]);const a=o},287:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .popover{position:fixed;z-index:10}",""]);const a=o},5657:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .Stack{--gap: 0;display:grid;gap:calc(var(--space-factor) * var(--gap))}.excalidraw .Stack_vertical{grid-template-columns:auto;grid-auto-flow:row;grid-auto-rows:min-content}.excalidraw .Stack_horizontal{grid-template-rows:auto;grid-auto-flow:column;grid-auto-columns:min-content}",""]);const a=o},7392:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Stats{position:absolute;top:64px;right:12px;font-size:12px;z-index:999}.excalidraw .Stats h3{margin:0 24px 8px 0;white-space:nowrap}.excalidraw .Stats .close{float:right;height:16px;width:16px;cursor:pointer}.excalidraw .Stats .close svg{width:100%;height:100%}.excalidraw .Stats table{width:100%}.excalidraw .Stats table th{border-bottom:1px solid var(--input-border-color);padding:4px}.excalidraw .Stats table tr td:nth-child(2){min-width:24px;text-align:right}:root[dir=rtl] .excalidraw .Stats{left:12px;right:initial}:root[dir=rtl] .excalidraw .Stats h3{margin:0 0 8px 24px}:root[dir=rtl] .excalidraw .Stats .close{float:left}",""]);const a=o},6065:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .TextInput{color:var(--text-primary-color);display:inline-block;border:1.5px solid var(--button-gray-1);line-height:1;padding:.75rem;white-space:nowrap;border-radius:var(--space-factor);background-color:var(--input-bg-color)}.excalidraw .TextInput:not(:focus):hover{background-color:var(--input-hover-bg-color)}.excalidraw .TextInput:focus{outline:none;box-shadow:0 0 0 2px var(--focus-highlight-color)}",""]);const a=o},83:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Toast{animation:fade-in .5s;background-color:var(--button-gray-1);border-radius:4px;bottom:10px;box-sizing:border-box;cursor:default;left:50%;margin-left:-150px;padding:4px 0;position:absolute;text-align:center;width:300px;z-index:999999}.excalidraw .Toast__message{color:var(--popup-text-color)}@keyframes fade-in{from{opacity:0}to{opacity:1}}",""]);const a=o},1554:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,":export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .ToolIcon{display:inline-flex;align-items:center;position:relative;font-family:Cascadia;cursor:pointer;background-color:var(--button-gray-1);-webkit-tap-highlight-color:transparent;border-radius:var(--space-factor)}.excalidraw .ToolIcon__icon{width:2.5rem;height:2.5rem;color:var(--icon-fill-color);display:flex;justify-content:center;align-items:center;border-radius:var(--space-factor)}.excalidraw .ToolIcon__icon svg{position:relative;height:1em;fill:var(--icon-fill-color);color:var(--icon-fill-color)}.excalidraw .ToolIcon__icon+.ToolIcon__label{margin-inline-start:0}.excalidraw .ToolIcon__label{color:var(--icon-fill-color);font-family:var(--ui-font);margin:0 .8em;text-overflow:ellipsis}.excalidraw .ToolIcon_size_s .ToolIcon__icon{width:1.4rem;height:1.4rem;font-size:.8em}.excalidraw .excalidraw .ToolIcon_type_button,.excalidraw .Modal .ToolIcon_type_button,.excalidraw .ToolIcon_type_button{padding:0;border:none;margin:0;font-size:inherit}.excalidraw .excalidraw .ToolIcon_type_button:hover,.excalidraw .Modal .ToolIcon_type_button:hover,.excalidraw .ToolIcon_type_button:hover{background-color:var(--button-gray-1)}.excalidraw .excalidraw .ToolIcon_type_button:active,.excalidraw .Modal .ToolIcon_type_button:active,.excalidraw .ToolIcon_type_button:active{background-color:var(--button-gray-2)}.excalidraw .excalidraw .ToolIcon_type_button:focus,.excalidraw .Modal .ToolIcon_type_button:focus,.excalidraw .ToolIcon_type_button:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .excalidraw .ToolIcon_type_button.ToolIcon--selected,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected,.excalidraw .ToolIcon_type_button.ToolIcon--selected{background-color:var(--button-gray-2)}.excalidraw .excalidraw .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .Modal .ToolIcon_type_button.ToolIcon--selected:active,.excalidraw .ToolIcon_type_button.ToolIcon--selected:active{background-color:var(--button-gray-3)}.excalidraw .excalidraw .ToolIcon_type_button--show,.excalidraw .Modal .ToolIcon_type_button--show,.excalidraw .ToolIcon_type_button--show{visibility:visible}.excalidraw .excalidraw .ToolIcon_type_button--hide,.excalidraw .Modal .ToolIcon_type_button--hide,.excalidraw .ToolIcon_type_button--hide{visibility:hidden}.excalidraw .ToolIcon_type_radio,.excalidraw .ToolIcon_type_checkbox{position:absolute;opacity:0;pointer-events:none}.excalidraw .ToolIcon_type_radio:not(.ToolIcon_toggle_opaque):checked+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:not(.ToolIcon_toggle_opaque):checked+.ToolIcon__icon{background-color:var(--button-gray-2)}.excalidraw .ToolIcon_type_radio:focus+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:focus+.ToolIcon__icon{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .ToolIcon_type_radio:active+.ToolIcon__icon,.excalidraw .ToolIcon_type_checkbox:active+.ToolIcon__icon{background-color:var(--button-gray-3)}.excalidraw .ToolIcon_type_floating{background-color:transparent}.excalidraw .ToolIcon_type_floating:hover{background-color:transparent}.excalidraw .ToolIcon_type_floating:active{background-color:transparent}.excalidraw .ToolIcon_type_floating:focus{box-shadow:none}.excalidraw .ToolIcon_type_floating .ToolIcon__icon{width:2rem;height:2em}.excalidraw .ToolIcon.ToolIcon__lock.ToolIcon_type_floating{margin-left:.1rem}.excalidraw .ToolIcon__keybinding{position:absolute;bottom:2px;right:3px;font-size:.5em;color:var(--keybinding-color);font-family:var(--ui-font);user-select:none}@media(max-width: 425px){.excalidraw .Shape .ToolIcon__icon{width:2rem;height:2rem}.excalidraw .Shape .ToolIcon__icon svg{height:.8em}}@media(max-width: 760px){.excalidraw .ToolIcon.ToolIcon__lock{display:inline-block;position:absolute;top:60px;right:-8px;margin-left:0;border-radius:20px 0 0 20px;z-index:1;background-color:var(--button-gray-1)}.excalidraw .ToolIcon.ToolIcon__lock:hover{background-color:var(--button-gray-1)}.excalidraw .ToolIcon.ToolIcon__lock:active{background-color:var(--button-gray-2)}.excalidraw .ToolIcon.ToolIcon__lock .ToolIcon__icon{border-radius:inherit}.excalidraw .ToolIcon.ToolIcon__lock svg{position:static}}.excalidraw .TooltipIcon{width:.9em;height:.9em;margin-left:5px;margin-top:1px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw .TooltipIcon{display:none}}:root[dir=ltr] .excalidraw .unlocked-icon{left:2px}:root[dir=rtl] .excalidraw .unlocked-icon{right:2px}",""]);const a=o},1970:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}.excalidraw .Tooltip{position:relative}.excalidraw .Tooltip__label{--arrow-size: 4px;visibility:hidden;background:#000;color:#fff;text-align:center;border-radius:6px;padding:8px;position:absolute;z-index:10;font-size:13px;line-height:1.5;font-weight:500;left:calc(50% + var(--arrow-size) / 2 - 1px);transform:translateX(-50%);word-wrap:break-word}.excalidraw .Tooltip__label::after{content:"";border:var(--arrow-size) solid transparent;position:absolute;left:calc(50% - var(--arrow-size))}.excalidraw .Tooltip__label--above{bottom:calc(100% + var(--arrow-size) + 3px)}.excalidraw .Tooltip__label--above::after{border-top-color:#000;top:100%}.excalidraw .Tooltip__label--below{top:calc(100% + var(--arrow-size) + 3px)}.excalidraw .Tooltip__label--below::after{border-bottom-color:#000;bottom:100%}.excalidraw .Tooltip:hover .Tooltip__label{visibility:visible}.excalidraw .Tooltip__label:hover{visibility:visible}',""]);const a=o},961:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".excalidraw .UserList{pointer-events:none;padding:var(--space-factor) 40px var(--space-factor) var(--space-factor);display:flex;flex-wrap:wrap;justify-content:flex-end}.excalidraw .UserList>*{pointer-events:all;margin:0 0 var(--space-factor) var(--space-factor)}.excalidraw .UserList_mobile{padding:0;justify-content:normal}.excalidraw .UserList_mobile>*{margin:0 var(--space-factor) var(--space-factor) 0}",""]);const a=o},4878:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,".visually-hidden{position:absolute !important;height:1px;width:1px;overflow:hidden;clip:rect(1px, 1px, 1px, 1px);white-space:nowrap}.LoadingMessage{position:absolute;top:0;right:0;bottom:0;left:0;z-index:999;display:flex;align-items:center;justify-content:center;pointer-events:none}.LoadingMessage span{background-color:var(--button-gray-1);border-radius:5px;padding:.8em 1.2em;color:var(--popup-text-color);font-size:1.3em}",""]);const a=o},1988:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,':export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}:export{isMobileQuery:(max-width: 600px), (max-height: 500px) and (max-width: 1000px);appearanceFilter:invert(93%) hue-rotate(180deg)}:root{--appearance-filter: none;--button-destructive-bg-color: #ffe3e3;--button-destructive-color: #c92a2a;--button-gray-1: #e9ecef;--button-gray-2: #ced4da;--button-gray-3: #adb5bd;--button-special-active-bg-color: #ebfbee;--dialog-border-color: #868e96;--dropdown-icon: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>\');--focus-highlight-color: #a5d8ff;--icon-fill-color: #000000;--icon-green-fill-color: #2b8a3e;--input-bg-color: #ffffff;--input-border-color: #dee2e6;--input-hover-bg-color: #f1f3f5;--input-label-color: #495057;--island-bg-color: rgba(255, 255, 255, 0.9);--keybinding-color: #adb5bd;--link-color: #1c7ed6;--overlay-bg-color: rgba(255, 255, 255, 0.88);--popup-bg-color: #ffffff;--popup-secondary-bg-color: #f1f3f5;--popup-text-color: #000000;--popup-text-inverted-color: #ffffff;--sab: env(safe-area-inset-bottom);--sal: env(safe-area-inset-left);--sar: env(safe-area-inset-right);--sat: env(safe-area-inset-top);--select-highlight-color: #339af0;--shadow-island: 0 1px 5px rgba(0, 0, 0, 0.15);--space-factor: 0.25rem;--text-primary-color: #343a40}.excalidraw.Appearance_dark{background:#000}.excalidraw.Appearance_dark.Appearance_dark-background-none{background:none}.excalidraw.Appearance_dark{--appearance-filter: invert(93%) hue-rotate(180deg);--button-destructive-bg-color: #5a0000;--button-destructive-color: #ffa8a8;--button-gray-1: #363636;--button-gray-2: #272727;--button-gray-3: #222;--button-special-active-bg-color: #204624;--dialog-border-color: #212529;--dropdown-icon: url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="292.4" height="292.4" viewBox="0 0 292 292"><path fill="%23ced4da" d="M287 197L159 69c-4-3-8-5-13-5s-9 2-13 5L5 197c-3 4-5 8-5 13s2 9 5 13c4 4 8 5 13 5h256c5 0 9-1 13-5s5-8 5-13-1-9-5-13z"/></svg>\');--focus-highlight-color: #228be6;--icon-fill-color: #ced4da;--icon-green-fill-color: #69db7c;--input-bg-color: #121212;--input-border-color: #2e2e2e;--input-hover-bg-color: #181818;--input-label-color: #e9ecef;--island-bg-color: #1e1e1e;--keybinding-color: #868e96;--overlay-bg-color: rgba(52, 58, 64, 0.12);--popup-bg-color: #2c2c2c;--popup-secondary-bg-color: #222;--popup-text-color: #ced4da;--popup-text-inverted-color: #2c2c2c;--select-highlight-color: #4dabf7;--shadow-island: 0 1px 5px rgba(0, 0, 0, 0.3);--text-primary-color: #ced4da}:root{--zIndex-canvas: 1;--zIndex-wysiwyg: 2;--zIndex-layerUI: 3}.excalidraw{color:var(--text-primary-color);display:flex;top:0;bottom:0;left:0;right:0}.excalidraw a{font-weight:500;text-decoration:none;color:var(--link-color)}.excalidraw a:hover{text-decoration:underline}.excalidraw canvas{touch-action:none;user-select:none;image-rendering:pixelated;image-rendering:-moz-crisp-edges;z-index:var(--zIndex-canvas)}.excalidraw.Appearance_dark canvas{filter:var(--appearance-filter)}.excalidraw .FixedSideContainer{padding-top:var(--sat, 0);padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0)}.excalidraw .panelRow{display:flex;justify-content:space-between}.excalidraw .panelColumn{display:flex;flex-direction:column}.excalidraw .panelColumn h3,.excalidraw .panelColumn legend,.excalidraw .panelColumn .control-label{margin-top:.333rem;margin-bottom:.333rem;font-size:.75rem;color:var(--text-primary-color);font-weight:bold;display:block}.excalidraw .panelColumn .control-label input{display:block;width:100%}.excalidraw .panelColumn h3:first-child,.excalidraw .panelColumn legend:first-child,.excalidraw .panelColumn .control-label:first-child{margin-top:0}.excalidraw .panelColumn legend{padding:0}.excalidraw .panelColumn .iconSelectList{flex-wrap:wrap;position:relative}.excalidraw .panelColumn .buttonList{flex-wrap:wrap}.excalidraw .panelColumn .buttonList label{margin-right:.25rem;font-size:.75rem;display:inline-block}.excalidraw .panelColumn .buttonList input[type=radio],.excalidraw .panelColumn .buttonList input[type=button]{opacity:0;position:absolute;pointer-events:none}.excalidraw .panelColumn .buttonList .iconRow{margin-top:8px}.excalidraw .panelColumn .buttonList .ToolIcon{margin:0;margin-inline-end:8px}.excalidraw .panelColumn .buttonList .ToolIcon:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .panelColumn .buttonList .ToolIcon:hover{background-color:var(--button-gray-2)}.excalidraw .panelColumn .buttonList .ToolIcon:active{background-color:var(--button-gray-3)}.excalidraw .panelColumn .buttonList .ToolIcon:disabled{cursor:not-allowed}.excalidraw .panelColumn .buttonList .ToolIcon__icon{width:28px;height:28px}.excalidraw .panelColumn fieldset{margin:0;margin-top:.333rem;padding:0;border:none}.excalidraw .divider{width:1px;background-color:#e9ecef;margin:1px}.excalidraw .buttonList label:focus-within,.excalidraw input:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw button,.excalidraw .buttonList label{user-select:none;background-color:var(--button-gray-1);border:0;border-radius:4px;margin:.125rem 0;padding:.25rem;white-space:nowrap;cursor:pointer}.excalidraw button:focus,.excalidraw .buttonList label:focus{outline:transparent;box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw button:hover,.excalidraw .buttonList label:hover{background-color:var(--button-gray-2)}.excalidraw button:active,.excalidraw .buttonList label:active{background-color:var(--button-gray-3)}.excalidraw button:disabled,.excalidraw .buttonList label:disabled{cursor:not-allowed}.excalidraw .active,.excalidraw .buttonList label.active{background-color:var(--button-gray-2)}.excalidraw .active:hover,.excalidraw .buttonList label.active:hover{background-color:var(--button-gray-2)}.excalidraw .active:active,.excalidraw .buttonList label.active:active{background-color:var(--button-gray-3)}.excalidraw .buttonList.buttonListIcon label{display:inline-flex;justify-content:center;align-items:center}.excalidraw .buttonList.buttonListIcon label svg{width:36px;height:18px;opacity:.6}.excalidraw .buttonList.buttonListIcon label.active svg{opacity:1}.excalidraw .App-top-bar{z-index:var(--zIndex-layerUI);display:flex;flex-direction:column;align-items:center}.excalidraw .App-bottom-bar{position:absolute;top:0;bottom:0;left:0;right:0;--bar-padding: calc(4 * var(--space-factor));padding-top:max(var(--bar-padding), var(--sat,0));padding-right:var(--sar, 0);padding-bottom:var(--sab, 0);padding-left:var(--sal, 0);z-index:4;display:flex;align-items:flex-end;pointer-events:none}.excalidraw .App-bottom-bar>.Island{width:100%;max-width:100%;min-width:100%;box-sizing:border-box;max-height:100%;display:flex;flex-direction:column;pointer-events:initial}.excalidraw .App-bottom-bar>.Island .panelColumn{padding:8px 8px 0 8px}.excalidraw .App-toolbar{width:100%;box-sizing:border-box}.excalidraw .App-toolbar-content{display:flex;align-items:center;justify-content:space-between;padding:8px}.excalidraw .App-mobile-menu{width:100%;overflow-x:visible;overflow-y:auto;box-sizing:border-box;margin-bottom:var(--bar-padding)}.excalidraw .App-menu{display:grid;color:var(--icon-fill-color)}.excalidraw .App-menu_top{grid-template-columns:1fr auto 1fr;grid-gap:4px;align-items:flex-start;cursor:default;pointer-events:none !important}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_top>*{pointer-events:all}.excalidraw .App-menu_top>*:first-child{justify-self:flex-start}.excalidraw .App-menu_top>*:last-child{justify-self:flex-end}.excalidraw .App-menu_bottom{position:absolute;bottom:0;grid-template-columns:1fr auto 1fr;grid-gap:4px;align-items:flex-start;cursor:default;pointer-events:none !important;z-index:100}:root[dir=ltr] .excalidraw .App-menu_bottom{left:.25rem}:root[dir=rtl] .excalidraw .App-menu_bottom{right:.25rem}.excalidraw .App-menu_bottom--transition-left section{width:185px}.excalidraw .App-menu_bottom section{display:flex}.excalidraw .layer-ui__wrapper:not(.disable-pointerEvents) .App-menu_bottom>*{pointer-events:all}.excalidraw .App-menu_bottom>*:first-child{justify-self:flex-start}.excalidraw .App-menu_bottom>*:last-child{justify-self:flex-end}.excalidraw .App-menu_left{grid-template-rows:1fr auto 1fr;height:100%}.excalidraw .App-menu_right{grid-template-rows:1fr;height:100%}.excalidraw .App-menu__left{overflow-y:auto}.excalidraw .dropdown-select{height:1.5rem;padding:0;padding-inline-start:.5rem;padding-inline-end:1.5rem;color:var(--icon-fill-color);background-color:var(--button-gray-1);border-radius:var(--space-factor);border:1px solid var(--button-gray-2);font-size:.8rem;outline:none;appearance:none;background-image:var(--dropdown-icon);background-repeat:no-repeat;background-position:right .7rem top 50%,0 0;background-size:.65em auto,100%}:root[dir=rtl] .excalidraw .dropdown-select{background-position:left .7rem top 50%,0 0}.excalidraw .dropdown-select:focus{box-shadow:0 0 0 2px var(--focus-highlight-color)}.excalidraw .dropdown-select:hover{background-color:var(--button-gray-2)}.excalidraw .dropdown-select:active{background-color:var(--button-gray-2)}.excalidraw .dropdown-select.dropdown-select--floating{position:absolute;margin:.5em}.excalidraw .dropdown-select__language.dropdown-select--floating{position:absolute;bottom:10px}:root[dir=ltr] .excalidraw .dropdown-select__language.dropdown-select--floating{right:44px}:root[dir=rtl] .excalidraw .dropdown-select__language.dropdown-select--floating{left:44px}.excalidraw .zIndexButton{margin:0;margin-inline-end:8px;padding:5px;display:inline-flex;align-items:center;justify-content:center}.excalidraw .zIndexButton svg{width:18px;height:18px}.excalidraw .scroll-back-to-content{color:var(--popup-text-color);position:absolute;left:50%;bottom:30px;transform:translateX(-50%);padding:10px 20px}.excalidraw .help-icon{position:absolute;cursor:pointer;fill:#868e96;bottom:14px;width:1.5rem}:root[dir=ltr] .excalidraw .help-icon{right:14px}:root[dir=rtl] .excalidraw .help-icon{left:14px}@media(max-width: 600px),(max-height: 500px)and (max-width: 1000px){.excalidraw aside{display:none}.excalidraw .scroll-back-to-content{bottom:calc(80px + var(--sab, 0));z-index:-1}}:root[dir=rtl] .excalidraw .rtl-mirror{transform:scaleX(-1)}.excalidraw .github-corner{position:absolute;top:0;z-index:2}:root[dir=ltr] .excalidraw .github-corner{right:0}:root[dir=rtl] .excalidraw .github-corner{left:0}.excalidraw .zen-mode-visibility{visibility:visible;opacity:1;height:auto;width:auto;transition:opacity .5s}.excalidraw .zen-mode-visibility.zen-mode-visibility--hidden{visibility:hidden;opacity:0;height:0;width:0;transition:opacity .5s}.excalidraw .disable-pointerEvents{pointer-events:none !important}.excalidraw.excalidraw--view-mode .App-menu{display:flex;justify-content:space-between}@media print{.excalidraw .App-bottom-bar,.excalidraw .FixedSideContainer,.excalidraw .layer-ui__wrapper{display:none}}.ErrorSplash.excalidraw{min-height:100vh;padding:20px 0;overflow:auto;display:flex;align-items:center;justify-content:center;user-select:text}.ErrorSplash.excalidraw .ErrorSplash-messageContainer{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;background-color:#ffe3e3;border:3px solid #c92a2a}.ErrorSplash.excalidraw .ErrorSplash-paragraph{margin:15px 0;max-width:600px}.ErrorSplash.excalidraw .ErrorSplash-paragraph.align-center{text-align:center}.ErrorSplash.excalidraw .bigger,.ErrorSplash.excalidraw .bigger button{font-size:1.1em}.ErrorSplash.excalidraw .smaller,.ErrorSplash.excalidraw .smaller button{font-size:.9em}.ErrorSplash.excalidraw .ErrorSplash-details{display:flex;flex-direction:column;align-items:flex-start}.ErrorSplash.excalidraw .ErrorSplash-details textarea{width:100%;margin:10px 0;font-family:"Cascadia";font-size:.8em}',""]);const a=o},3245:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var r=n(3645),o=n.n(r)()(function(e){return e[1]});o.push([e.id,"",""]),o.locals={isMobileQuery:"(max-width: 600px), (max-height: 500px) and (max-width: 1000px)",appearanceFilter:"invert(93%) hue-rotate(180deg)"};const a=o},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n}).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var a=0;a<this.length;a++){var i=this[a][0];null!=i&&(o[i]=!0)}for(var l=0;l<e.length;l++){var c=[].concat(e[l]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},1667:function(e){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},9638:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=n.p+"excalidraw-assets/Cascadia.woff2"},7628:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const r=n.p+"excalidraw-assets/FG_Virgil.woff2"},8288:function(e,t,n){"use strict";n.d(t,{iC:function(){return i},f:function(){return l},qx:function(){return c},Iw:function(){return s},$e:function(){return u},wZ:function(){return d},ay:function(){return p},oc:function(){return f},Oh:function(){return h},Ks:function(){return r},Vi:function(){return m},$C:function(){return g},ut:function(){return v},_D:function(){return b},n5:function(){return y},rk:function(){return w},Hg:function(){return x},hs:function(){return E},eQ:function(){return k},k:function(){return S},LO:function(){return C},I:function(){return O},Gj:function(){return M},nM:function(){return I},Lg:function(){return P},HM:function(){return T},V4:function(){return A},EH:function(){return _},Gi:function(){return L}});var r,o=n(2189),a=n.n(o),i="Excalidraw",l=10,c=8,s=5,u=1,d=30,p=Math.PI/12,f={TEXT:"text",CROSSHAIR:"crosshair",GRABBING:"grabbing",POINTER:"pointer",MOVE:"move",AUTO:""},h={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1};!function(e){e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll"}(r||(r={}));var m={TEST:"test",DEVELOPMENT:"development"},g={SHAPE_ACTIONS_MENU:"App-menu__left"},v={1:"Virgil",2:"Helvetica",3:"Cascadia"},b="Segoe UI Emoji",y=20,w=1,x="left",E="top",k="{version}",S=20,C={excalidraw:"application/vnd.excalidraw+json",excalidrawlib:"application/vnd.excalidrawlib+json"},O={LOCAL_STORAGE_LIBRARY:"excalidraw-library"},M=300,I=500,P=5e3,T=500,A=.1,_={VIEW:"viewMode",ZEN:"zenMode",GRID:"gridMode"},L=a().appearanceFilter},8835:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return Kd},defaultLang:function(){return E},getElementMap:function(){return ua},getSceneVersion:function(){return da},getSyncableElements:function(){return sa},languages:function(){return S},restore:function(){return Cc},restoreAppState:function(){return Sc},restoreElements:function(){return kc}});var i=a(7154),l=a.n(i),c=a(6479),d=a.n(c),h=a(4698),m=a.n(h),g=a(8288);JSON.parse('{"u2":"@cpmdevops/whiteboard","i8":"0.1.3"}'),"production"!==g.Vi.TEST&&(a.p=window.EXCALIDRAW_ASSET_PATH||"/");var b=a(5374),y=a.n(b),w=a(2829),x=a(2051),E={code:"en",label:"English"},S=[{code:"ar-SA",label:"",rtl:!0},{code:"bg-BG",label:""},{code:"ca-ES",label:"Catal"},{code:"de-DE",label:"Deutsch"},{code:"el-GR",label:""},{code:"es-ES",label:"Espaol"},{code:"fa-IR",label:"",rtl:!0},{code:"fi-FI",label:"Suomi"},{code:"fr-FR",label:"Franais"},{code:"he-IL",label:"",rtl:!0},{code:"hi-IN",label:""},{code:"hu-HU",label:"Magyar"},{code:"id-ID",label:"Bahasa Indonesia"},{code:"it-IT",label:"Italiano"},{code:"ja-JP",label:""},{code:"kab-KAB",label:"Taqbaylit"},{code:"ko-KR",label:""},{code:"my-MM",label:"Burmese"},{code:"nb-NO",label:"Norsk bokml"},{code:"nl-NL",label:"Nederlands"},{code:"nn-NO",label:"Norsk nynorsk"},{code:"pa-IN",label:""},{code:"pl-PL",label:"Polski"},{code:"pt-BR",label:"Portugus Brasileiro"},{code:"pt-PT",label:"Portugus"},{code:"ro-RO",label:"Romn"},{code:"ru-RU",label:""},{code:"sk-SK",label:"Slovenina"},{code:"sv-SE",label:"Svenska"},{code:"tr-TR",label:"Trke"},{code:"uk-UA",label:""},{code:"zh-CN",label:""},{code:"zh-TW",label:""}].concat([E]).sort(function(e,t){return e.label>t.label?1:-1}).filter(function(e){return x[e.code]>=85}),C="__test__";"production"===g.Vi.DEVELOPMENT&&S.unshift({code:C,label:"test language"},{code:"".concat(C,".rtl"),label:"test language (rtl)",rtl:!0});var O,M=E,I={},P=function(){var e=y()(function(e){return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(t){switch(t.label){case 0:return M=e,document.documentElement.dir=M.rtl?"rtl":"ltr",document.documentElement.lang=M.code,e.code.startsWith(C)?(I={},[3,3]):[3,1];case 1:return[4,a(788)("./".concat(M.code,".json"))];case 2:I=t.sent(),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),T=function(){return M},A=function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(void 0===e[r])return;e=e[r]}if("string"==typeof e)return e},_=function(e,t){if(M.code.startsWith(C)){var n=t?"".concat(e,"(").concat(JSON.stringify(t).slice(1,-1),")"):e;return"[[".concat(n,"]]")}var r=e.split("."),o=A(I,r)||A(w,r);if(void 0===o)throw new Error("Can't find translation for ".concat(e));if(t)for(var a in t)o=o.replace("{{".concat(a,"}}"),t[a]);return o},L=function(){return m().createElement("div",{className:"LoadingMessage"},m().createElement("span",null,_("labels.loadingScene")))},D=(O=function(e,t){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}O(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),j=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,o=this;return r=o=e.apply(this,t)||this,o.state={isLoading:!0},r}return D(t,e),t.prototype.componentDidMount=function(){var e=this;return y()(function(){var t;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(n){switch(n.label){case 0:return t=S.find(function(t){return t.code===e.props.langCode})||E,[4,P(t)];case 1:return n.sent(),e.setState({isLoading:!1}),[2]}})})()},t.prototype.render=function(){return this.state.isLoading?m().createElement(L,null):this.props.children},t}(m().Component),z=a(566),B=a.n(z);function H(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function N(e,t,n){const r=H(t,n);if(0===r)return H(e,t);let o=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return H(e,R(t,n,o=Math.max(0,Math.min(1,o))))}function R(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function F(e,t,n,r){const o=r||[];if(function(e,t){const n=e[t+0],r=e[t+1],o=e[t+2],a=e[t+3];let i=3*r[0]-2*n[0]-a[0];i*=i;let l=3*r[1]-2*n[1]-a[1];l*=l;let c=3*o[0]-2*a[0]-n[0];c*=c;let s=3*o[1]-2*a[1]-n[1];return i<c&&(i=c),l<(s*=s)&&(l=s),i+l}(e,t)<n){const n=e[t+0];o.length?(a=o[o.length-1],i=n,Math.sqrt(H(a,i))>1&&o.push(n)):o.push(n),o.push(e[t+3])}else{const r=.5,a=e[t+0],i=e[t+1],l=e[t+2],c=e[t+3],s=R(a,i,r),u=R(i,l,r),d=R(l,c,r),p=R(s,u,r),f=R(u,d,r),h=R(p,f,r);F([a,s,p,h],0,n,o),F([h,f,d,c],0,n,o)}var a,i;return o}function W(e,t){return G(e,0,e.length,t)}function G(e,t,n,r,o){const a=o||[],i=e[t],l=e[n-1];let c=0,s=1;for(let u=t+1;u<n-1;++u){const t=N(e[u],i,l);t>c&&(c=t,s=u)}return Math.sqrt(c)>r?(G(e,t,s+1,r,a),G(e,s,n,r,a)):(a.length||a.push(i),a.push(l)),a}function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,n=arguments.length>2?arguments[2]:void 0;const r=[],o=(e.length-1)/3;for(let a=0;a<o;a++)F(e,3*a,t,r);return n&&n>0?G(r,0,r.length,n):r}function K(e,t,n){if(e&&e.length){const r=v(t,2),o=r[0],a=r[1],i=Math.PI/180*n,l=Math.cos(i),c=Math.sin(i);e.forEach(function(e){const t=v(e,2),n=t[0],r=t[1];e[0]=(n-o)*l-(r-a)*c+o,e[1]=(n-o)*c+(r-a)*l+a})}}function Y(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}function U(e,t,n,r){const o=t[1]-e[1],a=e[0]-t[0],i=o*e[0]+a*e[1],l=r[1]-n[1],c=n[0]-r[0],s=l*n[0]+c*n[1],u=o*c-l*a;return u?[(c*i-a*s)/u,(o*s-l*i)/u]:null}function X(e,t,n){const r=e.length;if(r<3)return!1;const o=[Number.MAX_SAFE_INTEGER,n],a=[t,n];let i=0;for(let l=0;l<r;l++){const t=e[l],n=e[(l+1)%r];if(Q(t,n,a,o)){if(0===q(t,a,n))return Z(t,a,n);i++}}return i%2==1}function Z(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])}function q(e,t,n){const r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2}function Q(e,t,n,r){const o=q(e,t,n),a=q(e,t,r),i=q(n,r,e),l=q(n,r,t);return o!==a&&i!==l||!(0!==o||!Z(e,n,t))||!(0!==a||!Z(e,r,t))||!(0!==i||!Z(n,e,r))||!(0!==l||!Z(n,t,r))}function $(e,t){const n=[0,0],r=Math.round(t.hachureAngle+90);r&&K(e,n,r);const o=function(e,t){const n=f(e);n[0].join(",")!==n[n.length-1].join(",")&&n.push([n[0][0],n[0][1]]);const r=[];if(n&&n.length>2){let e=t.hachureGap;e<0&&(e=4*t.strokeWidth),e=Math.max(e,.1);const o=[];for(let t=0;t<n.length-1;t++){const e=n[t],r=n[t+1];if(e[1]!==r[1]){const t=Math.min(e[1],r[1]);o.push({ymin:t,ymax:Math.max(e[1],r[1]),x:t===e[1]?e[0]:r[0],islope:(r[0]-e[0])/(r[1]-e[1])})}}if(o.sort(function(e,t){return e.ymin<t.ymin?-1:e.ymin>t.ymin?1:e.x<t.x?-1:e.x>t.x?1:e.ymax===t.ymax?0:(e.ymax-t.ymax)/Math.abs(e.ymax-t.ymax)}),!o.length)return r;let a=[],i=o[0].ymin;for(;a.length||o.length;){if(o.length){let e=-1;for(let t=0;t<o.length&&!(o[t].ymin>i);t++)e=t;o.splice(0,e+1).forEach(function(e){a.push({s:i,edge:e})})}if((a=a.filter(function(e){return!(e.edge.ymax<=i)})).sort(function(e,t){return e.edge.x===t.edge.x?0:(e.edge.x-t.edge.x)/Math.abs(e.edge.x-t.edge.x)}),a.length>1)for(let e=0;e<a.length;e+=2){const t=e+1;if(t>=a.length)break;const n=a[e].edge,o=a[t].edge;r.push([[Math.round(n.x),i],[Math.round(o.x),i]])}i+=e,a.forEach(function(t){t.edge.x=t.edge.x+e*t.edge.islope})}}return r}(e,t);return r&&(K(e,n,-r),function(e,t,n){const r=[];o.forEach(function(e){return r.push.apply(r,f(e))}),K(r,t,n)}(0,n,-r)),o}let J=function(){function e(t){u(this,e),this.helper=t}return p(e,[{key:"fillPolygon",value:function(e,t){return this._fillPolygon(e,t)}},{key:"_fillPolygon",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$(e,t);if(n){const t=this.connectingLines(e,r);r=r.concat(t)}return{type:"fillSketch",ops:this.renderLines(r,t)}}},{key:"renderLines",value:function(e,t){const n=[];var r,o=s(e);try{for(o.s();!(r=o.n()).done;){const e=r.value;n.push.apply(n,f(this.helper.doubleLineOps(e[0][0],e[0][1],e[1][0],e[1][1],t)))}}catch(a){o.e(a)}finally{o.f()}return n}},{key:"connectingLines",value:function(e,t){const n=[];if(t.length>1)for(let r=1;r<t.length;r++){const o=t[r-1];if(Y(o)<3)continue;const a=[t[r][0],o[1]];if(Y(a)>3){const t=this.splitOnIntersections(e,a);n.push.apply(n,f(t))}}return n}},{key:"midPointInPolygon",value:function(e,t){return X(e,(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2)}},{key:"splitOnIntersections",value:function(e,t){const n=Math.max(5,.1*Y(t)),r=[];for(let o=0;o<e.length;o++){const a=e[o],i=e[(o+1)%e.length];if(Q.apply(void 0,[a,i].concat(f(t)))){const e=U(a,i,t[0],t[1]);if(e){const o=Y([e,t[0]]),a=Y([e,t[1]]);o>n&&a>n&&r.push({point:e,distance:o})}}}if(r.length>1){const n=r.sort(function(e,t){return e.distance-t.distance}).map(function(e){return e.point});if(X.apply(void 0,[e].concat(f(t[0])))||n.shift(),X.apply(void 0,[e].concat(f(t[1])))||n.pop(),n.length<=1)return this.midPointInPolygon(e,t)?[t]:[];const o=[t[0]].concat(f(n),[t[1]]),a=[];for(let t=0;t<o.length-1;t+=2){const n=[o[t],o[t+1]];this.midPointInPolygon(e,n)&&a.push(n)}return a}return this.midPointInPolygon(e,t)?[t]:[]}}]),e}(),ee=function(e){n(r,J);var t=o(r);function r(){return u(this,r),t.apply(this,arguments)}return p(r,[{key:"fillPolygon",value:function(e,t){return this._fillPolygon(e,t,!0)}}]),r}(),te=function(e){n(r,J);var t=o(r);function r(){return u(this,r),t.apply(this,arguments)}return p(r,[{key:"fillPolygon",value:function(e,t){const n=this._fillPolygon(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),o=this._fillPolygon(e,r);return n.ops=n.ops.concat(o.ops),n}}]),r}(),ne=function(){function e(t){u(this,e),this.helper=t}return p(e,[{key:"fillPolygon",value:function(e,t){const n=$(e,t=Object.assign({},t,{curveStepCount:4,hachureAngle:0,roughness:1}));return this.dotsOnLines(n,t)}},{key:"dotsOnLines",value:function(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let o=t.fillWeight;o<0&&(o=t.strokeWidth/2);const a=r/4;var i,l=s(e);try{for(l.s();!(i=l.n()).done;){const e=i.value,l=Y(e),c=l/r,s=Math.ceil(c)-1,u=l-s*r,d=(e[0][0]+e[1][0])/2-r/4,p=Math.min(e[0][1],e[1][1]);for(let i=0;i<s;i++){const e=p+u+i*r,l=this.helper.randOffsetWithRange(d-a,d+a,t),c=this.helper.randOffsetWithRange(e-a,e+a,t),s=this.helper.ellipse(l,c,o,o,t);n.push.apply(n,f(s.ops))}}}catch(c){l.e(c)}finally{l.f()}return{type:"fillSketch",ops:n}}}]),e}(),re=function(){function e(t){u(this,e),this.helper=t}return p(e,[{key:"fillPolygon",value:function(e,t){const n=$(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}},{key:"dashedLine",value:function(e,t){var n=this;const r=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,o=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,a=[];return e.forEach(function(e){const i=Y(e),l=Math.floor(i/(r+o)),c=(i+o-l*(r+o))/2;let s=e[0],u=e[1];s[0]>u[0]&&(s=e[1],u=e[0]);const d=Math.atan((u[1]-s[1])/(u[0]-s[0]));for(let p=0;p<l;p++){const e=p*(r+o),i=e+r,l=[s[0]+e*Math.cos(d)+c*Math.cos(d),s[1]+e*Math.sin(d)+c*Math.sin(d)],u=[s[0]+i*Math.cos(d)+c*Math.cos(d),s[1]+i*Math.sin(d)+c*Math.sin(d)];a.push.apply(a,f(n.helper.doubleLineOps(l[0],l[1],u[0],u[1],t)))}}),a}}]),e}(),oe=function(){function e(t){u(this,e),this.helper=t}return p(e,[{key:"fillPolygon",value:function(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,o=$(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(o,r,t)}}},{key:"zigzagLines",value:function(e,t,n){var r=this;const o=[];return e.forEach(function(e){const a=Y(e),i=Math.round(a/(2*t));let l=e[0],c=e[1];l[0]>c[0]&&(l=e[1],c=e[0]);const s=Math.atan((c[1]-l[1])/(c[0]-l[0]));for(let u=0;u<i;u++){const e=2*u*t,a=2*(u+1)*t,i=Math.sqrt(2*Math.pow(t,2)),c=[l[0]+e*Math.cos(s),l[1]+e*Math.sin(s)],d=[l[0]+a*Math.cos(s),l[1]+a*Math.sin(s)],p=[c[0]+i*Math.cos(s+Math.PI/4),c[1]+i*Math.sin(s+Math.PI/4)];o.push.apply(o,f(r.helper.doubleLineOps(c[0],c[1],p[0],p[1],n)).concat(f(r.helper.doubleLineOps(p[0],p[1],d[0],d[1],n))))}}),o}}]),e}();const ae={};let ie=function(){function e(t){u(this,e),this.seed=t}return p(e,[{key:"next",value:function(){return this.seed?(Math.pow(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Math.pow(2,31):Math.random()}}]),e}();const le={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ce(e,t){return e.type===t}function se(e){const t=[],n=function(e){const t=new Array;for(;""!==e;)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:0,text:RegExp.$1},e=e.substr(RegExp.$1.length);else{if(!e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];t[t.length]={type:1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length)}return t[t.length]={type:2,text:""},t}(e);let r="BOD",o=0,a=n[o];for(;!ce(a,2);){let i=0;const l=[];if("BOD"===r){if("M"!==a.text&&"m"!==a.text)return se("M0,0"+e);o++,i=le[a.text],r=a.text}else ce(a,1)?i=le[r]:(o++,i=le[a.text],r=a.text);if(!(o+i<n.length))throw new Error("Path data ended short");for(let e=o;e<o+i;e++){const t=n[e];if(!ce(t,1))throw new Error("Param not a number: "+r+","+t.text);l[l.length]=+t.text}if("number"!=typeof le[r])throw new Error("Bad segment: "+r);{const e={key:r,data:l};t.push(e),a=n[o+=i],"M"===r&&(r="L"),"m"===r&&(r="l")}}return t}function ue(e){var t,n,r;let o=0,a=0,i=0,l=0;const c=[];var u,d=s(e);try{for(d.s();!(u=d.n()).done;){const e=u.value,s=e.key,d=e.data;switch(s){case"M":c.push({key:"M",data:f(d)}),t=v(d,2),o=t[0],a=t[1],i=(n=v(d,2))[0],l=n[1];break;case"m":o+=d[0],a+=d[1],c.push({key:"M",data:[o,a]}),i=o,l=a;break;case"L":c.push({key:"L",data:f(d)}),r=v(d,2),o=r[0],a=r[1];break;case"l":o+=d[0],a+=d[1],c.push({key:"L",data:[o,a]});break;case"C":c.push({key:"C",data:f(d)}),o=d[4],a=d[5];break;case"c":{const e=d.map(function(e,t){return t%2?e+a:e+o});c.push({key:"C",data:e}),o=e[4],a=e[5];break}case"Q":c.push({key:"Q",data:f(d)}),o=d[2],a=d[3];break;case"q":{const e=d.map(function(e,t){return t%2?e+a:e+o});c.push({key:"Q",data:e}),o=e[2],a=e[3];break}case"A":c.push({key:"A",data:f(d)}),o=d[5],a=d[6];break;case"a":o+=d[5],a+=d[6],c.push({key:"A",data:[d[0],d[1],d[2],d[3],d[4],o,a]});break;case"H":c.push({key:"H",data:f(d)}),o=d[0];break;case"h":o+=d[0],c.push({key:"H",data:[o]});break;case"V":c.push({key:"V",data:f(d)}),a=d[0];break;case"v":a+=d[0],c.push({key:"V",data:[a]});break;case"S":c.push({key:"S",data:f(d)}),o=d[2],a=d[3];break;case"s":{const e=d.map(function(e,t){return t%2?e+a:e+o});c.push({key:"S",data:e}),o=e[2],a=e[3];break}case"T":c.push({key:"T",data:f(d)}),o=d[0],a=d[1];break;case"t":o+=d[0],a+=d[1],c.push({key:"T",data:[o,a]});break;case"Z":case"z":c.push({key:"Z",data:[]}),o=i,a=l}}}catch(p){d.e(p)}finally{d.f()}return c}function de(e){var t,n,r;const o=[];let a="",i=0,l=0,c=0,u=0,d=0,p=0;var h,m=s(e);try{for(m.s();!(h=m.n()).done;){const e=h.value,s=e.key,m=e.data;switch(s){case"M":o.push({key:"M",data:f(m)}),i=(t=v(m,2))[0],l=t[1],c=(n=v(m,2))[0],u=n[1];break;case"C":o.push({key:"C",data:f(m)}),i=m[4],l=m[5],d=m[2],p=m[3];break;case"L":o.push({key:"L",data:f(m)}),i=(r=v(m,2))[0],l=r[1];break;case"H":i=m[0],o.push({key:"L",data:[i,l]});break;case"V":l=m[0],o.push({key:"L",data:[i,l]});break;case"S":{let e=0,t=0;"C"===a||"S"===a?(e=i+(i-d),t=l+(l-p)):(e=i,t=l),o.push({key:"C",data:[e,t].concat(f(m))}),d=m[0],p=m[1],i=m[2],l=m[3];break}case"T":{const e=v(m,2),t=e[0],n=e[1];let r=0,c=0;"Q"===a||"T"===a?(r=i+(i-d),c=l+(l-p)):(r=i,c=l);const s=i+2*(r-i)/3,u=l+2*(c-l)/3,f=t+2*(r-t)/3,h=n+2*(c-n)/3;o.push({key:"C",data:[s,u,f,h,t,n]}),d=r,p=c,i=t,l=n;break}case"Q":{const e=v(m,4),t=e[0],n=e[1],r=e[2],a=e[3],c=i+2*(t-i)/3,s=l+2*(n-l)/3,u=r+2*(t-r)/3,f=a+2*(n-a)/3;o.push({key:"C",data:[c,s,u,f,r,a]}),d=t,p=n,i=r,l=a;break}case"A":{const e=Math.abs(m[0]),t=Math.abs(m[1]),n=m[2],r=m[3],a=m[4],c=m[5],s=m[6];0===e||0===t?(o.push({key:"C",data:[i,l,c,s,c,s]}),i=c,l=s):i===c&&l===s||(fe(i,l,c,s,e,t,n,r,a).forEach(function(e){o.push({key:"C",data:e})}),i=c,l=s);break}case"Z":o.push({key:"Z",data:[]}),i=c,l=u}a=s}}catch(g){m.e(g)}finally{m.f()}return o}function pe(e,t,n){return[e*Math.cos(n)-t*Math.sin(n),e*Math.sin(n)+t*Math.cos(n)]}function fe(e,t,n,r,o,a,i,l,c,s){const u=(d=i,Math.PI*d/180);var d;let p=[],f=0,h=0,m=0,g=0;if(s){var b=v(s,4);f=b[0],h=b[1],m=b[2],g=b[3]}else{var y,w;e=(y=v(pe(e,t,-u),2))[0],t=y[1];const i=(e-(n=(w=v(pe(n,r,-u),2))[0]))/2,s=(t-(r=w[1]))/2;let d=i*i/(o*o)+s*s/(a*a);d>1&&(o*=d=Math.sqrt(d),a*=d);const p=o*o,b=a*a,x=p*b-p*s*s-b*i*i,E=p*s*s+b*i*i,k=(l===c?-1:1)*Math.sqrt(Math.abs(x/E));m=k*o*s/a+(e+n)/2,g=k*-a*i/o+(t+r)/2,f=Math.asin(parseFloat(((t-g)/a).toFixed(9))),h=Math.asin(parseFloat(((r-g)/a).toFixed(9))),e<m&&(f=Math.PI-f),n<m&&(h=Math.PI-h),f<0&&(f=2*Math.PI+f),h<0&&(h=2*Math.PI+h),c&&f>h&&(f-=2*Math.PI),!c&&h>f&&(h-=2*Math.PI)}let x=h-f;if(Math.abs(x)>120*Math.PI/180){const e=h,t=n,l=r;h=c&&h>f?f+120*Math.PI/180*1:f+120*Math.PI/180*-1,p=fe(n=m+o*Math.cos(h),r=g+a*Math.sin(h),t,l,o,a,i,0,c,[h,e,m,g])}x=h-f;const E=Math.cos(f),k=Math.sin(f),S=Math.cos(h),C=Math.sin(h),O=Math.tan(x/4),M=4/3*o*O,I=4/3*a*O,P=[e,t],T=[e+M*k,t-I*E],A=[n+M*C,r-I*S],_=[n,r];if(T[0]=2*P[0]-T[0],T[1]=2*P[1]-T[1],s)return[T,A,_].concat(p);{p=[T,A,_].concat(p);const e=[];for(let t=0;t<p.length;t+=3){const n=pe(p[t][0],p[t][1],u),r=pe(p[t+1][0],p[t+1][1],u),o=pe(p[t+2][0],p[t+2][1],u);e.push([n[0],n[1],r[0],r[1],o[0],o[1]])}return e}}const he={randOffset:function(e,t){return Se(e,t)},randOffsetWithRange:function(e,t,n){return ke(e,t,n)},ellipse:function(e,t,n,r,o){return be(e,t,o,ve(n,r,o)).opset},doubleLineOps:function(e,t,n,r,o){return Ce(e,t,n,r,o,!0)}};function me(e,t,n,r,o){return{type:"path",ops:Ce(e,t,n,r,o)}}function ge(e,t,n){const r=(e||[]).length;if(r>2){const o=[];for(let t=0;t<r-1;t++)o.push.apply(o,f(Ce(e[t][0],e[t][1],e[t+1][0],e[t+1][1],n)));return t&&o.push.apply(o,f(Ce(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n))),{type:"path",ops:o}}return 2===r?me(e[0][0],e[0][1],e[1][0],e[1][1],n):{type:"path",ops:[]}}function ve(e,t,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),o=Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r),a=2*Math.PI/o;let i=Math.abs(e/2),l=Math.abs(t/2);const c=1-n.curveFitting;return{increment:a,rx:i+=Se(i*c,n),ry:l+=Se(l*c,n)}}function be(e,t,n,r){const o=v(Pe(r.increment,e,t,r.rx,r.ry,1,r.increment*ke(.1,ke(.4,1,n),n),n),2),a=o[0],i=o[1];let l=Ie(a,null,n);if(!n.disableMultiStroke){const o=Ie(v(Pe(r.increment,e,t,r.rx,r.ry,1.5,0,n),1)[0],null,n);l=l.concat(o)}return{estimatedPoints:i,opset:{type:"path",ops:l}}}function ye(e,t,n,r,o,a,i,l,c){const s=e,u=t;let d=Math.abs(n/2),p=Math.abs(r/2);d+=Se(.01*d,c),p+=Se(.01*p,c);let h=o,m=a;for(;h<0;)h+=2*Math.PI,m+=2*Math.PI;m-h>2*Math.PI&&(h=0,m=2*Math.PI);const g=2*Math.PI/c.curveStepCount,v=Math.min(g/2,(m-h)/2),b=Te(v,s,u,d,p,h,m,1,c);if(!c.disableMultiStroke){const e=Te(v,s,u,d,p,h,m,1.5,c);b.push.apply(b,f(e))}return i&&(l?b.push.apply(b,f(Ce(s,u,s+d*Math.cos(h),u+p*Math.sin(h),c)).concat(f(Ce(s,u,s+d*Math.cos(m),u+p*Math.sin(m),c)))):b.push({op:"lineTo",data:[s,u]},{op:"lineTo",data:[s+d*Math.cos(h),u+p*Math.sin(h)]})),{type:"path",ops:b}}function we(e,t){const n=[];if(e.length){const r=t.maxRandomnessOffset||0,o=e.length;if(o>2){n.push({op:"move",data:[e[0][0]+Se(r,t),e[0][1]+Se(r,t)]});for(let a=1;a<o;a++)n.push({op:"lineTo",data:[e[a][0]+Se(r,t),e[a][1]+Se(r,t)]})}}return{type:"fillPath",ops:n}}function xe(e,t){return function(e,t){let n=e.fillStyle||"hachure";if(!ae[n])switch(n){case"zigzag":ae[n]||(ae[n]=new ee(t));break;case"cross-hatch":ae[n]||(ae[n]=new te(t));break;case"dots":ae[n]||(ae[n]=new ne(t));break;case"dashed":ae[n]||(ae[n]=new re(t));break;case"zigzag-line":ae[n]||(ae[n]=new oe(t));break;case"hachure":default:ae[n="hachure"]||(ae[n]=new J(t))}return ae[n]}(t,he).fillPolygon(e,t)}function Ee(e){return e.randomizer||(e.randomizer=new ie(e.seed||0)),e.randomizer.next()}function ke(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return n.roughness*r*(Ee(n)*(t-e)+e)}function Se(e,t){return ke(-e,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1)}function Ce(e,t,n,r,o){const a=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?o.disableMultiStrokeFill:o.disableMultiStroke,i=Oe(e,t,n,r,o,!0,!1);if(a)return i;const l=Oe(e,t,n,r,o,!0,!0);return i.concat(l)}function Oe(e,t,n,r,o,a,i){const l=Math.pow(e-n,2)+Math.pow(t-r,2),c=Math.sqrt(l);let s=1;s=c<200?1:c>500?.4:-.0016668*c+1.233334;let u=o.maxRandomnessOffset||0;u*u*100>l&&(u=c/10);const d=u/2,p=.2+.2*Ee(o);let f=o.bowing*o.maxRandomnessOffset*(r-t)/200,h=o.bowing*o.maxRandomnessOffset*(e-n)/200;f=Se(f,o,s),h=Se(h,o,s);const m=[],g=function(){return Se(d,o,s)},v=function(){return Se(u,o,s)};return a&&(i?m.push({op:"move",data:[e+g(),t+g()]}):m.push({op:"move",data:[e+Se(u,o,s),t+Se(u,o,s)]})),i?m.push({op:"bcurveTo",data:[f+e+(n-e)*p+g(),h+t+(r-t)*p+g(),f+e+2*(n-e)*p+g(),h+t+2*(r-t)*p+g(),n+g(),r+g()]}):m.push({op:"bcurveTo",data:[f+e+(n-e)*p+v(),h+t+(r-t)*p+v(),f+e+2*(n-e)*p+v(),h+t+2*(r-t)*p+v(),n+v(),r+v()]}),m}function Me(e,t,n){const r=[];r.push([e[0][0]+Se(t,n),e[0][1]+Se(t,n)]),r.push([e[0][0]+Se(t,n),e[0][1]+Se(t,n)]);for(let o=1;o<e.length;o++)r.push([e[o][0]+Se(t,n),e[o][1]+Se(t,n)]),o===e.length-1&&r.push([e[o][0]+Se(t,n),e[o][1]+Se(t,n)]);return Ie(r,null,n)}function Ie(e,t,n){const r=e.length,o=[];if(r>3){const a=[],i=1-n.curveTightness;o.push({op:"move",data:[e[1][0],e[1][1]]});for(let t=1;t+2<r;t++){const n=e[t];a[0]=[n[0],n[1]],a[1]=[n[0]+(i*e[t+1][0]-i*e[t-1][0])/6,n[1]+(i*e[t+1][1]-i*e[t-1][1])/6],a[2]=[e[t+1][0]+(i*e[t][0]-i*e[t+2][0])/6,e[t+1][1]+(i*e[t][1]-i*e[t+2][1])/6],a[3]=[e[t+1][0],e[t+1][1]],o.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(t&&2===t.length){const e=n.maxRandomnessOffset;o.push({op:"lineTo",data:[t[0]+Se(e,n),t[1]+Se(e,n)]})}}else 3===r?(o.push({op:"move",data:[e[1][0],e[1][1]]}),o.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):2===r&&o.push.apply(o,f(Ce(e[0][0],e[0][1],e[1][0],e[1][1],n)));return o}function Pe(e,t,n,r,o,a,i,l){const c=[],s=[],u=Se(.5,l)-Math.PI/2;s.push([Se(a,l)+t+.9*r*Math.cos(u-e),Se(a,l)+n+.9*o*Math.sin(u-e)]);for(let d=u;d<2*Math.PI+u-.01;d+=e){const e=[Se(a,l)+t+r*Math.cos(d),Se(a,l)+n+o*Math.sin(d)];c.push(e),s.push(e)}return s.push([Se(a,l)+t+r*Math.cos(u+2*Math.PI+.5*i),Se(a,l)+n+o*Math.sin(u+2*Math.PI+.5*i)]),s.push([Se(a,l)+t+.98*r*Math.cos(u+i),Se(a,l)+n+.98*o*Math.sin(u+i)]),s.push([Se(a,l)+t+.9*r*Math.cos(u+.5*i),Se(a,l)+n+.9*o*Math.sin(u+.5*i)]),[s,c]}function Te(e,t,n,r,o,a,i,l,c){const s=a+Se(.1,c),u=[];u.push([Se(l,c)+t+.9*r*Math.cos(s-e),Se(l,c)+n+.9*o*Math.sin(s-e)]);for(let d=s;d<=i;d+=e)u.push([Se(l,c)+t+r*Math.cos(d),Se(l,c)+n+o*Math.sin(d)]);return u.push([t+r*Math.cos(i),n+o*Math.sin(i)]),u.push([t+r*Math.cos(i),n+o*Math.sin(i)]),Ie(u,null,c)}function Ae(e,t,n,r,o,a,i,l){const c=[],s=[l.maxRandomnessOffset||1,(l.maxRandomnessOffset||1)+.3];let u=[0,0];const d=l.disableMultiStroke?1:2;for(let p=0;p<d;p++)0===p?c.push({op:"move",data:[i[0],i[1]]}):c.push({op:"move",data:[i[0]+Se(s[0],l),i[1]+Se(s[0],l)]}),u=[o+Se(s[p],l),a+Se(s[p],l)],c.push({op:"bcurveTo",data:[e+Se(s[p],l),t+Se(s[p],l),n+Se(s[p],l),r+Se(s[p],l),u[0],u[1]]});return c}function _e(e){return f(e)}const Le="none";let De=function(){function e(t){u(this,e),this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,combineNestedSvgPaths:!1,disableMultiStroke:!1,disableMultiStrokeFill:!1},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}return p(e,[{key:"_o",value:function(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}},{key:"_d",value:function(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}},{key:"line",value:function(e,t,n,r,o){const a=this._o(o);return this._d("line",[me(e,t,n,r,a)],a)}},{key:"rectangle",value:function(e,t,n,r,o){const a=this._o(o),i=[],l=function(e,t,n,r,o){return function(e,t){return ge(e,!0,o)}([[e,t],[e+n,t],[e+n,t+r],[e,t+r]])}(e,t,n,r,a);if(a.fill){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];"solid"===a.fillStyle?i.push(we(o,a)):i.push(xe(o,a))}return a.stroke!==Le&&i.push(l),this._d("rectangle",i,a)}},{key:"ellipse",value:function(e,t,n,r,o){const a=this._o(o),i=[],l=ve(n,r,a),c=be(e,t,a,l);if(a.fill)if("solid"===a.fillStyle){const n=be(e,t,a,l).opset;n.type="fillPath",i.push(n)}else i.push(xe(c.estimatedPoints,a));return a.stroke!==Le&&i.push(c.opset),this._d("ellipse",i,a)}},{key:"circle",value:function(e,t,n,r){const o=this.ellipse(e,t,n,n,r);return o.shape="circle",o}},{key:"linearPath",value:function(e,t){const n=this._o(t);return this._d("linearPath",[ge(e,!1,n)],n)}},{key:"arc",value:function(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0;const c=this._o(l),s=[],u=ye(e,t,n,r,o,a,i,!0,c);if(i&&c.fill)if("solid"===c.fillStyle){const i=ye(e,t,n,r,o,a,!0,!1,c);i.type="fillPath",s.push(i)}else s.push(function(e,t,n,r,o,a,i){const l=e,c=t;let s=Math.abs(n/2),u=Math.abs(r/2);s+=Se(.01*s,i),u+=Se(.01*u,i);let d=o,p=a;for(;d<0;)d+=2*Math.PI,p+=2*Math.PI;p-d>2*Math.PI&&(d=0,p=2*Math.PI);const f=(p-d)/i.curveStepCount,h=[];for(let m=d;m<=p;m+=f)h.push([l+s*Math.cos(m),c+u*Math.sin(m)]);return h.push([l+s*Math.cos(p),c+u*Math.sin(p)]),h.push([l,c]),xe(h,i)}(e,t,n,r,o,a,c));return c.stroke!==Le&&s.push(u),this._d("arc",s,c)}},{key:"curve",value:function(e,t){const n=this._o(t),r=[],o=function(e,t){let n=Me(e,1*(1+.2*t.roughness),t);if(!t.disableMultiStroke){const r=Me(e,1.5*(1+.22*t.roughness),function(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}(t));n=n.concat(r)}return{type:"path",ops:n}}(e,n);if(n.fill&&n.fill!==Le&&e.length>=3){const t=V(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(_e(e[0]),_e(e[1]),_e(e[2]),_e(e[2]));else{const n=[];n.push(e[0],e[0]);for(let t=1;t<e.length;t++)n.push(e[t]),t===e.length-1&&n.push(e[t]);const o=[],a=1-t;r.push(_e(n[0]));for(let e=1;e+2<n.length;e++){const t=n[e];o[0]=[t[0],t[1]],o[1]=[t[0]+(a*n[e+1][0]-a*n[e-1][0])/6,t[1]+(a*n[e+1][1]-a*n[e-1][1])/6],o[2]=[n[e+1][0]+(a*n[e][0]-a*n[e+2][0])/6,n[e+1][1]+(a*n[e][1]-a*n[e+2][1])/6],o[3]=[n[e+1][0],n[e+1][1]],r.push(o[1],o[2],o[3])}}return r}(e),10,(1+n.roughness)/2);"solid"===n.fillStyle?r.push(we(t,n)):r.push(xe(t,n))}return n.stroke!==Le&&r.push(o),this._d("curve",r,n)}},{key:"polygon",value:function(e,t){const n=this._o(t),r=[],o=ge(e,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(we(e,n)):r.push(xe(e,n))),n.stroke!==Le&&r.push(o),this._d("polygon",r,n)}},{key:"path",value:function(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=n.fill&&"transparent"!==n.fill&&n.fill!==Le,a=n.stroke!==Le,i=!!(n.simplification&&n.simplification<1),l=function(e,t,n){const r=de(ue(se(e))),o=[];let a=[],i=[0,0],l=[];const c=function(){var e;l.length>=4&&(e=a).push.apply(e,f(V(l,1))),l=[]},u=function(){c(),a.length&&(o.push(a),a=[])};var d,p=s(r);try{for(p.s();!(d=p.n()).done;){const e=d.value,t=e.key,n=e.data;switch(t){case"M":u(),i=[n[0],n[1]],a.push(i);break;case"L":c(),a.push([n[0],n[1]]);break;case"C":if(!l.length){const e=a.length?a[a.length-1]:i;l.push([e[0],e[1]])}l.push([n[0],n[1]]),l.push([n[2],n[3]]),l.push([n[4],n[5]]);break;case"Z":c(),a.push([i[0],i[1]])}}}catch(v){p.e(v)}finally{p.f()}if(u(),!n)return o;const h=[];for(var m=0,g=o;m<g.length;m++){const e=W(g[m],n);e.length&&h.push(e)}return h}(e,0,i?4-4*n.simplification:(1+n.roughness)/2);if(o)if(n.combineNestedSvgPaths){const e=[];l.forEach(function(t){return e.push.apply(e,f(t))}),"solid"===n.fillStyle?r.push(we(e,n)):r.push(xe(e,n))}else l.forEach(function(e){"solid"===n.fillStyle?r.push(we(e,n)):r.push(xe(e,n))});return a&&(i?l.forEach(function(e){r.push(ge(e,!1,n))}):r.push(function(e,t){const n=[];let r=[0,0],o=[0,0];var a,i=s(de(ue(se(e))));try{for(i.s();!(a=i.n()).done;){const e=a.value,i=e.key,l=e.data;switch(i){case"M":{const e=1*(t.maxRandomnessOffset||0);n.push({op:"move",data:l.map(function(n){return n+Se(e,t)})}),o=[l[0],l[1]],r=[l[0],l[1]];break}case"L":n.push.apply(n,f(Ce(o[0],o[1],l[0],l[1],t))),o=[l[0],l[1]];break;case"C":{const e=v(l,6),r=e[0],a=e[1],i=e[2],c=e[3],s=e[4],u=e[5];n.push.apply(n,f(Ae(r,a,i,c,s,u,o,t))),o=[s,u];break}case"Z":n.push.apply(n,f(Ce(o[0],o[1],r[0],r[1],t))),o=[r[0],r[1]]}}}catch(l){i.e(l)}finally{i.f()}return{type:"path",ops:n}}(e,n))),this._d("path",r,n)}},{key:"opsToPath",value:function(e){let t="";var n,r=s(e.ops);try{for(r.s();!(n=r.n()).done;){const e=n.value,r=e.data;switch(e.op){case"move":t+=`M${r[0]} ${r[1]} `;break;case"bcurveTo":t+=`C${r[0]} ${r[1]}, ${r[2]} ${r[3]}, ${r[4]} ${r[5]} `;break;case"lineTo":t+=`L${r[0]} ${r[1]} `}}}catch(o){r.e(o)}finally{r.f()}return t.trim()}},{key:"toPaths",value:function(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];var o,a=s(t);try{for(a.s();!(o=a.n()).done;){const e=o.value;let t=null;switch(e.type){case"path":t={d:this.opsToPath(e),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:Le};break;case"fillPath":t={d:this.opsToPath(e),stroke:Le,strokeWidth:0,fill:n.fill||Le};break;case"fillSketch":t=this.fillSketch(e,n)}t&&r.push(t)}}catch(i){a.e(i)}finally{a.f()}return r}},{key:"fillSketch",value:function(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||Le,strokeWidth:n,fill:Le}}}],[{key:"newSeed",value:function(){return Math.floor(Math.random()*Math.pow(2,31))}}]),e}(),je=function(){function e(t,n){u(this,e),this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new De(n)}return p(e,[{key:"draw",value:function(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx;var o,a=s(t);try{for(a.s();!(o=a.n()).done;){const t=o.value;switch(t.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,t),r.restore();break;case"fillPath":r.save(),r.fillStyle=n.fill||"";const o="curve"===e.shape||"polygon"===e.shape?"evenodd":"nonzero";this._drawToContext(r,t,o),r.restore();break;case"fillSketch":this.fillSketch(r,t,n)}}}catch(i){a.e(i)}finally{a.f()}}},{key:"fillSketch",value:function(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t),e.restore()}},{key:"_drawToContext",value:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nonzero";e.beginPath();var r,o=s(t.ops);try{for(o.s();!(r=o.n()).done;){const t=r.value,n=t.data;switch(t.op){case"move":e.moveTo(n[0],n[1]);break;case"bcurveTo":e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"lineTo":e.lineTo(n[0],n[1])}}}catch(a){o.e(a)}finally{o.f()}"fillPath"===t.type?e.fill(n):e.stroke()}},{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"line",value:function(e,t,n,r,o){const a=this.gen.line(e,t,n,r,o);return this.draw(a),a}},{key:"rectangle",value:function(e,t,n,r,o){const a=this.gen.rectangle(e,t,n,r,o);return this.draw(a),a}},{key:"ellipse",value:function(e,t,n,r,o){const a=this.gen.ellipse(e,t,n,r,o);return this.draw(a),a}},{key:"circle",value:function(e,t,n,r){const o=this.gen.circle(e,t,n,r);return this.draw(o),o}},{key:"linearPath",value:function(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}},{key:"polygon",value:function(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}},{key:"arc",value:function(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0;const c=this.gen.arc(e,t,n,r,o,a,i,l);return this.draw(c),c}},{key:"curve",value:function(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}},{key:"path",value:function(e,t){const n=this.gen.path(e,t);return this.draw(n),n}},{key:"generator",get:function(){return this.gen}}]),e}();const ze="http://www.w3.org/2000/svg";let Be=function(){function e(t,n){u(this,e),this.svg=t,this.gen=new De(n)}return p(e,[{key:"draw",value:function(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,o=r.createElementNS(ze,"g");var a,i=s(t);try{for(i.s();!(a=i.n()).done;){const t=a.value;let i=null;switch(t.type){case"path":(i=r.createElementNS(ze,"path")).setAttribute("d",this.opsToPath(t)),i.setAttribute("stroke",n.stroke),i.setAttribute("stroke-width",n.strokeWidth+""),i.setAttribute("fill","none"),n.strokeLineDash&&i.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":(i=r.createElementNS(ze,"path")).setAttribute("d",this.opsToPath(t)),i.setAttribute("stroke","none"),i.setAttribute("stroke-width","0"),i.setAttribute("fill",n.fill||""),"curve"!==e.shape&&"polygon"!==e.shape||i.setAttribute("fill-rule","evenodd");break;case"fillSketch":i=this.fillSketch(r,t,n)}i&&o.appendChild(i)}}catch(l){i.e(l)}finally{i.f()}return o}},{key:"fillSketch",value:function(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const o=e.createElementNS(ze,"path");return o.setAttribute("d",this.opsToPath(t)),o.setAttribute("stroke",n.fill||""),o.setAttribute("stroke-width",r+""),o.setAttribute("fill","none"),n.fillLineDash&&o.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),o}},{key:"getDefaultOptions",value:function(){return this.gen.defaultOptions}},{key:"opsToPath",value:function(e){return this.gen.opsToPath(e)}},{key:"line",value:function(e,t,n,r,o){const a=this.gen.line(e,t,n,r,o);return this.draw(a)}},{key:"rectangle",value:function(e,t,n,r,o){const a=this.gen.rectangle(e,t,n,r,o);return this.draw(a)}},{key:"ellipse",value:function(e,t,n,r,o){const a=this.gen.ellipse(e,t,n,r,o);return this.draw(a)}},{key:"circle",value:function(e,t,n,r){const o=this.gen.circle(e,t,n,r);return this.draw(o)}},{key:"linearPath",value:function(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}},{key:"polygon",value:function(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}},{key:"arc",value:function(e,t,n,r,o,a){let i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=arguments.length>7?arguments[7]:void 0;const c=this.gen.arc(e,t,n,r,o,a,i,l);return this.draw(c)}},{key:"curve",value:function(e,t){const n=this.gen.curve(e,t);return this.draw(n)}},{key:"path",value:function(e,t){const n=this.gen.path(e,t);return this.draw(n)}},{key:"generator",get:function(){return this.gen}}]),e}();const He=function(e,t){return new je(e,t)},Ne=function(e,t){return new Be(e,t)},Re=function(e){return new De(e)};function Fe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==k(e))if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Fe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function We(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Fe(e))&&(r&&(r+=" "),r+=t);return r}var Ge=function(e){return null!=e&&"text"===e.type},Ve=function(e){return null!=e&&Ke(e.type)},Ke=function(e){return"arrow"===e||"line"===e||"draw"===e},Ye=function(e){return null!=e&&Ue(e.type)},Ue=function(e){return"arrow"===e},Xe=function(e){return null!=e&&("rectangle"===e.type||"diamond"===e.type||"ellipse"===e.type||"text"===e.type)},Ze=function(e,t,n,r,o){return[(e-n)*Math.cos(o)-(t-r)*Math.sin(o)+n,(e-n)*Math.sin(o)+(t-r)*Math.cos(o)+r]},qe=function(e,t,n){return Ze(e[0],e[1],t[0],t[1],n)},Qe=function(e,t,n,r,o,a,i,l){var c=Math.cos(r),s=Math.sin(r);return e.e&&e.w?t+=o+i:e.e?(t+=o*(1+c),n+=o*s,t+=i*(1-c),n+=i*-s):e.w&&(t+=o*(1-c),n+=o*-s,t+=i*(1+c),n+=i*s),e.n&&e.s?n+=a+l:e.n?(t+=a*s,n+=a*(1-c),t+=l*-s,n+=l*(1+c)):e.s&&(t+=a*-s,n+=a*(1+c),t+=l*s,n+=l*(1-c)),[t,n]},$e=function(e,t,n,r){var o=n-e,a=r-t;return Math.hypot(o,a)},Je=function(e,t){if(void 0===t&&(t=1),e.length>=3){var n=[e[0],e[e.length-1]],r=n[0],o=n[1];return $e(r[0],r[1],o[0],o[1])<=g.qx/t}return!1},et=function(e,t,n){var r=e.length;if(r<3)return!1;for(var o=[Number.MAX_SAFE_INTEGER,n],a=[t,n],i=0,l=0;l<r;l++){var c=e[l],s=e[(l+1)%r];if(rt(c,s,a,o)){if(0===nt(c,a,s))return tt(c,a,s);i++}}return i%2==1},tt=function(e,t,n){return t[0]<=Math.max(e[0],n[0])&&t[0]>=Math.min(e[0],n[0])&&t[1]<=Math.max(e[1],n[1])&&t[1]>=Math.min(e[1],n[1])},nt=function(e,t,n){var r=(t[1]-e[1])*(n[0]-t[0])-(t[0]-e[0])*(n[1]-t[1]);return 0===r?0:r>0?1:2},rt=function(e,t,n,r){var o=nt(e,t,n),a=nt(e,t,r),i=nt(n,r,e),l=nt(n,r,t);return o!==a&&i!==l||!(0!==o||!tt(e,n,t))||!(0!==a||!tt(e,r,t))||!(0!==i||!tt(n,e,r))||!(0!==l||!tt(n,t,r))},ot=function(e,t,n){return n?[Math.round(e/n)*n,Math.round(t/n)*n]:[e,t]},at=function(e,t,n){var r=n.map(function(t){return t[e]}),o=Math.max.apply(Math,r),a=Math.min.apply(Math,r),i=o-a,l=0===i?1:t/i,c=1/0,s=n.map(function(t){return t.map(function(t,n){if(n!==e)return t;var r=t*l;return c=Math.min(r,c),r})});if(2===s.length)return s;var u=a-c;return s.map(function(t){return t.map(function(t,n){return n===e?t+u:t})})},it=function(e){return Ve(e)?st(e):[e.x,e.y,e.x+e.width,e.y+e.height]},lt=function(e){for(var t=0,n=e.sets;t<n.length;t++){var r=n[t];if("path"===r.type)return r.ops}return e.sets[0].ops},ct=function(e,t){var n=[0,0],r=e.reduce(function(e,r){var o,a=r.op,i=r.data;if("move"===a)n=i;else if("bcurveTo"===a){var l=[i[0],i[1]],c=[i[2],i[3]],s=[i[4],i[5]],u=n;n=s;for(var d=function(e,t){return Math.pow(1-e,3)*s[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*l[t]+u[t]*Math.pow(e,3)},p=0;p<=1;){var f=d(p,0),h=d(p,1);t&&(f=(o=t(f,h))[0],h=o[1]),e.minY=Math.min(e.minY,h),e.minX=Math.min(e.minX,f),e.maxX=Math.max(e.maxX,f),e.maxY=Math.max(e.maxY,h),p+=.1}}return e},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]},st=function(e){if(e.points.length<2||!xn(e)){var t=e.points.reduce(function(e,t){var n=t[0],r=t[1];return e.minY=Math.min(e.minY,r),e.minX=Math.min(e.minX,n),e.maxX=Math.max(e.maxX,n),e.maxY=Math.max(e.maxY,r),e},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}),n=t.minX,r=t.minY,o=t.maxX,a=t.maxY;return[n+e.x,r+e.y,o+e.x,a+e.y]}var i=xn(e),l=lt(i[0]),c=ct(l),s=c[0],u=c[1],d=c[2],p=c[3];return[s+e.x,u+e.y,d+e.x,p+e.y]},ut=function(e){var t=it(e),n=t[0],r=t[1],o=t[2],a=t[3],i=(n+o)/2,l=(r+a)/2;if(Ve(e))return function(e,t,n){if(e.points.length<2||!xn(e)){var r=e.points.reduce(function(r,o){var a,i=o[0],l=o[1];return i=(a=Ze(e.x+i,e.y+l,t,n,e.angle))[0],l=a[1],r.minY=Math.min(r.minY,l),r.minX=Math.min(r.minX,i),r.maxX=Math.max(r.maxX,i),r.maxY=Math.max(r.maxY,l),r},{minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0});return[r.minX,r.minY,r.maxX,r.maxY]}var o=xn(e),a=lt(o[0]);return ct(a,function(r,o){return Ze(e.x+r,e.y+o,t,n,e.angle)})}(e,i,l);if("diamond"===e.type){var c=Ze(i,r,i,l,e.angle),s=c[0],u=c[1],d=Ze(i,a,i,l,e.angle),p=d[0],f=d[1],h=Ze(n,l,i,l,e.angle),m=h[0],g=h[1],v=Ze(o,l,i,l,e.angle),b=v[0],y=v[1];return[Math.min(s,p,m,b),Math.min(u,f,g,y),Math.max(s,p,m,b),Math.max(u,f,g,y)]}if("ellipse"===e.type){var w=(o-n)/2,x=(a-r)/2,E=Math.cos(e.angle),k=Math.sin(e.angle),S=Math.hypot(w*E,x*k),C=Math.hypot(x*E,w*k);return[i-S,l-C,i+S,l+C]}var O=Ze(n,r,i,l,e.angle),M=O[0],I=O[1],P=Ze(n,a,i,l,e.angle),T=P[0],A=P[1],_=Ze(o,a,i,l,e.angle),L=_[0],D=_[1],j=Ze(o,r,i,l,e.angle),z=j[0],B=j[1];return[Math.min(M,T,L,z),Math.min(I,A,D,B),Math.max(M,T,L,z),Math.max(I,A,D,B)]},dt=function(e){if(!e.length)return[0,0,0,0];var t=1/0,n=-1/0,r=1/0,o=-1/0;return e.forEach(function(e){var a=ut(e),i=a[0],l=a[1],c=a[2],s=a[3];t=Math.min(t,i),r=Math.min(r,l),n=Math.max(n,c),o=Math.max(o,s)}),[t,r,n,o]},pt=function(e,t,n){if(!Ve(e))return[e.x,e.y,e.x+t,e.y+n];var r=at(0,t,at(1,n,e.points)),o=Re(),a="sharp"===e.strokeSharpness?o.linearPath(r,kn(e)):o.curve(r,kn(e)),i=lt(a),l=ct(i),c=l[0],s=l[1],u=l[2],d=l[3];return[c+e.x,s+e.y,u+e.x,d+e.y]},ft=function(e,t,n){var r=Re(),o="sharp"===n?r.linearPath(t,kn(e)):r.curve(t,kn(e)),a=lt(o),i=ct(a),l=i[0],c=i[1],s=i[2],u=i[3];return[l+e.x,c+e.y,s+e.x,u+e.y]};const ht=JSON.parse('{"ix":"#ffffff","Sn":"#000000","MA":["#f8f9fa","#f1f3f5",0,0,"#ced4da","#adb5bd","#868e96","#495057","#343a40"],"Q6":["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],"iQ":["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],"pl":["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],"ht":["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],"QN":["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],"iN":["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],"sl":["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],"$C":["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],"ek":["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],"LR":["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],"er":["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],"$y":["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]}');var mt=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},gt=function(e){return[ht.Q6[e],ht.iQ[e],ht.pl[e],ht.ht[e],ht.QN[e],ht.iN[e],ht.sl[e],ht.$C[e],ht.ek[e],ht.LR[e],ht.er[e],ht.$y[e]]};const vt={canvasBackground:mt([ht.ix,ht.MA[0],ht.MA[1]],gt(0)),elementBackground:mt(["transparent",ht.MA[4],ht.MA[6]],gt(6)),elementStroke:mt([ht.Sn,ht.MA[8],ht.MA[7]],gt(9))};var bt=a(6207),yt=/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),wt=/^Win/.test(window.navigator.platform),xt="BracketRight",Et="BracketLeft",kt="KeyC",St="ArrowDown",Ct="ArrowLeft",Ot="ArrowRight",Mt="ArrowUp",It=yt?"metaKey":"ctrlKey",Pt="Enter",Tt="Escape",At="Tab",_t="y",Lt="z",Dt=function(e){return e===Ct||e===Ot||e===St||e===Mt},jt=function(e){return e.altKey},zt=function(e){return e.shiftKey},Bt=function(e){return e.shiftKey},Ht="http://www.w3.org/2000/svg",Nt=function(){var e=new Date,t=e.getFullYear(),n="".concat(e.getMonth()+1).padStart(2,"0"),r="".concat(e.getDate()).padStart(2,"0"),o="".concat(e.getHours()).padStart(2,"0"),a="".concat(e.getMinutes()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r,"-").concat(o).concat(a)},Rt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Ft=function(e){return e instanceof HTMLElement&&"wysiwyg"===e.dataset.type||e instanceof HTMLBRElement||e instanceof HTMLTextAreaElement||e instanceof HTMLInputElement&&("text"===e.type||"number"===e.type)},Wt=function(e){var t=e.fontFamily;return"".concat(g.ut[t],", ").concat(g._D)},Gt=function(e){var t=e.fontSize,n=e.fontFamily;return"".concat(t,"px ").concat(Wt({fontFamily:n}))},Vt=function(e,t){var n=document.createElement("div"),r=document.body;n.style.position="absolute",n.style.whiteSpace="pre",n.style.font=t,r.appendChild(n),n.innerText=e.split("\n").map(function(e){return e||" "}).join("\n");var o=n.offsetWidth,a=n.offsetHeight,i=document.createElement("span");i.style.display="inline-block",i.style.overflow="hidden",i.style.width="1px",i.style.height="1px",n.appendChild(i);var l=i.offsetTop+i.offsetHeight;return document.body.removeChild(n),{width:o,height:a,baseline:l}},Kt=function(e,t){var n,r=0,o=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n=o,clearTimeout(r),r=window.setTimeout(function(){return e.apply(void 0,o)},t)};return o.flush=function(){clearTimeout(r),n&&e.apply(void 0,n)},o.cancel=function(){clearTimeout(r)},o},Yt=function(e){var t=window.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}},Ut=function(){var e=window.getSelection();e&&e.removeAllRanges()},Xt=function(e,t){return Math.abs(e-t)},Zt=function(){document.documentElement.style.cursor=""},qt=function(e){"selection"===e?Zt():document.documentElement.style.cursor=g.oc.CROSSHAIR},Qt=function(){var e;return"HTML"===(null===(e=document.fullscreenElement)||void 0===e?void 0:e.nodeName)},$t=function(e){return e=e.replace(/\bAlt\b/i,"Alt").replace(/\bShift\b/i,"Shift").replace(/\b(Enter|Return)\b/i,"Enter").replace(/\bDel\b/i,"Delete"),yt?e.replace(/\bCtrlOrCmd\b/i,"Cmd").replace(/\bAlt\b/i,"Option"):e.replace(/\bCtrlOrCmd\b/i,"Ctrl")},Jt=function(e,t){var n=e.clientX,r=e.clientY,o=t.zoom,a=t.offsetLeft,i=t.offsetTop,l=t.scrollX,c=t.scrollY,s=1/o.value;return{x:(n-o.translation.x-a)*s-l,y:(r-o.translation.y-i)*s-c}},en=function(e,t){var n=e.sceneX,r=e.sceneY,o=t.zoom,a=t.offsetLeft,i=t.offsetTop,l=t.scrollX,c=t.scrollY;return{x:(n+l+a)*o.value+o.translation.x,y:(r+c+i)*o.value+o.translation.y}},tn=function(e){return getComputedStyle(document.documentElement).getPropertyValue("--".concat(e))},nn=new RegExp("^[^".concat("A-Za-z--------","]*[").concat("---","]")),rn=function(e){return nn.test(e)},on=function(e){return{x:e[0],y:e[1]}},an=function(e){if("AbortError"!==(null==e?void 0:e.name))throw e},ln=function(e){return function(t){(0,bt.unstable_batchedUpdates)(e,t)}},cn=function(e,t){var n,r=[{value:1,symbol:"b"},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"}];for(n=r.length-1;n>0&&!(e>=r[n].value);n--);return(e/r[n].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+r[n].symbol},sn=function(){var e;return(null===(e=document.querySelector('meta[name="version"]'))||void 0===e?void 0:e.content)||g.eQ},un=function(){return{appearance:"light",collaborators:new Map,currentChartType:"bar",currentItemBackgroundColor:"transparent",currentItemEndArrowhead:"arrow",currentItemFillStyle:"hachure",currentItemFontFamily:g.rk,currentItemFontSize:g.n5,currentItemLinearStrokeSharpness:"round",currentItemOpacity:100,currentItemRoughness:1,currentItemStartArrowhead:null,currentItemStrokeColor:ht.Sn,currentItemStrokeSharpness:"sharp",currentItemStrokeStyle:"solid",currentItemStrokeWidth:1,currentItemTextAlign:g.Hg,cursorButton:"up",draggingElement:null,editingElement:null,editingGroupId:null,editingLinearElement:null,elementLocked:!1,elementType:"selection",errorMessage:null,exportBackground:!0,exportEmbedScene:!1,exportWithDarkMode:!1,fileHandle:null,gridSize:null,height:window.innerHeight,isBindingEnabled:!0,isLibraryOpen:!1,isLoading:!1,isResizing:!1,isRotating:!1,lastPointerDownWith:"mouse",multiElement:null,name:"".concat(_("labels.untitled"),"-").concat(Nt()),openMenu:null,pasteDialog:{shown:!1,data:null},previousSelectedElementIds:{},resizingElement:null,scrolledOutside:!1,scrollX:0,scrollY:0,selectedElementIds:{},selectedGroupIds:{},selectionElement:null,shouldAddWatermark:!1,shouldCacheIgnoreZoom:!1,showHelpDialog:!1,showStats:!1,startBoundElement:null,suggestedBindings:[],toastMessage:null,viewBackgroundColor:ht.ix,width:window.innerWidth,zenModeEnabled:!1,zoom:{value:1,translation:{x:0,y:0}},viewModeEnabled:!1}},dn={appearance:{browser:!0,export:!1},collaborators:{browser:!1,export:!1},currentChartType:{browser:!0,export:!1},currentItemBackgroundColor:{browser:!0,export:!1},currentItemEndArrowhead:{browser:!0,export:!1},currentItemFillStyle:{browser:!0,export:!1},currentItemFontFamily:{browser:!0,export:!1},currentItemFontSize:{browser:!0,export:!1},currentItemLinearStrokeSharpness:{browser:!0,export:!1},currentItemOpacity:{browser:!0,export:!1},currentItemRoughness:{browser:!0,export:!1},currentItemStartArrowhead:{browser:!0,export:!1},currentItemStrokeColor:{browser:!0,export:!1},currentItemStrokeSharpness:{browser:!0,export:!1},currentItemStrokeStyle:{browser:!0,export:!1},currentItemStrokeWidth:{browser:!0,export:!1},currentItemTextAlign:{browser:!0,export:!1},cursorButton:{browser:!0,export:!1},draggingElement:{browser:!1,export:!1},editingElement:{browser:!1,export:!1},editingGroupId:{browser:!0,export:!1},editingLinearElement:{browser:!1,export:!1},elementLocked:{browser:!0,export:!1},elementType:{browser:!0,export:!1},errorMessage:{browser:!1,export:!1},exportBackground:{browser:!0,export:!1},exportEmbedScene:{browser:!0,export:!1},exportWithDarkMode:{browser:!0,export:!1},fileHandle:{browser:!1,export:!1},gridSize:{browser:!0,export:!0},height:{browser:!1,export:!1},isBindingEnabled:{browser:!1,export:!1},isLibraryOpen:{browser:!1,export:!1},isLoading:{browser:!1,export:!1},isResizing:{browser:!1,export:!1},isRotating:{browser:!1,export:!1},lastPointerDownWith:{browser:!0,export:!1},multiElement:{browser:!1,export:!1},name:{browser:!0,export:!1},offsetLeft:{browser:!1,export:!1},offsetTop:{browser:!1,export:!1},openMenu:{browser:!0,export:!1},pasteDialog:{browser:!1,export:!1},previousSelectedElementIds:{browser:!0,export:!1},resizingElement:{browser:!1,export:!1},scrolledOutside:{browser:!0,export:!1},scrollX:{browser:!0,export:!1},scrollY:{browser:!0,export:!1},selectedElementIds:{browser:!0,export:!1},selectedGroupIds:{browser:!0,export:!1},selectionElement:{browser:!1,export:!1},shouldAddWatermark:{browser:!0,export:!1},shouldCacheIgnoreZoom:{browser:!0,export:!1},showHelpDialog:{browser:!1,export:!1},showStats:{browser:!0,export:!1},startBoundElement:{browser:!1,export:!1},suggestedBindings:{browser:!1,export:!1},toastMessage:{browser:!1,export:!1},viewBackgroundColor:{browser:!0,export:!0},width:{browser:!1,export:!1},zenModeEnabled:{browser:!0,export:!1},zoom:{browser:!0,export:!1},viewModeEnabled:{browser:!1,export:!1}},pn=function(e){return function(e,t){for(var n={},r=0,o=Object.keys(e);r<o.length;r++){var a=o[r],i=dn[a];null!=i&&i[t]&&(n[a]=e[a])}return n}(e,"export")};function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var mn=un(),gn=[12,8],vn=[3,6],bn=function(e,t,n){switch(n.globalAlpha=e.opacity/100,e.type){case"rectangle":case"diamond":case"ellipse":t.draw(xn(e));break;case"arrow":case"draw":case"line":xn(e).forEach(function(e){t.draw(e)});break;default:if(!Ge(e))throw new Error("Unimplemented type ".concat(e.type));var r=rn(e.text),o=r&&!n.canvas.isConnected;o&&document.body.appendChild(n.canvas),n.canvas.setAttribute("dir",r?"rtl":"ltr");var a=n.font;n.font=Gt(e);var i=n.fillStyle;n.fillStyle=e.strokeColor;var l=n.textAlign;n.textAlign=e.textAlign;for(var c=e.text.replace(/\r\n?/g,"\n").split("\n"),s=e.height/c.length,u=e.height-e.baseline,d="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,p=0;p<c.length;p++)n.fillText(c[p],d,(p+1)*s-u);n.fillStyle=i,n.font=a,n.textAlign=l,o&&n.canvas.remove()}n.globalAlpha=1},yn=new WeakMap,wn=new WeakMap,xn=function(e){return wn.get(e)},En=function(e){return wn.delete(e)},kn=function(e){var t={seed:e.seed,strokeLineDash:"dashed"===e.strokeStyle?gn:"dotted"===e.strokeStyle?vn:void 0,disableMultiStroke:"solid"!==e.strokeStyle,strokeWidth:"solid"!==e.strokeStyle?e.strokeWidth+.5:e.strokeWidth,fillWeight:e.strokeWidth/2,hachureGap:4*e.strokeWidth,roughness:e.roughness,stroke:e.strokeColor};switch(e.type){case"rectangle":case"diamond":case"ellipse":return t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor,"ellipse"===e.type&&(t.curveFitting=1),t;case"line":case"draw":return Je(e.points)&&(t.fillStyle=e.fillStyle,t.fill="transparent"===e.backgroundColor?void 0:e.backgroundColor),t;case"arrow":return t;default:throw new Error("Unimplemented type ".concat(e.type))}},Sn=function(e,t){var n=wn.get(e)||null;if(!n){switch(yn.delete(e),e.type){case"rectangle":if("round"===e.strokeSharpness){var r=e.width,o=e.height,a=.25*Math.min(r,o);n=t.path("M ".concat(a," 0 L ").concat(r-a," 0 Q ").concat(r," 0, ").concat(r," ").concat(a," L ").concat(r," ").concat(o-a," Q ").concat(r," ").concat(o,", ").concat(r-a," ").concat(o," L ").concat(a," ").concat(o," Q 0 ").concat(o,", 0 ").concat(o-a," L 0 ").concat(a," Q 0 0, ").concat(a," 0"),kn(e))}else n=t.rectangle(0,0,e.width,e.height,kn(e));break;case"diamond":var i=function(e){var t=Math.floor(e.width/2)+1,n=e.width,r=Math.floor(e.height/2)+1;return[t,0,n,r,t,e.height,0,r]}(e),l=i[0],c=i[1],s=i[2],u=i[3],d=i[4],p=i[5],f=i[6],h=i[7];n=t.polygon([[l,c],[s,u],[d,p],[f,h]],kn(e));break;case"ellipse":n=t.ellipse(e.width/2,e.height/2,e.width,e.height,kn(e));break;case"line":case"draw":case"arrow":var m=kn(e),g=e.points.length?e.points:[[0,0]];if(n="sharp"===e.strokeSharpness?m.fill?[t.polygon(g,m)]:[t.linearPath(g,m)]:[t.curve(g,m)],"arrow"===e.type){var v=e.startArrowhead,b=void 0===v?null:v,y=e.endArrowhead,w=void 0===y?"arrow":y;function x(e,n,r,o){var a=function(e,t,n,r){var o=lt(t[0]);if(o.length<1)return null;var a="start"===n?1:o.length-1,i=o[a].data,l=[i[4],i[5]],c=[i[2],i[3]],s=[i[0],i[1]],u=o[a-1],d=[0,0];"move"===u.op?d=u.data:"bcurveTo"===u.op&&(d=[u.data[4],u.data[5]]);var p=function(e,t){return Math.pow(1-e,3)*l[t]+3*e*Math.pow(1-e,2)*c[t]+3*Math.pow(e,2)*(1-e)*s[t]+d[t]*Math.pow(e,3)},f="start"===n?d:l,h=f[0],m=f[1],g=[p(.3,0),p(.3,1)],v=g[0],b=g[1],y=Math.hypot(h-v,m-b),w=(h-v)/y,x=(m-b)/y,E={arrow:30,bar:15,dot:15}[r],k=e.points.reduce(function(e,t,n,r){var o=t[0],a=t[1],i=n>0?r[n-1]:[0,0],l=i[0],c=i[1];return e+Math.hypot(o-l,a-c)},0),S=Math.min(E,k/2),C=h-w*S,O=m-x*S;if("dot"===r)return[h,m,Math.hypot(O-m,C-h)];var M={arrow:20,bar:90}[r],I=Ze(C,O,h,m,-M*Math.PI/180),P=I[0],T=I[1],A=Ze(C,O,h,m,M*Math.PI/180);return[h,m,P,T,A[0],A[1]]}(e,n,r,o);if(null===a)return[];if("dot"===o){var i=a[0],l=a[1],c=a[2];return[t.circle(i,l,c,hn(hn({},m),{},{fill:e.strokeColor,fillStyle:"solid"}))]}var s=a[0],u=a[1],d=a[2],p=a[3],f=a[4],h=a[5];return"dotted"===e.strokeStyle?m.strokeLineDash=[3,4]:delete m.strokeLineDash,[t.line(d,p,s,u,m),t.line(f,h,s,u,m)]}if(null!==b){var E=x(e,n,"start",b);n.push.apply(n,E)}null!==w&&(E=x(e,n,"end",w),n.push.apply(n,E))}break;case"text":n=[]}wn.set(e,n)}},Cn=function(e,t,n,r,o){var a=t.generator;switch(e.type){case"selection":n.translate(e.x+o.scrollX,e.y+o.scrollY);var i=n.fillStyle;n.fillStyle="rgba(0, 0, 255, 0.10)",n.fillRect(0,0,e.width,e.height),n.fillStyle=i,n.translate(-e.x-o.scrollX,-e.y-o.scrollY);break;case"rectangle":case"diamond":case"ellipse":case"line":case"draw":case"arrow":case"text":if(Sn(e,a),r)!function(e,t,n,r){var o=e.element,a=it(o),i=a[0],l=a[1],c=a[2],s=a[3],u=((i+c)/2+r.scrollX)*window.devicePixelRatio,d=((l+s)/2+r.scrollY)*window.devicePixelRatio;n.scale(1/window.devicePixelRatio,1/window.devicePixelRatio),n.translate(u,d),n.rotate(o.angle),n.drawImage(e.canvas,-(c-i)/2*window.devicePixelRatio-20*e.canvasZoom/e.canvasZoom,-(s-l)/2*window.devicePixelRatio-20*e.canvasZoom/e.canvasZoom,e.canvas.width/e.canvasZoom,e.canvas.height/e.canvasZoom),n.rotate(-o.angle),n.translate(-u,-d),n.scale(window.devicePixelRatio,window.devicePixelRatio)}(function(e,t){var n=t?t.zoom:mn.zoom,r=yn.get(e),o=r&&r.canvasZoom!==n.value&&!(null!=t&&t.shouldCacheIgnoreZoom);if(!r||o){var a=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d"),o=0,a=0;if(Ve(e)){var i=it(e),l=i[0],c=i[1],s=i[2],u=i[3];n.width=Xt(l,s)*window.devicePixelRatio*t.value+20*t.value*2,n.height=Xt(c,u)*window.devicePixelRatio*t.value+20*t.value*2,o=e.x>l?Math.floor(Xt(e.x,l))*window.devicePixelRatio*t.value:0,a=e.y>c?Math.floor(Xt(e.y,c))*window.devicePixelRatio*t.value:0,r.translate(o,a)}else n.width=e.width*window.devicePixelRatio*t.value+20*t.value*2,n.height=e.height*window.devicePixelRatio*t.value+20*t.value*2;r.translate(20*t.value,20*t.value),r.scale(window.devicePixelRatio*t.value,window.devicePixelRatio*t.value);var d=He(n);return bn(e,d,r),r.translate(-20*t.value,-20*t.value),r.scale(1/(window.devicePixelRatio*t.value),1/(window.devicePixelRatio*t.value)),{element:e,canvas:n,canvasZoom:t.value,canvasOffsetX:o,canvasOffsetY:a}}(e,n);return yn.set(e,a),a}return r}(e,o),0,n,o);else{var l=it(e),c=l[0],s=l[1],u=l[2],d=l[3],p=(c+u)/2+o.scrollX,f=(s+d)/2+o.scrollY,h=(u-c)/2-(e.x-c),m=(d-s)/2-(e.y-s);n.translate(p,f),n.rotate(e.angle),n.translate(-h,-m),bn(e,t,n),n.translate(h,m),n.rotate(-e.angle),n.translate(-p,-f)}break;default:throw new Error("Unimplemented type ".concat(e.type))}},On=function(e){return"string"==typeof e},Mn=function(){function e(){this.callbacks=new Set,this.nonDeletedElements=[],this.elements=[],this.elementsMap=new Map}return e.mapElementToScene=function(e,t){On(e)?this.sceneMapById.set(e,t):this.sceneMapByElement.set(e,t)},e.getScene=function(e){return On(e)?this.sceneMapById.get(e)||null:this.sceneMapByElement.get(e)||null},e.prototype.getElementsIncludingDeleted=function(){return this.elements},e.prototype.getElements=function(){return this.nonDeletedElements},e.prototype.getElement=function(e){return this.elementsMap.get(e)||null},e.prototype.getNonDeletedElement=function(e){var t=this.getElement(e);return t&&fa(t)?t:null},e.prototype.getNonDeletedElements=function(e){var t=this,n=[];return e.forEach(function(e){var r=t.getNonDeletedElement(e);null!=r&&n.push(r)}),n},e.prototype.replaceAllElements=function(t){var n=this;this.elements=t,this.elementsMap.clear(),t.forEach(function(t){n.elementsMap.set(t.id,t),e.mapElementToScene(t,n)}),this.nonDeletedElements=pa(this.elements),this.informMutation()},e.prototype.informMutation=function(){for(var e=0,t=Array.from(this.callbacks);e<t.length;e++)(0,t[e])()},e.prototype.addCallback=function(e){var t=this;if(this.callbacks.has(e))throw new Error;return this.callbacks.add(e),function(){if(!t.callbacks.has(e))throw new Error;t.callbacks.delete(e)}},e.prototype.destroy=function(){var t=this;e.sceneMapById.forEach(function(n,r){n===t&&e.sceneMapById.delete(r)}),this.callbacks.clear()},e}();Mn.sceneMapByElement=new WeakMap,Mn.sceneMapById=new Map;const In=Mn;var Pn=new ie(Date.now()),Tn=function(){return Math.floor(Pn.next()*Math.pow(2,31))},An=function(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=63&n[e];t+=r<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r<63?"_":"-"}return t}()};function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Dn=function(e,t){var n,r=!1,o=t.points;for(var a in void 0!==o&&(t=Ln(Ln({},function(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]});return{width:Math.max.apply(Math,t)-Math.min.apply(Math,t),height:Math.max.apply(Math,n)-Math.min.apply(Math,n)}}(o)),t)),t){var i=t[a];if(void 0!==i){if(e[a]===i&&("object"!=k(i)||null===i||"groupIds"===a))continue;if("points"===a){var l=e[a],c=i;if(l.length===c.length){for(var s=!1,u=l.length;--u;){var d=l[u],p=c[u];if(d[0]!==p[0]||d[1]!==p[1]){s=!0;break}}if(!s)continue}}e[a]=i,r=!0}}r&&(void 0===t.height&&void 0===t.width&&void 0===o||En(e),e.version++,e.versionNonce=Tn(),null===(n=In.getScene(e))||void 0===n||n.informMutation())},jn=function(e,t){return Ln(Ln(Ln({},e),t),{},{version:e.version+1,versionNonce:Tn()})},zn=function(e){return Ve(e)?e.points.length<2:0===e.width&&0===e.height},Bn=function(e,t,n){var r=Math.abs(t),o=Math.abs(n);if("line"===e||"arrow"===e||"draw"===e){var a=Math.round(Math.atan(o/r)/g.ay)*g.ay;0===a?n=0:a===Math.PI/2?t=0:n=Math.round(r*Math.tan(a))*Math.sign(n)||n}else"selection"!==e&&(n=r*Math.sign(n));return{width:t,height:n}},Hn=function(e){var t={width:e.width,height:e.height,x:e.x,y:e.y};if(e.width<0){var n=Math.abs(e.width);t.width=n,t.x=e.x-n}if(e.height<0){var r=Math.abs(e.height);t.height=r,t.y=e.y-r}return t},Nn=a(5474),Rn=a.n(Nn),Fn=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Vn=function(e,t,n){var r,o,a=n.filter(function(t){return t.groupIds.includes(e)});return a.length<2?t.selectedGroupIds[e]||t.editingGroupId===e?Gn(Gn({},t),{},{selectedGroupIds:Gn(Gn({},t.selectedGroupIds),{},(r={},r[e]=!1,r)),editingGroupId:null}):t:Gn(Gn({},t),{},{selectedGroupIds:Gn(Gn({},t.selectedGroupIds),{},(o={},o[e]=!0,o)),selectedElementIds:Gn(Gn({},t.selectedElementIds),Object.fromEntries(a.map(function(e){return[e.id,!0]})))})},Kn=function(e,t){return null!=Yn(e,t)},Yn=function(e,t){return t.groupIds.filter(function(t){return t!==e.editingGroupId}).find(function(t){return e.selectedGroupIds[t]})},Un=function(e){return Object.entries(e.selectedGroupIds).filter(function(e){return e[0],e[1]}).map(function(e){var t=e[0];return e[1],t})},Xn=function(e,t){for(var n=Gn({},e),r=0,o=va(t,e);r<o.length;r++){var a=o[r].groupIds;if(e.editingGroupId){var i=a.indexOf(e.editingGroupId);i>-1&&(a=a.slice(0,i))}if(a.length>0){var l=a[a.length-1];n=Vn(l,n,t)}}return n},Zn=function(e,t){return e.groupIds.includes(t)},qn=function(e,t){return e.filter(function(e){return Zn(e,t)})},Qn=function(e,t,n){var r=Fn([],e),o=n?r.indexOf(n):-1,a=o>-1?o:r.length;return r.splice(a,0,t),r};function $n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$n(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var er=function(e,t){var n,r,o=t.x,a=t.y,i=t.strokeColor,l=t.backgroundColor,c=t.fillStyle,s=t.strokeWidth,u=t.strokeStyle,d=t.roughness,p=t.opacity,f=t.width,h=void 0===f?0:f,m=t.height,g=void 0===m?0:m,v=t.angle,b=void 0===v?0:v,y=t.groupIds,w=void 0===y?[]:y,x=t.strokeSharpness,E=t.boundElementIds,k=void 0===E?null:E,S=Rn()(t,["x","y","strokeColor","backgroundColor","fillStyle","strokeWidth","strokeStyle","roughness","opacity","width","height","angle","groupIds","strokeSharpness","boundElementIds"]);return{id:S.id||An(),type:e,x:o,y:a,width:h,height:g,angle:b,strokeColor:i,backgroundColor:l,fillStyle:c,strokeWidth:s,strokeStyle:u,roughness:d,opacity:p,groupIds:w,strokeSharpness:x,seed:null!==(n=S.seed)&&void 0!==n?n:Tn(),version:S.version||1,versionNonce:null!==(r=S.versionNonce)&&void 0!==r?r:0,isDeleted:!1,boundElementIds:k}},tr=function(e){return er(e.type,e)},nr=function(e,t){return{x:"center"===e.textAlign?t.width/2:"right"===e.textAlign?t.width:0,y:"middle"===e.verticalAlign?t.height/2:0}},rr=function(e){var t=Vt(e.text,Gt(e)),n=nr(e,t);return jn(Jn(Jn({},er("text",e)),{},{text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,textAlign:e.textAlign,verticalAlign:e.verticalAlign,x:e.x-n.x,y:e.y-n.y,width:t.width,height:t.height,baseline:t.baseline}),{})},or=function(e){return Jn(Jn({},er(e.type,e)),{},{points:e.points||[],lastCommittedPoint:null,startBinding:null,endBinding:null,startArrowhead:e.startArrowhead,endArrowhead:e.endArrowhead})},ar=function e(t,n){if(void 0===n&&(n=0),null==t||"object"!=k(t))return t;if("[object Object]"===Object.prototype.toString.call(t)){var r="function"==typeof t.constructor?Object.create(Object.getPrototypeOf(t)):{};for(var o in t)if(t.hasOwnProperty(o)){if(0===n&&("shape"===o||"canvas"===o))continue;r[o]=e(t[o],n+1)}return r}if(Array.isArray(t)){for(var a=t.length,i=new Array(a);a--;)i[a]=e(t[a],n+1);return i}return t},ir=function(e,t,n,r){var o=ar(n);return o.id=An(),o.seed=Tn(),o.groupIds=function(e,t,n){for(var r=Fn([],e),o=t?e.indexOf(t):-1,a=o>-1?o:e.length,i=0;i<a;i++)r[i]=n(r[i]);return r}(o.groupIds,e,function(e){return t.has(e)||t.set(e,An()),t.get(e)}),r&&(o=Object.assign(o,r)),o},lr={mouse:8,pen:16,touch:28},cr={e:!0,s:!0,n:!0,w:!0},sr={e:!0,s:!0,n:!0,w:!0},ur={e:!0,s:!0,n:!0,w:!0,nw:!0,se:!0},dr={e:!0,s:!0,n:!0,w:!0,ne:!0,sw:!0},pr=function(e,t,n,r,o,a,i){var l=Ze(e+n/2,t+r/2,o,a,i);return[l[0]-n/2,l[1]-r/2,n,r]},fr=function(e,t,n,r,o){var a=e[0],i=e[1],l=e[2],c=e[3];void 0===o&&(o={});var s=lr[r],u=s/n.value,d=s/n.value,p=s/n.value,f=s/n.value,h=l-a,m=c-i,g=(a+l)/2,v=(i+c)/2,b=4/n.value,y=(s-8)/(2*n.value),w={nw:o.nw?void 0:pr(a-b-p+y,i-b-f+y,u,d,g,v,t),ne:o.ne?void 0:pr(l+b-y,i-b-f+y,u,d,g,v,t),sw:o.sw?void 0:pr(a-b-p+y,c+b-y,u,d,g,v,t),se:o.se?void 0:pr(l+b-y,c+b-y,u,d,g,v,t),rotation:o.rotation?void 0:pr(a+h/2-u/2,i-b-f+y-16/n.value,u,d,g,v,t)},x=5*lr.mouse/n.value;return Math.abs(h)>x&&(o.n||(w.n=pr(a+h/2-u/2,i-b-f+y,u,d,g,v,t)),o.s||(w.s=pr(a+h/2-u/2,c+b-y,u,d,g,v,t))),Math.abs(m)>x&&(o.w||(w.w=pr(a-b-p+y,i+m/2-d/2,u,d,g,v,t)),o.e||(w.e=pr(l+b-y,i+m/2-d/2,u,d,g,v,t))),w},hr=function(e,t,n){void 0===n&&(n="mouse");var r={};if("arrow"===e.type||"line"===e.type||"draw"===e.type){if(2===e.points.length){var o=e.points[1];0===o[0]||0===o[1]?r=dr:o[0]>0&&o[1]<0?r=ur:o[0]>0&&o[1]>0?r=dr:o[0]<0&&o[1]>0?r=ur:o[0]<0&&o[1]<0&&(r=dr)}}else"text"===e.type&&(r=sr);return fr(it(e),e.angle,t,n,r)},mr=function(e,t){return[0,0,0,0,t,e,1,0]},gr=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=[0,0,0,0,0,0,0,0];if(t<0||t>7)throw new Error("Expected `index` betwen 0 and 7, got `".concat(t,"`"));return 0!==e&&(n[t]=e),n},vr=function(e){return[e[0],e[1],e[2],e[3],-e[4],-e[5],-e[6],-e[7]]},br=function(e,t){return Cr(t)?[e[0]-t,e[1],e[2],e[3],e[4],e[5],e[6],e[7]]:[e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3],e[4]-t[4],e[5]-t[5],e[6]-t[6],e[7]-t[7]]},yr=function(e,t){return Cr(t)?[e[0]*t,e[1]*t,e[2]*t,e[3]*t,e[4]*t,e[5]*t,e[6]*t,e[7]*t]:[wr(e,t),t[1]*e[0]+t[0]*e[1]-t[4]*e[2]+t[5]*e[3]+t[2]*e[4]-t[3]*e[5]-t[7]*e[6]-t[6]*e[7],t[2]*e[0]+t[0]*e[2]-t[6]*e[3]+t[3]*e[6],t[3]*e[0]+t[6]*e[2]+t[0]*e[3]-t[2]*e[6],t[4]*e[0]+t[2]*e[1]-t[1]*e[2]+t[7]*e[3]+t[0]*e[4]+t[6]*e[5]-t[5]*e[6]+t[3]*e[7],t[5]*e[0]-t[3]*e[1]+t[7]*e[2]+t[1]*e[3]-t[6]*e[4]+t[0]*e[5]+t[4]*e[6]+t[2]*e[7],t[6]*e[0]+t[3]*e[2]-t[2]*e[3]+t[0]*e[6],t[7]*e[0]+t[6]*e[1]+t[5]*e[2]+t[4]*e[3]+t[3]*e[4]+t[2]*e[5]+t[1]*e[6]+t[0]*e[7]]},wr=function(e,t){return t[0]*e[0]+t[2]*e[2]+t[3]*e[3]-t[6]*e[6]},xr=function(e,t){return[Er(e,t),e[1]*t[7]+e[4]*t[5]-e[5]*t[4]+e[7]*t[1],e[2]*t[7]-e[4]*t[6]+e[6]*t[4]+e[7]*t[2],e[3]*t[7]+e[5]*t[6]-e[6]*t[5]+e[7]*t[3],e[4]*t[7]+e[7]*t[4],e[5]*t[7]+e[7]*t[5],e[6]*t[7]+e[7]*t[6],e[7]*t[7]]},Er=function(e,t){return e[0]*t[7]+e[1]*t[6]+e[2]*t[5]+e[3]*t[4]+e[4]*t[3]+e[5]*t[2]+e[6]*t[1]+e[7]*t[0]},kr=function(e){return Math.sqrt(Math.abs(e[0]*e[0]-e[2]*e[2]-e[3]*e[3]+e[6]*e[6]))},Sr=function(e){var t=kr(e);if(0===t||1===t)return e;var n=e[6]<0?-1:1;return yr(e,n/t)},Cr=function(e){return"number"==typeof e},Or=(gr(1,1),gr(1,2),gr(1,3),gr(1,4),gr(1,5),gr(1,6),gr(1,7),function(e,t,n){return Sr([0,n,e,t,0,0,0,0])}),Mr=function(e,t){return Sr(xr(t,e))},Ir=function(e,t){return n=e,[(r=t)[0]*n[0]+r[2]*n[2]+r[3]*n[3]-r[6]*n[6],r[1]*n[0]+r[0]*n[1]-r[4]*n[2]+r[5]*n[3]+r[2]*n[4]-r[3]*n[5]-r[7]*n[6]-r[6]*n[7],r[2]*n[0]+r[0]*n[2]-r[6]*n[3]+r[3]*n[6],r[3]*n[0]+r[6]*n[2]+r[0]*n[3]-r[2]*n[6],r[4]*n[0]+r[7]*n[3]+r[0]*n[4]+r[3]*n[7],r[5]*n[0]+r[7]*n[2]+r[0]*n[5]+r[2]*n[7],r[6]*n[0]+r[0]*n[6],r[7]*n[0]+r[0]*n[7]];var n,r},Pr=function(e){var t=e[0];return[0,0,0,0,e[1],t,1,0]},Tr=function(e){return[e[5],e[4]]},Ar=function(e,t){return Sr((n=e,[(r=t)[0]*n[0],r[1]*n[0]+r[0]*n[1],r[2]*n[0]+r[0]*n[2],r[3]*n[0]+r[0]*n[3],r[4]*n[0]+r[2]*n[1]-r[1]*n[2]+r[0]*n[4],r[5]*n[0]-r[3]*n[1]+r[1]*n[3]+r[0]*n[5],r[6]*n[0]+r[3]*n[2]-r[2]*n[3]+r[0]*n[6],r[7]*n[0]+r[6]*n[1]+r[5]*n[2]+r[4]*n[3]+r[3]*n[4]+r[2]*n[5]+r[1]*n[6]]));var n,r},_r=function(e,t){return kr(xr(e,t))},Lr=function(e,t){return Er(e,t)},Dr=function(e){return[0,0,0,0,e[4],e[5],0,0]},jr=function(e,t){return n=yr(e,Math.sin(t/2)),r=Math.cos(t/2),Cr(r)?[n[0]+r,n[1],n[2],n[3],n[4],n[5],n[6],n[7]]:[n[0]+r[0],n[1]+r[1],n[2]+r[2],n[3]+r[3],n[4]+r[4],n[5]+r[5],n[6]+r[6],n[7]+r[7]];var n,r},zr=function(e,t){return Sr(yr(yr(e,t),vr(e)))},Br=function(e,t,n,r){var o=10/t.zoom.value;return!Hr(e,t,[n,r])&&Nr(e,[n,r],o)},Hr=function(e,t,n){var r=10/t.zoom.value,o="text"===e.type?Vr:function(e){if("arrow"===e.type)return!1;var t="transparent"!==e.backgroundColor;return"line"===e.type||"draw"===e.type?t&&Je(e.points):t}(e)?Kr:Yr;return Wr({element:e,point:n,threshold:r,check:o})},Nr=function(e,t,n){var r=t[0],o=t[1],a=it(e),i=a[0],l=a[1],c=a[2],s=a[3],u=Ze(r,o,(i+c)/2,(l+s)/2,-e.angle),d=u[0],p=u[1];return d>i-n&&d<c+n&&p>l-n&&p<s+n},Rr=function(e,t){var n=t.x,r=t.y,o=Fr(e,e.width,e.height);return Wr({element:e,point:[n,r],threshold:o,check:Ur})},Fr=function(e,t,n){var r=("diamond"===e.type?1/Math.sqrt(2):1)*Math.min(t,n);return Math.max(16,Math.min(.25*r,32))},Wr=function(e){switch(e.element.type){case"rectangle":case"text":case"diamond":case"ellipse":var t=Gr(e.element,e.point);return e.check(t,e.threshold);case"arrow":case"line":case"draw":return $r(e);case"selection":return console.warn("This should not happen, we need to investigate why it does."),!1}},Gr=function(e,t){switch(e.type){case"rectangle":case"text":return Xr(e,t);case"diamond":return Zr(e,t);case"ellipse":return qr(e,t)}},Vr=function(e,t){return e<0},Kr=function(e,t){return e<t},Yr=function(e,t){return Math.abs(e)<t},Ur=function(e,t){return 0<=e&&e<t},Xr=function(e,t){var n=Jr(e,t),r=n[1],o=n[2],a=n[3];return Math.max(Lr(r,Or(0,1,-a)),Lr(r,Or(1,0,-o)))},Zr=function(e,t){var n=Jr(e,t),r=n[1],o=n[2],a=n[3],i=Or(a,o,-a*o);return Lr(r,i)},qr=function(e,t){var n=Qr(e,t),r=n[0],o=n[1];return-function(e){return Math.sign(e[1])}(o)*Lr(r,o)},Qr=function(e,t){var n=Jr(e,t),r=n[1],o=n[2],a=n[3],i=Tr(r),l=i[0],c=i[1],s=.707,u=.707,d=o,p=a;[0,1,2,3].forEach(function(e){var t=d*s,n=p*u,r=(d*d-p*p)*Math.pow(s,3)/d,o=(p*p-d*d)*Math.pow(u,3)/p,a=t-r,i=n-o,f=l-r,h=c-o,m=Math.hypot(i,a),g=Math.hypot(h,f);s=Math.min(1,Math.max(0,(f*m/g+r)/d)),u=Math.min(1,Math.max(0,(h*m/g+o)/p));var v=Math.hypot(u,s);s/=v,u/=v});var f,h=mr(d*s,p*u);return[r,Ir(Mr(r,f=h),f)]},$r=function(e){var t=e.element,n=e.threshold;if(!xn(t))return!1;var r=Jr(e.element,e.point),o=r[0],a=r[1],i=r[2],l=r[3],c=Or(0,1,-l),s=Or(1,0,-i);if(!Kr(Lr(a,c),n)||!Kr(Lr(a,s),n))return!1;var u=Tr(o),d=u[0],p=u[1],f=xn(t);return!(e.check!==Kr||!f.some(function(e){return co(e,d,p,t.strokeSharpness)}))||f.some(function(e){return so(e,d,p,n)})},Jr=function(e,t){var n,r=Pr(t),o=it(e),a=to(o),i=jr(a,e.angle),l=zr(i,r),c=function(e){return[0,0,0,0,Math.abs(e[4]),Math.abs(e[5]),1,0]}(br(l,Dr(a))),s=(n=e.x,[0,0,0,0,e.y,n,0,0]),u=br(l,s),d=o[0],p=o[1];return[u,c,(o[2]-d)/2,(o[3]-p)/2]},eo=function(e){var t=it(e),n=to(t),r=jr(n,e.angle),o=vr(function(e){return[1,0,0,0,-.5*e[5],.5*e[4],0,0]}(Dr(n)));return yr(o,r)},to=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return mr((t+r)/2,(n+o)/2)},no=function(e,t,n){var r=eo(e),o=zr(r,Pr(t)),a=zr(r,Pr(n)),i=Mr(o,a),l=e.height/e.width,c=e.width/2,s=e.height/2,u=i[2],d=i[3],p=i[1],f=Math.abs(d),h=Math.abs(u);switch(e.type){case"rectangle":case"text":return p/(c*(h+l*f));case"diamond":return f<h?p/(h*c):p/(f*s);case"ellipse":return p/(c*Math.sqrt(Math.pow(u,2)+Math.pow(l,2)*Math.pow(d,2)))}},ro=function(e,t){void 0===t&&(t=1);var n=t*e.width/2,r=t*e.height/2;switch(e.type){case"rectangle":case"text":return[mr(n,r),mr(n,-r),mr(-n,-r),mr(-n,r)];case"diamond":return[mr(0,r),mr(n,0),mr(0,-r),mr(-n,0)]}},oo=function(e,t){var n=t[0],r=t[1];return Lr(n,e)*Lr(r,e)>=0?[]:[Ar(e,Mr(n,r))]},ao=function(e,t){var n=e[0],r=e[1],o=function(e,t){var n=.5*t;return[1,0,0,0,n*e[4],n*e[5],0,0]}(function(e,t){return function(e){var t=function(e){return Math.sqrt(Math.abs(e[7]*e[7]-e[5]*e[5]-e[4]*e[4]+e[1]*e[1]))}(e);return 0===t||1===t?e:yr(e,1/t)}([0,0,0,0,t[4]-e[4],t[5]-e[5],0,0])}(n,r),t);return[zr(o,n),zr(o,r)]},io=function(e,t,n){var r=e.width/2+t,o=e.height/2+t,a=n[2],i=n[3],l=n[1],c=r*r*a*a+o*o*i*i,s=c-l*l;if(0===c||s<=0)return[];var u=Math.sqrt(s),d=-r*r*a*l,p=-o*o*i*l;return[mr((d+r*o*i*u)/c,(p-r*o*a*u)/c),mr((d-r*o*i*u)/c,(p+r*o*a*u)/c)]},lo=function(e,t,n){if(0===t)return 0===Lr(n,e)?[e]:[];var r=n[2],o=n[3],a=n[1],i=Tr(e),l=i[0],c=i[1],s=r*r+o*o,u=t*t*s-Math.pow(r*l+o*c+a,2);if(0===s||u<=0)return[];var d=Math.sqrt(u),p=l*o*o-c*r*o-r*a,f=c*r*r-l*r*o-o*a;return[mr((p+o*d)/s,(f-r*d)/s),mr((p-o*d)/s,(f+r*d)/s)]},co=function(e,t,n,r){for(var o=[],a=!1,i=0,l=lt(e);i<l.length;i++){var c=l[i];"move"===c.op?(a=!a)&&o.push([c.data[0],c.data[1]]):"bcurveTo"===c.op&&a&&(o.push([c.data[0],c.data[1]]),o.push([c.data[2],c.data[3]]),o.push([c.data[4],c.data[5]]))}if(o.length>=4){if("sharp"===r)return et(o,t,n);var s=V(o,10,5);return et(s,t,n)}return!1},so=function(e,t,n,r){var o=lt(e),a=[0,0];return o.some(function(e,o){var i=e.op,l=e.data;if("move"===i)a=l;else if("bcurveTo"===i){var c=[l[0],l[1]],s=[l[2],l[3]],u=[l[4],l[5]],d=a;return a=u,function(e,t,n,r,o,a){for(var i=o[0],l=o[1],c=function(o,a){return Math.pow(1-o,3)*r[a]+3*o*Math.pow(1-o,2)*n[a]+3*Math.pow(o,2)*(1-o)*t[a]+e[a]*Math.pow(o,3)},s=0;s<=1;){var u=c(s,0),d=c(s,1);if(Math.sqrt(Math.pow(u-i,2)+Math.pow(d-l,2))<a)return!0;s+=.01}return!1}(d,c,s,u,[t,n],r)}return!1})},uo=function(e,t,n){return t>=e[0]&&t<=e[0]+e[2]&&n>=e[1]&&n<=e[1]+e[3]},po=function(e,t,n,r,o,a){return e.reduce(function(e,i){if(e)return e;var l=function(e,t,n,r,o,a){if(!t.selectedElementIds[e.id])return!1;var i=hr(e,o,a),l=i.rotation,c=Rn()(i,["rotation"]);if(l&&uo(l,n,r))return"rotation";var s=Object.keys(c).filter(function(e){var t=c[e];return!!t&&uo(t,n,r)});return s.length>0&&s[0]}(i,t,n,r,o,a);return l?{element:i,transformHandleType:l}:null},null)},fo=function(e,t,n,r,o){var a=e[0],i=e[1],l=e[2],c=e[3],s=fr([a,i,l,c],0,r,o,cr);return Object.keys(s).find(function(e){var r=s[e];return r&&uo(r,t,n)})||!1},ho=["ns","nesw","ew","nwse"],mo=function(e){var t=e.element,n=e.transformHandleType,r=t&&Math.sign(t.height)*Math.sign(t.width)==-1,o=null;switch(n){case"n":case"s":o="ns";break;case"w":case"e":o="ew";break;case"nw":case"se":o=r?"nesw":"nwse";break;case"ne":case"sw":o=r?"nwse":"nesw";break;case"rotation":return"grab"}return o&&t&&(o=function(e,t){var n=ho.indexOf(e);if(n>=0){var r=Math.round(t/(Math.PI/4));e=ho[(n+r)%ho.length]}return e}(o,t.angle)),o?"".concat(o,"-resize"):""},go=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yo=function(){function e(t,n){this.elementId=t.id,In.mapElementToScene(this.elementId,n),e.normalizePoints(t),this.activePointIndex=null,this.lastUncommittedPoint=null,this.isDragging=!1,this.pointerOffset={x:0,y:0},this.startBindingElement="keep",this.endBindingElement="keep"}return e.getElement=function(e){var t;return(null===(t=In.getScene(e))||void 0===t?void 0:t.getNonDeletedElement(e))||null},e.handlePointDragging=function(t,n,r,o,a){if(!t.editingLinearElement)return!1;var i=t.editingLinearElement,l=i.activePointIndex,c=i.elementId,s=i.isDragging,u=e.getElement(c);if(!u)return!1;if(null!=l&&l>-1){!1===s&&n({editingLinearElement:bo(bo({},i),{},{isDragging:!0})});var d=e.createPointAt(u,r-i.pointerOffset.x,o-i.pointerOffset.y,t.gridSize);return e.movePoint(u,l,d),Ye(u)&&a(u,0===l?"start":"end"),!0}return!1},e.handlePointerUp=function(t,n,r){var o,a=n.elementId,i=n.activePointIndex,l=n.isDragging,c=e.getElement(a);if(!c)return n;var s={};if(l&&(0===i||i===c.points.length-1)){Je(c.points,r.zoom.value)&&e.movePoint(c,i,0===i?c.points[c.points.length-1]:c.points[0]);var u=Eo(r)?Lo(on(e.getPointAtIndexGlobalCoordinates(c,i)),In.getScene(c)):null;(o={})[0===i?"startBindingElement":"endBindingElement"]=u,s=o}return bo(bo(bo({},n),s),{},{isDragging:!1,pointerOffset:{x:0,y:0}})},e.handlePointerDown=function(t,n,r,o,a){var i={didAddPoint:!1,hitElement:null};if(!n.editingLinearElement)return i;var l=n.editingLinearElement.elementId,c=e.getElement(l);if(!c)return i;if(t.altKey)return null==n.editingLinearElement.lastUncommittedPoint&&Dn(c,{points:go(go([],c.points),[e.createPointAt(c,a.x,a.y,n.gridSize)])}),o.resumeRecording(),r({editingLinearElement:bo(bo({},n.editingLinearElement),{},{activePointIndex:c.points.length-1,lastUncommittedPoint:null,endBindingElement:Lo(a,In.getScene(c))})}),i.didAddPoint=!0,i;var s=e.getPointIndexUnderCursor(c,n.zoom,a.x,a.y);if(s>-1)i.hitElement=c;else{var u=n.editingLinearElement,d=u.startBindingElement,p=u.endBindingElement;Eo(n)&&Ye(c)&&ko(c,d,p)}var f=it(c),h=f[0],m=f[1],g=(h+f[2])/2,v=(m+f[3])/2,b=s>-1&&Ze(c.x+c.points[s][0],c.y+c.points[s][1],g,v,c.angle);return r({editingLinearElement:bo(bo({},n.editingLinearElement),{},{activePointIndex:s>-1?s:null,pointerOffset:b?{x:a.x-b[0],y:a.y-b[1]}:{x:0,y:0}})}),i},e.handlePointerMove=function(t,n,r,o,a){var i=o.elementId,l=o.lastUncommittedPoint,c=e.getElement(i);if(!c)return o;var s=c.points,u=s[s.length-1];if(!t.altKey)return u===l&&e.movePoint(c,s.length-1,"delete"),bo(bo({},o),{},{lastUncommittedPoint:null});var d=e.createPointAt(c,n-o.pointerOffset.x,r-o.pointerOffset.y,a);return u===l?e.movePoint(c,c.points.length-1,d):e.movePoint(c,"new",d),bo(bo({},o),{},{lastUncommittedPoint:c.points[c.points.length-1]})},e.getPointsGlobalCoordinates=function(e){var t=it(e),n=t[0],r=t[1],o=t[2],a=t[3],i=(n+o)/2,l=(r+a)/2;return e.points.map(function(t){var n,r=e.x,o=e.y;return[r=(n=Ze(r+t[0],o+t[1],i,l,e.angle))[0],o=n[1]]})},e.getPointAtIndexGlobalCoordinates=function(e,t){var n=t<0?e.points.length+t:t,r=it(e),o=r[0],a=r[1],i=(o+r[2])/2,l=(a+r[3])/2,c=e.points[n],s=e.x,u=e.y;return Ze(s+c[0],u+c[1],i,l,e.angle)},e.pointFromAbsoluteCoords=function(e,t){var n=it(e),r=n[0],o=n[1],a=(r+n[2])/2,i=(o+n[3])/2,l=Ze(t[0],t[1],a,i,-e.angle),c=l[0],s=l[1];return[c-e.x,s-e.y]},e.getPointIndexUnderCursor=function(e,t,n,r){for(var o=this.getPointsGlobalCoordinates(e),a=o.length;--a>-1;){var i=o[a];if($e(n,r,i[0],i[1])*t.value<this.POINT_HANDLE_SIZE/2+1)return a}return-1},e.createPointAt=function(e,t,n,r){var o=ot(t,n,r),a=it(e),i=a[0],l=a[1],c=(i+a[2])/2,s=(l+a[3])/2,u=Ze(o[0],o[1],c,s,-e.angle),d=u[0],p=u[1];return[d-e.x,p-e.y]},e.normalizePoints=function(e){var t=e.points,n=t[0][0],r=t[0][1];Dn(e,{points:t.map(function(e,t){return[e[0]-n,e[1]-r]}),x:e.x+n,y:e.y+r})},e.movePointByOffset=function(t,n,r){var o=t.points[n],a=o[0],i=o[1];e.movePoint(t,n,[a+r.x,i+r.y])},e.movePoint=function(e,t,n,r){var o,a=e.points,i=0,l=0;if("delete"===n){if("new"===t)throw new Error("invalid args in movePoint");(o=a.slice()).splice(t,1),0===t&&(i=o[0][0],l=o[0][1],o=o.map(function(e,t){return 0===t?[0,0]:[e[0]-i,e[1]-l]}))}else if("new"===t)o=go(go([],a),[n]);else{var c=n[0]-a[t][0],s=n[1]-a[t][1];o=a.map(function(e,n){return n===t?0===n?(i=c,l=s,e):(i=0,l=0,[e[0]+c,e[1]+s]):i||l?[e[0]-i,e[1]-l]:e})}var u=ft(e,o,e.strokeSharpness||"round"),d=ft(e,a,e.strokeSharpness||"round"),p=(u[0]+u[2])/2,f=(u[1]+u[3])/2,h=(d[0]+d[2])/2,m=(d[1]+d[3])/2,g=Ze(i,l,h-p,m-f,e.angle);Dn(e,bo(bo({},r),{},{points:o,x:e.x+g[0],y:e.y+g[1]}))},e}();yo.POINT_HANDLE_SIZE=20;var wo=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Eo=function(e){return e.isBindingEnabled},ko=function(e,t,n){var r=new Set,o=new Set;So(e,t,n,"start",r,o),So(e,n,t,"end",r,o);var a=Array.from(o).filter(function(e){return!r.has(e)});In.getScene(e).getNonDeletedElements(a).forEach(function(t){var n;Dn(t,{boundElementIds:null===(n=t.boundElementIds)||void 0===n?void 0:n.filter(function(t){return t!==e.id})})})},So=function(e,t,n,r,o,a){if("keep"!==t)if(null!=t)null!=n&&("keep"===n?Po(e,t,r):"start"!==r&&n.id===t.id)||(Io(e,t,r),o.add(t.id));else{var i=_o(e,r);null!=i&&a.add(i)}},Co=function(e){e.forEach(function(e){Ye(e)?ko(e,Ro(e,"start"),Ro(e,"end")):Xe(e)&&Oo(e)})},Oo=function(e){Wo(e).forEach(function(t){var n=t[0],r=t[1];return ko(n,"end"===r?"keep":e,"start"===r?"keep":e)})},Mo=function(e,t,n,r){null!=t.startBoundElement&&Io(e,t.startBoundElement,"start");var o=Lo(r,n);null==o||Po(e,o,"end")||Io(e,o,"end")},Io=function(e,t,n){var r,o;Dn(e,((r={})["start"===n?"startBinding":"endBinding"]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xo(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({elementId:t.id},Do(e,t,n)),r)),Dn(t,{boundElementIds:wo([],new Set(wo(wo([],null!==(o=t.boundElementIds)&&void 0!==o?o:[]),[e.id])))})},Po=function(e,t,n){var r=e["start"===n?"endBinding":"startBinding"];return To(e,null==r?void 0:r.elementId,t)},To=function(e,t,n){return t===n.id&&e.points.length<3},Ao=function(e){e.forEach(function(e){Ye(e)&&ko(e,null,null)})},_o=function(e,t){var n,r="start"===t?"startBinding":"endBinding",o=e[r];return null==o?null:(Dn(e,((n={})[r]=null,n)),o.elementId)},Lo=function(e,t){return Oa(t.getElements(),function(t){return Xe(t)&&Rr(t,e)})},Do=function(e,t,n){var r="start"===n?-1:1,o=-1===r?0:e.points.length-1,a=o-r,i=yo.getPointAtIndexGlobalCoordinates(e,o),l=yo.getPointAtIndexGlobalCoordinates(e,a);return{focus:no(t,l,i),gap:Math.max(1,Gr(t,i))}},jo=function(e,t){var n,r=null!==(n=e.boundElementIds)&&void 0!==n?n:[];if(0!==r.length){var o=null!=t?t:{},a=o.newSize,i=o.simultaneouslyUpdated,l=Bo(i);In.getScene(e).getNonDeletedElements(r).forEach(function(t){var n=e;if(zo(t,n)){var r=No(n,t.startBinding,a),o=No(n,t.endBinding,a);l.has(t.id)?Dn(t,{startBinding:r,endBinding:o}):(Ho(t,"start",r,e),Ho(t,"end",o,e))}})}},zo=function(e,t){var n,r;return(null===(n=e.startBinding)||void 0===n?void 0:n.elementId)===t.id||(null===(r=e.endBinding)||void 0===r?void 0:r.elementId)===t.id},Bo=function(e){return new Set((e||[]).map(function(e){return e.id}))},Ho=function(e,t,n,r){var o;if(!(null==n||n.elementId!==r.id&&e.points.length>2)){var a=In.getScene(e).getElement(n.elementId);if(null!=a){var i,l="start"===t?-1:1,c=-1===l?0:e.points.length-1,s=c-l,u=yo.getPointAtIndexGlobalCoordinates(e,s),d=function(e,t,n){if(0===t){var r=it(e),o=to(r);return Tr(o)}var a,i=eo(e),l=zr(i,Pr(n)),c=vr(i);switch(e.type){case"rectangle":case"text":case"diamond":a=function(e,t,n){var r=Math.abs(t),o=Math.sign(t),a=ro(e,r),i=0,l=null;return a.forEach(function(e){var t=o*Mr(n,e)[1];t>i&&(i=t,l=e)}),l}(e,t,l);break;case"ellipse":a=function(e,t,n){var r=Math.abs(t),o=e.width*r/2,a=e.height*r/2,i=Math.sign(t),l=Tr(n),c=l[0],s=l[1],u=0===s?1e-4:s,d=Math.pow(c,2)*Math.pow(a,2)+Math.pow(u,2)*Math.pow(o,2),p=(-c*Math.pow(a,2)+i*u*Math.sqrt(Math.max(0,d-Math.pow(o,2)*Math.pow(a,2))))/d,f=(-p*c-1)/u,h=-Math.pow(o,2)*p/(Math.pow(f,2)*Math.pow(a,2)+Math.pow(p,2)*Math.pow(o,2));return mr(h,(-p*h-1)/f)}(e,t,l)}return Tr(zr(c,a))}(a,n.focus,u);if(0===n.gap)i=d;else{var p=function(e,t,n,r){void 0===r&&(r=0);var o=eo(e),a=zr(o,Pr(t)),i=zr(o,Pr(n)),l=Mr(a,i),c=vr(o);return function(e,t,n,r){var o;switch(void 0===r&&(r=0),e.type){case"rectangle":case"text":case"diamond":var a=ro(e);o=a.flatMap(function(e,n){var o=[e,a[(n+1)%4]];return oo(t,ao(o,r))}).concat(a.flatMap(function(e){return lo(e,r,t)}));break;case"ellipse":o=io(e,r,t)}if(o.length<2)return[];var i=o.sort(function(e,t){return _r(e,n)-_r(t,n)});return[i[0],i[i.length-1]]}(e,l,a,r).map(function(e){return Tr(zr(c,e))})}(a,u,d,n.gap);i=0===p.length?d:p[0]}yo.movePoint(e,c,yo.pointFromAbsoluteCoords(e,i),((o={})["start"===t?"startBinding":"endBinding"]=n,o))}}},No=function(e,t,n){if(null==t||null==n)return t;var r=t.gap,o=t.focus,a=t.elementId,i=n.width,l=n.height,c=e.width,s=e.height;return{elementId:a,gap:Math.max(1,Math.min(Fr(e,i,l),r*(i<l?i/c:l/s))),focus:o}},Ro=function(e,t){return Lo(Fo(e,t),In.getScene(e))},Fo=function(e,t){var n="start"===t?0:-1;return on(yo.getPointAtIndexGlobalCoordinates(e,n))},Wo=function(e){return In.getScene(e).getElements().map(function(t){if(!Ye(t))return null;var n=Go(t,"start",e),r=Go(t,"end",e);return n||r?[t,n&&r?"both":n?"start":"end",e]:null}).filter(function(e){return null!=e})},Go=function(e,t,n){return null==e["start"===t?"startBinding":"endBinding"]&&!Po(e,n,t)&&Rr(n,Fo(e,t))},Vo=function(e,t,n,r){var o=new Set,a=new Set,i="duplicatesServeAsOld"===r;t.forEach(function(e){var t=e.boundElementIds;if(null!=t&&t.length>0&&(t.forEach(function(e){i&&!n.has(e)&&o.add(e)}),a.add(n.get(e.id))),Ye(e)){if(null!=e.startBinding){var r=e.startBinding.elementId;i&&!n.has(r)&&a.add(r)}null!=e.endBinding&&(r=e.endBinding.elementId,i&&!n.has(r)&&a.add(r)),null==e.startBinding&&null==e.endBinding||o.add(n.get(e.id))}}),e.filter(function(e){var t=e.id;return o.has(t)}).forEach(function(e){var t=e.startBinding,r=e.endBinding;Dn(e,{startBinding:Ko(t,n),endBinding:Ko(r,n)})}),e.filter(function(e){var t=e.id;return a.has(t)}).forEach(function(e){var t=e.boundElementIds;null!=t&&t.length>0&&Dn(e,{boundElementIds:t.map(function(e){var t;return null!==(t=n.get(e))&&void 0!==t?t:e})})})},Ko=function(e,t){var n;if(null==e)return null;var r=e.elementId;return{focus:e.focus,gap:e.gap,elementId:null!==(n=t.get(r))&&void 0!==n?n:r}},Yo=function(e,t){var n=new Set(t.map(function(e){return e.id})),r=new Set;t.forEach(function(e){var t;Xe(e)&&(null===(t=e.boundElementIds)||void 0===t||t.forEach(function(e){n.has(e)||r.add(e)}))}),e.filter(function(e){var t=e.id;return r.has(t)}).forEach(function(e){var t=e.startBinding,r=e.endBinding;Dn(e,{startBinding:Uo(t,n),endBinding:Uo(r,n)})})},Uo=function(e,t){return null==e||t.has(e.elementId)?null:e},Xo=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qo=function(e){return e>=2*Math.PI?e-2*Math.PI:e},$o=function(e,t,n,r){var o=it(e),a=o[0],i=o[1],l=(a+o[2])/2,c=(i+o[3])/2,s=5*Math.PI/2+Math.atan2(n-c,t-l);r&&(s+=g.ay/2,s-=s%g.ay),s=Qo(s),Dn(e,{angle:s})},Jo=function(e,t,n){return Ve(e)?{points:at(0,t,at(1,n,e.points))}:{}},ea=function(e,t,n){var r=e.fontSize*(t/e.width);if(r<1)return null;var o=Vt(e.text,Gt({fontSize:r,fontFamily:e.fontFamily}));return{size:r,baseline:o.baseline+(n-o.height)}},ta=function(e,t,n,r,o,a,i){var l=5*Math.PI/2+Math.atan2(r-i,n-a);o&&(l+=g.ay/2,l-=l%g.ay),t.forEach(function(t,n){var r,o,c=it(t),s=c[0],u=c[1],d=(s+c[2])/2,p=(u+c[3])/2,f=null!==(r=null===(o=e.originalElements.get(t.id))||void 0===o?void 0:o.angle)&&void 0!==r?r:t.angle,h=Ze(d,p,a,i,l+f-t.angle),m=h[0],g=h[1];Dn(t,{x:t.x+(m-d),y:t.y+(g-p),angle:Qo(l+f)})})},na=function(e,t,n,r,o,a,i,l,c,s){var u;c&&(i=(u=Bn(t,i,a<r?-l:l)).width,(l=u.height)<0&&(l=-l));var d=o<n?n-i:n,p=a<r?r-l:r;s&&(d=n-(i+=i)/2,p=r-(l+=l)/2),0!==i&&0!==l&&Dn(e,{x:d,y:p,width:i,height:l})},ra=function(e){return e.replace(/\t/g,"        ").replace(/\r?\n|\r/g,"\n")},oa=function(e,t,n,r){var o=r.zoom,a=r.offsetTop,i=r.offsetLeft,l=180*n/Math.PI;return"translate(".concat((e-2*i)*(o.value-1)/2,"px, ").concat((t-2*a)*(o.value-1)/2,"px) scale(").concat(o.value,") rotate(").concat(l,"deg)")},aa=function(e){var t=Vt(e.text,Gt(e));Dn(e,{width:t.width,height:t.height,baseline:t.baseline})},ia=function(e,t){return Boolean(!e.viewModeEnabled&&(e.editingElement||va(t,e).length||"selection"!==e.elementType))};function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var sa=function(e){return e.filter(function(e){return e.isDeleted||!zn(e)})},ua=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},da=function(e){return e.reduce(function(e,t){return e+t.version},0)},pa=function(e){return e.filter(function(e){return!e.isDeleted})},fa=function(e){return!e.isDeleted},ha=function(e){return function(e){return pa(e).map(function(e){return Ke(e.type)?ca(ca({},e),{},{lastCommittedPoint:null}):e})}(e)},ma=function(e,t,n){var r=[e.horizontal,e.vertical].map(function(e){return null!=e&&e.x<=t&&t<=e.x+e.width&&e.y<=n&&n<=e.y+e.height}),o=r[0],a=r[1];return{isOverEither:o||a,isOverHorizontal:o,isOverVertical:a}},ga=function(e,t){return e.some(function(e){return t.selectedElementIds[e.id]})},va=function(e,t){return e.filter(function(e){return t.selectedElementIds[e.id]})},ba=function(e,t){return t.editingElement?[t.editingElement]:va(e,t)},ya=function(e){var t=e.scenePoint,n=e.viewportDimensions,r=e.zoom;return{scrollX:n.width/2*(1/r.value)-t.x-r.translation.x*(1/r.value),scrollY:n.height/2*(1/r.value)-t.y-r.translation.y*(1/r.value)}},wa=function(e,t,n){var r;if(!e.length)return{scrollX:0,scrollY:0};var o=dt(e),a=o[0],i=o[1],l=o[2],c=o[3];return function(e,t,n){var r=n[2],o=n[3],a=en({sceneX:n[0],sceneY:n[1]},e),i=a.x,l=a.y,c=en({sceneX:r,sceneY:o},e),s=c.x,u=c.y;return s-i>e.width||u-l>e.height}(t,0,[a,i,l,c])&&(a=(r=function(e,t){if(!e.length)return[0,0,0,0];var n=1/0,r=e[0];return e.forEach(function(e){var o=ut(e),a=o[0],i=o[1],l=o[2],c=o[3],s=$e((a+l)/2,(i+c)/2,t.x,t.y);s<n&&(n=s,r=e)}),ut(r)}(e,Jt({clientX:t.scrollX,clientY:t.scrollY},t)))[0],i=r[1],l=r[2],c=r[3]),ya({scenePoint:{x:(a+l)/2,y:(i+c)/2},viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})},xa=function(e){return"rectangle"===e||"ellipse"===e||"diamond"===e||"draw"===e||"line"===e},Ea=function(e){return"rectangle"===e||"ellipse"===e||"diamond"===e||"arrow"===e||"draw"===e||"line"===e},ka=function(e){return"rectangle"===e||"arrow"===e||"draw"===e||"line"===e},Sa=function(e){return"text"===e},Ca=function(e){return"arrow"===e},Oa=function(e,t){for(var n=null,r=e.length-1;r>=0;--r){var o=e[r];if(!o.isDeleted&&t(o)){n=o;break}}return n},Ma=function(e,t,n,r){return void 0===r&&(r={x:0,y:0}),{value:e,translation:{x:r.x-n.left-(r.x-n.left-t.translation.x)*(e/t.value),y:r.y-n.top-(r.y-n.top-t.translation.y)*(e/t.value)}}},Ia=function(e){var t=parseFloat(e.toFixed(2));return Math.max(.1,Math.min(t,10))},Pa=(a(9478),m().forwardRef(function(e,t){var n=m().useRef(null);m().useImperativeHandle(t,function(){return n.current});var r="ToolIcon_size_".concat(e.size||"m");return"button"===e.type?m().createElement("button",{className:We("ToolIcon_type_button",r,e.className,e.visible&&!e.hidden?"ToolIcon_type_button--show":"ToolIcon_type_button--hide",{ToolIcon:!e.hidden,"ToolIcon--selected":e.selected}),hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:"button",onClick:e.onClick,ref:n},m().createElement("div",{className:"ToolIcon__icon","aria-hidden":"true"},e.icon||e.label,e.keyBindingLabel&&m().createElement("span",{className:"ToolIcon__keybinding"},e.keyBindingLabel)),e.showAriaLabel&&m().createElement("div",{className:"ToolIcon__label"},e["aria-label"]),e.children):m().createElement("label",{className:We("ToolIcon",e.className),title:e.title},m().createElement("input",{className:"ToolIcon_type_radio ".concat(r),type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:e.id,onChange:e.onChange,checked:e.checked,ref:n}),m().createElement("div",{className:"ToolIcon__icon"},e.icon,e.keyBindingLabel&&m().createElement("span",{className:"ToolIcon__keybinding"},e.keyBindingLabel)))}));Pa.defaultProps={visible:!0,className:""};var Ta=function(e){return"light"===e?ht.$y[4]:ht.$y[9]},Aa=function(e){return"light"===e?ht.Sn:ht.MA[4]},_a=function(e){return"light"===e?ht.ix:"#1e1e1e"},La=function(e,t){void 0===t&&(t=512);var n="number"==typeof t?{width:t}:t,r=n.width,o=void 0===r?512:r,a=n.height,i=void 0===a?o:a,l=n.mirror,c=n.style;return m().createElement("svg",{"aria-hidden":"true",focusable:"false",role:"img",viewBox:"0 0 ".concat(o," ").concat(i),className:We({"rtl-mirror":l}),style:c},"string"==typeof e?m().createElement("path",{fill:"currentColor",d:e}):e)},Da=(La("M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z",{mirror:!0}),La("M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z",{width:448,height:512})),ja=La("M252 54L203 8a28 27 0 00-20-8H28C12 0 0 12 0 27v195c0 15 12 26 28 26h204c15 0 28-11 28-26V73a28 27 0 00-8-19zM130 213c-21 0-37-16-37-36 0-19 16-35 37-35 20 0 37 16 37 35 0 20-17 36-37 36zm56-169v56c0 4-4 6-7 6H44c-4 0-7-2-7-6V42c0-4 3-7 7-7h133l4 2 3 2a7 7 0 012 5z M296 201l87 95-188 205-78 9c-10 1-19-8-18-20l9-84zm141-14l-41-44a31 31 0 00-46 0l-38 41 87 95 38-42c13-14 13-36 0-50z",{width:448,height:512}),za=La("M572.694 292.093L500.27 416.248A63.997 63.997 0 0 1 444.989 448H45.025c-18.523 0-30.064-20.093-20.731-36.093l72.424-124.155A64 64 0 0 1 152 256h399.964c18.523 0 30.064 20.093 20.73 36.093zM152 224h328v-48c0-26.51-21.49-48-48-48H272l-64-64H48C21.49 64 0 85.49 0 112v278.046l69.077-118.418C86.214 242.25 117.989 224 152 224z",{width:576,height:512,mirror:!0}),Ba=(La("M384 112v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V112c0-26.51 21.49-48 48-48h80c0-35.29 28.71-64 64-64s64 28.71 64 64h80c26.51 0 48 21.49 48 48zM192 40c-13.255 0-24 10.745-24 24s10.745 24 24 24 24-10.745 24-24-10.745-24-24-24m96 114v-20a6 6 0 0 0-6-6H102a6 6 0 0 0-6 6v20a6 6 0 0 0 6 6h180a6 6 0 0 0 6-6z",{width:384,height:512}),La("M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z",{width:448,height:512})),Ha=La("M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"),Na=La("M384 121.9c0-6.3-2.5-12.4-7-16.9L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128zM571 308l-95.7-96.4c-10.1-10.1-27.4-3-27.4 11.3V288h-64v64h64v65.2c0 14.3 17.3 21.4 27.4 11.3L571 332c6.6-6.6 6.6-17.4 0-24zm-379 28v-32c0-8.8 7.2-16 16-16h176V160H248c-13.2 0-24-10.8-24-24V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V352H208c-8.8 0-16-7.2-16-16z",{width:576,height:512,mirror:!0}),Ra=La("M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),Fa=La("M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",{width:448,height:512}),Wa=La("M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"),Ga=La("M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"),Va=La("M255.545 8c-66.269.119-126.438 26.233-170.86 68.685L48.971 40.971C33.851 25.851 8 36.559 8 57.941V192c0 13.255 10.745 24 24 24h134.059c21.382 0 32.09-25.851 16.971-40.971l-41.75-41.75c30.864-28.899 70.801-44.907 113.23-45.273 92.398-.798 170.283 73.977 169.484 169.442C423.236 348.009 349.816 424 256 424c-41.127 0-79.997-14.678-110.63-41.556-4.743-4.161-11.906-3.908-16.368.553L89.34 422.659c-4.872 4.872-4.631 12.815.482 17.433C133.798 479.813 192.074 504 256 504c136.966 0 247.999-111.033 248-247.998C504.001 119.193 392.354 7.755 255.545 8z",{mirror:!0}),Ka=La("M256.455 8c66.269.119 126.437 26.233 170.859 68.685l35.715-35.715C478.149 25.851 504 36.559 504 57.941V192c0 13.255-10.745 24-24 24H345.941c-21.382 0-32.09-25.851-16.971-40.971l41.75-41.75c-30.864-28.899-70.801-44.907-113.23-45.273-92.398-.798-170.283 73.977-169.484 169.442C88.764 348.009 162.184 424 256 424c41.127 0 79.997-14.678 110.629-41.556 4.743-4.161 11.906-3.908 16.368.553l39.662 39.662c4.872 4.872 4.631 12.815-.482 17.433C378.202 479.813 319.926 504 256 504 119.034 504 8.001 392.967 8 256.002 7.999 119.193 119.646 7.755 256.455 8z",{mirror:!0}),Ya=La("M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zM262.655 90c-54.497 0-89.255 22.957-116.549 63.758-3.536 5.286-2.353 12.415 2.715 16.258l34.699 26.31c5.205 3.947 12.621 3.008 16.665-2.122 17.864-22.658 30.113-35.797 57.303-35.797 20.429 0 45.698 13.148 45.698 32.958 0 14.976-12.363 22.667-32.534 33.976C247.128 238.528 216 254.941 216 296v4c0 6.627 5.373 12 12 12h56c6.627 0 12-5.373 12-12v-1.333c0-28.462 83.186-29.647 83.186-106.667 0-58.002-60.165-102-116.531-102zM256 338c-25.365 0-46 20.635-46 46 0 25.364 20.635 46 46 46s46-20.636 46-46c0-25.365-20.635-46-46-46z",{mirror:!0}),Ua=La(m().createElement("path",{stroke:"currentColor",strokeWidth:"40",fill:"currentColor",d:"M148 560a318 318 0 0 0 522 110 316 316 0 0 0 0-450 316 316 0 0 0-450 0c-11 11-21 22-30 34v4h47c25 0 46 21 46 46s-21 45-46 45H90c-13 0-25-6-33-14-9-9-14-20-14-33V156c0-25 20-45 45-45s45 20 45 45v32l1 1a401 401 0 0 1 623 509l212 212a42 42 0 0 1-59 59L698 757A401 401 0 0 1 65 570a42 42 0 0 1 83-10z"}),{width:1024}),Xa=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M22 9.556C22 8.696 21.303 8 20.444 8H16v8H8v4.444C8 21.304 8.697 22 9.556 22h10.888c.86 0 1.556-.697 1.556-1.556V9.556z",fill:Aa(t),stroke:Aa(t),strokeWidth:"2"}),m().createElement("path",{d:"M16 3.556C16 2.696 15.303 2 14.444 2H3.556C2.696 2 2 2.697 2 3.556v10.888C2 15.304 2.697 16 3.556 16h10.888c.86 0 1.556-.697 1.556-1.556V3.556z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24,mirror:!0})}),Za=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M16 3.556C16 2.696 15.303 2 14.444 2H3.556C2.696 2 2 2.697 2 3.556v10.888C2 15.304 2.697 16 3.556 16h10.888c.86 0 1.556-.697 1.556-1.556V3.556z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"}),m().createElement("path",{d:"M22 9.556C22 8.696 21.303 8 20.444 8H9.556C8.696 8 8 8.697 8 9.556v10.888C8 21.304 8.697 22 9.556 22h10.888c.86 0 1.556-.697 1.556-1.556V9.556z",fill:Aa(t),stroke:Aa(t),strokeWidth:"2"})),{width:24,mirror:!0})}),qa=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M13 21a1 1 0 001 1h7a1 1 0 001-1v-7a1 1 0 00-1-1h-3v5h-5v3zM11 3a1 1 0 00-1-1H3a1 1 0 00-1 1v7a1 1 0 001 1h3V6h5V3z",fill:Aa(t),stroke:Aa(t),strokeWidth:"2"}),m().createElement("path",{d:"M18 7.333C18 6.597 17.403 6 16.667 6H7.333C6.597 6 6 6.597 6 7.333v9.334C6 17.403 6.597 18 7.333 18h9.334c.736 0 1.333-.597 1.333-1.333V7.333z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24,mirror:!0})}),Qa=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M18 7.333C18 6.597 17.403 6 16.667 6H7.333C6.597 6 6 6.597 6 7.333v9.334C6 17.403 6.597 18 7.333 18h9.334c.736 0 1.333-.597 1.333-1.333V7.333z",fill:Ta(t),stroke:Ta(t),strokeLinejoin:"round",strokeWidth:"2"}),m().createElement("path",{d:"M11 3a1 1 0 00-1-1H3a1 1 0 00-1 1v7a1 1 0 001 1h8V3zM22 14a1 1 0 00-1-1h-7a1 1 0 00-1 1v7a1 1 0 001 1h8v-8z",fill:Aa(t),stroke:Aa(t),strokeLinejoin:"round",strokeWidth:"2"})),{width:24,mirror:!0})}),$a=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M 2,5 H 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"M 6,7 C 5.446,7 5,7.446 5,8 v 9.999992 c 0,0.554 0.446,1 1,1 h 3.0000001 c 0.554,0 0.9999999,-0.446 0.9999999,-1 V 8 C 10,7.446 9.5540001,7 9.0000001,7 Z m 9,0 c -0.554,0 -1,0.446 -1,1 v 5.999992 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 V 8 C 19,7.446 18.554,7 18,7 Z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24,mirror:!0})}),Ja=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M 2,19 H 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"m 6,16.999992 c -0.554,0 -1,-0.446 -1,-1 V 6 C 5,5.446 5.446,5 6,5 H 9.0000001 C 9.5540001,5 10,5.446 10,6 v 9.999992 c 0,0.554 -0.4459999,1 -0.9999999,1 z m 9,0 c -0.554,0 -1,-0.446 -1,-1 V 10 c 0,-0.554 0.446,-1 1,-1 h 3 c 0.554,0 1,0.446 1,1 v 5.999992 c 0,0.554 -0.446,1 -1,1 z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24,mirror:!0})}),ei=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M 5,2 V 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"m 7.000004,5.999996 c 0,-0.554 0.446,-1 1,-1 h 9.999992 c 0.554,0 1,0.446 1,1 v 3.0000001 c 0,0.554 -0.446,0.9999999 -1,0.9999999 H 8.000004 c -0.554,0 -1,-0.4459999 -1,-0.9999999 z m 0,9 c 0,-0.554 0.446,-1 1,-1 h 5.999992 c 0.554,0 1,0.446 1,1 v 3 c 0,0.554 -0.446,1 -1,1 H 8.000004 c -0.554,0 -1,-0.446 -1,-1 z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24})}),ti=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M 19,2 V 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"m 16.999996,5.999996 c 0,-0.554 -0.446,-1 -1,-1 H 6.000004 c -0.554,0 -1,0.446 -1,1 v 3.0000001 c 0,0.554 0.446,0.9999999 1,0.9999999 h 9.999992 c 0.554,0 1,-0.4459999 1,-0.9999999 z m 0,9 c 0,-0.554 -0.446,-1 -1,-1 h -5.999992 c -0.554,0 -1,0.446 -1,1 v 3 c 0,0.554 0.446,1 1,1 h 5.999992 c 0.554,0 1,-0.446 1,-1 z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24})}),ni=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M5 5V19Z",fill:"black"}),m().createElement("path",{d:"M19 5V19M5 5V19",stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"M15 9C15.554 9 16 9.446 16 10V14C16 14.554 15.554 15 15 15H9C8.446 15 8 14.554 8 14V10C8 9.446 8.446 9 9 9H15Z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24})}),ri=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M5 5L19 5M5 19H19",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeLinecap:"round"}),m().createElement("path",{d:"M15 9C15.554 9 16 9.446 16 10V14C16 14.554 15.554 15 15 15H9C8.446 15 8 14.554 8 14V10C8 9.446 8.446 9 9 9H15Z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"})),{width:24})}),oi=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"m 5.000004,16.999996 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 v -10 c 0,-0.554 -0.446,-1 -1,-1 h -3 c -0.554,0 -1,0.446 -1,1 z m 9,-2 c 0,0.554 0.446,1 1,1 h 3 c 0.554,0 1,-0.446 1,-1 v -6 c 0,-0.554 -0.446,-1 -1,-1 h -3 c -0.554,0 -1,0.446 -1,1 z",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"}),m().createElement("path",{d:"M 2,12 H 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeDasharray:"1, 2.8",strokeLinecap:"round"})),{width:24,mirror:!0})}),ai=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M 7 5 C 6.446 5 6 5.446 6 6 L 6 9 C 6 9.554 6.446 10 7 10 L 17 10 C 17.554 10 18 9.554 18 9 L 18 6 C 18 5.446 17.554 5 17 5 L 7 5 z M 9 14 C 8.446 14 8 14.446 8 15 L 8 18 C 8 18.554 8.446 19 9 19 L 15 19 C 15.554 19 16 18.554 16 18 L 16 15 C 16 14.446 15.554 14 15 14 L 9 14 z ",fill:Ta(t),stroke:Ta(t),strokeWidth:"2"}),m().createElement("path",{d:"M 12,2 V 22",fill:Aa(t),stroke:Aa(t),strokeWidth:"2",strokeDasharray:"1, 2.8",strokeLinecap:"round"})),{width:24})}),ii=(La("M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z",{width:640,height:512,mirror:!0}),La("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"),La("M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm96 328c0 8.8-7.2 16-16 16H176c-8.8 0-16-7.2-16-16V176c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v160z"),La("M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z",{width:352,height:512})),li=La("M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z",{width:320,height:512,style:{marginLeft:"-0.2rem"},mirror:!0}),ci=La("M464 0c26.51 0 48 21.49 48 48v288c0 26.51-21.49 48-48 48H176c-26.51 0-48-21.49-48-48V48c0-26.51 21.49-48 48-48h288M176 416c-44.112 0-80-35.888-80-80V128H48c-26.51 0-48 21.49-48 48v288c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48v-48H176z",{mirror:!0}),si=(La("M11.553 22.894a.998.998 0 00.894 0s3.037-1.516 5.465-4.097C19.616 16.987 21 14.663 21 12V5a1 1 0 00-.649-.936l-8-3a.998.998 0 00-.702 0l-8 3A1 1 0 003 5v7c0 2.663 1.384 4.987 3.088 6.797 2.428 2.581 5.465 4.097 5.465 4.097zm-1.303-8.481l6.644-6.644a.856.856 0 111.212 1.212l-7.25 7.25a.856.856 0 01-1.212 0l-3.75-3.75a.856.856 0 111.212-1.212l3.144 3.144z",{width:24}),m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M25 26H111V111H25",fill:Aa(t)}),m().createElement("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Aa(t),strokeWidth:"2"}),m().createElement("path",{d:"M100 100H160V160H100",fill:Aa(t)}),m().createElement("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Aa(t),strokeWidth:"2"}),m().createElement("rect",{x:"2.5",y:"2.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"2.5",y:"149.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"147.5",y:"149.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"147.5",y:"2.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"})),{width:182,height:182,mirror:!0})})),ui=m().memo(function(e){var t=e.appearance;return La(m().createElement(m().Fragment,null,m().createElement("path",{d:"M25 26H111V111H25",fill:Aa(t)}),m().createElement("path",{d:"M25 111C25 80.2068 25 49.4135 25 26M25 26C48.6174 26 72.2348 26 111 26H25ZM25 26C53.3671 26 81.7343 26 111 26H25ZM111 26C111 52.303 111 78.606 111 111V26ZM111 26C111 51.2947 111 76.5893 111 111V26ZM111 111C87.0792 111 63.1585 111 25 111H111ZM111 111C87.4646 111 63.9293 111 25 111H111ZM25 111C25 81.1514 25 51.3028 25 26V111Z",stroke:Aa(t),strokeWidth:"2"}),m().createElement("path",{d:"M100 100H160V160H100",fill:Aa(t)}),m().createElement("path",{d:"M100 160C100 144.106 100 128.211 100 100M100 100C117.706 100 135.412 100 160 100H100ZM100 100C114.214 100 128.428 100 160 100H100ZM160 100C160 120.184 160 140.369 160 160V100ZM160 100C160 113.219 160 126.437 160 160V100ZM160 160C145.534 160 131.068 160 100 160H160ZM160 160C143.467 160 126.934 160 100 160H160ZM100 160C100 143.661 100 127.321 100 100V160Z",stroke:Aa(t),strokeWidth:"2"}),m().createElement("rect",{x:"2.5",y:"2.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"78.5",y:"149.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"147.5",y:"149.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"147.5",y:"78.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"105.5",y:"2.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"}),m().createElement("rect",{x:"2.5",y:"102.5",width:"30",height:"30",fill:_a(t),stroke:Aa(t),strokeWidth:"6"})),{width:182,height:182,mirror:!0})}),di=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.101 16H28.0934L36 8.95989V4H33.5779L20.101 16ZM30.5704 4L17.0935 16H9.10101L22.5779 4H30.5704ZM19.5704 4L6.09349 16H4V10.7475L11.5779 4H19.5704ZM8.57036 4H4V8.06952L8.57036 4ZM36 11.6378L31.101 16H36V11.6378ZM2 2V18H38V2H2Z",fill:Aa(t)}),{width:40,height:20})}),pi=m().memo(function(e){var t=e.appearance;return La(m().createElement("g",{fill:Aa(t),fillRule:"evenodd",clipRule:"evenodd"},m().createElement("path",{d:"M20.101 16H28.0934L36 8.95989V4H33.5779L20.101 16ZM30.5704 4L17.0935 16H9.10101L22.5779 4H30.5704ZM19.5704 4L6.09349 16H4V10.7475L11.5779 4H19.5704ZM8.57036 4H4V8.06952L8.57036 4ZM36 11.6378L31.101 16H36V11.6378ZM2 2V18H38V2H2Z"}),m().createElement("path",{d:"M14.0001 18L3.00006 4.00002L4.5727 2.76438L15.5727 16.7644L14.0001 18ZM25.0001 18L14.0001 4.00002L15.5727 2.76438L26.5727 16.7644L25.0001 18ZM36.0001 18L25.0001 4.00002L26.5727 2.76438L37.5727 16.7644L36.0001 18Z"})),{width:40,height:20})}),fi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M2 2H38V18H2V2Z",fill:Aa(t)}),{width:40,height:20})}),hi=m().memo(function(e){var t=e.appearance,n=e.strokeWidth;return La(m().createElement("path",{d:"M6 10H34",stroke:Aa(t),strokeWidth:n,fill:"none"}),{width:40,height:20})}),mi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M6 10H34",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20})}),gi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M6 10H34",stroke:Aa(t),strokeWidth:2.5,strokeDasharray:"10, 8",fill:"none"}),{width:40,height:20})}),vi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M6 10H34",stroke:Aa(t),strokeWidth:2.5,strokeDasharray:"4, 4",fill:"none"}),{width:40,height:20})}),bi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M3.00098 16.1691C6.28774 13.9744 19.6399 2.8905 22.7215 3.00082C25.8041 3.11113 19.1158 15.5488 21.4962 16.8309C23.8757 18.1131 34.4155 11.7148 37.0001 10.6919",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),yi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M3 17C6.68158 14.8752 16.1296 9.09849 22.0648 6.54922C28 3.99995 22.2896 13.3209 25 14C27.7104 14.6791 36.3757 9.6471 36.3757 9.6471M6.40706 15C13 11.1918 20.0468 1.51045 23.0234 3.0052C26 4.49995 20.457 12.8659 22.7285 16.4329C25 20 36.3757 13 36.3757 13",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),wi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M3 15.6468C6.93692 13.5378 22.5544 2.81528 26.6206 3.00242C30.6877 3.18956 25.6708 15.3346 27.4009 16.7705C29.1309 18.2055 35.4001 12.4762 37 11.6177M3.97143 10.4917C6.61158 9.24563 16.3706 2.61886 19.8104 3.01724C23.2522 3.41472 22.0773 12.2013 24.6181 12.8783C27.1598 13.5536 33.3179 8.04068 35.0571 7.07244",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),xi=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M10 17L10 5L35 5",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),Ei=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M10 17V15C10 8 13 5 21 5L33.5 5",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20,mirror:!0})}),ki=m().memo(function(e){var t=e.appearance;return La(m().createElement("path",{d:"M6 10H34",stroke:Aa(t),strokeWidth:2,fill:"none"}),{width:40,height:20})}),Si=m().memo(function(e){var t=e.appearance,n=e.flip,r=void 0!==n&&n;return La(m().createElement("g",{transform:r?"translate(40, 0) scale(-1, 1)":"",stroke:Aa(t),strokeWidth:2,fill:"none"},m().createElement("path",{d:"M34 10H6M34 10L27 5M34 10L27 15"}),m().createElement("path",{d:"M27.5 5L34.5 10L27.5 15"})),{width:40,height:20})}),Ci=m().memo(function(e){var t=e.appearance,n=e.flip,r=void 0!==n&&n;return La(m().createElement("g",{stroke:Aa(t),fill:Aa(t),transform:r?"translate(40, 0) scale(-1, 1)":""},m().createElement("path",{d:"M32 10L6 10",strokeWidth:2}),m().createElement("circle",{r:"4",transform:"matrix(-1 0 0 1 30 10)"})),{width:40,height:20})}),Oi=m().memo(function(e){var t=e.appearance,n=e.flip,r=void 0!==n&&n;return La(m().createElement("g",{transform:r?"translate(40, 0) scale(-1, 1)":""},m().createElement("path",{d:"M34 10H5.99996M34 10L34 5M34 10L34 15",stroke:Aa(t),strokeWidth:2,fill:"none"})),{width:40,height:20})}),Mi=[],Ii=function(e){return Mi=Mi.concat(e),e};function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ai=function(e,t){var n;if(e.editingGroupId){var r=qn(pa(t),e.editingGroupId);if(r.length)return Ti(Ti({},e),{},{selectedElementIds:(n={},n[r[0].id]=!0,n)})}return e},_i=Ii({name:"deleteSelectedElements",perform:function(e,t){if(t.editingLinearElement){var n=t.editingLinearElement,r=n.elementId,o=n.activePointIndex,a=n.startBindingElement,i=n.endBindingElement,l=yo.getElement(r);if(!l)return!1;if(null==o||-1===o||l.points.length<2){var c=e.filter(function(e){return e.id!==l.id});return{elements:c,appState:Ti(Ti({},Ai(t,c)),{},{editingLinearElement:null}),commitToHistory:!1}}var s={startBindingElement:0===o?null:a,endBindingElement:o===l.points.length-1?null:i};return yo.movePoint(l,o,"delete"),{elements:e,appState:Ti(Ti({},t),{},{editingLinearElement:Ti(Ti(Ti({},t.editingLinearElement),s),{},{activePointIndex:o>0?o-1:0})}),commitToHistory:!0}}var u=function(e,t){return{elements:e.map(function(e){return t.selectedElementIds[e.id]?jn(e,{isDeleted:!0}):e}),appState:Ti(Ti({},t),{},{selectedElementIds:{}})}}(e,t),d=u.elements,p=u.appState;return Yo(d,e.filter(function(e){var n=e.id;return t.selectedElementIds[n]})),{elements:d,appState:Ti(Ti({},p=Ai(p,d)),{},{elementType:"selection",multiElement:null}),commitToHistory:ga(pa(e),t)}},contextItemLabel:"labels.delete",keyTest:function(e){return"Backspace"===e.key||"Delete"===e.key},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{type:"button",icon:Ba,title:_("labels.delete"),"aria-label":_("labels.delete"),onClick:function(){return r(null)},visible:ga(pa(t),n)})}}),Li=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Di=function(e,t){for(var n=[],r=[],o=null,a=-1;++a<e.length;)t.selectedElementIds[e[a].id]?(r.length&&(n=n.concat(r),r=[]),n.push(a),o=a+1):e[a].isDeleted&&o===a?(o=a+1,r.push(a)):r=[];return n},ji=function(e,t,n){var r,o,a=Di(t,e),i=(o=0,(r=a).reduce(function(e,t,n){return n>0&&r[n-1]!==t-1&&(o=++o),(e[o]||(e[o]=[])).push(t),e},[]));return"right"===n&&(i=i.reverse()),i.forEach(function(r,o){var a=r[0],i=r[r.length-1],l="left"===n?a:i,c=function(e,t,n,r){var o=t[n],a=function(t){return!t.isDeleted&&(!e.editingGroupId||t.groupIds.includes(e.editingGroupId))},i="left"===r?function(e,t,n){void 0===n&&(n=e.length-1),n<0&&(n=e.length+n);for(var r=(n=Math.min(e.length-1,Math.max(n,0)))+1;--r>-1;)if(t(e[r],r,e))return r;return-1}(t,a,Math.max(0,n-1)):function(e,t,n){void 0===n&&(n=0),n<0&&(n=e.length+n);for(var r=(n=Math.min(e.length,Math.max(n,0)))-1;++r<e.length;)if(t(e[r],r,e))return r;return-1}(t,a,n+1),l=t[i];if(!l)return-1;if(e.editingGroupId){if((null==o?void 0:o.groupIds.join(""))===(null==l?void 0:l.groupIds.join("")))return i;if(null==l||!l.groupIds.includes(e.editingGroupId))return-1}if(!l.groupIds.length)return i;var c=e.editingGroupId?l.groupIds[l.groupIds.indexOf(e.editingGroupId)-1]:l.groupIds[l.groupIds.length-1],s=qn(t,c);return s.length?"left"===r?t.indexOf(s[0]):t.indexOf(s[s.length-1]):i}(e,t,l,n);if(-1!==c&&l!==c){var s="left"===n?t.slice(0,c):t.slice(0,a),u=t.slice(a,i+1),d="left"===n?t.slice(c,a):t.slice(i+1,c+1),p="left"===n?t.slice(i+1):t.slice(c+1);t=Li("left"===n?Li(Li(Li([],s),u),d):Li(Li(Li([],s),d),u),p)}}),t},zi=function(e,t,n){var r,o,a=Di(e,t),i=[],l=[];if("left"===n){if(t.editingGroupId){if(!(c=qn(e,t.editingGroupId)).length)return e;r=e.indexOf(c[0])}else r=0;o=a[a.length-1]}else{if(t.editingGroupId){var c;if(!(c=qn(e,t.editingGroupId)).length)return e;o=e.indexOf(c[c.length-1])}else o=e.length-1;r=a[0]}for(var s=r;s<o+1;s++)a.includes(s)?i.push(e[s]):l.push(e[s]);var u=e.slice(0,r),d=e.slice(o+1);return Li("left"===n?Li(Li(Li([],u),i),l):Li(Li(Li([],u),l),i),d)},Bi=function(e,t){return ji(t,e.slice(),"left")},Hi=function(e,t){return ji(t,e.slice(),"right")},Ni=function(e,t){return zi(e,t,"left")},Ri=function(e,t){return zi(e,t,"right")},Fi=Ii({name:"sendBackward",perform:function(e,t){return{elements:Bi(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.sendBackward",keyPriority:40,keyTest:function(e){return e[It]&&!e.shiftKey&&e.code===Et},PanelComponent:function(e){var t=e.updateData,n=e.appState;return m().createElement("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat(_("labels.sendBackward"),"  ").concat($t("CtrlOrCmd+["))},m().createElement(Za,{appearance:n.appearance}))}}),Wi=Ii({name:"bringForward",perform:function(e,t){return{elements:Hi(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.bringForward",keyPriority:40,keyTest:function(e){return e[It]&&!e.shiftKey&&e.code===xt},PanelComponent:function(e){var t=e.updateData,n=e.appState;return m().createElement("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat(_("labels.bringForward"),"  ").concat($t("CtrlOrCmd+]"))},m().createElement(Xa,{appearance:n.appearance}))}}),Gi=Ii({name:"sendToBack",perform:function(e,t){return{elements:Ni(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.sendToBack",keyTest:function(e){return yt?e[It]&&e.altKey&&e.code===Et:e[It]&&e.shiftKey&&e.code===Et},PanelComponent:function(e){var t=e.updateData,n=e.appState;return m().createElement("button",{type:"button",className:"zIndexButton",onClick:function(){return t(null)},title:"".concat(_("labels.sendToBack"),"  ").concat($t(yt?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+["))},m().createElement(Qa,{appearance:n.appearance}))}}),Vi=Ii({name:"bringToFront",perform:function(e,t){return{elements:Ri(e,t),appState:t,commitToHistory:!0}},contextItemLabel:"labels.bringToFront",keyTest:function(e){return yt?e[It]&&e.altKey&&e.code===xt:e[It]&&e.shiftKey&&e.code===xt},PanelComponent:function(e){var t=e.updateData,n=e.appState;return m().createElement("button",{type:"button",className:"zIndexButton",onClick:function(e){return t(null)},title:"".concat(_("labels.bringToFront"),"  ").concat($t(yt?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]"))},m().createElement(qa,{appearance:n.appearance}))}});function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ui=Ii({name:"selectAll",perform:function(e,t){return!t.editingLinearElement&&{appState:Xn(Yi(Yi({},t),{},{editingGroupId:null,selectedElementIds:e.reduce(function(e,t){return t.isDeleted||(e[t.id]=!0),e},{})}),pa(e)),commitToHistory:!0}},contextItemLabel:"labels.selectAll",keyTest:function(e){return e[It]&&"a"===e.key}}),Xi=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zi(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Qi=Ii({name:"duplicateSelection",perform:function(e,t){if(t.editingLinearElement){var n=t.editingLinearElement,r=n.activePointIndex,o=n.elementId,a=yo.getElement(o);if(!a||null===r)return!1;var i=a.points,l=i[r],c=i[r+1];return Dn(a,{points:Xi(Xi(Xi([],i.slice(0,r+1)),[c?[(l[0]+c[0])/2,(l[1]+c[1])/2]:[l[0]+30,l[1]+30]]),i.slice(r+1))}),{appState:qi(qi({},t),{},{editingLinearElement:qi(qi({},t.editingLinearElement),{},{activePointIndex:r+1})}),elements:e,commitToHistory:!0}}return qi(qi({},$i(e,t)),{},{commitToHistory:!0})},contextItemLabel:"labels.duplicateSelection",keyTest:function(e){return e[It]&&"d"===e.key},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{type:"button",icon:ci,title:"".concat(_("labels.duplicateSelection"),"  ").concat($t("CtrlOrCmd+D")),"aria-label":_("labels.duplicateSelection"),onClick:function(){return r(null)},visible:ga(pa(t),n)})}}),$i=function(e,t){for(var n=new Map,r=[],o=[],a=new Map,i=function(e){var i=ir(t.editingGroupId,n,e,{x:e.x+g.k/2,y:e.y+g.k/2});return a.set(e.id,i.id),o.push(e),r.push(i),i},l=[],c=0;c<e.length;){var s=e[c];if(t.selectedElementIds[s.id]){if(s.groupIds.length){var u=Yn(t,s);if(u){var d=qn(e,u);l.push.apply(l,Xi(Xi([],d),d.map(function(e){return i(e)}))),c+=d.length;continue}}l.push(s,i(s))}else l.push(s);c++}return Vo(l,o,a),{elements:l,appState:Xn(qi(qi({},t),{},{selectedGroupIds:{},selectedElementIds:r.reduce(function(e,t){return e[t.id]=!0,e},{})}),pa(l))}},Ji=function(e){var t=e.options,n=e.value,r=e.onChange,o=e.group;return m().createElement("div",{className:"buttonList buttonListIcon"},t.map(function(e){return m().createElement("label",{key:e.text,className:We({active:n===e.value}),title:e.text},m().createElement("input",{type:"radio",name:o,onChange:function(){return r(e.value)},checked:n===e.value}),e.icon)}))},el=function(e){var t=e.options,n=e.value,r=e.onChange,o=e.group;return m().createElement("div",{className:"buttonList"},t.map(function(e){return m().createElement("label",{key:e.text,className:We({active:n===e.value})},m().createElement("input",{type:"radio",name:o,onChange:function(){return r(e.value)},checked:n===e.value}),e.text)}))},tl=(a(2816),function(e){var t=e.children,n=e.left,r=e.top,o=e.onCloseRequest,a=e.fitInViewport,i=void 0!==a&&a,l=(0,h.useRef)(null);return(0,h.useLayoutEffect)(function(){if(i&&l.current){var e=l.current,t=e.getBoundingClientRect(),n=t.x,r=t.y,o=t.width,a=t.height,c=window.innerWidth;n+o>c&&(e.style.left="".concat(c-o,"px"));var s=window.innerHeight;r+a>s&&(e.style.top="".concat(s-a,"px"))}},[i]),(0,h.useEffect)(function(){if(o){var e=function(e){var t;null!==(t=l.current)&&void 0!==t&&t.contains(e.target)||(0,bt.unstable_batchedUpdates)(function(){return o(e)})};return document.addEventListener("pointerdown",e,!1),function(){return document.removeEventListener("pointerdown",e,!1)}}},[o]),m().createElement("div",{className:"popover",style:{top:r,left:n},ref:l},t)}),nl=(a(5574),function(e){var t=(new Option).style;return t.color=e,!!t.color}),rl=[["1","2","3","4","5"],["q","w","e","r","t"],["a","s","d","f","g"]].flat(),ol=function(e){var t=e.colors,n=e.color,r=e.onChange,o=e.onClose,a=e.label,i=e.showInput,l=void 0===i||i,c=e.type,s=m().useRef(),u=m().useRef(),d=m().useRef(),p=m().useRef();return m().useEffect(function(){u.current?u.current.focus():p.current?p.current.focus():d.current&&d.current.focus()},[]),m().createElement("div",{className:"color-picker color-picker-type-".concat(c),role:"dialog","aria-modal":"true","aria-label":_("labels.colorPicker"),onKeyDown:function(e){if(e.key===At){var t,n=document.activeElement;if(e.shiftKey)n===s.current&&(null===(t=p.current)||void 0===t||t.focus(),e.preventDefault());else if(n===p.current){var r;null===(r=s.current)||void 0===r||r.focus(),e.preventDefault()}}else if(Dt(e.key)){n=document.activeElement;var a=T().rtl;if(-1!==(u=Array.prototype.indexOf.call(d.current.children,n))){var i=d.current.children.length-(l?1:0),c=e.key===(a?Ct:Ot)?(u+1)%i:e.key===(a?Ot:Ct)?(i+u-1)%i:e.key===St?(u+5)%i:e.key===Mt?(i+u-5)%i:u;d.current.children[c].focus()}e.preventDefault()}else if(rl.includes(e.key.toLowerCase())&&!Ft(e.target)){var u=rl.indexOf(e.key.toLowerCase());d.current.children[u].focus(),e.preventDefault()}else e.key!==Tt&&e.key!==Pt||(e.preventDefault(),o());e.nativeEvent.stopImmediatePropagation()}},m().createElement("div",{className:"color-picker-triangle color-picker-triangle-shadow"}),m().createElement("div",{className:"color-picker-triangle"}),m().createElement("div",{className:"color-picker-content",ref:function(e){e&&(d.current=e)},tabIndex:0},t.map(function(e,t){return m().createElement("button",{className:"color-picker-swatch",onClick:function(t){t.currentTarget.focus(),r(e)},title:"".concat(e,"  ").concat(rl[t].toUpperCase()),"aria-label":e,"aria-keyshortcuts":rl[t],style:{color:e},key:e,ref:function(r){r&&0===t&&(s.current=r),r&&e===n&&(u.current=r)},onFocus:function(){r(e)}},"transparent"===e?m().createElement("div",{className:"color-picker-transparent"}):void 0,m().createElement("span",{className:"color-picker-keybinding"},rl[t]))}),l&&m().createElement(al,{color:n,label:a,onChange:function(e){r(e)},ref:p})))},al=m().forwardRef(function(e,t){var n=e.color,r=e.onChange,o=e.label,a=m().useState(n),i=a[0],l=a[1],c=m().useRef(null);m().useEffect(function(){l(n)},[n]),m().useImperativeHandle(t,function(){return c.current});var s=m().useCallback(function(e){var t=e.toLowerCase(),n=function(e){return"transparent"===e||nl(e)?e:nl("#".concat(e))?"#".concat(e):null}(t);n&&r(n),l(t)},[r]);return m().createElement("label",{className:"color-input-container"},m().createElement("div",{className:"color-picker-hash"},"#"),m().createElement("input",{spellCheck:!1,className:"color-picker-input","aria-label":o,onChange:function(e){return s(e.target.value)},value:(i||"").replace(/^#/,""),onBlur:function(){return l(n)},ref:c}))}),il=function(e){var t=e.type,n=e.color,r=e.onChange,o=e.label,a=m().useState(!1),i=a[0],l=a[1],c=m().useRef(null);return m().createElement("div",null,m().createElement("div",{className:"color-picker-control-container"},m().createElement("button",{className:"color-picker-label-swatch","aria-label":o,style:n?{"--swatch-color":n}:void 0,onClick:function(){return l(!i)},ref:c}),m().createElement(al,{color:n,label:o,onChange:function(e){r(e)}})),m().createElement(m().Suspense,{fallback:""},i?m().createElement(tl,{onCloseRequest:function(e){return e.target!==c.current&&l(!1)}},m().createElement(ol,{colors:vt[t],color:n||null,onChange:function(e){r(e)},onClose:function(){var e;l(!1),null===(e=c.current)||void 0===e||e.focus()},label:o,showInput:!1,type:t})):null))},ll=a(6950),cl=a.n(ll);function sl(e){var t=e.options,n=e.value,r=e.label,o=e.onChange,a=e.onClose,i=m().useRef(),l=m().useRef(),c=m().useRef(null);return m().useEffect(function(){l.current?l.current.focus():c.current&&c.current.focus()},[]),m().createElement("div",{className:"picker",role:"dialog","aria-modal":"true","aria-label":r,onKeyDown:function(e){var n=t.find(function(t){return t.keyBinding===e.key.toLowerCase()});if(e.metaKey||e.altKey||e.ctrlKey||!n)if(e.key===At)setTimeout(function(){l.current!==document.activeElement&&a()},0);else if(Dt(e.key)){var r=document.activeElement,o=T().rtl;if(-1!==(u=Array.prototype.indexOf.call(c.current.children,r))){var i=t.length,s=u;switch(e.key){case o?Ct:Ot:case St:s=(u+1)%i;break;case o?Ot:Ct:case Mt:s=(i+u-1)%i}c.current.children[s].focus()}e.preventDefault()}else e.key!==Tt&&e.key!==Pt||(e.preventDefault(),a());else{var u=t.indexOf(n);c.current.children[u].focus(),e.preventDefault()}e.nativeEvent.stopImmediatePropagation()}},m().createElement("div",{className:"picker-content",ref:c},t.map(function(e,t){return m().createElement("button",{className:"picker-option",onClick:function(t){t.currentTarget.focus(),o(e.value)},title:"".concat(e.text,"  ").concat(e.keyBinding.toUpperCase()),"aria-label":e.text||"none","aria-keyshortcuts":e.keyBinding,key:e.text,ref:function(r){r&&0===t&&(i.current=r),r&&e.value===n&&(l.current=r)},onFocus:function(){o(e.value)}},e.icon,m().createElement("span",{className:"picker-keybinding"},e.keyBinding))})))}function ul(e){var t,n=e.value,r=e.label,o=e.options,a=e.onChange,i=e.group,l=void 0===i?"":i,c=m().useState(!1),s=c[0],u=c[1],d=m().useRef(null),p=T().rtl;return m().createElement("label",{className:"picker-container"},m().createElement("button",{name:l,className:s?"active":"","aria-label":r,onClick:function(){return u(!s)},ref:d},null===(t=o.find(function(e){return e.value===n}))||void 0===t?void 0:t.icon),m().createElement(m().Suspense,{fallback:""},s?m().createElement(m().Fragment,null,m().createElement(tl,cl()({onCloseRequest:function(e){return e.target!==d.current&&u(!1)}},p?{right:5.5}:{left:-5.5}),m().createElement(sl,{options:o,value:n,label:r,onChange:a,onClose:function(){var e;u(!1),null===(e=d.current)||void 0===e||e.focus()}})),m().createElement("div",{className:"picker-triangle"})):null))}function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}a(7143);var fl=function(e,t,n){return e.map(function(e){var r;return t.selectedElementIds[e.id]||e.id===(null===(r=t.editingElement)||void 0===r?void 0:r.id)?n(e):e})},hl=function(e,t,n,r){var o,a,i=t.editingElement,l=pa(e);return null!==(o=null!==(a=i&&n(i))&&void 0!==a?a:ga(l,t)?function(e,t,n){var r=Array.from(new Set(va(e,t).map(function(e){return n(e)})));return 1===r.length?r[0]:null}(l,t,n):r)&&void 0!==o?o:null},ml=(Ii({name:"changeStrokeColor",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{strokeColor:n})}),appState:pl(pl({},t),{},{currentItemStrokeColor:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(m().Fragment,null,m().createElement("h3",{"aria-hidden":"true"},_("labels.stroke")),m().createElement(il,{type:"elementStroke",label:_("labels.stroke"),color:hl(t,n,function(e){return e.strokeColor},n.currentItemStrokeColor),onChange:r}))}}),Ii({name:"changeBackgroundColor",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{backgroundColor:n})}),appState:pl(pl({},t),{},{currentItemBackgroundColor:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(m().Fragment,null,m().createElement("h3",{"aria-hidden":"true"},_("labels.background")),m().createElement(il,{type:"elementBackground",label:_("labels.background"),color:hl(t,n,function(e){return e.backgroundColor},n.currentItemBackgroundColor),onChange:r}))}}),Ii({name:"changeFillStyle",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{fillStyle:n})}),appState:pl(pl({},t),{},{currentItemFillStyle:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.fill")),m().createElement(Ji,{options:[{value:"hachure",text:_("labels.hachure"),icon:m().createElement(di,{appearance:n.appearance})},{value:"cross-hatch",text:_("labels.crossHatch"),icon:m().createElement(pi,{appearance:n.appearance})},{value:"solid",text:_("labels.solid"),icon:m().createElement(fi,{appearance:n.appearance})}],group:"fill",value:hl(t,n,function(e){return e.fillStyle},n.currentItemFillStyle),onChange:function(e){r(e)}}))}}),Ii({name:"changeStrokeWidth",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{strokeWidth:n})}),appState:pl(pl({},t),{},{currentItemStrokeWidth:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.strokeWidth")),m().createElement(Ji,{group:"stroke-width",options:[{value:1,text:_("labels.thin"),icon:m().createElement(hi,{appearance:n.appearance,strokeWidth:2})},{value:2,text:_("labels.bold"),icon:m().createElement(hi,{appearance:n.appearance,strokeWidth:6})},{value:4,text:_("labels.extraBold"),icon:m().createElement(hi,{appearance:n.appearance,strokeWidth:10})}],value:hl(t,n,function(e){return e.strokeWidth},n.currentItemStrokeWidth),onChange:function(e){return r(e)}}))}}),Ii({name:"changeSloppiness",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{seed:Tn(),roughness:n})}),appState:pl(pl({},t),{},{currentItemRoughness:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.sloppiness")),m().createElement(Ji,{group:"sloppiness",options:[{value:0,text:_("labels.architect"),icon:m().createElement(bi,{appearance:n.appearance})},{value:1,text:_("labels.artist"),icon:m().createElement(yi,{appearance:n.appearance})},{value:2,text:_("labels.cartoonist"),icon:m().createElement(wi,{appearance:n.appearance})}],value:hl(t,n,function(e){return e.roughness},n.currentItemRoughness),onChange:function(e){return r(e)}}))}}),Ii({name:"changeStrokeStyle",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{strokeStyle:n})}),appState:pl(pl({},t),{},{currentItemStrokeStyle:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.strokeStyle")),m().createElement(Ji,{group:"strokeStyle",options:[{value:"solid",text:_("labels.strokeStyle_solid"),icon:m().createElement(mi,{appearance:n.appearance})},{value:"dashed",text:_("labels.strokeStyle_dashed"),icon:m().createElement(gi,{appearance:n.appearance})},{value:"dotted",text:_("labels.strokeStyle_dotted"),icon:m().createElement(vi,{appearance:n.appearance})}],value:hl(t,n,function(e){return e.strokeStyle},n.currentItemStrokeStyle),onChange:function(e){return r(e)}}))}}),Ii({name:"changeOpacity",perform:function(e,t,n){return{elements:fl(e,t,function(e){return jn(e,{opacity:n})}),appState:pl(pl({},t),{},{currentItemOpacity:n}),commitToHistory:!0}},PanelComponent:function(e){var t,n=e.elements,r=e.appState,o=e.updateData;return m().createElement("label",{className:"control-label"},_("labels.opacity"),m().createElement("input",{type:"range",min:"0",max:"100",step:"10",onChange:function(e){return o(+e.target.value)},onWheel:function(e){e.stopPropagation();var t=+e.target.value;e.deltaY<0&&t<100?o(t+10):e.deltaY>0&&t>0&&o(t-10)},value:null!==(t=hl(n,r,function(e){return e.opacity},r.currentItemOpacity))&&void 0!==t?t:void 0}))}}),Ii({name:"changeFontSize",perform:function(e,t,n){return{elements:fl(e,t,function(e){if(Ge(e)){var t=jn(e,{fontSize:n});return aa(t),t}return e}),appState:pl(pl({},t),{},{currentItemFontSize:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.fontSize")),m().createElement(el,{group:"font-size",options:[{value:16,text:_("labels.small")},{value:20,text:_("labels.medium")},{value:28,text:_("labels.large")},{value:36,text:_("labels.veryLarge")}],value:hl(t,n,function(e){return Ge(e)&&e.fontSize},n.currentItemFontSize||g.n5),onChange:function(e){return r(e)}}))}}),Ii({name:"changeFontFamily",perform:function(e,t,n){return{elements:fl(e,t,function(e){if(Ge(e)){var t=jn(e,{fontFamily:n});return aa(t),t}return e}),appState:pl(pl({},t),{},{currentItemFontFamily:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,o=[{value:1,text:_("labels.handDrawn")},{value:2,text:_("labels.normal")},{value:3,text:_("labels.code")}];return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.fontFamily")),m().createElement(el,{group:"font-family",options:o,value:hl(t,n,function(e){return Ge(e)&&e.fontFamily},n.currentItemFontFamily||g.rk),onChange:function(e){return r(e)}}))}}),Ii({name:"changeTextAlign",perform:function(e,t,n){return{elements:fl(e,t,function(e){if(Ge(e)){var t=jn(e,{textAlign:n});return aa(t),t}return e}),appState:pl(pl({},t),{},{currentItemTextAlign:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.textAlign")),m().createElement(el,{group:"text-align",options:[{value:"left",text:_("labels.left")},{value:"center",text:_("labels.center")},{value:"right",text:_("labels.right")}],value:hl(t,n,function(e){return Ge(e)&&e.textAlign},n.currentItemTextAlign),onChange:function(e){return r(e)}}))}}),Ii({name:"changeSharpness",perform:function(e,t,n){var r=ba(pa(e),t),o=r.length?r.every(function(e){return!Ve(e)}):!Ke(t.elementType),a=r.length?r.every(Ve):Ke(t.elementType);return{elements:fl(e,t,function(e){return jn(e,{strokeSharpness:n})}),appState:pl(pl({},t),{},{currentItemStrokeSharpness:o?n:t.currentItemStrokeSharpness,currentItemLinearStrokeSharpness:a?n:t.currentItemLinearStrokeSharpness}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.edges")),m().createElement(Ji,{group:"edges",options:[{value:"sharp",text:_("labels.sharp"),icon:m().createElement(xi,{appearance:n.appearance})},{value:"round",text:_("labels.round"),icon:m().createElement(Ei,{appearance:n.appearance})}],value:hl(t,n,function(e){return e.strokeSharpness},ka(n.elementType)&&(Ke(n.elementType)?n.currentItemLinearStrokeSharpness:n.currentItemStrokeSharpness)||null),onChange:function(e){return r(e)}}))}}),Ii({name:"changeArrowhead",perform:function(e,t,n){var r;return{elements:fl(e,t,function(e){if(Ve(e)){var t=n.position,r=n.type;if("start"===t)return jn(e,{startArrowhead:r});if("end"===t)return jn(e,{endArrowhead:r})}return e}),appState:pl(pl({},t),{},(r={},r["start"===n.position?"currentItemStartArrowhead":"currentItemEndArrowhead"]=n.type,r)),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData,o=T().rtl;return m().createElement("fieldset",null,m().createElement("legend",null,_("labels.arrowheads")),m().createElement("div",{className:"iconSelectList"},m().createElement(ul,{label:"arrowhead_start",options:[{value:null,text:_("labels.arrowhead_none"),icon:m().createElement(ki,{appearance:n.appearance}),keyBinding:"q"},{value:"arrow",text:_("labels.arrowhead_arrow"),icon:m().createElement(Si,{appearance:n.appearance,flip:!o}),keyBinding:"w"},{value:"bar",text:_("labels.arrowhead_bar"),icon:m().createElement(Oi,{appearance:n.appearance,flip:!o}),keyBinding:"e"},{value:"dot",text:_("labels.arrowhead_dot"),icon:m().createElement(Ci,{appearance:n.appearance,flip:!o}),keyBinding:"r"}],value:hl(t,n,function(e){return Ve(e)&&Ca(e.type)?e.startArrowhead:n.currentItemStartArrowhead},n.currentItemStartArrowhead),onChange:function(e){return r({position:"start",type:e})}}),m().createElement(ul,{label:"arrowhead_end",group:"arrowheads",options:[{value:null,text:_("labels.arrowhead_none"),keyBinding:"q",icon:m().createElement(ki,{appearance:n.appearance})},{value:"arrow",text:_("labels.arrowhead_arrow"),keyBinding:"w",icon:m().createElement(Si,{appearance:n.appearance,flip:o})},{value:"bar",text:_("labels.arrowhead_bar"),keyBinding:"e",icon:m().createElement(Oi,{appearance:n.appearance,flip:o})},{value:"dot",text:_("labels.arrowhead_dot"),keyBinding:"r",icon:m().createElement(Ci,{appearance:n.appearance,flip:o})}],value:hl(t,n,function(e){return Ve(e)&&Ca(e.type)?e.endArrowhead:n.currentItemEndArrowhead},n.currentItemEndArrowhead),onChange:function(e){return r({position:"end",type:e})}})))}}),a(2189)),gl=a.n(ml),vl=m().createContext(!1),bl=function(){return window.matchMedia?window.matchMedia(gl().isMobileQuery):{matches:!1,addListener:function(){},removeListener:function(){}}},yl=function(e){var t=e.children,n=(0,h.useRef)();n.current||(n.current=bl());var r=(0,h.useState)(n.current.matches),o=r[0],a=r[1];return(0,h.useEffect)(function(){var e=function(){return a(n.current.matches)};return n.current.addListener(e),function(){return n.current.removeListener(e)}},[]),m().createElement(vl.Provider,{value:o},t)},wl=function(){return bl().matches};function xl(){return(0,h.useContext)(vl)}function El(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?El(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({name:"changeViewBackgroundColor",perform:function(e,t,n){return{appState:kl(kl({},t),{},{viewBackgroundColor:n}),commitToHistory:!0}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement("div",{style:{position:"relative"}},m().createElement(il,{label:_("labels.canvasBackground"),type:"canvasBackground",color:t.viewBackgroundColor,onChange:function(e){return n(e)}}))}}),Ii({name:"clearCanvas",perform:function(e,t){return{elements:e.map(function(e){return jn(e,{isDeleted:!0})}),appState:kl(kl({},un()),{},{appearance:t.appearance,elementLocked:t.elementLocked,exportBackground:t.exportBackground,exportEmbedScene:t.exportEmbedScene,gridSize:t.gridSize,shouldAddWatermark:t.shouldAddWatermark,showStats:t.showStats,pasteDialog:t.pasteDialog}),commitToHistory:!0}},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Ba,title:_("buttons.clearReset"),"aria-label":_("buttons.clearReset"),showAriaLabel:xl(),onClick:function(){window.confirm(_("alerts.clearReset"))&&t(null)}})}}),Ii({name:"zoomIn",perform:function(e,t){var n=Ma(Ia(t.zoom.value+g.V4),t.zoom,{left:t.offsetLeft,top:t.offsetTop},{x:t.width/2,y:t.height/2});return{appState:kl(kl({},t),{},{zoom:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Ra,title:"".concat(_("buttons.zoomIn"),"  ").concat($t("CtrlOrCmd++")),"aria-label":_("buttons.zoomIn"),onClick:function(){t(null)}})},keyTest:function(e){return("Equal"===e.code||"NumpadAdd"===e.code)&&(e[It]||e.shiftKey)}}),Ii({name:"zoomOut",perform:function(e,t){var n=Ma(Ia(t.zoom.value-g.V4),t.zoom,{left:t.offsetLeft,top:t.offsetTop},{x:t.width/2,y:t.height/2});return{appState:kl(kl({},t),{},{zoom:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Fa,title:"".concat(_("buttons.zoomOut"),"  ").concat($t("CtrlOrCmd+-")),"aria-label":_("buttons.zoomOut"),onClick:function(){t(null)}})},keyTest:function(e){return("Minus"===e.code||"NumpadSubtract"===e.code)&&(e[It]||e.shiftKey)}}),Ii({name:"resetZoom",perform:function(e,t){return{appState:kl(kl({},t),{},{zoom:Ma(1,t.zoom,{left:t.offsetLeft,top:t.offsetTop},{x:t.width/2,y:t.height/2})}),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Ua,title:_("buttons.resetZoom"),"aria-label":_("buttons.resetZoom"),onClick:function(){t(null)}})},keyTest:function(e){return("Digit0"===e.code||"Numpad0"===e.code)&&(e[It]||e.shiftKey)}});var Sl=function(e,t,n){var r=pa(e),o=va(r,t),a=n&&o.length>0?dt(o):dt(r),i=function(e,t){var n=e[0],r=e[1],o=e[2],a=e[3],i=t.width/(o-n),l=t.height/(a-r),c=Math.min(i,l),s=Math.floor(c/g.V4)*g.V4;return Math.min(Math.max(s,g.V4),1)}(a,{width:t.width,height:t.height}),l=Ma(i,t.zoom,{left:t.offsetLeft,top:t.offsetTop}),c=a[0],s=a[1],u=(c+a[2])/2,d=(s+a[3])/2;return{appState:kl(kl(kl({},t),ya({scenePoint:{x:u,y:d},viewportDimensions:{width:t.width,height:t.height},zoom:l})),{},{zoom:l}),commitToHistory:!1}};function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({name:"zoomToSelection",perform:function(e,t){return Sl(e,t,!0)},keyTest:function(e){return"Digit2"===e.code&&e.shiftKey&&!e.altKey&&!e[It]}}),Ii({name:"zoomToFit",perform:function(e,t){return Sl(e,t,!1)},keyTest:function(e){return"Digit1"===e.code&&e.shiftKey&&!e.altKey&&!e[It]}});var Ml,Il,Pl,Tl=Ii({name:"finalize",perform:function(e,t){var n,r;if(t.editingLinearElement){var o=t.editingLinearElement,a=o.elementId,i=o.startBindingElement,l=o.endBindingElement,c=yo.getElement(a);if(c)return Ye(c)&&ko(c,i,l),{elements:c.points.length<2||zn(c)?e.filter(function(e){return e.id!==c.id}):void 0,appState:Ol(Ol({},t),{},{editingLinearElement:null}),commitToHistory:!0}}var s=e;window.document.activeElement instanceof HTMLElement&&window.document.activeElement.blur();var u=t.multiElement?t.multiElement:"draw"===(null===(r=t.editingElement)||void 0===r?void 0:r.type)?t.editingElement:null;if(u){if("draw"!==u.type&&"touch"!==t.lastPointerDownWith){var d=u.points,p=u.lastCommittedPoint;p&&d[d.length-1]===p||Dn(u,{points:u.points.slice(0,-1)})}zn(u)&&(s=s.slice(0,-1));var f=Je(u.points,t.zoom.value);if(("line"===u.type||"draw"===u.type)&&f){var h=u.points,m=h[0];Dn(u,{points:h.map(function(e,t){return t===h.length-1?[m[0],m[1]]:e})})}if(Ye(u)&&!f&&u.points.length>1){var g=yo.getPointAtIndexGlobalCoordinates(u,-1),v=g[0],b=g[1];Mo(u,t,In.getScene(u),{x:v,y:b})}t.elementLocked||"draw"===t.elementType||(t.selectedElementIds[u.id]=!0)}return(t.elementLocked||"draw"===t.elementType)&&u||Zt(),{elements:s,appState:Ol(Ol({},t),{},{elementType:(t.elementLocked||"draw"===t.elementType)&&u?t.elementType:"selection",draggingElement:null,multiElement:null,editingElement:null,startBoundElement:null,suggestedBindings:[],selectedElementIds:u&&!t.elementLocked&&"draw"!==t.elementType?Ol(Ol({},t.selectedElementIds),{},(n={},n[u.id]=!0,n)):t.selectedElementIds}),commitToHistory:"draw"===t.elementType}},keyTest:function(e,t){return e.key===Tt&&(null!==t.editingLinearElement||!t.draggingElement&&null===t.multiElement)||(e.key===Tt||e.key===Pt)&&null!==t.multiElement},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement(Pa,{type:"button",icon:Wa,title:_("buttons.done"),"aria-label":_("buttons.done"),onClick:n,visible:null!=t.multiElement})}}),Al=void 0!==t&&null!==(Ml=t.env)&&void 0!==Ml&&Ml.REACT_APP_GOOGLE_ANALYTICS_ID&&"undefined"!=typeof window&&window.gtag?function(e,t,n,r){window.gtag("event",t,{event_category:e,event_label:n,value:r})}:(void 0!==t&&null!==(Il=t.env)&&void 0!==Il&&Il.JEST_WORKER_ID,function(e,t,n,r){}),_l=(a(8518),Pl=function(e,t){return(Pl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Pl(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ll=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r,o,a=this;return a=e.apply(this,t)||this,r=o=a,a.handleFocus=function(e){Yt(e.currentTarget)},a.handleBlur=function(e){var t=e.currentTarget.innerText.trim();t!==o.props.value&&o.props.onChange(t),Ut()},a.handleKeyDown=function(e){if("Enter"===e.key){if(e.preventDefault(),e.nativeEvent.isComposing||229===e.keyCode)return;e.currentTarget.blur()}},a.makeEditable=function(e){if(e)try{e.contentEditable="plaintext-only"}catch(t){e.contentEditable="true"}},r}return _l(t,e),t.prototype.render=function(){return m().createElement("span",{suppressContentEditableWarning:!0,ref:this.makeEditable,"data-type":"wysiwyg",className:"TextInput",role:"textbox","aria-label":this.props.label,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus},this.props.value)},t}(h.Component),Dl=(a(2680),function(e){var t=e.children,n=e.label,r=e.position,o=void 0===r?"below":r,a=e.long,i=void 0!==a&&a;return m().createElement("div",{className:"Tooltip"},m().createElement("span",{className:"above"===o?"Tooltip__label Tooltip__label--above":"Tooltip__label Tooltip__label--below",style:{width:i?"50ch":"10ch"}},n),t)});const jl="chooseFileSystemEntries"in self?"chooseFileSystemEntries":"showOpenFilePicker"in self&&"showOpenFilePicker",zl=jl?"chooseFileSystemEntries"===jl?a.e(736).then(a.bind(a,9012)):a.e(736).then(a.bind(a,499)):a.e(736).then(a.bind(a,5034));function Bl(){var e,t=arguments;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(zl);case 2:return n.abrupt("return",(e=n.sent).default.apply(e,t));case 3:case"end":return n.stop()}},null,null,null,Promise)}jl?"chooseFileSystemEntries"===jl?a.e(736).then(a.bind(a,6980)):a.e(736).then(a.bind(a,868)):a.e(736).then(a.bind(a,3110));const Hl=jl?"chooseFileSystemEntries"===jl?a.e(736).then(a.bind(a,1170)):a.e(736).then(a.bind(a,7814)):a.e(736).then(a.bind(a,4001));function Nl(){var e,t=arguments;return regeneratorRuntime.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(Hl);case 2:return n.abrupt("return",(e=n.sent).default.apply(e,t));case 3:case"end":return n.stop()}},null,null,null,Promise)}var Rl,Fl=function(e,t){if(null!=t&&t.collaborators){var n=t.collaborators.get(e);if(null!=n&&n.color)return n.color}var r=e.split("").reduce(function(e,t){return e+t.charCodeAt(0)},0),o=vt.elementBackground.slice(1),a=vt.elementStroke.slice(1);return{background:o[r%o.length],stroke:a[r%a.length]}};!function(e){e.ACTIVE="active",e.AWAY="away",e.IDLE="idle"}(Rl||(Rl={}));var Wl=function(){var e=document.createElement("canvas").getContext("2d");return!!e&&(e.fillStyle="#f00",e.textBaseline="top",e.font="32px Arial",e.fillText("",0,0),0!==e.getImageData(12,12,1,1).data[0])}(),Gl=function(e,t,n,r,o,a,i,l,c){void 0===c&&(c=!1),e.translate(a,i),e.rotate(l),c&&e.fillRect(t-a,n-i,r,o),e.strokeRect(t-a,n-i,r,o),e.rotate(-l),e.translate(-a,-i)},Vl=function(e,t,n,r){e.beginPath(),e.arc(t,n,r,0,2*Math.PI),e.fill(),e.stroke()},Kl=function(e,t,n,r,o,a,i,l){var c=void 0===l?{}:l,s=c.renderScrollbars,u=void 0===s||s,d=c.renderSelection,p=void 0===d||d,f=c.renderOptimizations,h=void 0!==f&&f,m=c.renderGrid,v=void 0===m||m;if(!a)return{atLeastOneVisibleElement:!1};var b=a.getContext("2d");b.scale(r,r);var y=a.width/r,w=a.height/r;if(i.exportWithDarkMode&&(b.filter=g.Gi),"string"==typeof i.viewBackgroundColor){("transparent"===i.viewBackgroundColor||5===i.viewBackgroundColor.length||9===i.viewBackgroundColor.length||/(hsla|rgba)\(/.test(i.viewBackgroundColor))&&b.clearRect(0,0,y,w);var x=b.fillStyle;b.fillStyle=i.viewBackgroundColor,b.fillRect(0,0,y,w),b.fillStyle=x}else b.clearRect(0,0,y,w);var E=i.zoom.translation.x,k=i.zoom.translation.y;b.translate(E,k),b.scale(i.zoom.value,i.zoom.value),v&&t.gridSize&&function(e,t,n,r,o,a){var i=e.strokeStyle;e.strokeStyle="rgba(0,0,0,0.1)",e.beginPath();for(var l=n;l<n+o+2*t;l+=t)e.moveTo(l,r-t),e.lineTo(l,r+a+2*t);for(var c=r;c<r+a+2*t;c+=t)e.moveTo(n-t,c),e.lineTo(n+o+2*t,c);e.stroke(),e.strokeStyle=i}(b,t.gridSize,-Math.ceil(E/i.zoom.value/t.gridSize)*t.gridSize+i.scrollX%t.gridSize,-Math.ceil(k/i.zoom.value/t.gridSize)*t.gridSize+i.scrollY%t.gridSize,y/i.zoom.value,w/i.zoom.value);var S,C=e.filter(function(e){return Ql(e,y,w,{zoom:i.zoom,offsetLeft:t.offsetLeft,offsetTop:t.offsetTop,scrollX:i.scrollX,scrollY:i.scrollY})});if(C.forEach(function(e){Cn(e,o,b,h,i)}),t.editingLinearElement){var O=yo.getElement(t.editingLinearElement.elementId);O&&function(e,t,n,r){e.translate(n.scrollX,n.scrollY);var o=e.strokeStyle,a=e.lineWidth;e.lineWidth=1/n.zoom.value,yo.getPointsGlobalCoordinates(r).forEach(function(r,o){var a;e.strokeStyle="red",e.setLineDash([]),e.fillStyle=(null===(a=t.editingLinearElement)||void 0===a?void 0:a.activePointIndex)===o?"rgba(255, 127, 127, 0.9)":"rgba(255, 255, 255, 0.9)";var i=yo.POINT_HANDLE_SIZE;Vl(e,r[0],r[1],i/2/n.zoom.value)}),e.setLineDash([]),e.lineWidth=a,e.translate(-n.scrollX,-n.scrollY),e.strokeStyle=o}(b,t,i,O)}if(n&&Cn(n,o,b,h,i),Eo(t)&&t.suggestedBindings.filter(function(e){return null!=e}).forEach(function(e){Xl(b,i,e)}),p&&!t.multiElement&&!t.editingLinearElement){for(var M=e.reduce(function(e,n){var r=[];if(t.selectedElementIds[n.id]&&!Kn(t,n)&&r.push(ht.Sn),i.remoteSelectedElementIds[n.id]&&r.push.apply(r,i.remoteSelectedElementIds[n.id].map(function(e){return Fl(e,t).background})),r.length){var o=it(n),a=o[0],l=o[1],c=o[2],s=o[3];e.push({angle:n.angle,elementX1:a,elementY1:l,elementX2:c,elementY2:s,selectionColors:r})}return e},[]),I=function(t){var n=qn(e,t),r=dt(n),o=r[0],a=r[1],i=r[2],l=r[3];M.push({angle:0,elementX1:o,elementX2:i,elementY1:a,elementY2:l,selectionColors:[ht.Sn]})},P=0,A=Un(t);P<A.length;P++)I(A[P]);t.editingGroupId&&I(t.editingGroupId),M.forEach(function(e){return Ul(b,i,e)});var _=va(e,t);if(b.translate(i.scrollX,i.scrollY),1===_.length){b.fillStyle=ht.ix;var L=hr(_[0],i.zoom,"mouse");t.viewModeEnabled||Yl(b,i,L,_[0].angle)}else if(_.length>1&&!t.isRotating){var D=4/i.zoom.value;b.fillStyle=ht.ix;var j=dt(_),z=j[0],B=j[1],H=j[2],N=j[3],R=b.getLineDash();b.setLineDash([2/i.zoom.value]);var F=b.lineWidth;b.lineWidth=1/i.zoom.value,Gl(b,z-D,B-D,H-z+2*D,N-B+2*D,(z+H)/2,(B+N)/2,0),b.lineWidth=F,b.setLineDash(R),L=fr([z,B,H,N],0,i.zoom,"mouse",cr),Yl(b,i,L,0)}b.translate(-i.scrollX,-i.scrollY)}for(var W in b.scale(1/i.zoom.value,1/i.zoom.value),b.translate(-E,-k),i.remotePointerViewportCoords){var G=i.remotePointerViewportCoords[W],V=G.x,K=G.y;V-=t.offsetLeft,K-=t.offsetTop;var Y=V<0||V>y-9||K<0||K>w-14;V=Math.max(V,0),V=Math.min(V,y-9),K=Math.max(K,0),K=Math.min(K,w-14);var U=Fl(W,t),X=U.background,Z=U.stroke,q=b.strokeStyle,Q=(x=b.fillStyle,b.globalAlpha);b.strokeStyle=Z,b.fillStyle=X;var $=i.remotePointerUserStates[W];(Y||$===Rl.AWAY)&&(b.globalAlpha=.48),i.remotePointerButton&&"down"===i.remotePointerButton[W]&&(b.beginPath(),b.arc(V,K,15,0,2*Math.PI,!1),b.lineWidth=3,b.strokeStyle="#ffffff88",b.stroke(),b.closePath(),b.beginPath(),b.arc(V,K,15,0,2*Math.PI,!1),b.lineWidth=1,b.strokeStyle=Z,b.stroke(),b.closePath()),b.beginPath(),b.moveTo(V,K),b.lineTo(V+1,K+14),b.lineTo(V+4,K+9),b.lineTo(V+9,K+10),b.lineTo(V,K),b.fill(),b.stroke();var J=i.remotePointerUsernames[W],ee="";$===Rl.AWAY?ee=Wl?"":" (".concat(Rl.AWAY,")"):$===Rl.IDLE?ee=Wl?"":" (".concat(Rl.IDLE,")"):$===Rl.ACTIVE&&(ee=Wl?"":"");var te="".concat(J?"".concat(J," "):"").concat(ee);if(!Y&&te){var ne=V+9,re=K+14,oe=b.measureText(te),ae=oe.actualBoundingBoxDescent+oe.actualBoundingBoxAscent;b.fillStyle=Z,b.fillRect(ne-1,re-1,oe.width+8+2,ae+8+2),b.fillStyle=X,b.fillRect(ne,re,oe.width+8,ae+8),b.fillStyle=ht.ix,b.fillText(te,ne+4,re+4+oe.actualBoundingBoxAscent)}b.strokeStyle=q,b.fillStyle=x,b.globalAlpha=Q,b.closePath()}return u&&(S=function(e,t,n,r){var o=r.scrollX,a=r.scrollY,i=r.zoom;if(0===e.length)return{horizontal:null,vertical:null};var l=dt(e),c=l[0],s=l[1],u=l[2],d=l[3],p=t/i.value,f=n/i.value,h=t-p,m=n-f,g={top:parseInt(tn("sat")),bottom:parseInt(tn("sab")),left:parseInt(tn("sal")),right:parseInt(tn("sar"))},v=T().rtl,b=h/2-o+g.left,y=m/2-a+g.top,w=b+p-g.right,x=y+f-g.bottom,E=Math.min(c,b),k=Math.min(s,y),S=Math.max(u,w),C=Math.max(d,x);return{horizontal:b===E&&w===S?null:{x:Math.max(g.left,4)+(b-E)/(S-E)*t,y:n-6-Math.max(4,g.bottom),width:(w-b)/(S-E)*t-Math.max(8,g.left+g.right),height:6},vertical:y===k&&x===C?null:{x:v?Math.max(g.left,4):t-6-Math.max(g.right,4),y:(y-k)/(C-k)*n+Math.max(g.top,4),width:6,height:(x-y)/(C-k)*n-Math.max(8,g.top+g.bottom)}}}(e,y,w,i),x=b.fillStyle,q=b.strokeStyle,b.fillStyle="rgba(0,0,0,0.3)",b.strokeStyle="rgba(255,255,255,0.8)",[S.horizontal,S.vertical].forEach(function(e){e&&function(e,t,n,r,o,a){e.beginPath(),e.moveTo(t+3,n),e.lineTo(t+r-3,n),e.quadraticCurveTo(t+r,n,t+r,n+3),e.lineTo(t+r,n+o-3),e.quadraticCurveTo(t+r,n+o,t+r-3,n+o),e.lineTo(t+3,n+o),e.quadraticCurveTo(t,n+o,t,n+o-3),e.lineTo(t,n+3),e.quadraticCurveTo(t,n,t+3,n),e.closePath(),e.fill(),e.stroke()}(b,e.x,e.y,e.width,e.height)}),b.fillStyle=x,b.strokeStyle=q),b.scale(1/r,1/r),{atLeastOneVisibleElement:C.length>0,scrollBars:S}},Yl=function(e,t,n,r){Object.keys(n).forEach(function(o){var a=n[o];if(void 0!==a){var i=e.lineWidth;e.lineWidth=1/t.zoom.value,"rotation"===o?Vl(e,a[0]+a[2]/2,a[1]+a[3]/2,a[2]/2):Gl(e,a[0],a[1],a[2],a[3],a[0]+a[2]/2,a[1]+a[3]/2,r,!0),e.lineWidth=i}})},Ul=function(e,t,n){var r=n.angle,o=n.elementX1,a=n.elementY1,i=n.elementX2,l=n.elementY2,c=n.selectionColors,s=i-o,u=l-a,d=e.getLineDash(),p=e.lineWidth,f=e.lineDashOffset,h=e.strokeStyle,m=4/t.zoom.value,g=8/t.zoom.value,v=4/t.zoom.value;e.lineWidth=1/t.zoom.value,e.translate(t.scrollX,t.scrollY);for(var b=c.length,y=0;y<b;++y)e.strokeStyle=c[y],e.setLineDash([g,v+(g+v)*(b-1)]),e.lineDashOffset=(g+v)*y,Gl(e,o-m,a-m,s+2*m,u+2*m,o+s/2,a+u/2,r);e.lineDashOffset=f,e.strokeStyle=h,e.lineWidth=p,e.setLineDash(d),e.translate(-t.scrollX,-t.scrollY)},Xl=function(e,t,n){var r=e.strokeStyle,o=e.lineWidth,a=Array.isArray(n)?ql:Zl;e.translate(t.scrollX,t.scrollY),a(e,n),e.strokeStyle=r,e.lineWidth=o,e.translate(-t.scrollX,-t.scrollY)},Zl=function(e,t){var n=it(t),r=n[0],o=n[1],a=n[2]-r,i=n[3]-o,l=Fr(t,a,i);e.strokeStyle="rgba(0,0,0,.05)",e.lineWidth=l-4;var c=2+l/2;switch(t.type){case"rectangle":case"text":Gl(e,r-c,o-c,a+2*c,i+2*c,r+a/2,o+i/2,t.angle);break;case"diamond":var s=Math.hypot(a,i);!function(e,t,n,r,o,a){e.translate(r,o),e.rotate(a),e.beginPath(),e.moveTo(0,n/2),e.lineTo(t/2,0),e.lineTo(0,-n/2),e.lineTo(-t/2,0),e.closePath(),e.stroke(),e.rotate(-a),e.translate(-r,-o)}(e,a+c*s/i*2,i+c*s/a*2,r+a/2,o+i/2,t.angle);break;case"ellipse":!function(e,t,n,r,o,a){e.beginPath(),e.ellipse(r,o,t/2,n/2,a,0,2*Math.PI),e.stroke()}(e,a+2*c,i+2*c,r+a/2,o+i/2,t.angle)}},ql=function(e,t){var n=t[0],r=t[1],o=t[2],a=Fr(o,o.width,o.height);e.strokeStyle="rgba(0,0,0,0)",e.fillStyle="rgba(0,0,0,.05)",("both"===r?[0,-1]:"start"===r?[0]:[-1]).forEach(function(t){var r=yo.getPointAtIndexGlobalCoordinates(n,t),o=r[0],i=r[1];Vl(e,o,i,a)})},Ql=function(e,t,n,r){var o=ut(e),a=o[0],i=o[1],l=o[2],c=o[3],s=Jt({clientX:r.offsetLeft,clientY:r.offsetTop},r),u=Jt({clientX:r.offsetLeft+t,clientY:r.offsetTop+n},r);return s.x<=l&&s.y<=c&&u.x>=a&&u.y>=i},$l=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Jl="\x3c!-- svg-source:excalidraw --\x3e",ec=function(e,t,n,r){var o=n.exportBackground,a=n.exportPadding,i=void 0===a?10:a,l=n.viewBackgroundColor,c=n.scale,s=void 0===c?1:c,u=n.shouldAddWatermark;void 0===r&&(r=function(e,t){var n=document.createElement("canvas");return n.width=e*s,n.height=t*s,{canvas:n,scale:s}});var d=nc(e,u),p=oc(d,i,u),f=p[0],h=p[1],m=r(p[2],p[3]),g=m.canvas,v=m.scale;return Kl(d,t,null,void 0===v?s:v,He(g),g,{viewBackgroundColor:o?l:null,exportWithDarkMode:t.exportWithDarkMode,scrollX:-f+i,scrollY:-h+i,zoom:un().zoom,remotePointerViewportCoords:{},remoteSelectedElementIds:{},shouldCacheIgnoreZoom:!1,remotePointerUsernames:{},remotePointerUserStates:{}},{renderScrollbars:!1,renderSelection:!1,renderOptimizations:!1,renderGrid:!1}),g},tc=function(e,t){var n=t.exportBackground,r=t.exportPadding,o=void 0===r?10:r,a=t.viewBackgroundColor,i=t.exportWithDarkMode,l=t.scale,c=void 0===l?1:l,s=t.shouldAddWatermark,u=t.metadata,d=void 0===u?"":u,p=nc(e,s),f=oc(p,o,s),h=f[0],m=f[1],v=f[2],b=f[3],y=document.createElementNS(Ht,"svg");if(y.setAttribute("version","1.1"),y.setAttribute("xmlns",Ht),y.setAttribute("viewBox","0 0 ".concat(v," ").concat(b)),y.setAttribute("width","".concat(v*c)),y.setAttribute("height","".concat(b*c)),i&&y.setAttribute("filter",g.Gi),y.innerHTML="\n  ".concat(Jl,"\n  ").concat(d,'\n  <defs>\n    <style>\n      @font-face {\n        font-family: "Virgil";\n        src: url("https://excalidraw.com/FG_Virgil.woff2");\n      }\n      @font-face {\n        font-family: "Cascadia";\n        src: url("https://excalidraw.com/Cascadia.woff2");\n      }\n    </style>\n  </defs>\n  '),n&&a){var w=y.ownerDocument.createElementNS(Ht,"rect");w.setAttribute("x","0"),w.setAttribute("y","0"),w.setAttribute("width","".concat(v)),w.setAttribute("height","".concat(b)),w.setAttribute("fill",a),y.appendChild(w)}return function(e,t,n,r){var o=void 0===r?{}:r,a=o.offsetX,i=void 0===a?0:a,l=o.offsetY,c=void 0===l?0:l;n&&e.forEach(function(e){e.isDeleted||function(e,t,n,r,o){var a=it(e),i=a[0],l=a[1],c=a[2],s=a[3],u=(c-i)/2-(e.x-i),d=(s-l)/2-(e.y-l),p=180*e.angle/Math.PI,f=t.generator;switch(e.type){case"selection":throw new Error("Selection rendering is not supported for SVG");case"rectangle":case"diamond":case"ellipse":Sn(e,f);var h=t.draw(xn(e));1!=(v=e.opacity/100)&&(h.setAttribute("stroke-opacity","".concat(v)),h.setAttribute("fill-opacity","".concat(v))),h.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(p," ").concat(u," ").concat(d,")")),n.appendChild(h);break;case"line":case"draw":case"arrow":Sn(e,f);var m=n.ownerDocument.createElementNS(Ht,"g"),g=e.opacity/100;xn(e).forEach(function(n){var a=t.draw(n);1!==g&&(a.setAttribute("stroke-opacity","".concat(g)),a.setAttribute("fill-opacity","".concat(g))),a.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(p," ").concat(u," ").concat(d,")")),"line"!==e.type&&"draw"!==e.type||!Je(e.points)||"transparent"===e.backgroundColor||a.setAttribute("fill-rule","evenodd"),m.appendChild(a)}),n.appendChild(m);break;default:if(!Ge(e))throw new Error("Unimplemented type ".concat(e.type));var v=e.opacity/100;h=n.ownerDocument.createElementNS(Ht,"g"),1!==v&&(h.setAttribute("stroke-opacity","".concat(v)),h.setAttribute("fill-opacity","".concat(v))),h.setAttribute("transform","translate(".concat(r||0," ").concat(o||0,") rotate(").concat(p," ").concat(u," ").concat(d,")"));for(var b=e.text.replace(/\r\n?/g,"\n").split("\n"),y=e.height/b.length,w=e.height-e.baseline,x="center"===e.textAlign?e.width/2:"right"===e.textAlign?e.width:0,E=rn(e.text)?"rtl":"ltr",k="center"===e.textAlign?"middle":"right"===e.textAlign||"rtl"===E?"end":"start",S=0;S<b.length;S++){var C=n.ownerDocument.createElementNS(Ht,"text");C.textContent=b[S],C.setAttribute("x","".concat(x)),C.setAttribute("y","".concat((S+1)*y-w)),C.setAttribute("font-family",Wt(e)),C.setAttribute("font-size","".concat(e.fontSize,"px")),C.setAttribute("fill",e.strokeColor),C.setAttribute("text-anchor",k),C.setAttribute("style","white-space: pre;"),C.setAttribute("direction",E),h.appendChild(C)}n.appendChild(h)}}(e,t,n,e.x+i,e.y+c)})}(p,Ne(y),y,{offsetX:-h+o,offsetY:-m+o}),y},nc=function(e,t){var n=$l([],e);if(t){var r=dt(e),o=r[2],a=r[3];n=$l($l([],n),[rc(o,a)])}return n},rc=function(e,t){return rr({text:_("labels.madeWithExcalidraw"),fontSize:16,fontFamily:g.rk,textAlign:"right",verticalAlign:g.hs,x:e,y:t+16,strokeColor:ht.MA[5],backgroundColor:"transparent",fillStyle:"hachure",strokeWidth:1,strokeStyle:"solid",roughness:1,opacity:100,strokeSharpness:"sharp"})},oc=function(e,t,n){var r=dt(e),o=r[0],a=r[1],i=r[2],l=r[3];return[o,a,Xt(o,i)+2*t,Xt(a,l)+t+(n?0:t)]},ac=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cc,sc="NOT_SPREADSHEET",uc="VALID_SPREADSHEET",dc=function(e){var t=/^[$]?([0-9,]+(\.[0-9]+)?)$/.exec(e);return t?parseFloat(t[1].replace(/,/g,"")):null},pc=function(e,t){return e.slice(1).every(function(e){return null!==dc(e[t])})},fc=function(e){var t=e[0].length;if(t>2)return{type:sc,reason:"More than 2 columns"};if(1===t){if(!pc(e,0))return{type:sc,reason:"Value is not numeric"};var n=null===dc(e[0][0]),r=(n?e.slice(1):e).map(function(e){return dc(e[0])});return r.length<2?{type:sc,reason:"Less than two rows"}:{type:uc,spreadsheet:{title:n?e[0][0]:null,labels:null,values:r}}}var o=pc(e,0)?0:1;if(!pc(e,o))return{type:sc,reason:"Value is not numeric"};var a=(o+1)%2,i=null===dc(e[0][o]),l=i?e.slice(1):e;return l.length<2?{type:sc,reason:"Less than 2 rows"}:{type:uc,spreadsheet:{title:i?e[0][o]:null,labels:l.map(function(e){return e[a]}),values:l.map(function(e){return dc(e[o])})}}},hc=vt.elementBackground.slice(2,vt.elementBackground.length),mc={fillStyle:"hachure",fontFamily:g.rk,fontSize:g.n5,opacity:100,roughness:1,strokeColor:vt.elementStroke[0],strokeSharpness:"sharp",strokeStyle:"solid",strokeWidth:1,verticalAlign:"middle"},gc=function(e){return{chartWidth:44*e.values.length+12,chartHeight:280}},vc=function(e,t,n,r,o,a){var i=gc(e),l=i.chartWidth,c=i.chartHeight,s=e.title?rr(lc(lc({backgroundColor:o,groupIds:[r]},mc),{},{text:e.title,x:t+l/2,y:n-256-24-g.n5,strokeSharpness:"sharp",strokeStyle:"solid",textAlign:"center"})):null,u=a?tr(lc(lc({backgroundColor:o,groupIds:[r]},mc),{},{type:"rectangle",x:t,y:n-c,width:l,height:c,strokeColor:vt.elementStroke[0],fillStyle:"solid",opacity:6})):null;return ac(ac(ac(ac(ac([],u?[u]:[]),s?[s]:[]),function(e,t,n,r,o){var a;return(null===(a=e.labels)||void 0===a?void 0:a.map(function(e,a){return rr(lc(lc({groupIds:[r],backgroundColor:o},mc),{},{text:e.length>8?"".concat(e.slice(0,5),"..."):e,x:t+44*a+24,y:n+6,width:32,angle:5.87,fontSize:16,textAlign:"center",verticalAlign:"top"}))}))||[]}(e,t,n,r,o)),function(e,t,n,r,o){var a=rr(lc(lc({groupIds:[r],backgroundColor:o},mc),{},{x:t-12,y:n-12,text:"0",textAlign:"right"}));return[a,rr(lc(lc({groupIds:[r],backgroundColor:o},mc),{},{x:t-12,y:n-256-a.height/2,text:Math.max.apply(Math,e.values).toLocaleString(),textAlign:"right"}))]}(e,t,n,r,o)),function(e,t,n,r,o){var a=gc(e),i=a.chartWidth,l=a.chartHeight;return[or(lc(lc({backgroundColor:o,groupIds:[r]},mc),{},{type:"line",x:t,y:n,startArrowhead:null,endArrowhead:null,width:i,points:[[0,0],[i,0]]})),or(lc(lc({backgroundColor:o,groupIds:[r]},mc),{},{type:"line",x:t,y:n,startArrowhead:null,endArrowhead:null,height:l,points:[[0,0],[0,-l]]})),or(lc(lc({backgroundColor:o,groupIds:[r]},mc),{},{type:"line",x:t,y:n-256-12,startArrowhead:null,endArrowhead:null,strokeStyle:"dotted",width:i,opacity:50,points:[[0,0],[i,0]]}))]}(e,t,n,r,o))},bc=(cc=function(e,t){return(cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}cc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),yc=function(e){function t(t,n){void 0===t&&(t="Couldn't export canvas."),void 0===n&&(n="CANVAS_ERROR");var r=e.call(this)||this;return r.name=n,r.message=t,r}return bc(t,e),t}(Error);function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ec=function(e,t){var n,r,o,a,i,l,c,s,u={type:e.type,version:e.version||1,versionNonce:null!==(n=e.versionNonce)&&void 0!==n?n:0,isDeleted:null!==(r=e.isDeleted)&&void 0!==r&&r,id:e.id||An(),fillStyle:e.fillStyle||"hachure",strokeWidth:e.strokeWidth||1,strokeStyle:null!==(o=e.strokeStyle)&&void 0!==o?o:"solid",roughness:null!==(a=e.roughness)&&void 0!==a?a:1,opacity:null==e.opacity?100:e.opacity,angle:e.angle||0,x:e.x||0,y:e.y||0,strokeColor:e.strokeColor,backgroundColor:e.backgroundColor,width:e.width||0,height:e.height||0,seed:null!==(i=e.seed)&&void 0!==i?i:1,groupIds:null!==(l=e.groupIds)&&void 0!==l?l:[],strokeSharpness:null!==(c=e.strokeSharpness)&&void 0!==c?c:Ke(e.type)?"round":"sharp",boundElementIds:null!==(s=e.boundElementIds)&&void 0!==s?s:[]};return xc(xc(xc({},u),Hn(u)),t)},kc=function(e){return(e||[]).reduce(function(e,t){if("selection"!==t.type&&!zn(t)){var n=function(e){var t;switch(e.type){case"text":var n=e.fontSize,r=e.fontFamily;if("font"in e){var o=e.font.split(" "),a=o[0],i=o[1];n=parseInt(a,10),r=function(e){for(var t=0,n=Object.entries(g.ut);t<n.length;t++){var r=n[t],o=r[0];if(r[1].includes(e))return parseInt(o)}return g.rk}(i)}return Ec(e,{fontSize:n,fontFamily:r,text:null!==(t=e.text)&&void 0!==t?t:"",baseline:e.baseline,textAlign:e.textAlign||g.Hg,verticalAlign:e.verticalAlign||g.hs});case"draw":case"line":case"arrow":var l=e.startArrowhead,c=void 0===l?null:l,s=e.endArrowhead,u=void 0===s?"arrow"===e.type?"arrow":null:s;return Ec(e,{startBinding:e.startBinding,endBinding:e.endBinding,points:!Array.isArray(e.points)||e.points.length<2?[[0,0],[e.width,e.height]]:e.points,lastCommittedPoint:null,startArrowhead:c,endArrowhead:u});case"ellipse":case"rectangle":case"diamond":return Ec(e,{})}}(t);n&&e.push(n)}return e},[])},Sc=function(e,t){e=e||{};for(var n=un(),r={},o=0,a=Object.entries(n);o<a.length;o++){var i=a[o],l=i[0],c=i[1],s=e[l],u=t?t[l]:void 0;r[l]=void 0!==s?s:void 0!==u?u:c}return xc(xc({},r),{},{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0,zoom:"number"==typeof e.zoom?{value:e.zoom,translation:n.zoom.translation}:e.zoom||n.zoom})},Cc=function(e,t){return{elements:kc(null==e?void 0:e.elements),appState:Sc(null==e?void 0:e.appState,t||null)}},Oc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function Mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mc(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Pc=function(){var e=y()(function(e){var t;return Oc(this,function(n){switch(n.label){case 0:if("image/png"!==e.type)return[3,6];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))];case 2:return[4,n.sent().decodePngMetadata(e)];case 3:return[2,n.sent()];case 4:throw"INVALID"===n.sent().message?new Error(_("alerts.imageDoesNotContainScene")):new Error(_("alerts.cannotRestoreFromImage"));case 5:return[3,15];case 6:return"text"in Blob?[4,e.text()]:[3,8];case 7:return t=n.sent(),[3,10];case 8:return[4,new Promise(function(t){var n=new FileReader;n.readAsText(e,"utf8"),n.onloadend=function(){n.readyState===FileReader.DONE&&t(n.result)}})];case 9:t=n.sent(),n.label=10;case 10:if("image/svg+xml"!==e.type)return[3,15];n.label=11;case 11:return n.trys.push([11,14,,15]),[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))];case 12:return[4,n.sent().decodeSvgMetadata({svg:t})];case 13:return[2,n.sent()];case 14:throw"INVALID"===n.sent().message?new Error(_("alerts.imageDoesNotContainScene")):new Error(_("alerts.cannotRestoreFromImage"));case 15:return[2,t]}})});return function(t){return e.apply(this,arguments)}}(),Tc=function(e){var t;if("string"==typeof e)t=e;else{if(e.type)return e.type;t=e.name||""}return/\.(excalidraw|json)$/.test(t)?"application/json":/\.png$/.test(t)?"image/png":/\.jpe?g$/.test(t)?"image/jpeg":/\.svg$/.test(t)?"image/svg+xml":""},Ac=function(){var e=y()(function(e,t){var n,r;return Oc(this,function(o){switch(o.label){case 0:return[4,Pc(e)];case 1:n=o.sent();try{if("excalidraw"!==(r=JSON.parse(n)).type)throw new Error(_("alerts.couldNotLoadInvalidFile"));return[2,Cc({elements:ha(r.elements||[]),appState:Ic(Ic({appearance:null==t?void 0:t.appearance,fileHandle:e.handle&&["application/json",g.LO.excalidraw].includes(Tc(e))?e.handle:null},pn(r.appState||{})),t?wa(r.elements||[],t):{})},t)]}catch(e){throw console.error(e.message),new Error(_("alerts.couldNotLoadInvalidFile"))}return[2]}})});return function(t,n){return e.apply(this,arguments)}}(),_c=function(){var e=y()(function(e){var t,n;return Oc(this,function(r){switch(r.label){case 0:return[4,Pc(e)];case 1:if(t=r.sent(),"excalidrawlib"!==(n=JSON.parse(t)).type)throw new Error(_("alerts.couldNotLoadInvalidFile"));return[2,n]}})});return function(t){return e.apply(this,arguments)}}(),Lc=function(){var e=y()(function(e){return Oc(this,function(t){return[2,new Promise(function(t,n){try{e.toBlob(function(e){if(!e)return n(new yc(_("canvasError.canvasTooBig"),"CANVAS_POSSIBLY_TOO_BIG"));t(e)})}catch(e){n(e)}})]})});return function(t){return e.apply(this,arguments)}}(),Dc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},jc="excalidraw/elements",zc="",Bc=!1,Hc="clipboard"in navigator&&"readText"in navigator.clipboard,Nc="clipboard"in navigator&&"writeText"in navigator.clipboard,Rc="clipboard"in navigator&&"write"in navigator.clipboard&&"ClipboardItem"in window&&"toBlob"in HTMLCanvasElement.prototype,Fc=function(){var e=y()(function(e,t){var n,r,o;return Dc(this,function(a){switch(a.label){case 0:n={type:jc,created:Date.now(),elements:va(e,t)},r=JSON.stringify(n),zc=r,a.label=1;case 1:return a.trys.push([1,3,,4]),Bc=!1,[4,Yc(r)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),Bc=!0,console.error(o),[3,4];case 4:return[2]}})});return function(t,n){return e.apply(this,arguments)}}(),Wc=function(){if(!zc)return{};try{return JSON.parse(zc)}catch(e){return console.error(e),{}}},Gc=function(){var e=y()(function(e){var t,n,r;return Dc(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),e?(n=null===(t=e.clipboardData)||void 0===t?void 0:t.getData("text/plain").trim(),[3,4]):[3,1];case 1:return(r=Hc)?[4,navigator.clipboard.readText()]:[3,3];case 2:r=o.sent(),o.label=3;case 3:n=r,o.label=4;case 4:return[2,n||""];case 5:return o.sent(),[2,""];case 6:return[2]}})});return function(t){return e.apply(this,arguments)}}(),Vc=function(){var e=y()(function(e){var t,n,r,o;return Dc(this,function(a){switch(a.label){case 0:return[4,Gc(e)];case 1:if(!(t=a.sent())||t.includes(Jl))return[2,Wc()];if(n=function(e){var t=function(e){var t=e.trim().split("\n").map(function(e){return e.trim().split("\t")});if(t.length&&2!==t[0].length&&(t=e.trim().split("\n").map(function(e){return e.trim().split(",")})),0===t.length)return{type:sc,reason:"No values"};var n=t[0].length;if(!t.every(function(e){return e.length===n}))return{type:sc,reason:"All rows don't have same number of columns"};var r=fc(t);if(r.type!==uc){var o=fc(function(e){for(var t=[],n=0;n<e[0].length;n++){for(var r=[],o=0;o<e.length;o++)r.push(e[o][n]);t.push(r)}return t}(t));if(o.type===uc)return o}return r}(e);return t.type===uc?{spreadsheet:t.spreadsheet}:null}(t))return[2,n];r=Wc();try{return(null==(i=o=JSON.parse(t))?void 0:i.type)===jc&&(null==r||!r.created||r.created<o.created)?[2,{elements:o.elements}]:[2,r]}catch(e){return[2,Bc&&r.elements?r:{text:t}]}return[2]}var i})});return function(t){return e.apply(this,arguments)}}(),Kc=function(){var e=y()(function(e){var t;return Dc(this,function(n){switch(n.label){case 0:return[4,Lc(e)];case 1:return t=n.sent(),[4,navigator.clipboard.write([new window.ClipboardItem({"image/png":t})])];case 2:return n.sent(),[2]}})});return function(t){return e.apply(this,arguments)}}(),Yc=function(){var e=y()(function(e){var t,n;return Dc(this,function(r){switch(r.label){case 0:if(t=!1,!Nc)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e||"")];case 2:return r.sent(),t=!0,[3,4];case 3:return n=r.sent(),console.error(n),[3,4];case 4:if(!t&&!Uc(e||" "))throw new Error("couldn't copy");return[2]}})});return function(t){return e.apply(this,arguments)}}(),Uc=function(e){var t="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[t?"right":"left"]="-9999px";var r=window.pageYOffset||document.documentElement.scrollTop;n.style.top="".concat(r,"px"),n.style.fontSize="12pt",n.setAttribute("readonly",""),n.value=e,document.body.appendChild(n);var o=!1;try{n.select(),n.setSelectionRange(0,n.value.length),o=document.execCommand("copy")}catch(e){console.error(e)}return n.remove(),o},Xc=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},Zc=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},qc=function(){function e(){}return e.importLibrary=function(t){return y()(function(){var n,r,o,a;return Xc(this,function(i){switch(i.label){case 0:return[4,_c(t)];case 1:return(n=i.sent())&&n.library?(r=function(e,t){return!e.find(function(e){return e.length===t.length&&e.every(function(e,n){return e.id===t[n].id&&e.versionNonce===t[n].versionNonce})})},[4,e.loadLibrary()]):[2];case 2:return o=i.sent(),a=n.library.reduce(function(e,t){var n=pa(kc(t));return r(o,n)&&e.push(n),e},[]),e.saveLibrary(Zc(Zc([],o),a)),[2]}})})()},e}();qc.libraryCache=null,qc.resetLibrary=function(){qc.libraryCache=null,localStorage.removeItem(g.I.LOCAL_STORAGE_LIBRARY)},qc.loadLibrary=function(){return new Promise((e=y()(function(e){var t,n;return Xc(this,function(r){if(qc.libraryCache)return[2,e(JSON.parse(JSON.stringify(qc.libraryCache)))];try{if(!(t=localStorage.getItem(g.I.LOCAL_STORAGE_LIBRARY)))return[2,e([])];n=JSON.parse(t).map(function(e){return kc(e)}),qc.libraryCache=JSON.parse(JSON.stringify(n)),e(n)}catch(t){console.error(t),e([])}return[2]})}),function(t){return e.apply(this,arguments)}));var e},qc.saveLibrary=function(e){var t=qc.libraryCache;try{var n=JSON.stringify(e);qc.libraryCache=JSON.parse(n),localStorage.setItem(g.I.LOCAL_STORAGE_LIBRARY,n)}catch(e){qc.libraryCache=t,console.error(e)}};var Qc,$c,Jc,es=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},ts=function(e,t){return JSON.stringify({type:"excalidraw",version:2,source:window.location.origin,elements:ha(e),appState:pn(t)},null,2)},ns=function(){var e=y()(function(e,t){var n;return es(this,function(r){switch(r.label){case 0:return n=ts(e,t),[4,Nl(new Blob([n],{type:"application/json"}),{fileName:t.name,description:"Excalidraw file",extensions:[".excalidraw"]},t.fileHandle)];case 1:return[2,{fileHandle:r.sent()}]}})});return function(t,n){return e.apply(this,arguments)}}(),rs=function(){var e=y()(function(e){var t;return es(this,function(n){switch(n.label){case 0:return[4,Bl({description:"Excalidraw files",extensions:[".json",".excalidraw",".png",".svg"],mimeTypes:["application/json","image/png","image/svg+xml"]})];case 1:return t=n.sent(),[2,Ac(t,e)]}})});return function(t){return e.apply(this,arguments)}}(),os=function(){var e=y()(function(){var e,t;return es(this,function(n){switch(n.label){case 0:return[4,qc.loadLibrary()];case 1:return e=n.sent(),t=JSON.stringify({type:"excalidrawlib",version:1,library:e},null,2),[4,Nl(new Blob([t],{type:g.LO.excalidrawlib}),{fileName:"library.excalidrawlib",description:"Excalidraw library file",extensions:[".excalidrawlib"]})];case 2:return n.sent(),[2]}})});return function(){return e.apply(this,arguments)}}(),as=function(){var e=y()(function(){var e;return es(this,function(t){switch(t.label){case 0:return[4,Bl({description:"Excalidraw library files",extensions:[".json",".excalidrawlib"],mimeTypes:["application/json"]})];case 1:return e=t.sent(),qc.importLibrary(e),[2]}})});return function(){return e.apply(this,arguments)}}(),is=function(){var e=y()(function(e,t,n,r,o){var i,l,c,s,u,d,p,f,h=o.exportBackground,m=o.exportPadding,g=void 0===m?10:m,v=o.viewBackgroundColor,b=o.name,y=o.scale,w=void 0===y?1:y,x=o.shouldAddWatermark;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}(this,function(o){switch(o.label){case 0:if(0===t.length)throw new Error(_("alerts.cannotExportEmptyCanvas"));return"svg"!==e&&"clipboard-svg"!==e?[3,3]:(l=tc,c=[t],s={exportBackground:h,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:v,exportPadding:g,scale:w,shouldAddWatermark:x},[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))]);case 1:return[4,o.sent().encodeSvgMetadata({text:ts(t,n)})];case 2:if(i=l.apply(void 0,c.concat([(s.metadata=o.sent(),s)])),"svg"===e)return[2,i.outerHTML];if("clipboard-svg"===e)return Yc(i.outerHTML),[2];o.label=3;case 3:return(u=ec(t,n,{exportBackground:h,viewBackgroundColor:v,exportPadding:g,scale:w,shouldAddWatermark:x})).style.display="none",document.body.appendChild(u),"png"!==e?[3,9]:(d="".concat(b,".png"),[4,Lc(u)]);case 4:return p=o.sent(),n.exportEmbedScene?[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))]:[3,7];case 5:return[4,o.sent().encodePngMetadata({blob:p,metadata:ts(t,n)})];case 6:p=o.sent(),o.label=7;case 7:return[4,Nl(p,{fileName:d,extensions:[".png"]})];case 8:return o.sent(),[3,13];case 9:if("clipboard"!==e)return[3,13];o.label=10;case 10:return o.trys.push([10,12,,13]),[4,Kc(u)];case 11:return o.sent(),[3,13];case 12:if("CANVAS_POSSIBLY_TOO_BIG"===(f=o.sent()).name)throw f;throw new Error(_("alerts.couldNotCopyToClipboard"));case 13:return u!==r&&u.remove(),[2]}})});return function(t,n,r,o,a){return e.apply(this,arguments)}}(),ls=function(e){var t=e.title?e.title:"dark"===e.value?_("buttons.lightMode"):_("buttons.darkMode");return m().createElement("label",{className:"ToolIcon ToolIcon_type_floating ToolIcon_size_M",title:t},m().createElement("input",{className:"ToolIcon_type_checkbox ToolIcon_toggle_opaque",type:"checkbox",onChange:function(t){return e.onChange(t.target.checked?"dark":"light")},checked:"dark"===e.value,"aria-label":t}),m().createElement("div",{className:"ToolIcon__icon"},"light"===e.value?cs.MOON:cs.SUN))},cs={SUN:m().createElement("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512"},m().createElement("path",{fill:"currentColor",d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0-49.9-49.9-49.9-131.1 0-181 49.9-49.9 131.1-49.9 181 0 49.9 49.9 49.9 131.1 0 181z"})),MOON:m().createElement("svg",{width:"512",height:"512",className:"rtl-mirror",viewBox:"0 0 512 512"},m().createElement("path",{fill:"currentColor",d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.511-256 256 0 141.309 114.511 256 256 256z"}))},ss=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ds(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ps(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ps(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({name:"changeProjectName",perform:function(e,t,n){return Al("change","title"),{appState:ds(ds({},t),{},{name:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement(Ll,{label:_("labels.fileTitle"),value:t.name||"Unnamed",onChange:function(e){return n(e)}})}}),Ii({name:"changeExportBackground",perform:function(e,t,n){return{appState:ds(ds({},t),{},{exportBackground:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement("label",null,m().createElement("input",{type:"checkbox",checked:t.exportBackground,onChange:function(e){return n(e.target.checked)}})," ",_("labels.withBackground"))}}),Ii({name:"changeExportEmbedScene",perform:function(e,t,n){return{appState:ds(ds({},t),{},{exportEmbedScene:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement("label",{style:{display:"flex"}},m().createElement("input",{type:"checkbox",checked:t.exportEmbedScene,onChange:function(e){return n(e.target.checked)}})," ",_("labels.exportEmbedScene"),m().createElement(Dl,{label:_("labels.exportEmbedScene_details"),position:"above",long:!0},m().createElement("div",{className:"TooltipIcon"},Ya)))}}),Ii({name:"changeShouldAddWatermark",perform:function(e,t,n){return{appState:ds(ds({},t),{},{shouldAddWatermark:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement("label",null,m().createElement("input",{type:"checkbox",checked:t.shouldAddWatermark,onChange:function(e){return n(e.target.checked)}})," ",_("labels.addWatermark"))}}),Ii({name:"saveScene",perform:(Qc=y()(function(e,t,n){var r,o,a;return ss(this,function(n){switch(n.label){case 0:r=!!t.fileHandle,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,ns(e,t)];case 2:return o=n.sent().fileHandle,[2,{commitToHistory:!1,appState:ds(ds({},t),{},{fileHandle:o,toastMessage:r?o.name?_("toast.fileSavedToFilename").replace("{filename}",'"'.concat(o.name,'"')):_("toast.fileSaved"):null})}];case 3:return"AbortError"!==(null==(a=n.sent())?void 0:a.name)&&console.error(a),[2,{commitToHistory:!1}];case 4:return[2]}})}),function(e,t,n){return Qc.apply(this,arguments)}),keyTest:function(e){return"s"===e.key&&e[It]&&!e.shiftKey},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Da,title:_("buttons.save"),"aria-label":_("buttons.save"),showAriaLabel:xl(),onClick:function(){return t(null)}})}}),Ii({name:"saveAsScene",perform:($c=y()(function(e,t,n){var r,o;return ss(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,ns(e,ds(ds({},t),{},{fileHandle:null}))];case 1:return r=n.sent().fileHandle,[2,{commitToHistory:!1,appState:ds(ds({},t),{},{fileHandle:r})}];case 2:return"AbortError"!==(null==(o=n.sent())?void 0:o.name)&&console.error(o),[2,{commitToHistory:!1}];case 3:return[2]}})}),function(e,t,n){return $c.apply(this,arguments)}),keyTest:function(e){return"s"===e.key&&e.shiftKey&&e[It]},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:ja,title:_("buttons.saveAs"),"aria-label":_("buttons.saveAs"),showAriaLabel:xl(),hidden:!("chooseFileSystemEntries"in window||"showOpenFilePicker"in window),onClick:function(){return t(null)}})}}),Ii({name:"loadScene",perform:(Jc=y()(function(e,t){var n,r,o,a;return ss(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,rs(t)];case 1:return n=i.sent(),r=n.elements,o=n.appState,[2,{elements:r,appState:o,commitToHistory:!0}];case 2:return"AbortError"===(null==(a=i.sent())?void 0:a.name)?[2,!1]:[2,{elements:e,appState:ds(ds({},t),{},{errorMessage:a.message}),commitToHistory:!1}];case 3:return[2]}})}),function(e,t){return Jc.apply(this,arguments)}),keyTest:function(e){return e[It]&&"o"===e.key},PanelComponent:function(e){var t=e.updateData;return e.appState,m().createElement(Pa,{type:"button",icon:za,title:_("buttons.load"),"aria-label":_("buttons.load"),showAriaLabel:xl(),onClick:t})}}),Ii({name:"exportWithDarkMode",perform:function(e,t,n){return{appState:ds(ds({},t),{},{exportWithDarkMode:n}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"-45px",marginBottom:"10px"}},m().createElement(ls,{value:t.exportWithDarkMode?"dark":"light",onChange:function(e){n("dark"===e)},title:_("labels.toggleExportColorScheme")}))}});var hs="{}",ms=Ii({name:"copyStyles",perform:function(e,t){var n=e.find(function(e){return t.selectedElementIds[e.id]});return n&&(hs=JSON.stringify(n)),{appState:fs(fs({},t),{},{toastMessage:_("toast.copyStyles")}),commitToHistory:!1}},contextItemLabel:"labels.copyStyles",keyTest:function(e){return e[It]&&e.altKey&&e.code===kt}}),gs=Ii({name:"pasteStyles",perform:function(e,t){var n,r=JSON.parse(hs);return"text"!==(null==(n=r)?void 0:n.type)&&"diamond"!==(null==n?void 0:n.type)&&"rectangle"!==(null==n?void 0:n.type)&&"ellipse"!==(null==n?void 0:n.type)&&"arrow"!==(null==n?void 0:n.type)&&"draw"!==(null==n?void 0:n.type)&&"line"!==(null==n?void 0:n.type)?{elements:e,commitToHistory:!1}:{elements:e.map(function(e){if(t.selectedElementIds[e.id]){var n=jn(e,{backgroundColor:null==r?void 0:r.backgroundColor,strokeWidth:null==r?void 0:r.strokeWidth,strokeColor:null==r?void 0:r.strokeColor,strokeStyle:null==r?void 0:r.strokeStyle,fillStyle:null==r?void 0:r.fillStyle,opacity:null==r?void 0:r.opacity,roughness:null==r?void 0:r.roughness});return Ge(n)&&(Dn(n,{fontSize:(null==r?void 0:r.fontSize)||g.n5,fontFamily:(null==r?void 0:r.fontFamily)||g.rk,textAlign:(null==r?void 0:r.textAlign)||g.Hg}),aa(n)),n}return e}),commitToHistory:!0}},contextItemLabel:"labels.pasteStyles",keyTest:function(e){return e[It]&&e.altKey&&"KeyV"===e.code}}),vs=function(e){return m().createElement("label",{title:"".concat(e.title,"  ?"),className:"help-icon"},m().createElement("div",{onClick:e.onClick},Ya))};function bs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ys(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bs(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({name:"toggleCanvasMenu",perform:function(e,t){return{appState:ys(ys({},t),{},{openMenu:"canvas"===t.openMenu?null:"canvas"}),commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData;return m().createElement(Pa,{type:"button",icon:Ga,"aria-label":_("buttons.menu"),onClick:n,selected:"canvas"===t.openMenu})}}),Ii({name:"toggleEditMenu",perform:function(e,t){return{appState:ys(ys({},t),{},{openMenu:"shape"===t.openMenu?null:"shape"}),commitToHistory:!1}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{visible:ia(n,pa(t)),type:"button",icon:Ha,"aria-label":_("buttons.edit"),onClick:r,selected:"shape"===n.openMenu})}}),Ii({name:"toggleFullScreen",perform:function(){return Qt()||document.documentElement.requestFullscreen(),Qt()&&document.exitFullscreen(),{commitToHistory:!1}},keyTest:function(e){return"KeyF"===e.code&&!e[It]}}),Ii({name:"toggleShortcuts",perform:function(e,t){return{appState:ys(ys({},t),{},{showHelpDialog:!t.showHelpDialog}),commitToHistory:!1}},PanelComponent:function(e){var t=e.updateData;return m().createElement(vs,{title:_("helpDialog.title"),onClick:t})},keyTest:function(e){return"?"===e.key}});var ws=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Es(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ks=function(e,t){var n=va(pa(e),t);return n.length>=2&&!function(e){if(e.length>=2)for(var t=function(t){if(e.reduce(function(e,n){return e&&Zn(n,t)},!0))return{value:!0}},n=0,r=e[0].groupIds;n<r.length;n++){var o=t(r[n]);if("object"==k(o))return o.value}return!1}(n)},Ss=Ii({name:"group",perform:function(e,t){var n=va(pa(e),t);if(n.length<2)return{appState:t,elements:e,commitToHistory:!1};var r=Un(t);if(1===r.length){var o=r[0],a=new Set(qn(e,o).map(function(e){return e.id})),i=new Set(n.map(function(e){return e.id}));if(new Set(ws(ws([],Array.from(a)),Array.from(i))).size===a.size)return{appState:t,elements:e,commitToHistory:!1}}var l=An(),c=e.map(function(e){return t.selectedElementIds[e.id]?jn(e,{groupIds:Qn(e.groupIds,l,t.editingGroupId)}):e}),s=qn(c,l),u=s[s.length-1],d=c.lastIndexOf(u),p=c.slice(d+1),f=c.slice(0,d).filter(function(e){return!Zn(e,l)}),h=ws(ws(ws([],f),s),p);return{appState:Vn(l,Es(Es({},t),{},{selectedGroupIds:{}}),pa(h)),elements:h,commitToHistory:!0}},contextItemLabel:"labels.group",contextItemPredicate:function(e,t){return ks(e,t)},keyTest:function(e){return!e.shiftKey&&e[It]&&"KeyG"===e.code},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!ks(t,n),type:"button",icon:m().createElement(si,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.group"),"  ").concat($t("CtrlOrCmd+G")),"aria-label":_("labels.group"),visible:ga(pa(t),n)})}}),Cs=Ii({name:"ungroup",perform:function(e,t){if(0===Un(t).length)return{appState:t,elements:e,commitToHistory:!1};var n=e.map(function(e){var n=function(e,t){return e.filter(function(e){return!t[e]})}(e.groupIds,t.selectedGroupIds);return n.length===e.groupIds.length?e:jn(e,{groupIds:n})});return{appState:Xn(Es(Es({},t),{},{selectedGroupIds:{}}),pa(n)),elements:n,commitToHistory:!0}},keyTest:function(e){return e.shiftKey&&e[It]&&"KeyG"===e.code},contextItemLabel:"labels.ungroup",contextItemPredicate:function(e,t){return Un(t).length>0},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{type:"button",hidden:0===Un(n).length,icon:m().createElement(ui,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.ungroup"),"  ").concat($t("CtrlOrCmd+Shift+G")),"aria-label":_("labels.ungroup"),visible:ga(pa(t),n)})}}),Os=(a(1395),function(e){var t=e.children,n=e.color,r=e.border,o=e.onClick;return m().createElement("div",{className:"Avatar",style:{background:n,border:"1px solid ".concat(r)},onClick:o},t)});function Ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ms(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}Ii({name:"goToCollaborator",perform:function(e,t,n){var r=n;return r?{appState:Is(Is(Is({},t),ya({scenePoint:r,viewportDimensions:{width:t.width,height:t.height},zoom:t.zoom})),{},{openMenu:"canvas"===t.openMenu?null:t.openMenu}),commitToHistory:!1}:{appState:t,commitToHistory:!1}},PanelComponent:function(e){var t=e.appState,n=e.updateData,r=e.id;if(!r)return null;var o=t.collaborators.get(r);if(!o)return null;var a=Fl(r,t),i=a.background,l=a.stroke,c=function(e){if(!e)return"?";var t=e.trim().split(" ");if(t.length<2)return t[0].substring(0,2).toUpperCase();var n=t[0],r=t[t.length-1];return(n[0]+r[0]).toUpperCase()}(o.username);return m().createElement(Os,{color:i,border:l,onClick:function(){return n(o.pointer)}},c)}});var Ps=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},Ts=Ii({name:"addToLibrary",perform:function(e,t){var n=va(pa(e),t);return qc.loadLibrary().then(function(e){qc.saveLibrary(Ps(Ps([],e),[n.map(ar)]))}),!1},contextItemLabel:"labels.addToLibrary"}),As=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function _s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ds=function(e){var t=dt(e);return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},js=function(e,t){return va(pa(e),t).length>1},zs=function(e,t,n){var r=function(e,t){var n=function(e){var t=new Map;return e.forEach(function(e){var n=0===e.groupIds.length?e.id:e.groupIds[e.groupIds.length-1],r=t.get(n)||[];t.set(n,As(As([],r),[e]))}),Array.from(t.values())}(e),r=Ds(e);return n.flatMap(function(e){var n=function(e,t,n){var r,o,a,i=n.axis,l=n.position,c=Ds(e),s="x"===i?["minX","maxX"]:["minY","maxY"],u=s[0],d=s[1];return Ls(Ls({},{x:0,y:0}),{},"start"===l?((r={})[i]=t[u]-c[u],r):"end"===l?((o={})[i]=t[d]-c[d],o):((a={})[i]=(t[u]+t[d])/2-(c[u]+c[d])/2,a))}(e,r,t);return e.map(function(e){return jn(e,{x:e.x+n.x,y:e.y+n.y})})})}(va(pa(e),t),n),o=ua(r);return e.map(function(e){return o[e.id]||e})},Bs=(Ii({name:"alignTop",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"start",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return e[It]&&e.shiftKey&&e.key===Mt},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement($a,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.alignTop"),"  ").concat($t("CtrlOrCmd+Shift+Up")),"aria-label":_("labels.alignTop"),visible:ga(pa(t),n)})}}),Ii({name:"alignBottom",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"end",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return e[It]&&e.shiftKey&&e.key===St},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement(Ja,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.alignBottom"),"  ").concat($t("CtrlOrCmd+Shift+Down")),"aria-label":_("labels.alignBottom"),visible:ga(pa(t),n)})}}),Ii({name:"alignLeft",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"start",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return e[It]&&e.shiftKey&&e.key===Ct},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement(ei,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.alignLeft"),"  ").concat($t("CtrlOrCmd+Shift+Left")),"aria-label":_("labels.alignLeft"),visible:ga(pa(t),n)})}}),Ii({name:"alignRight",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"end",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return e[It]&&e.shiftKey&&e.key===Ot},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement(ti,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.alignRight"),"  ").concat($t("CtrlOrCmd+Shift+Right")),"aria-label":_("labels.alignRight"),visible:ga(pa(t),n)})}}),Ii({name:"alignVerticallyCentered",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"center",axis:"y"}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement(oi,{appearance:n.appearance}),onClick:function(){return r(null)},title:_("labels.centerVertically"),"aria-label":_("labels.centerVertically"),visible:ga(pa(t),n)})}}),Ii({name:"alignHorizontallyCentered",perform:function(e,t){return{appState:t,elements:zs(e,t,{position:"center",axis:"x"}),commitToHistory:!0}},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!js(t,n),type:"button",icon:m().createElement(ai,{appearance:n.appearance}),onClick:function(){return r(null)},title:_("labels.centerHorizontally"),"aria-label":_("labels.centerHorizontally"),visible:ga(pa(t),n)})}}),function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e}),Hs=function(e){var t=dt(e),n=t[0],r=t[1],o=t[2],a=t[3];return{minX:n,minY:r,maxX:o,maxY:a,width:o-n,height:a-r,midX:(n+o)/2,midY:(r+a)/2}},Ns=function(e,t){return va(pa(e),t).length>1},Rs=function(e,t,n){var r=function(e,t){for(var n="x"===t.axis?["minX","midX","maxX","width"]:["minY","midY","maxY","height"],r=n[0],o=n[1],a=n[2],i=n[3],l=Hs(e),c=function(e){var t=new Map;return e.forEach(function(e){var n=0===e.groupIds.length?e.id:e.groupIds[e.groupIds.length-1],r=t.get(n)||[];t.set(n,Bs(Bs([],r),[e]))}),Array.from(t.values())}(e).map(function(e){return[e,Hs(e)]}).sort(function(e,t){return e[1][o]-t[1][o]}),s=0,u=0,d=c;u<d.length;u++)s+=d[u][1][i];var p=(l[i]-s)/(c.length-1);if(p<0){var f=c.findIndex(function(e){return e[1][r]===l[r]}),h=c.findIndex(function(e){return e[1][a]===l[a]}),m=(c[h][1][o]-c[f][1][o])/(c.length-1),g=c[f][1][o];return c.flatMap(function(e,n){var r=e[0],a=e[1],i={x:0,y:0};return n!==f&&n!==h&&(g+=m,i[t.axis]=g-a[o]),r.map(function(e){return jn(e,{x:e.x+i.x,y:e.y+i.y})})})}var v=l[r];return c.flatMap(function(e){var n=e[0],o=e[1],a={x:0,y:0};return a[t.axis]=v-o[r],v+=p,v+=o[i],n.map(function(e){return jn(e,{x:e.x+a.x,y:e.y+a.y})})})}(va(pa(e),t),n),o=ua(r);return e.map(function(e){return o[e.id]||e})},Fs=(Ii({name:"distributeHorizontally",perform:function(e,t){return{appState:t,elements:Rs(e,t,{space:"between",axis:"x"}),commitToHistory:!0}},keyTest:function(e){return e.altKey&&"KeyH"===e.code},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!Ns(t,n),type:"button",icon:m().createElement(ni,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.distributeHorizontally"),"  ").concat($t("Alt+H")),"aria-label":_("labels.distributeHorizontally"),visible:ga(pa(t),n)})}}),Ii({name:"distributeVertically",perform:function(e,t){return{appState:t,elements:Rs(e,t,{space:"between",axis:"y"}),commitToHistory:!0}},keyTest:function(e){return e.altKey&&"KeyV"===e.code},PanelComponent:function(e){var t=e.elements,n=e.appState,r=e.updateData;return m().createElement(Pa,{hidden:!Ns(t,n),type:"button",icon:m().createElement(ri,{appearance:n.appearance}),onClick:function(){return r(null)},title:"".concat(_("labels.distributeVertically"),"  ").concat($t("Alt+V")),"aria-label":_("labels.distributeVertically"),visible:ga(pa(t),n)})}}),function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}),Ws=function(){var e=y()(function(e,t,n,r,o){var i,l,c,s,u,d,p,f,h,m=o.exportBackground,g=o.exportPadding,v=void 0===g?10:g,b=o.viewBackgroundColor,y=o.name,w=o.scale,x=void 0===w?1:w,E=o.shouldAddWatermark;return Fs(this,function(o){switch(o.label){case 0:if(0===t.length)throw new Error(_("alerts.cannotExportEmptyCanvas"));return"svg"!==e&&"clipboard-svg"!==e?[3,7]:(l=tc,c=[t],s={exportBackground:m,exportWithDarkMode:n.exportWithDarkMode,viewBackgroundColor:b,exportPadding:v,scale:x,shouldAddWatermark:E},n.exportEmbedScene&&"svg"===e?[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))]:[3,3]);case 1:return[4,o.sent().encodeSvgMetadata({text:ts(t,n)})];case 2:return u=o.sent(),[3,4];case 3:u=void 0,o.label=4;case 4:return i=l.apply(void 0,c.concat([(s.metadata=u,s)])),"svg"!==e?[3,6]:[4,Nl(new Blob([i.outerHTML],{type:"image/svg+xml"}),{fileName:"".concat(y,".svg"),extensions:[".svg"]})];case 5:return o.sent(),[2];case 6:if("clipboard-svg"===e)return Yc(i.outerHTML),[2];o.label=7;case 7:return(d=ec(t,n,{exportBackground:m,viewBackgroundColor:b,exportPadding:v,scale:x,shouldAddWatermark:E})).style.display="none",document.body.appendChild(d),"png"!==e?[3,13]:(p="".concat(y,".png"),[4,Lc(d)]);case 8:return f=o.sent(),n.exportEmbedScene?[4,Promise.all([a.e(736),a.e(9)]).then(a.bind(a,8527))]:[3,11];case 9:return[4,o.sent().encodePngMetadata({blob:f,metadata:ts(t,n)})];case 10:f=o.sent(),o.label=11;case 11:return[4,Nl(f,{fileName:p,extensions:[".png"]})];case 12:return o.sent(),[3,17];case 13:if("clipboard"!==e)return[3,17];o.label=14;case 14:return o.trys.push([14,16,,17]),[4,Kc(d)];case 15:return o.sent(),[3,17];case 16:if("CANVAS_POSSIBLY_TOO_BIG"===(h=o.sent()).name)throw h;throw new Error(_("alerts.couldNotCopyToClipboard"));case 17:return d!==r&&d.remove(),[2]}})});return function(t,n,r,o,a){return e.apply(this,arguments)}}(),Gs=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};function Vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vs(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ys=Ii({name:"copy",perform:function(e,t){return Fc(pa(e),t),{commitToHistory:!1}},contextItemLabel:"labels.copy",keyTest:function(e){return e[It]&&e.code===kt}}),Us=Ii({name:"cut",perform:function(e,t,n,r){return Ys.perform(e,t,n,r),_i.perform(e,t,n,r)},contextItemLabel:"labels.cut",keyTest:function(e){return e[It]&&"KeyX"===e.code}}),Xs=Ii({name:"copyAsSvg",perform:function(){var e=y()(function(e,t,n,r){var o,a;return Gs(this,function(n){switch(n.label){case 0:if(!r.canvas)return[2,{commitToHistory:!1}];o=va(pa(e),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Ws("clipboard-svg",o.length?o:pa(e),t,r.canvas,t)];case 2:return n.sent(),[2,{commitToHistory:!1}];case 3:return a=n.sent(),console.error(a),[2,{appState:Ks(Ks({},t),{},{errorMessage:a.message}),commitToHistory:!1}];case 4:return[2]}})});return function(t,n,r,o){return e.apply(this,arguments)}}(),contextItemLabel:"labels.copyAsSvg"}),Zs=Ii({name:"copyAsPng",perform:function(){var e=y()(function(e,t,n,r){var o,a;return Gs(this,function(n){switch(n.label){case 0:if(!r.canvas)return[2,{commitToHistory:!1}];o=va(pa(e),t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,Ws("clipboard",o.length?o:pa(e),t,r.canvas,t)];case 2:return n.sent(),[2,{appState:Ks(Ks({},t),{},{toastMessage:_("toast.copyToClipboardAsPng")}),commitToHistory:!1}];case 3:return a=n.sent(),console.error(a),[2,{appState:Ks(Ks({},t),{},{errorMessage:a.message}),commitToHistory:!1}];case 4:return[2]}})});return function(t,n,r,o){return e.apply(this,arguments)}}(),contextItemLabel:"labels.copyAsPng",keyTest:function(e){return e.code===kt&&e.altKey&&e.shiftKey}});function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var $s=Ii({name:"gridMode",perform:function(e,t){return Al("view","mode","grid"),{appState:Qs(Qs({},t),{},{gridSize:this.checked(t)?null:g.k}),commitToHistory:!1}},checked:function(e){return null!==e.gridSize},contextItemLabel:"labels.showGrid",keyTest:function(e){return e[It]&&"Quote"===e.code}});function Js(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Js(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Js(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var tu=Ii({name:"zenMode",perform:function(e,t){return Al("view","mode","zen"),{appState:eu(eu({},t),{},{zenModeEnabled:!this.checked(t)}),commitToHistory:!1}},checked:function(e){return e.zenModeEnabled},contextItemLabel:"buttons.zenMode",keyTest:function(e){return!e[It]&&e.altKey&&"KeyZ"===e.code}});function nu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nu(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ou=Ii({name:"stats",perform:function(e,t){return{appState:ru(ru({},t),{},{showStats:!this.checked(t)}),commitToHistory:!1}},checked:function(e){return e.showStats},contextItemLabel:"stats.title"});function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var lu=function(e,t,n){if(!(t.multiElement||t.resizingElement||t.editingElement||t.draggingElement)){var r=n();if(null===r)return{commitToHistory:!1};var o=ua(e),a=r.elements,i=ua(a),l=e.filter(function(e){return!i.hasOwnProperty(e.id)}),c=a.map(function(e){return jn(o[e.id]||e,e)}).concat(l.map(function(e){return jn(e,{isDeleted:!0})}));return Yo(c,l),{elements:c,appState:iu(iu({},t),r.appState),commitToHistory:!1,syncHistory:!0}}return{commitToHistory:!1}},cu=function(){function e(e,t,n,r){var o=this;this.actions={},this.renderAction=function(e,t){if(o.actions[e]&&"PanelComponent"in o.actions[e]){var n=o.actions[e],r=n.PanelComponent;return m().createElement(r,{elements:o.getElementsIncludingDeleted(),appState:o.getAppState(),updateData:function(e){o.updater(n.perform(o.getElementsIncludingDeleted(),o.getAppState(),e,o.app))},id:t})}return null},this.updater=function(t){if(!(t&&"then"in t))return e(t);t.then(function(t){return e(t)})},this.getAppState=t,this.getElementsIncludingDeleted=n,this.app=r}return e.prototype.registerAction=function(e){this.actions[e.name]=e},e.prototype.registerAll=function(e){var t=this;e.forEach(function(e){return t.registerAction(e)})},e.prototype.handleKeyDown=function(e){var t=this,n=Object.values(this.actions).sort(function(e,t){return(t.keyPriority||0)-(e.keyPriority||0)}).filter(function(n){return n.keyTest&&n.keyTest(e,t.getAppState(),t.getElementsIncludingDeleted())});return!(0===n.length||this.getAppState().viewModeEnabled&&!Object.values(g.EH).includes(n[0].name)||(e.preventDefault(),this.updater(n[0].perform(this.getElementsIncludingDeleted(),this.getAppState(),null,this.app)),0))},e.prototype.executeAction=function(e){this.updater(e.perform(this.getElementsIncludingDeleted(),this.getAppState(),null,this.app))},e}(),su=function(e){var t=Array.from(e.values());return{x:du(t,function(e){return e.x})/t.length,y:du(t,function(e){return e.y})/t.length}},uu=function(e){var t=e[0],n=e[1];return Math.hypot(t.x-n.x,t.y-n.y)},du=function(e,t){return e.reduce(function(e,n){return e+t(n)},0)};function pu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pu(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var hu,mu=function(e){return{selectedElementIds:e.selectedElementIds,viewBackgroundColor:e.viewBackgroundColor,editingLinearElement:e.editingLinearElement,editingGroupId:e.editingGroupId,name:e.name}},gu=function(){function e(){var e=this;this.elementCache=new Map,this.recording=!0,this.stateHistory=[],this.redoStack=[],this.lastEntry=null,this.generateEntry=function(t,n){return e.dehydrateHistoryEntry({appState:mu(t),elements:n.reduce(function(e,n){if(Ve(n)&&t.multiElement&&t.multiElement.id===n.id){if(t.multiElement&&t.multiElement.id===n.id&&n.points.length<2)return e;e.push(fu(fu({},n),{},{points:n.lastCommittedPoint!==n.points[n.points.length-1]?n.points.slice(0,-1):n.points}))}else e.push(n);return e},[])})}}return e.prototype.hydrateHistoryEntry=function(e){var t=e.appState,n=e.elements,r=this;return{appState:JSON.parse(t),elements:n.map(function(e){var t,n=null===(t=r.elementCache.get(e.id))||void 0===t?void 0:t.get(e.versionNonce);if(!n)throw new Error("Element not found: ".concat(e.id,":").concat(e.versionNonce));return n})}},e.prototype.dehydrateHistoryEntry=function(e){var t=e.appState,n=e.elements,r=this;return{appState:JSON.stringify(t),elements:n.map(function(e){r.elementCache.has(e.id)||r.elementCache.set(e.id,new Map);var t=r.elementCache.get(e.id);return t.has(e.versionNonce)||t.set(e.versionNonce,ar(e)),{id:e.id,versionNonce:e.versionNonce}})}},e.prototype.getSnapshotForTest=function(){var e=this;return{recording:this.recording,stateHistory:this.stateHistory.map(function(t){return e.hydrateHistoryEntry(t)}),redoStack:this.redoStack.map(function(t){return e.hydrateHistoryEntry(t)})}},e.prototype.clear=function(){this.stateHistory.length=0,this.redoStack.length=0,this.lastEntry=null,this.elementCache.clear()},e.prototype.shouldCreateEntry=function(e){var t,n=this.lastEntry;if(!n)return!0;if(e.elements.length!==n.elements.length)return!0;for(var r=e.elements.length-1;r>-1;r--){var o=e.elements[r],a=n.elements[r];if(!o||!a||o.id!==a.id||o.versionNonce!==a.versionNonce)return!0}for(t in e.appState){var i,l;if(("editingLinearElement"!==t||(null===(i=e.appState[t])||void 0===i?void 0:i.elementId)!==(null===(l=n.appState[t])||void 0===l?void 0:l.elementId))&&("selectedElementIds"!==t&&e.appState[t]!==n.appState[t]))return!0}return!1},e.prototype.pushEntry=function(e,t){var n=this.generateEntry(e,t),r=this.hydrateHistoryEntry(n);if(r){if(!this.shouldCreateEntry(r))return;this.stateHistory.push(n),this.lastEntry=r,this.clearRedoStack()}},e.prototype.clearRedoStack=function(){this.redoStack.splice(0,this.redoStack.length)},e.prototype.redoOnce=function(){if(0===this.redoStack.length)return null;var e=this.redoStack.pop();return void 0!==e?(this.stateHistory.push(e),this.hydrateHistoryEntry(e)):null},e.prototype.undoOnce=function(){if(1===this.stateHistory.length)return null;var e=this.stateHistory.pop(),t=this.stateHistory[this.stateHistory.length-1];return void 0!==e?(this.redoStack.push(e),this.hydrateHistoryEntry(t)):null},e.prototype.setCurrentState=function(e,t){this.lastEntry=this.hydrateHistoryEntry(this.generateEntry(e,t))},e.prototype.resumeRecording=function(){this.recording=!0},e.prototype.record=function(e,t){this.recording&&(this.pushEntry(e,t),this.recording=!1)},e}(),vu=[{icon:m().createElement("svg",{viewBox:"0 0 320 512",className:""},m().createElement("path",{d:"M302.189 329.126H196.105l55.831 135.993c3.889 9.428-.555 19.999-9.444 23.999l-49.165 21.427c-9.165 4-19.443-.571-23.332-9.714l-53.053-129.136-86.664 89.138C18.729 472.71 0 463.554 0 447.977V18.299C0 1.899 19.921-6.096 30.277 5.443l284.412 292.542c11.472 11.179 3.007 31.141-12.5 31.141z"})),value:"selection",key:["v","s"]},{icon:m().createElement("svg",{viewBox:"0 0 448 512"},m().createElement("path",{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"})),value:"rectangle",key:"r"},{icon:m().createElement("svg",{viewBox:"0 0 223.646 223.646"},m().createElement("path",{d:"M111.823 0L16.622 111.823 111.823 223.646 207.025 111.823z"})),value:"diamond",key:"d"},{icon:m().createElement("svg",{viewBox:"0 0 512 512"},m().createElement("path",{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"})),value:"ellipse",key:"e"},{icon:m().createElement("svg",{viewBox:"0 0 448 512",className:"rtl-mirror"},m().createElement("path",{d:"M313.941 216H12c-6.627 0-12 5.373-12 12v56c0 6.627 5.373 12 12 12h301.941v46.059c0 21.382 25.851 32.09 40.971 16.971l86.059-86.059c9.373-9.373 9.373-24.569 0-33.941l-86.059-86.059c-15.119-15.119-40.971-4.411-40.971 16.971V216z"})),value:"arrow",key:"a"},{icon:m().createElement("svg",{viewBox:"0 0 6 6"},m().createElement("line",{x1:"0",y1:"3",x2:"6",y2:"3",stroke:"currentColor",strokeLinecap:"round"})),value:"line",key:["p","l"]},{icon:m().createElement("svg",{viewBox:"0 0 512 512"},m().createElement("path",{fill:"currentColor",d:"M290.74 93.24l128.02 128.02-277.99 277.99-114.14 12.6C11.35 513.54-1.56 500.62.14 485.34l12.7-114.22 277.9-277.88zm207.2-19.06l-60.11-60.11c-18.75-18.75-49.16-18.75-67.91 0l-56.55 56.55 128.02 128.02 56.55-56.55c18.75-18.76 18.75-49.16 0-67.91z"})),value:"draw",key:"x"},{icon:m().createElement("svg",{viewBox:"0 0 448 512"},m().createElement("path",{d:"M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"})),value:"text",key:"t"}],bu=(a(4518),{cut:[$t("CtrlOrCmd+X")],copy:[$t("CtrlOrCmd+C")],paste:[$t("CtrlOrCmd+V")],copyStyles:[$t("CtrlOrCmd+Alt+C")],pasteStyles:[$t("CtrlOrCmd+Alt+V")],selectAll:[$t("CtrlOrCmd+A")],deleteSelectedElements:[$t("Del")],duplicateSelection:[$t("CtrlOrCmd+D"),$t("Alt+".concat(_("helpDialog.drag")))],sendBackward:[$t("CtrlOrCmd+[")],bringForward:[$t("CtrlOrCmd+]")],sendToBack:[$t(yt?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")],bringToFront:[$t(yt?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")],copyAsPng:[$t("Shift+Alt+C")],copyAsSvg:[],group:[$t("CtrlOrCmd+G")],ungroup:[$t("CtrlOrCmd+Shift+G")],gridMode:[$t("CtrlOrCmd+'")],zenMode:[$t("Alt+Z")],stats:[],addToLibrary:[],viewMode:[$t("Alt+R")]}),yu=function(e){var t,n=e.options,r=e.onCloseRequest,o=e.top,a=e.left,i=e.actionManager,l=e.appState,c=!(null===(t=document.querySelector(".excalidraw"))||void 0===t||!t.classList.contains("Appearance_dark"));return m().createElement("div",{className:We("excalidraw",{"Appearance_dark Appearance_dark-background-none":c})},m().createElement(tl,{onCloseRequest:r,top:o,left:a,fitInViewport:!0},m().createElement("ul",{className:"context-menu",onContextMenu:function(e){return e.preventDefault()}},n.map(function(e,t){var n;if("separator"===e)return m().createElement("hr",{key:t,className:"context-menu-option-separator"});var o,a=e.name,c=e.contextItemLabel?_(e.contextItemLabel):"";return m().createElement("li",{key:t,"data-testid":a,onClick:r},m().createElement("button",{className:We("context-menu-option",{dangerous:"deleteSelectedElements"===a,checkmark:null===(n=e.checked)||void 0===n?void 0:n.call(e,l)}),onClick:function(){return i.executeAction(e)}},m().createElement("div",{className:"context-menu-option__label"},c),m().createElement("kbd",{className:"context-menu-option__shortcut"},a&&(o=bu[a])&&o.length>0?o[0]:"")))}))))},wu=function(){if(hu)return hu;var e=document.createElement("div");return document.body.appendChild(e),hu=e},xu=function(){(0,bt.unmountComponentAtNode)(wu())};const Eu=function(e){var t=Array.of();e.options.forEach(function(e){e&&t.push(e)}),t.length&&(0,bt.render)(m().createElement(yu,{top:e.top,left:e.left,options:t,onCloseRequest:xu,actionManager:e.actionManager,appState:e.appState}),wu())};function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Su(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}a(1575);const Cu=function(e){var t=e.children,n=e.gap,r=e.align,o=e.justifyContent,a=e.className,i=e.style;return m().createElement("div",{className:We("Stack Stack_horizontal",a),style:Su({"--gap":n,alignItems:r,justifyContent:o},i)},t)},Ou=function(e){var t=e.children,n=e.gap,r=e.align,o=e.justifyContent,a=e.className;return m().createElement("div",{className:We("Stack Stack_vertical",a),style:{"--gap":n,justifyItems:r,justifyContent:o}},t)};var Mu=function(e){var t=e.appState,n=e.elements,r=e.renderAction,o=e.elementType,a=ba(pa(n),t),i=Boolean(t.editingElement),l=xl(),c="rtl"===document.documentElement.getAttribute("dir"),s=xa(o)||a.some(function(e){return xa(e.type)&&(n=5===(t=e.backgroundColor).length&&"0"===t.substr(4,1),r=9===t.length&&"00"===t.substr(7,2),!(n||r||t===vt.elementBackground[0]));var t,n,r}),u=xa(o)||a.some(function(e){return xa(e.type)});return m().createElement("div",{className:"panelColumn"},r("changeStrokeColor"),u&&r("changeBackgroundColor"),s&&r("changeFillStyle"),(Ea(o)||a.some(function(e){return Ea(e.type)}))&&m().createElement(m().Fragment,null,r("changeStrokeWidth"),r("changeStrokeStyle"),r("changeSloppiness")),(ka(o)||a.some(function(e){return ka(e.type)}))&&m().createElement(m().Fragment,null,r("changeSharpness")),(Sa(o)||a.some(function(e){return Sa(e.type)}))&&m().createElement(m().Fragment,null,r("changeFontSize"),r("changeFontFamily"),r("changeTextAlign")),(Ca(o)||a.some(function(e){return Ca(e.type)}))&&m().createElement(m().Fragment,null,r("changeArrowhead")),r("changeOpacity"),m().createElement("fieldset",null,m().createElement("legend",null,_("labels.layers")),m().createElement("div",{className:"buttonList"},r("sendToBack"),r("sendBackward"),r("bringToFront"),r("bringForward"))),a.length>1&&m().createElement("fieldset",null,m().createElement("legend",null,_("labels.align")),m().createElement("div",{className:"buttonList"},c?m().createElement(m().Fragment,null,r("alignRight"),r("alignHorizontallyCentered"),r("alignLeft")):m().createElement(m().Fragment,null,r("alignLeft"),r("alignHorizontallyCentered"),r("alignRight")),a.length>2&&r("distributeHorizontally"),m().createElement("div",{className:"iconRow"},r("alignTop"),r("alignVerticallyCentered"),r("alignBottom"),a.length>2&&r("distributeVertically")))),!l&&!i&&a.length>0&&m().createElement("fieldset",null,m().createElement("legend",null,_("labels.actions")),m().createElement("div",{className:"buttonList"},r("duplicateSelection"),r("deleteSelectedElements"),r("group"),r("ungroup"))))},Iu=function(e){var t=e.elementType,n=e.setAppState;return e.isLibraryOpen,m().createElement(m().Fragment,null,vu.map(function(e,r){var o=e.value,a=e.icon,i=e.key,l=_("toolBar.".concat(o)),c="string"==typeof i?i:i[0],s="".concat(Rt(c)," ").concat(_("helpDialog.or")," ").concat(r+1);return m().createElement(Pa,{className:"Shape",key:o,type:"radio",icon:a,checked:t===o,name:"editor-current-shape",title:"".concat(Rt(l),"  ").concat(s),keyBindingLabel:"".concat(r+1),"aria-label":Rt(l),"aria-keyshortcuts":s,"data-testid":o,onChange:function(){n({elementType:o,multiElement:null,selectedElementIds:{}}),qt(o),n({})}})}))},Pu=function(e){var t=e.renderAction,n=e.zoom;return m().createElement(Ou,{gap:1},m().createElement(Cu,{gap:1,align:"center"},t("zoomIn"),t("zoomOut"),t("resetZoom"),m().createElement("div",{style:{marginInlineStart:4}},(100*n.value).toFixed(0),"%")))},Tu=function(e){var t=e.appState,n=e.setAppState,r=e.actionManager;return m().createElement("div",{style:{display:"flex"}},r.renderAction("changeViewBackgroundColor"),m().createElement("div",{style:{marginInlineStart:"0.25rem"}},m().createElement(ls,{value:t.appearance,onChange:function(e){n({appearance:e})}})))};function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Au(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}a(3040),a(7428);var Lu=m().forwardRef(function(e,t){var n=e.children,r=e.padding,o=e.className,a=e.style;return m().createElement("div",{className:We("Island",o),style:_u({"--padding":r},a),ref:t},n)}),Du=(a(205),function(e){var t=ju();return t?(0,bt.createPortal)(m().createElement("div",{className:We("Modal",e.className),role:"dialog","aria-modal":"true",onKeyDown:function(t){t.key===Tt&&(t.nativeEvent.stopImmediatePropagation(),e.onCloseRequest())},"aria-labelledby":e.labelledBy},m().createElement("div",{className:"Modal__background",onClick:e.onCloseRequest}),m().createElement("div",{className:"Modal__content",style:{"--max-width":"".concat(e.maxWidth,"px")}},e.children)),t):null}),ju=function(){var e=(0,h.useState)(null),t=e[0],n=e[1];return(0,h.useLayoutEffect)(function(){var e,t=!(null===(e=document.querySelector(".excalidraw"))||void 0===e||!e.classList.contains("Appearance_dark")),r=document.createElement("div");return r.classList.add("excalidraw","excalidraw-modal-container"),t&&(r.classList.add("Appearance_dark"),r.classList.add("Appearance_dark-background-none")),document.body.appendChild(r),n(r),function(){document.body.removeChild(r)}},[]),t},zu=function(e){var t=function(){var e=(0,h.useState)(null),t=e[0],n=e[1];return[t,(0,h.useCallback)(function(e){return n(e)},[])]}(),n=t[0],r=t[1];(0,h.useEffect)(function(){if(n){var t=o(n);t.length>0&&!1!==e.autofocus&&(t[1]||t[0]).focus();var r=function(e){if(e.key===At){var t=o(n),r=document.activeElement,a=t.findIndex(function(e){return e===r});0===a&&e.shiftKey?(t[t.length-1].focus(),e.preventDefault()):a!==t.length-1||e.shiftKey||(t[0].focus(),e.preventDefault())}};return n.addEventListener("keydown",r),function(){return n.removeEventListener("keydown",r)}}},[n,e.autofocus]);var o=function(e){var t=e.querySelectorAll("button, a, input, select, textarea, div[tabindex]");return t?Array.from(t):[]};return m().createElement(Du,{className:We("Dialog",e.className),labelledBy:"dialog-title",maxWidth:e.small?550:800,onCloseRequest:e.onCloseRequest},m().createElement(Lu,{ref:r},m().createElement("h2",{id:"dialog-title",className:"Dialog__title"},m().createElement("span",{className:"Dialog__titleContent"},e.title),m().createElement("button",{className:"Modal__close",onClick:e.onCloseRequest,"aria-label":_("buttons.close")},xl()?li:ii)),m().createElement("div",{className:"Dialog__content"},e.children)))},Bu=function(e){var t=e.message,n=e.onClose,r=(0,h.useState)(!!t),o=r[0],a=r[1],i=m().useCallback(function(){a(!1),n&&n()},[n]);return m().createElement(m().Fragment,null,o&&m().createElement(zu,{small:!0,onCloseRequest:i,title:_("errorDialog.title")},m().createElement("div",null,t.split("\n").map(function(e){return m().createElement(m().Fragment,null,e,m().createElement("br",null))}))))},Hu=((a(8623),[1,2,3]).includes(devicePixelRatio)&&devicePixelRatio,document.createElement("canvas").getContext("2d"),function(e){var t=e.elements,n=(e.appState,e.exportPadding,e.actionManager,e.onExportToPng,e.onExportToSvg),r=(e.onExportToClipboard,e.onExportToBackend,(0,h.useState)(!1)),o=(r[0],r[1]),a=(0,h.useRef)(null);return m().useCallback(function(){var e;o(!1),null===(e=a.current)||void 0===e||e.focus()},[]),m().createElement(m().Fragment,null,m().createElement(Pa,{onClick:function(){n(t,1)},icon:Da,type:"button","aria-label":_("buttons.save"),showAriaLabel:xl(),title:_("buttons.save"),ref:a}))}),Nu=(a(4193),function(e){var t=e.children,n=e.side,r=e.className;return m().createElement("div",{className:We("FixedSideContainer","FixedSideContainer_side_".concat(n),r)},t)}),Ru=(a(9705),function(e){var t=function(e){var t=e.appState,n=e.elements,r=t.elementType,o=t.isResizing,a=t.isRotating,i=t.lastPointerDownWith,l=null!==t.multiElement;if("arrow"===r||"line"===r)return _(l?"hints.linearElementMulti":"hints.linearElement");if("draw"===r)return _("hints.freeDraw");if("text"===r)return _("hints.text");var c=va(n,t);if(o&&"mouse"===i&&1===c.length){var s=c[0];return Ve(s)&&2===s.points.length?_("hints.lockAngle"):_("hints.resize")}return a&&"mouse"===i?_("hints.rotate"):1===c.length&&Ve(c[0])?t.editingLinearElement?t.editingLinearElement.activePointIndex?_("hints.lineEditor_pointSelected"):_("hints.lineEditor_nothingSelected"):_("hints.lineEditor_info"):null}({appState:e.appState,elements:e.elements});return t?(t=$t(t),m().createElement("div",{className:"HintViewer"},m().createElement("span",null,t))):null}),Fu=(a(8465),a(8680),m().createElement("svg",{viewBox:"0 0 1792 1792"},m().createElement("path",{fill:"currentColor",d:"M1600 736v192q0 40-28 68t-68 28h-416v416q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-416h-416q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h416v-416q0-40 28-68t68-28h192q40 0 68 28t28 68v416h416q40 0 68 28t28 68z"}))),Wu=function(e){var t=e.elements,n=e.pendingElements,r=e.onRemoveFromLibrary,o=e.onClick,a=(0,h.useRef)(null);(0,h.useEffect)(function(){var e=t||n;if(e){for(var r=tc(e,{exportBackground:!1,viewBackgroundColor:ht.ix,shouldAddWatermark:!1}),o=0,i=a.current.children;o<i.length;o++){var l=i[o];"svg"===l.tagName&&a.current.removeChild(l)}a.current.appendChild(r);var c=a.current;return function(){c.removeChild(r)}}},[t,n]);var i=(0,h.useState)(!1),l=i[0],c=i[1],s=xl(),u=(l||s)&&n&&m().createElement("div",{className:"library-unit__adder"},Fu);return m().createElement("div",{className:We("library-unit",{"library-unit__active":t||n}),onMouseEnter:function(){return c(!0)},onMouseLeave:function(){return c(!1)}},m().createElement("div",{className:We("library-unit__dragger",{"library-unit__pulse":!!n}),ref:a,draggable:!!t,onClick:t||n?o:void 0,onDragStart:function(e){c(!1),e.dataTransfer.setData(g.LO.excalidrawlib,JSON.stringify(t))}}),u,t&&(l||s)&&m().createElement("button",{className:"library-unit__removeFromLibrary","aria-label":_("labels.removeFromLibrary"),onClick:r},ii))},Gu={CHECKED:m().createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},m().createElement("path",{d:"M640 768h512v-192q0-106-75-181t-181-75-181 75-75 181v192zm832 96v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h32v-192q0-184 132-316t316-132 316 132 132 316v192h32q40 0 68 28t28 68z"})),UNCHECKED:m().createElement("svg",{width:"1792",height:"1792",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",className:"unlocked-icon rtl-mirror"},m().createElement("path",{d:"M1728 576v256q0 26-19 45t-45 19h-64q-26 0-45-19t-19-45v-256q0-106-75-181t-181-75-181 75-75 181v192h96q40 0 68 28t28 68v576q0 40-28 68t-68 28h-960q-40 0-68-28t-28-68v-576q0-40 28-68t68-28h672v-192q0-185 131.5-316.5t316.5-131.5 316.5 131.5 131.5 316.5z"}))},Vu=function(e){return m().createElement("label",{className:We("ToolIcon ToolIcon__lock ToolIcon_type_floating zen-mode-visibility","ToolIcon_size_".concat(e.size||"m"),{"zen-mode-visibility--hidden":e.zenModeEnabled}),title:"".concat(e.title,"  Q")},m().createElement("input",{className:"ToolIcon_type_checkbox",type:"checkbox",name:e.name,id:e.id,onChange:e.onChange,checked:e.checked,"aria-label":e.title}),m().createElement("div",{className:"ToolIcon__icon"},e.checked?Gu.CHECKED:Gu.UNCHECKED))},Ku=function(e){var t=e.heading,n=e.children,r=Rn()(e,["heading","children"]),o=m().createElement("h2",{className:"visually-hidden",id:"".concat(t,"-title")},_("headings.".concat(t)));return m().createElement("section",cl()({},r,{"aria-labelledby":"".concat(t,"-title")}),"function"==typeof n?n(o):m().createElement(m().Fragment,null,o,n))},Yu=(a(3142),function(e){var t=e.children,n=e.className,r=e.mobile;return m().createElement("div",{className:We("UserList",n,{UserList_mobile:r})},t)});function Uu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var Xu=function(e){var t=e.appState,n=e.elements,r=(e.libraryMenu,e.actionManager),o=e.exportButton,a=e.setAppState,i=(e.onCollabButtonClick,e.onLockToggle),l=(e.canvas,e.isCollaborating,e.renderCustomFooter),c=e.viewModeEnabled;return m().createElement(m().Fragment,null,!c&&m().createElement(Nu,{side:"top",className:"App-top-bar"},m().createElement(Ku,{heading:"shapes"},function(e){return m().createElement(Ou,{gap:4,align:"center"},m().createElement(Cu,{gap:1},m().createElement(Lu,{padding:1},e,m().createElement(Cu,{gap:1},m().createElement(Iu,{elementType:t.elementType,setAppState:a,isLibraryOpen:t.isLibraryOpen}))),m().createElement(Vu,{checked:t.elementLocked,onChange:i,title:_("toolBar.lock")})))}),m().createElement(Ru,{appState:t,elements:n})),m().createElement("div",{className:"App-bottom-bar",style:{marginBottom:14,marginLeft:14,marginRight:14}},m().createElement(Lu,{padding:0},"canvas"===t.openMenu?m().createElement(Ku,{className:"App-mobile-menu",heading:"canvasActions"},m().createElement("div",{className:"panelColumn"},m().createElement(Ou,{gap:4},c?m().createElement(m().Fragment,null,o):m().createElement(m().Fragment,null,o,r.renderAction("clearCanvas"),m().createElement(Tu,{actionManager:r,appState:t,setAppState:a})),null==l?void 0:l(!0),t.collaborators.size>0&&m().createElement("fieldset",null,m().createElement("legend",null,_("labels.collaborators")),m().createElement(Yu,{mobile:!0},Array.from(t.collaborators).filter(function(e){e[0];var t=e[1];return 0!==Object.keys(t).length}).map(function(e){var t=e[0];return e[1],m().createElement(m().Fragment,{key:t},r.renderAction("goToCollaborator",t))})))))):"shape"===t.openMenu&&!c&&ia(t,n)?m().createElement(Ku,{className:"App-mobile-menu",heading:"selectedShapeActions"},m().createElement(Mu,{appState:t,elements:n,renderAction:r.renderAction,elementType:t.elementType})):null,m().createElement("footer",{className:"App-toolbar"},c?m().createElement("div",{className:"App-toolbar-content"},r.renderAction("toggleCanvasMenu")):m().createElement("div",{className:"App-toolbar-content"},r.renderAction("toggleCanvasMenu"),r.renderAction("toggleEditMenu"),r.renderAction("undo"),r.renderAction("redo"),r.renderAction(t.multiElement?"finalize":"duplicateSelection"),r.renderAction("deleteSelectedElements")),t.scrolledOutside&&!t.openMenu&&m().createElement("button",{className:"scroll-back-to-content",onClick:function(){a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uu(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uu(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},wa(n,t)))}},_("buttons.scrollBackToContent"))))))},Zu=(a(8416),function(e){var t=(0,h.useRef)(null),n=(0,h.useState)(null),r=n[0],o=n[1];return(0,h.useLayoutEffect)(function(){if(e.spreadsheet){var n=function(e,t,n,r){return"line"===e?function(e,t,n){for(var r=Math.max.apply(Math,e.values),o=An(),a=hc[Math.floor(Math.random()*hc.length)],i=0,l=[],c=0,s=e.values;c<s.length;c++){var u=44*i,d=-s[c]/r*256;l.push([u,d]),i++}var p=Math.max.apply(Math,l.map(function(e){return e[0]})),f=Math.max.apply(Math,l.map(function(e){return e[1]})),h=Math.min.apply(Math,l.map(function(e){return e[0]})),m=Math.min.apply(Math,l.map(function(e){return e[1]})),v=or(lc(lc({backgroundColor:a,groupIds:[o]},mc),{},{type:"line",x:t+12+16,y:n-12,startArrowhead:null,endArrowhead:null,height:f-m,width:p-h,strokeWidth:2,points:l})),b=e.values.map(function(e,i){var l=44*i+6,c=-e/r*256+6;return tr(lc(lc({backgroundColor:a,groupIds:[o]},mc),{},{fillStyle:"solid",strokeWidth:2,type:"ellipse",x:t+l+16,y:n+c-24,width:12,height:12}))}),y=e.values.map(function(e,i){var l=44*i+6,c=e/r*256+6+12;return or(lc(lc({backgroundColor:a,groupIds:[o]},mc),{},{type:"line",x:t+l+16+6,y:n-c,startArrowhead:null,endArrowhead:null,height:c,strokeStyle:"dotted",opacity:50,points:[[0,0],[0,c]]}))});return ac(ac(ac(ac([],vc(e,t,n,o,a,"production"===g.Vi.DEVELOPMENT)),[v]),y),b)}(t,n,r):function(e,t,n){var r=Math.max.apply(Math,e.values),o=An(),a=hc[Math.floor(Math.random()*hc.length)],i=e.values.map(function(e,i){var l=e/r*256;return tr(lc(lc({backgroundColor:a,groupIds:[o]},mc),{},{type:"rectangle",x:t+44*i+12,y:n-l-12,width:32,height:l}))});return ac(ac([],i),vc(e,t,n,o,a,"production"===g.Vi.DEVELOPMENT))}(t,n,r)}(e.chartType,e.spreadsheet,0,0);o(n);var r=tc(n,{exportBackground:!1,viewBackgroundColor:ht.ix,shouldAddWatermark:!1}),a=t.current;return a.appendChild(r),e.selected&&a.parentNode.focus(),function(){a.removeChild(r)}}},[e.spreadsheet,e.chartType,e.selected]),m().createElement("button",{className:"ChartPreview",onClick:function(){r&&e.onClick(e.chartType,r)}},m().createElement("div",{ref:t}))}),qu=function(e){var t=e.setAppState,n=e.appState,r=e.onClose,o=e.onInsertChart,a=m().useCallback(function(){r&&r()},[r]),i=function(e,n){o(n),Al("magic","chart",e),t({currentChartType:e,pasteDialog:{shown:!1,data:null}})};return m().createElement(zu,{small:!0,onCloseRequest:a,title:_("labels.pasteCharts"),className:"PasteChartDialog",autofocus:!1},m().createElement("div",{className:"container"},m().createElement(Zu,{chartType:"bar",spreadsheet:n.pasteDialog.data,selected:"bar"===n.currentChartType,onClick:i}),m().createElement(Zu,{chartType:"line",spreadsheet:n.pasteDialog.data,selected:"line"===n.currentChartType,onClick:i})))},Qu=(a(341),function(){return m().createElement("div",{className:"HelpDialog--header"},m().createElement("a",{className:"HelpDialog--btn",href:"https://github.com/excalidraw/excalidraw#documentation",target:"_blank",rel:"noopener noreferrer"},_("helpDialog.documentation")),m().createElement("a",{className:"HelpDialog--btn",href:"https://blog.excalidraw.com",target:"_blank",rel:"noopener noreferrer"},_("helpDialog.blog")),m().createElement("a",{className:"HelpDialog--btn",href:"https://github.com/excalidraw/excalidraw/issues",target:"_blank",rel:"noopener noreferrer"},_("helpDialog.github")))}),$u=function(e){return m().createElement(m().Fragment,null,m().createElement("h3",null,e.title),e.children)},Ju=function(e){return m().createElement("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between"}},e.children)},ed=function(e){return m().createElement("div",{style:{width:"49%"}},e.children)},td=function(e){return m().createElement("div",{className:"HelpDialog--island"},m().createElement("h3",{className:"HelpDialog--island-title"},e.caption),e.children)},nd=function(e){return m().createElement("div",{className:"HelpDialog--shortcut"},m().createElement("div",{style:{display:"flex",margin:"0",padding:"4px 8px",alignItems:"center"}},m().createElement("div",{style:{lineHeight:1.4}},e.label),m().createElement("div",{style:{display:"flex",flex:"0 0 auto",justifyContent:"flex-end",marginInlineStart:"auto",minWidth:"30%"}},e.shortcuts.map(function(t,n){return m().createElement(m().Fragment,{key:n},m().createElement(rd,null,t),e.isOr&&n!==e.shortcuts.length-1&&_("helpDialog.or"))}))))};nd.defaultProps={isOr:!0};var rd=function(e){return m().createElement("kbd",cl()({className:"HelpDialog--key"},e))},od=function(e){var t=e.onClose,n=m().useCallback(function(){t&&t()},[t]);return m().createElement(m().Fragment,null,m().createElement(zu,{onCloseRequest:n,title:_("helpDialog.title"),className:"HelpDialog"},m().createElement(Qu,null),m().createElement($u,{title:_("helpDialog.shortcuts")},m().createElement(Ju,null,m().createElement(ed,null,m().createElement(td,{caption:_("helpDialog.shapes")},m().createElement(nd,{label:_("toolBar.selection"),shortcuts:["V","1"]}),m().createElement(nd,{label:_("toolBar.rectangle"),shortcuts:["R","2"]}),m().createElement(nd,{label:_("toolBar.diamond"),shortcuts:["D","3"]}),m().createElement(nd,{label:_("toolBar.ellipse"),shortcuts:["E","4"]}),m().createElement(nd,{label:_("toolBar.arrow"),shortcuts:["A","5"]}),m().createElement(nd,{label:_("toolBar.line"),shortcuts:["P","6"]}),m().createElement(nd,{label:_("toolBar.draw"),shortcuts:["Shift+P","7"]}),m().createElement(nd,{label:_("toolBar.text"),shortcuts:["T","8"]}),m().createElement(nd,{label:_("helpDialog.textNewLine"),shortcuts:[$t("Enter"),$t("Shift+Enter")]}),m().createElement(nd,{label:_("helpDialog.textFinish"),shortcuts:[$t("Esc"),$t("CtrlOrCmd+Enter")]}),m().createElement(nd,{label:_("helpDialog.curvedArrow"),shortcuts:["A",_("helpDialog.click"),_("helpDialog.click"),_("helpDialog.click")],isOr:!1}),m().createElement(nd,{label:_("helpDialog.curvedLine"),shortcuts:["L",_("helpDialog.click"),_("helpDialog.click"),_("helpDialog.click")],isOr:!1}),m().createElement(nd,{label:_("toolBar.lock"),shortcuts:["Q"]}),m().createElement(nd,{label:_("helpDialog.preventBinding"),shortcuts:[$t("CtrlOrCmd")]})),m().createElement(td,{caption:_("helpDialog.view")},m().createElement(nd,{label:_("buttons.zoomIn"),shortcuts:[$t("CtrlOrCmd++")]}),m().createElement(nd,{label:_("buttons.zoomOut"),shortcuts:[$t("CtrlOrCmd+-")]}),m().createElement(nd,{label:_("buttons.resetZoom"),shortcuts:[$t("CtrlOrCmd+0")]}),m().createElement(nd,{label:_("helpDialog.zoomToFit"),shortcuts:["Shift+1"]}),m().createElement(nd,{label:_("helpDialog.zoomToSelection"),shortcuts:["Shift+2"]}),m().createElement(nd,{label:_("buttons.fullScreen"),shortcuts:["F"]}),m().createElement(nd,{label:_("buttons.zenMode"),shortcuts:[$t("Alt+Z")]}),m().createElement(nd,{label:_("labels.showGrid"),shortcuts:[$t("CtrlOrCmd+'")]}),m().createElement(nd,{label:_("labels.viewMode"),shortcuts:[$t("Alt+R")]}))),m().createElement(ed,null,m().createElement(td,{caption:_("helpDialog.editor")},m().createElement(nd,{label:_("labels.selectAll"),shortcuts:[$t("CtrlOrCmd+A")]}),m().createElement(nd,{label:_("labels.multiSelect"),shortcuts:[$t("Shift+".concat(_("helpDialog.click")))]}),m().createElement(nd,{label:_("labels.moveCanvas"),shortcuts:[$t("Space+".concat(_("helpDialog.drag"))),$t("Wheel+".concat(_("helpDialog.drag")))],isOr:!0}),m().createElement(nd,{label:_("labels.cut"),shortcuts:[$t("CtrlOrCmd+X")]}),m().createElement(nd,{label:_("labels.copy"),shortcuts:[$t("CtrlOrCmd+C")]}),m().createElement(nd,{label:_("labels.paste"),shortcuts:[$t("CtrlOrCmd+V")]}),m().createElement(nd,{label:_("labels.copyAsPng"),shortcuts:[$t("Shift+Alt+C")]}),m().createElement(nd,{label:_("labels.copyStyles"),shortcuts:[$t("CtrlOrCmd+Alt+C")]}),m().createElement(nd,{label:_("labels.pasteStyles"),shortcuts:[$t("CtrlOrCmd+Alt+V")]}),m().createElement(nd,{label:_("labels.delete"),shortcuts:[$t("Del")]}),m().createElement(nd,{label:_("labels.sendToBack"),shortcuts:[$t(yt?"CtrlOrCmd+Alt+[":"CtrlOrCmd+Shift+[")]}),m().createElement(nd,{label:_("labels.bringToFront"),shortcuts:[$t(yt?"CtrlOrCmd+Alt+]":"CtrlOrCmd+Shift+]")]}),m().createElement(nd,{label:_("labels.sendBackward"),shortcuts:[$t("CtrlOrCmd+[")]}),m().createElement(nd,{label:_("labels.bringForward"),shortcuts:[$t("CtrlOrCmd+]")]}),m().createElement(nd,{label:_("labels.alignTop"),shortcuts:[$t("CtrlOrCmd+Shift+Up")]}),m().createElement(nd,{label:_("labels.alignBottom"),shortcuts:[$t("CtrlOrCmd+Shift+Down")]}),m().createElement(nd,{label:_("labels.alignLeft"),shortcuts:[$t("CtrlOrCmd+Shift+Left")]}),m().createElement(nd,{label:_("labels.alignRight"),shortcuts:[$t("CtrlOrCmd+Shift+Right")]}),m().createElement(nd,{label:_("labels.duplicateSelection"),shortcuts:[$t("CtrlOrCmd+D"),$t("Alt+".concat(_("helpDialog.drag")))]}),m().createElement(nd,{label:_("buttons.undo"),shortcuts:[$t("CtrlOrCmd+Z")]}),m().createElement(nd,{label:_("buttons.redo"),shortcuts:wt?[$t("CtrlOrCmd+Y"),$t("CtrlOrCmd+Shift+Z")]:[$t("CtrlOrCmd+Shift+Z")]}),m().createElement(nd,{label:_("labels.group"),shortcuts:[$t("CtrlOrCmd+G")]}),m().createElement(nd,{label:_("labels.ungroup"),shortcuts:[$t("CtrlOrCmd+Shift+G")]})))))))},ad=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},id=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}var cd=function(e){var t=e.library,n=e.onRemoveFromLibrary,r=e.onAddToLibrary,o=e.onInsertShape,a=e.pendingElements,i=e.setAppState,l=e.setLibraryItems,c=xl(),s=t.length+(a.length>0?1:0),u=c?4:6,d=Math.max(1,Math.ceil(s/u)),p=[],f=!1;p.push(m().createElement("div",{className:"layer-ui__library-header"},m().createElement(Pa,{key:"import",type:"button",title:_("buttons.load"),"aria-label":_("buttons.load"),icon:za,onClick:function(){as().then(function(){i({isLibraryOpen:!1})}).catch(an).catch(function(e){i({errorMessage:e.message})})}}),m().createElement(Pa,{key:"export",type:"button",title:_("buttons.export"),"aria-label":_("buttons.export"),icon:Na,onClick:function(){os().catch(an).catch(function(e){i({errorMessage:e.message})})}}),m().createElement(Pa,{key:"reset",type:"button",title:_("buttons.resetLibrary"),"aria-label":_("buttons.resetLibrary"),icon:Ba,onClick:function(){window.confirm(_("alerts.resetLibrary"))&&(qc.resetLibrary(),l([]))}}),m().createElement("a",{href:"https://libraries.excalidraw.com",target:"_excalidraw_libraries"},_("labels.libraries"))));for(var h=0;h<d;h++){for(var g=u*h,v=[],b=0;b<u;b++){var y=a.length>0&&!f&&g+b>=t.length;f=f||y,v.push(m().createElement(Ou,{key:b},m().createElement(Wu,{elements:t[g+b],pendingElements:y?a:void 0,onRemoveFromLibrary:n.bind(null,g+b),onClick:y?r.bind(null,a):o.bind(null,t[g+b])})))}p.push(m().createElement(Cu,{align:"center",gap:1,key:h},v))}return m().createElement(Ou,{align:"start",gap:1,className:"layer-ui__library-items"},p)},sd=function(e){var t=e.onClickOutside,n=e.onInsertShape,r=e.pendingElements,o=e.onAddToLibrary,a=e.setAppState,i=(0,h.useRef)(null);!function(e,t){(0,h.useEffect)(function(){var n=function(n){e.current&&(n.target instanceof Element&&(e.current.contains(n.target)||!document.body.contains(n.target))||t(n))};return document.addEventListener("pointerdown",n,!1),function(){document.removeEventListener("pointerdown",n)}},[e,t])}(i,function(e){e.target.closest(".ToolIcon_type_button__library")||t(e)});var l=(0,h.useState)([]),c=l[0],s=l[1],u=(0,h.useState)("preloading"),d=u[0],p=u[1],f=(0,h.useRef)(null);(0,h.useEffect)(function(){return Promise.race([new Promise(function(e){f.current=setTimeout(function(){e("loading")},100)}),qc.loadLibrary().then(function(e){s(e),p("ready")})]).then(function(e){"loading"===e&&p("loading")}),function(){clearTimeout(f.current)}},[]);var g=(0,h.useCallback)(function(){var e=y()(function(e){var t,n;return ad(this,function(r){switch(r.label){case 0:return[4,qc.loadLibrary()];case 1:return t=r.sent(),n=t.filter(function(t,n){return n!==e}),qc.saveLibrary(n),s(n),[2]}})});return function(t){return e.apply(this,arguments)}}(),[]),v=(0,h.useCallback)(function(){var e=y()(function(e){var t,n;return ad(this,function(r){switch(r.label){case 0:return[4,qc.loadLibrary()];case 1:return t=r.sent(),n=id(id([],t),[e]),o(),qc.saveLibrary(n),s(n),[2]}})});return function(t){return e.apply(this,arguments)}}(),[o]);return"preloading"===d?null:m().createElement(Lu,{padding:1,ref:i,className:"layer-ui__library"},"loading"===d?m().createElement("div",{className:"layer-ui__library-message"},_("labels.libraryLoadingMessage")):m().createElement(cd,{library:c,onRemoveFromLibrary:g,onAddToLibrary:v,onInsertShape:n,pendingElements:r,setAppState:a,setLibraryItems:s}))};const ud=m().memo(function(e){var t,n=e.actionManager,r=e.appState,o=e.setAppState,a=e.canvas,i=e.elements,l=e.onCollabButtonClick,c=e.onLockToggle,s=e.onInsertElements,u=e.zenModeEnabled,d=e.showExitZenModeBtn,p=e.toggleZenMode,f=e.isCollaborating,v=e.onExportToBackend,b=e.renderCustomFooter,w=e.viewModeEnabled,x=e.onExport,E=xl(),k=function(){var e=function(e){return t=y()(function(t,n){var i;return ad(this,function(l){switch(l.label){case 0:return a?[4,is(e,t,r,a,{exportBackground:r.exportBackground,name:r.name,viewBackgroundColor:r.viewBackgroundColor,scale:n,shouldAddWatermark:r.shouldAddWatermark}).catch(an).catch(function(e){console.error(e),o({errorMessage:e.message})})]:[3,2];case 1:i=l.sent(),x&&i&&x(i),l.label=2;case 2:return[2]}})}),function(e,n){return t.apply(this,arguments)};var t};return m().createElement(Hu,{elements:i,appState:r,actionManager:n,onExportToPng:e("png"),onExportToSvg:e("svg"),onExportToClipboard:e("clipboard"),onExportToBackend:v?function(e){v&&v(e,r,a)}:void 0})},S=(0,h.useCallback)(function(e){o({isLibraryOpen:!1})},[o]),C=(0,h.useCallback)(function(){o({selectedElementIds:{},selectedGroupIds:{}})},[o]),O=r.isLibraryOpen?m().createElement(sd,{pendingElements:va(i,r),onClickOutside:S,onInsertShape:s,onAddToLibrary:C,setAppState:o}):null,M=m().createElement(m().Fragment,null,r.isLoading&&m().createElement(L,null),r.errorMessage&&m().createElement(Bu,{message:r.errorMessage,onClose:function(){return o({errorMessage:null})}}),r.showHelpDialog&&m().createElement(od,{onClose:function(){return o({showHelpDialog:!1})}}),r.pasteDialog.shown&&m().createElement(qu,{setAppState:o,appState:r,onInsertChart:s,onClose:function(){return o({pasteDialog:{shown:!1,data:null}})}}));return E?m().createElement(m().Fragment,null,M,m().createElement(Xu,{appState:r,elements:i,actionManager:n,libraryMenu:O,exportButton:k(),setAppState:o,onCollabButtonClick:l,onLockToggle:c,canvas:a,isCollaborating:f,renderCustomFooter:b,viewModeEnabled:w})):m().createElement("div",{className:We("layer-ui__wrapper",{"disable-pointerEvents":r.draggingElement||r.resizingElement||r.editingElement&&!Ge(r.editingElement)})},M,(t=ia(r,i),m().createElement(Nu,{side:"top"},m().createElement("div",{className:"App-menu App-menu_top"},m().createElement(Ou,{gap:4,className:We({"disable-pointerEvents":u})},w?m().createElement(Ku,{heading:"canvasActions",className:We("zen-mode-transition",{"transition-left":u})},m().createElement(Lu,{padding:2,style:{zIndex:1}},m().createElement(Ou,{gap:4},m().createElement(Cu,{gap:1,justifyContent:"space-between"},n.renderAction("saveScene"),n.renderAction("saveAsScene"),k())))):m().createElement(Ku,{heading:"canvasActions",className:We("zen-mode-transition",{"transition-left":u})},m().createElement(Lu,{padding:2,style:{zIndex:1}},m().createElement(Ou,{gap:4},m().createElement(Cu,{gap:1,justifyContent:"space-between"},k(),n.renderAction("clearCanvas")),m().createElement(Tu,{actionManager:n,appState:r,setAppState:o})))),t&&m().createElement(Ku,{heading:"selectedShapeActions",className:We("zen-mode-transition",{"transition-left":u})},m().createElement(Lu,{className:g.$C.SHAPE_ACTIONS_MENU,padding:2,style:{maxHeight:"".concat(r.height-200,"px")}},m().createElement(Mu,{appState:r,elements:i,renderAction:n.renderAction,elementType:r.elementType})))),!w&&m().createElement(Ku,{heading:"shapes"},function(e){return m().createElement(Ou,{gap:4,align:"start"},m().createElement(Cu,{gap:1},m().createElement(Lu,{padding:1,className:We({"zen-mode":u})},m().createElement(Ru,{appState:r,elements:i}),e,m().createElement(Cu,{gap:1},m().createElement(Iu,{elementType:r.elementType,setAppState:o,isLibraryOpen:r.isLibraryOpen}))),m().createElement(Vu,{zenModeEnabled:u,checked:r.elementLocked,onChange:c,title:_("toolBar.lock")})))}),m().createElement(Yu,{className:We("zen-mode-transition",{"transition-right":u})},r.collaborators.size>0&&Array.from(r.collaborators).filter(function(e){e[0];var t=e[1];return 0!==Object.keys(t).length}).map(function(e){var t=e[0],r=e[1];return m().createElement(Dl,{label:r.username||"Unknown user",key:t},n.renderAction("goToCollaborator",t))}))))),m().createElement("div",{className:We("App-menu App-menu_bottom zen-mode-transition",{"App-menu_bottom--transition-left":u})},m().createElement(Ou,{gap:2},m().createElement(Ku,{heading:"canvasActions"},m().createElement(Lu,{padding:1},m().createElement(Pu,{renderAction:n.renderAction,zoom:r.zoom}))))),m().createElement("footer",{role:"contentinfo",className:"layer-ui__wrapper__footer"},m().createElement("div",{className:We("zen-mode-transition",{"transition-right disable-pointerEvents":u})},null==b?void 0:b(!1),n.renderAction("toggleShortcuts")),m().createElement("button",{className:We("disable-zen-mode",{"disable-zen-mode--visible":d}),onClick:p},_("buttons.exitZenMode"))),r.scrolledOutside&&m().createElement("button",{className:"scroll-back-to-content",onClick:function(){o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},wa(i,r)))}},_("buttons.scrollBackToContent")))},function(e,t){var n=function(e){return e.suggestedBindings,e.startBoundElement,Rn()(e,["suggestedBindings","startBoundElement"])},r=n(e.appState),o=n(t.appState),a=Object.keys(r);return e.langCode===t.langCode&&e.elements===t.elements&&a.every(function(e){return r[e]===o[e]})});var dd=function(){try{var e=localStorage.getItem("excalidraw");return e?JSON.stringify(e).length:0}catch(e){return console.error(e),0}},pd=function(){try{var e=localStorage.getItem("excalidraw-state"),t=localStorage.getItem("excalidraw-collab"),n=localStorage.getItem(g.I.LOCAL_STORAGE_LIBRARY);return(e?JSON.stringify(e).length:0)+(t?JSON.stringify(t).length:0)+(n?JSON.stringify(n).length:0)+dd()}catch(e){return console.error(e),0}},fd=(a(7287),function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}),hd=Kt(function(e){e({scene:dd(),total:pd()})},500),md=function(e){var t=xl(),n=(0,h.useState)({scene:0,total:0}),r=n[0],o=n[1];(0,h.useEffect)(function(){hd(function(e){o(e)})}),(0,h.useEffect)(function(){return function(){return hd.cancel()}},[]);var a=dt(e.elements),i=ba(e.elements,e.appState),l=dt(i);if(t&&e.appState.openMenu)return null;var c,s,u=sn();return u!==g.eQ?(s=u.slice(0,16).replace("T"," "),c=u.slice(21)):s=_("stats.versionNotAvailable"),m().createElement("div",{className:"Stats"},m().createElement(Lu,{padding:2},m().createElement("div",{className:"close",onClick:e.onClose},ii),m().createElement("h3",null,_("stats.title")),m().createElement("table",null,m().createElement("tbody",null,m().createElement("tr",null,m().createElement("th",{colSpan:2},_("stats.scene"))),m().createElement("tr",null,m().createElement("td",null,_("stats.elements")),m().createElement("td",null,e.elements.length)),m().createElement("tr",null,m().createElement("td",null,_("stats.width")),m().createElement("td",null,Math.round(a[2])-Math.round(a[0]))),m().createElement("tr",null,m().createElement("td",null,_("stats.height")),m().createElement("td",null,Math.round(a[3])-Math.round(a[1]))),m().createElement("tr",null,m().createElement("th",{colSpan:2},_("stats.storage"))),m().createElement("tr",null,m().createElement("td",null,_("stats.scene")),m().createElement("td",null,cn(r.scene,1))),m().createElement("tr",null,m().createElement("td",null,_("stats.total")),m().createElement("td",null,cn(r.total,1))),1===i.length&&m().createElement("tr",null,m().createElement("th",{colSpan:2},_("stats.element"))),i.length>1&&m().createElement(m().Fragment,null,m().createElement("tr",null,m().createElement("th",{colSpan:2},_("stats.selected"))),m().createElement("tr",null,m().createElement("td",null,_("stats.elements")),m().createElement("td",null,i.length))),i.length>0&&m().createElement(m().Fragment,null,m().createElement("tr",null,m().createElement("td",null,"x"),m().createElement("td",null,Math.round(1===i.length?i[0].x:l[0]))),m().createElement("tr",null,m().createElement("td",null,"y"),m().createElement("td",null,Math.round(1===i.length?i[0].y:l[1]))),m().createElement("tr",null,m().createElement("td",null,_("stats.width")),m().createElement("td",null,Math.round(1===i.length?i[0].width:l[2]-l[0]))),m().createElement("tr",null,m().createElement("td",null,_("stats.height")),m().createElement("td",null,Math.round(1===i.length?i[0].height:l[3]-l[1])))),1===i.length&&m().createElement("tr",null,m().createElement("td",null,_("stats.angle")),m().createElement("td",null,"".concat(Math.round(180*i[0].angle/Math.PI),""))),m().createElement("tr",null,m().createElement("th",{colSpan:2},_("stats.version"))),m().createElement("tr",null,m().createElement("td",{colSpan:2,style:{textAlign:"center",cursor:"pointer"},onClick:y()(function(){return fd(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Yc(sn())];case 1:return t.sent(),e.setAppState({toastMessage:_("toast.copyToClipboard")}),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})}),title:_("stats.versionCopy")},s,m().createElement("br",null),c))))))},gd=(a(5849),function(e){var t=e.message,n=e.clearToast,r=(0,h.useRef)(0),o=(0,h.useCallback)(function(){return r.current=window.setTimeout(function(){return n()},g.Lg)},[n]);return(0,h.useEffect)(function(){return o(),function(){return clearTimeout(r.current)}},[o,t]),m().createElement("div",{className:"Toast",onMouseEnter:function(){return clearTimeout(null==r?void 0:r.current)},onMouseLeave:o},m().createElement("p",{className:"Toast__message"},t))});function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var yd,wd=Ii({name:"viewMode",perform:function(e,t){return Al("view","mode","view"),{appState:bd(bd({},t),{},{viewModeEnabled:!this.checked(t),selectedElementIds:{}}),commitToHistory:!1}},checked:function(e){return e.viewModeEnabled},contextItemLabel:"labels.viewMode",keyTest:function(e){return!e[It]&&e.altKey&&"KeyR"===e.code}}),xd=(yd=function(e,t){return(yd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}yd(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ed=function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},kd=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e};function Sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sd(Object(n),!0).forEach(function(t){B()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sd(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Od=new gu,Md=!1,Id=0,Pd=0,Td=0,Ad=!1,_d=!1,Ld=!1,Dd={horizontal:null,vertical:null},jd=0,zd=!1,Bd=null,Hd={pointers:new Map,lastCenter:null,initialDistance:null,initialScale:null},Nd=function(e){function t(t){var n,r=this;r=e.call(this,t)||this,n=r,Rd.call(r);var o,a,i,l,c=un(),s=t.width,u=void 0===s?window.innerWidth:s,d=t.height,p=void 0===d?window.innerHeight:d,f=t.offsetLeft,h=t.offsetTop,v=t.excalidrawRef,b=t.viewModeEnabled,y=void 0!==b&&b,w=t.zenModeEnabled,x=void 0!==w&&w,E=t.gridModeEnabled,k=void 0!==E&&E;if(r.state=Cd(Cd(Cd({},c),{},{isLoading:!0,width:u,height:p},r.getCanvasOffsets({offsetLeft:f,offsetTop:h})),{},{viewModeEnabled:y,zenModeEnabled:x,gridSize:k?g.k:null}),v){var S,C="current"in v&&(null===(S=v.current)||void 0===S?void 0:S.readyPromise)||((i=new Promise(function(e,t){o=e,a=t})).resolve=o,i.reject=a,i),O={ready:!0,readyPromise:C,updateScene:r.updateScene,resetScene:r.resetScene,getSceneElementsIncludingDeleted:r.getSceneElementsIncludingDeleted,history:{clear:r.resetHistory},setScrollToCenter:r.setScrollToCenter,getSceneElements:r.getSceneElements,getAppState:function(){return n.state}};"function"==typeof v?v(O):v.current=O,C.resolve(O)}return r.scene=new In,r.actionManager=new cu(r.syncActionResult,function(){return n.state},function(){return n.scene.getElementsIncludingDeleted()},r),r.actionManager.registerAll(Mi),r.actionManager.registerAction((l=Od,{name:"undo",perform:function(e,t){return lu(e,t,function(){return l.undoOnce()})},keyTest:function(e){return e[It]&&e.key.toLowerCase()===Lt&&!e.shiftKey},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Va,"aria-label":_("buttons.undo"),onClick:t})},commitToHistory:function(){return!1}})),r.actionManager.registerAction(function(e){return{name:"redo",perform:function(t,n){return lu(t,n,function(){return e.redoOnce()})},keyTest:function(e){return e[It]&&e.shiftKey&&e.key.toLowerCase()===Lt||wt&&e.ctrlKey&&!e.shiftKey&&e.key===_t},PanelComponent:function(e){var t=e.updateData;return m().createElement(Pa,{type:"button",icon:Ka,"aria-label":_("buttons.redo"),onClick:t})},commitToHistory:function(){return!1}}}(Od)),r}return xd(t,e),t.prototype.renderCanvas=function(){var e=window.devicePixelRatio,t=this.state,n=t.width,r=t.height,o=n*e,a=r*e;return t.viewModeEnabled?m().createElement("canvas",{id:"canvas",style:{width:n,height:r,cursor:"grabbing"},width:o,height:a,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.removePointer,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onPointerDown:this.handleCanvasPointerDown},_("labels.drawingCanvas")):m().createElement("canvas",{id:"canvas",style:{width:n,height:r},width:o,height:a,ref:this.handleCanvasRef,onContextMenu:this.handleCanvasContextMenu,onPointerDown:this.handleCanvasPointerDown,onDoubleClick:this.handleCanvasDoubleClick,onPointerMove:this.handleCanvasPointerMove,onPointerUp:this.removePointer,onPointerCancel:this.removePointer,onTouchMove:this.handleTouchMove,onDrop:this.handleCanvasOnDrop},_("labels.drawingCanvas"))},t.prototype.render=function(){var e,t=this,n=this.state,r=n.zenModeEnabled,o=n.width,a=n.height,i=n.offsetTop,l=n.offsetLeft,c=n.viewModeEnabled,s=this.props,u=s.onCollabButtonClick,d=s.onExportToBackend,p=s.renderFooter,f=s.onExport,h=o/2,g=a/2;return m().createElement("div",{className:We("excalidraw",{"excalidraw--view-mode":c}),ref:this.excalidrawContainerRef,style:{width:o,height:a,top:i,left:l}},m().createElement(ud,{canvas:this.canvas,appState:this.state,setAppState:this.setAppState,actionManager:this.actionManager,elements:this.scene.getElements(),onCollabButtonClick:u,onLockToggle:this.toggleLock,onInsertElements:function(e){return t.addElementsFromPasteOrLibrary(e,h,g)},zenModeEnabled:r,toggleZenMode:this.toggleZenMode,langCode:T().code,isCollaborating:this.props.isCollaborating||!1,onExportToBackend:d,renderCustomFooter:p,viewModeEnabled:c,showExitZenModeBtn:void 0===(null===(e=this.props)||void 0===e?void 0:e.zenModeEnabled)&&r,onExport:f}),m().createElement("div",{className:"excalidraw-textEditorContainer"}),this.state.showStats&&m().createElement(md,{appState:this.state,setAppState:this.setAppState,elements:this.scene.getElements(),onClose:this.toggleStats}),null!==this.state.toastMessage&&m().createElement(gd,{message:this.state.toastMessage,clearToast:this.clearToast}),m().createElement("main",null,this.renderCanvas()))},t.prototype.componentDidMount=function(){var e=this;return y()(function(){return Ed(this,function(t){return"production"!==g.Vi.TEST&&"production"!==g.Vi.DEVELOPMENT||(e.setState.bind(e),Object.defineProperties(window.h,{state:{configurable:!0,get:function(){return e.state}},setState:{configurable:!0,value:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.setState.apply(e,t)}},app:{configurable:!0,value:e}})),e.scene.addCallback(e.onSceneUpdated),e.addEventListeners(),"number"==typeof e.props.offsetLeft&&"number"==typeof e.props.offsetTop?e.initializeScene():e.setState(e.getCanvasOffsets(e.props),function(){e.initializeScene()}),[2]})})()},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.removeEventListeners(),this.scene.destroy(),clearTimeout(jd),jd=0},t.prototype.removeEventListeners=function(){document.removeEventListener(g.Ks.COPY,this.onCopy),document.removeEventListener(g.Ks.PASTE,this.pasteFromClipboard),document.removeEventListener(g.Ks.CUT,this.onCut),document.removeEventListener(g.Ks.KEYDOWN,this.onKeyDown,!1),document.removeEventListener(g.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition,!1),document.removeEventListener(g.Ks.KEYUP,this.onKeyUp),window.removeEventListener(g.Ks.RESIZE,this.onResize,!1),window.removeEventListener(g.Ks.UNLOAD,this.onUnload,!1),window.removeEventListener(g.Ks.BLUR,this.onBlur,!1),window.removeEventListener(g.Ks.DRAG_OVER,this.disableEvent,!1),window.removeEventListener(g.Ks.DROP,this.disableEvent,!1),document.removeEventListener(g.Ks.GESTURE_START,this.onGestureStart,!1),document.removeEventListener(g.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.removeEventListener(g.Ks.GESTURE_END,this.onGestureEnd,!1)},t.prototype.addEventListeners=function(){var e,t;this.removeEventListeners(),document.addEventListener(g.Ks.COPY,this.onCopy),document.addEventListener(g.Ks.KEYDOWN,this.onKeyDown,!1),document.addEventListener(g.Ks.KEYUP,this.onKeyUp,{passive:!0}),document.addEventListener(g.Ks.MOUSE_MOVE,this.updateCurrentCursorPosition),null===(e=document.fonts)||void 0===e||null===(t=e.addEventListener)||void 0===t||t.call(e,"loadingdone",this.onFontLoaded),document.addEventListener(g.Ks.GESTURE_START,this.onGestureStart,!1),document.addEventListener(g.Ks.GESTURE_CHANGE,this.onGestureChange,!1),document.addEventListener(g.Ks.GESTURE_END,this.onGestureEnd,!1),this.state.viewModeEnabled||(document.addEventListener(g.Ks.PASTE,this.pasteFromClipboard),document.addEventListener(g.Ks.CUT,this.onCut),document.addEventListener(g.Ks.SCROLL,this.onScroll),window.addEventListener(g.Ks.RESIZE,this.onResize,!1),window.addEventListener(g.Ks.UNLOAD,this.onUnload,!1),window.addEventListener(g.Ks.BLUR,this.onBlur,!1),window.addEventListener(g.Ks.DRAG_OVER,this.disableEvent,!1),window.addEventListener(g.Ks.DROP,this.disableEvent,!1))},t.prototype.componentDidUpdate=function(e,t){var n,r,o,a,i=this;e.langCode!==this.props.langCode&&this.updateLanguage(),(e.width!==this.props.width||e.height!==this.props.height||"number"==typeof this.props.offsetLeft&&e.offsetLeft!==this.props.offsetLeft||"number"==typeof this.props.offsetTop&&e.offsetTop!==this.props.offsetTop)&&this.setState(Cd({width:null!==(o=this.props.width)&&void 0!==o?o:window.innerWidth,height:null!==(a=this.props.height)&&void 0!==a?a:window.innerHeight},this.getCanvasOffsets(this.props))),e.viewModeEnabled!==this.props.viewModeEnabled&&this.setState({viewModeEnabled:!!this.props.viewModeEnabled},this.addEventListeners),t.viewModeEnabled!==this.state.viewModeEnabled&&this.addEventListeners(),e.zenModeEnabled!==this.props.zenModeEnabled&&this.setState({zenModeEnabled:!!this.props.zenModeEnabled}),e.gridModeEnabled!==this.props.gridModeEnabled&&this.setState({gridSize:this.props.gridModeEnabled?g.k:null}),null===(n=document.querySelector(".excalidraw"))||void 0===n||n.classList.toggle("Appearance_dark","dark"===this.state.appearance),this.state.editingLinearElement&&!this.state.selectedElementIds[this.state.editingLinearElement.elementId]&&setTimeout(function(){i.actionManager.executeAction(Tl)});var l=t.multiElement;t.elementType!==this.state.elementType&&null!=l&&Eo(this.state)&&Ye(l)&&Mo(l,this.state,this.scene,on(yo.getPointAtIndexGlobalCoordinates(l,-1)));var c={},s={},u={},d={},p={};this.state.collaborators.forEach(function(e,t){if(e.selectedElementIds)for(var n=0,r=Object.keys(e.selectedElementIds);n<r.length;n++){var o=r[n];o in u||(u[o]=[]),u[o].push(t)}e.pointer&&(e.username&&(d[t]=e.username),e.userState&&(p[t]=e.userState),s[t]=en({sceneX:e.pointer.x,sceneY:e.pointer.y},i.state),c[t]=e.button)});var f=this.scene.getElements(),h=Kl(f.filter(function(e){return!i.state.editingElement||"text"!==i.state.editingElement.type||e.id!==i.state.editingElement.id}),this.state,this.state.selectionElement,window.devicePixelRatio,this.rc,this.canvas,{scrollX:this.state.scrollX,scrollY:this.state.scrollY,viewBackgroundColor:this.state.viewBackgroundColor,zoom:this.state.zoom,remotePointerViewportCoords:s,remotePointerButton:c,remoteSelectedElementIds:u,remotePointerUsernames:d,remotePointerUserStates:p,shouldCacheIgnoreZoom:this.state.shouldCacheIgnoreZoom},{renderOptimizations:!0,renderScrollbars:!wl()}),m=h.atLeastOneVisibleElement,v=h.scrollBars;v&&(Dd=v);var b,y,w="text"!==(null===(r=this.state.editingElement)||void 0===r?void 0:r.type)&&!m&&f.length>0;this.state.scrolledOutside!==w&&this.setState({scrolledOutside:w}),Od.record(this.state,this.scene.getElementsIncludingDeleted()),this.state.isLoading||null===(b=(y=this.props).onChange)||void 0===b||b.call(y,this.scene.getElementsIncludingDeleted(),this.state)},t.resetTapTwice=function(){Md=!1},t.prototype.addTextFromPaste=function(e){var t,n=Jt({clientX:Pd,clientY:Td},this.state),r=n.x,o=n.y,a=rr({x:r,y:o,strokeColor:this.state.currentItemStrokeColor,backgroundColor:this.state.currentItemBackgroundColor,fillStyle:this.state.currentItemFillStyle,strokeWidth:this.state.currentItemStrokeWidth,strokeStyle:this.state.currentItemStrokeStyle,roughness:this.state.currentItemRoughness,opacity:this.state.currentItemOpacity,strokeSharpness:this.state.currentItemStrokeSharpness,text:e,fontSize:this.state.currentItemFontSize,fontFamily:this.state.currentItemFontFamily,textAlign:this.state.currentItemTextAlign,verticalAlign:g.hs});this.scene.replaceAllElements(kd(kd([],this.scene.getElementsIncludingDeleted()),[a])),this.setState({selectedElementIds:(t={},t[a.id]=!0,t)}),Od.resumeRecording()},t.prototype.selectShapeTool=function(e){var t;Ad||qt(e),(t=document.activeElement)instanceof HTMLElement&&t.className.includes("ToolIcon")&&document.activeElement.blur(),Ke(e)||this.setState({suggestedBindings:[]}),"selection"!==e?this.setState({elementType:e,selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}):this.setState({elementType:e})},t.prototype.handleTextWysiwyg=function(e,t){var n=t.isExistingElement,r=void 0!==n&&n,o=this,a=function(t,n){void 0===n&&(n=!1),o.scene.replaceAllElements(kd([],o.scene.getElementsIncludingDeleted().map(function(r){return r.id===e.id&&Ge(r)?function(e,t){var n=t.text,r=t.isDeleted;return jn(e,Jn({text:n,isDeleted:null!=r?r:e.isDeleted},function(e,t){var n,r,o,a=Vt(t,Gt(e)),i=a.width,l=a.height,c=a.baseline,s=e.textAlign,u=e.verticalAlign;if("center"===s&&"middle"===u){var d=Vt(e.text,Gt(e)),p=nr(e,{width:i-d.width,height:l-d.height});r=e.x-p.x,o=e.y-p.y}else{var f=it(e),h=f[0],m=f[1],g=f[2],v=f[3],b=pt(e,i,l),y=(h-b[0])/2,w=(m-b[1])/2,x=(g-b[2])/2,E=(v-b[3])/2;r=(n=Qe({s:!0,e:"center"===s||"left"===s,w:"center"===s||"right"===s},e.x,e.y,e.angle,y,w,x,E))[0],o=n[1]}return{width:i,height:l,x:Number.isFinite(r)?r:e.x,y:Number.isFinite(o)?o:e.y,baseline:c}}(e,n)))}(r,{text:t,isDeleted:n}):r})))};!function(e){var t=e.id,n=e.appState,r=e.onChange,o=e.onSubmit,a=e.getViewportCoords,i=e.element,l=e.canvas,c=function(){var e,r=null===(e=In.getScene(i))||void 0===e?void 0:e.getElement(t);if(r&&Ge(r)){var o=a(r.x,r.y),l=o[0],c=o[1],u=r.textAlign,d=r.angle;s.value=r.text;var p=r.text.replace(/\r\n?/g,"\n").split("\n"),f=r.height/p.length;Object.assign(s.style,{font:Gt(r),lineHeight:"".concat(f,"px"),width:"".concat(r.width,"px"),height:"".concat(r.height,"px"),left:"".concat(l,"px"),top:"".concat(c,"px"),transform:oa(r.width,r.height,d,n),textAlign:u,color:r.strokeColor,opacity:r.opacity/100,filter:"var(--appearance-filter)"})}},s=document.createElement("textarea");s.dir="auto",s.tabIndex=0,s.dataset.type="wysiwyg",s.wrap="off",Object.assign(s.style,{position:"fixed",display:"inline-block",minHeight:"1em",backfaceVisibility:"hidden",margin:0,padding:0,border:0,outline:0,resize:"none",background:"transparent",overflow:"hidden",whiteSpace:"pre",zIndex:"var(--zIndex-wysiwyg)"}),c(),r&&(s.oninput=function(){r(ra(s.value))}),s.onkeydown=function(e){if(e.key===Tt)e.preventDefault(),d();else if(e.key===Pt&&e[It]){if(e.preventDefault(),e.isComposing||229===e.keyCode)return;d()}else e.key!==Pt||e.altKey||e.stopPropagation()};var u=function(e){e.preventDefault(),e.stopPropagation()},d=function(){o(ra(s.value)),p()},p=function(){v||(v=!0,s.onblur=null,s.oninput=null,s.onkeydown=null,b&&b.disconnect(),window.removeEventListener("resize",c),window.removeEventListener("wheel",u,!0),window.removeEventListener("pointerdown",h),window.removeEventListener("pointerup",f),window.removeEventListener("blur",d),m(),s.remove())},f=function e(){window.removeEventListener("pointerup",e),setTimeout(function(){s.onblur=d,s.focus()})},h=function(e){e.target instanceof HTMLElement&&e.target.closest(".".concat(g.$C.SHAPE_ACTIONS_MENU))&&!Ft(e.target)&&(s.onblur=null,window.addEventListener("pointerup",f),window.addEventListener("blur",d))},m=In.getScene(i).addCallback(function(){c(),s.focus()}),v=!1;s.onblur=d;var b=null;l&&"ResizeObserver"in window?(b=new window.ResizeObserver(function(){c()})).observe(l):window.addEventListener("resize",c),window.addEventListener("pointerdown",h),window.addEventListener("wheel",u,{passive:!1,capture:!0}),document.querySelector(".excalidraw-textEditorContainer").appendChild(s),s.focus(),s.select()}({id:e.id,appState:this.state,canvas:this.canvas,getViewportCoords:function(e,t){var n=en({sceneX:e,sceneY:t},o.state);return[n.x,n.y]},onChange:ln(function(t){a(t),fa(e)&&jo(e)}),onSubmit:ln(function(t){var n=!t.trim();a(t,n),n?Yo(o.scene.getElements(),[e]):o.setState(function(t){var n;return{selectedElementIds:Cd(Cd({},t.selectedElementIds),{},(n={},n[e.id]=!0,n))}}),n&&!r||Od.resumeRecording(),o.setState({draggingElement:null,editingElement:null}),o.state.elementLocked&&qt(o.state.elementType)}),element:e}),this.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}),a(e.text)},t.prototype.getTextElementAtPosition=function(e,t){var n=this.getElementAtPosition(e,t);return n&&Ge(n)&&!n.isDeleted?n:null},t.prototype.getElementAtPosition=function(e,t){var n=this.getElementsAtPosition(e,t);if(n.length>1){var r=n[n.length-1];return Br(r,this.state,e,t)?n[n.length-2]:r}return 1===n.length?n[0]:null},t.prototype.getElementsAtPosition=function(e,t){var n,r,o=this;return n=this.scene.getElements(),r=function(n){return function(e,t,n,r){var o=10/t.zoom.value,a=[n,r];return function(e,t){return e.selectedElementIds[t.id]}(t,e)?Nr(e,a,o):Hr(e,t,a)}(n,o.state,e,t)},n.filter(function(e){return!e.isDeleted&&r(e)})},t.prototype.maybeCleanupAfterMissingPointerUp=function(e){null!==Bd&&Bd(e)},t.prototype.updateGestureOnPointerDown=function(e){Hd.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY}),2===Hd.pointers.size&&(Hd.lastCenter=su(Hd.pointers),Hd.initialScale=this.state.zoom.value,Hd.initialDistance=uu(Array.from(Hd.pointers.values())))},t.prototype.initialPointerDownState=function(e){var t=Jt(e,this.state),n=va(this.scene.getElements(),this.state),r=dt(n),o=r[0],a=r[1],i=r[2],l=r[3];return{origin:t,originInGrid:on(ot(t.x,t.y,this.state.gridSize)),scrollbars:ma(Dd,e.clientX-this.state.offsetLeft,e.clientY-this.state.offsetTop),lastCoords:Cd({},t),originalElements:this.scene.getElements().reduce(function(e,t){return e.set(t.id,ar(t)),e},new Map),resize:{handleType:!1,isResizing:!1,offset:{x:0,y:0},arrowDirection:"origin",center:{x:(i+o)/2,y:(l+a)/2}},hit:{element:null,allHitElements:[],wasAddedToSelection:!1,hasBeenDuplicated:!1,hasHitCommonBoundingBoxOfSelectedElements:this.isHittingCommonBoundingBoxOfSelectedElements(t,n)},drag:{hasOccurred:!1,offset:null},eventListeners:{onMove:null,onUp:null,onKeyUp:null,onKeyDown:null}}},t.prototype.handleDraggingScrollBar=function(e,t){var n=this;if(!t.scrollbars.isOverEither||this.state.multiElement)return!1;Ld=!0,t.lastCoords.x=e.clientX,t.lastCoords.y=e.clientY;var r=ln(function(e){e.target instanceof HTMLElement&&n.handlePointerMoveOverScrollbars(e,t)}),o=ln(function(){Ld=!1,qt(n.state.elementType),Bd=null,n.setState({cursorButton:"up"}),n.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener(g.Ks.POINTER_MOVE,r),window.removeEventListener(g.Ks.POINTER_UP,o)});return Bd=o,window.addEventListener(g.Ks.POINTER_MOVE,r),window.addEventListener(g.Ks.POINTER_UP,o),!0},t.prototype.isASelectedElement=function(e){return null!=e&&this.state.selectedElementIds[e.id]},t.prototype.isHittingCommonBoundingBoxOfSelectedElements=function(e,t){if(t.length<2)return!1;var n=10/this.state.zoom.value,r=dt(t),o=r[0],a=r[1],i=r[2],l=r[3];return e.x>o-n&&e.x<i+n&&e.y>a-n&&e.y<l+n},t.prototype.onKeyDownFromPointerDownHandler=function(e){var t=this;return ln(function(n){t.maybeHandleResize(e,n)||t.maybeDragNewGenericElement(e,n)})},t.prototype.onKeyUpFromPointerDownHandler=function(e){var t=this;return ln(function(n){"Alt"===n.key&&n.preventDefault(),t.maybeHandleResize(e,n)||t.maybeDragNewGenericElement(e,n)})},t.prototype.onPointerMoveFromPointerDownHandler=function(e){var t=this;return ln(function(n){var r;if(null===e.drag.offset&&(e.drag.offset=on(function(e,t,n){var r=dt(e);return[t-r[0],n-r[1]]}(va(t.scene.getElements(),t.state),e.origin.x,e.origin.y))),n.target instanceof HTMLElement&&!t.handlePointerMoveOverScrollbars(n,e)){var o=Jt(n,t.state),a=ot(o.x,o.y,t.state.gridSize),i=a[0],l=a[1];if(e.drag.hasOccurred||"arrow"!==t.state.elementType&&"line"!==t.state.elementType||!($e(o.x,o.y,e.origin.x,e.origin.y)<g.f)){if(e.resize.isResizing&&(e.lastCoords.x=o.x,e.lastCoords.y=o.y,t.maybeHandleResize(e,n)))return!0;if(t.state.editingLinearElement&&yo.handlePointDragging(t.state,function(e){return t.setState(e)},o.x,o.y,function(e,n){t.maybeSuggestBindingForLinearElementAtCursor(e,n,o)}))return e.lastCoords.x=o.x,void(e.lastCoords.y=o.y);if(e.hit.allHitElements.some(function(e){return t.isASelectedElement(e)})||e.hit.hasHitCommonBoundingBoxOfSelectedElements){e.drag.hasOccurred=!0;var c=va(t.scene.getElements(),t.state);if(c.length>0){var s=ot(o.x-e.drag.offset.x,o.y-e.drag.offset.y,t.state.gridSize),u=s[0],d=s[1],p=[Math.abs(o.x-e.origin.x),Math.abs(o.y-e.origin.y)],f=p[0],h=p[1],m=n.shiftKey;if(function(e,t,n,r,o,a,i,l){void 0===a&&(a=!1),void 0===i&&(i=0),void 0===l&&(l=0);var c=dt(t),s=c[0],u=c[1],d=n-s,p=r-u;t.forEach(function(n){var r,o;if(a){var c=a&&i<l,s=a&&i>l,u=e.originalElements.get(n.id);r=c&&u?u.x:n.x+d,o=s&&u?u.y:n.y+p}else r=n.x+d,o=n.y+p;Dn(n,{x:r,y:o}),jo(n,{simultaneouslyUpdated:t})})}(e,c,u,d,t.scene,m,f,h),t.maybeSuggestBindingForAll(c),n.altKey&&!e.hit.hasBeenDuplicated){e.hit.hasBeenDuplicated=!0;for(var v=[],b=[],y=new Map,w=new Map,x=e.hit.element,E=0,k=t.scene.getElementsIncludingDeleted();E<k.length;E++){var S=k[E];if(t.state.selectedElementIds[S.id]||S.id===(null==x?void 0:x.id)&&e.hit.wasAddedToSelection){var C=ir(t.state.editingGroupId,y,S),O=ot(e.origin.x-e.drag.offset.x,e.origin.y-e.drag.offset.y,t.state.gridSize),M=O[0],I=O[1];Dn(C,{x:C.x+(M-u),y:C.y+(I-d)}),v.push(C),b.push(S),w.set(S.id,C.id)}else v.push(S)}var P=kd(kd([],v),b);Vo(P,b,w,"duplicatesServeAsOld"),t.scene.replaceAllElements(P)}return}}var T=t.state.draggingElement;if(T){if(Ve(T)){e.drag.hasOccurred=!0;var A=T.points,_=void 0,L=void 0;"draw"===T.type?(_=o.x-T.x,L=o.y-T.y):(_=i-T.x,L=l-T.y),Bt(n)&&2===A.length&&(_=(r=Bn(t.state.elementType,_,L)).width,L=r.height),1===A.length?Dn(T,{points:kd(kd([],A),[[_,L]])}):A.length>1&&("draw"===T.type?Dn(T,{points:W(kd(kd([],A),[[_,L]]),.7/t.state.zoom.value)}):Dn(T,{points:kd(kd([],A.slice(0,-1)),[[_,L]])})),Ye(T)&&t.maybeSuggestBindingForLinearElementAtCursor(T,"end",o,t.state.startBoundElement)}else e.lastCoords.x=o.x,e.lastCoords.y=o.y,t.maybeDragNewGenericElement(e,n);if("selection"===t.state.elementType){var D=t.scene.getElements();!n.shiftKey&&ga(D,t.state)&&t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null});var j=function(e,t){var n=it(T),r=n[0],o=n[1],a=n[2],i=n[3];return e.filter(function(e){var t=ut(e),n=t[0],l=t[1],c=t[2],s=t[3];return"selection"!==e.type&&r<=n&&o<=l&&a>=c&&i>=s})}(D);t.setState(function(e){return Xn(Cd(Cd({},e),{},{selectedElementIds:Cd(Cd({},e.selectedElementIds),j.reduce(function(e,t){return e[t.id]=!0,e},{}))}),t.scene.getElements())})}}}}})},t.prototype.handlePointerMoveOverScrollbars=function(e,t){if(t.scrollbars.isOverHorizontal){var n=e.clientX,r=n-t.lastCoords.x;return this.setState({scrollX:this.state.scrollX-r/this.state.zoom.value}),t.lastCoords.x=n,!0}if(t.scrollbars.isOverVertical){var o=e.clientY,a=o-t.lastCoords.y;return this.setState({scrollY:this.state.scrollY-a/this.state.zoom.value}),t.lastCoords.y=o,!0}return!1},t.prototype.onPointerUpFromPointerDownHandler=function(e){var t=this;return ln(function(n){var r=t.state,o=r.draggingElement,a=r.resizingElement,i=r.multiElement,l=r.elementType,c=r.elementLocked,s=r.isResizing,u=r.isRotating;if(t.setState({isResizing:!1,isRotating:!1,resizingElement:null,selectionElement:null,cursorButton:"up",editingElement:i||Ge(t.state.editingElement)?t.state.editingElement:null}),t.savePointer(n.clientX,n.clientY,"up"),t.state.editingLinearElement){var d=yo.handlePointerUp(n,t.state.editingLinearElement,t.state);d!==t.state.editingLinearElement&&t.setState({editingLinearElement:d,suggestedBindings:[]})}if(Bd=null,window.removeEventListener(g.Ks.POINTER_MOVE,e.eventListeners.onMove),window.removeEventListener(g.Ks.POINTER_UP,e.eventListeners.onUp),window.removeEventListener(g.Ks.KEYDOWN,e.eventListeners.onKeyDown),window.removeEventListener(g.Ks.KEYUP,e.eventListeners.onKeyUp),"draw"!==(null==o?void 0:o.type))if(Ve(o)){o.points.length>1&&Od.resumeRecording();var p=Jt(n,t.state);e.drag.hasOccurred||!o||i?e.drag.hasOccurred&&!i&&(Eo(t.state)&&Ye(o)&&Mo(o,t.state,t.scene,p),t.setState({suggestedBindings:[],startBoundElement:null}),c||"draw"===l?t.setState(function(e){var n;return{draggingElement:null,selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(n={},n[t.state.draggingElement.id]=!0,n))}}):(Zt(),t.setState(function(e){var n;return{draggingElement:null,elementType:"selection",selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(n={},n[t.state.draggingElement.id]=!0,n))}}))):(Dn(o,{points:kd(kd([],o.points),[[p.x-o.x,p.y-o.y]])}),t.setState({multiElement:o,editingElement:t.state.draggingElement}))}else{if("selection"!==l&&o&&zn(o))return t.scene.replaceAllElements(t.scene.getElementsIncludingDeleted().slice(0,-1)),void t.setState({draggingElement:null});o&&Dn(o,Hn(o)),a&&Od.resumeRecording(),a&&zn(a)&&t.scene.replaceAllElements(t.scene.getElementsIncludingDeleted().filter(function(e){return e.id!==a.id}));var f=e.hit.element;if(f&&!e.drag.hasOccurred&&!e.hit.wasAddedToSelection)if(n.shiftKey)if(t.state.selectedElementIds[f.id])if(Kn(t.state,f)){var h=f.groupIds.flatMap(function(e){return qn(t.scene.getElements(),e)}).map(function(e){var t;return(t={})[e.id]=!1,t}).reduce(function(e,t){return Cd(Cd({},e),t)},{});t.setState(function(e){return{selectedGroupIds:Cd(Cd({},e.selectedElementIds),f.groupIds.map(function(e){var t;return(t={})[e]=!1,t}).reduce(function(e,t){return Cd(Cd({},e),t)},{})),selectedElementIds:Cd(Cd({},e.selectedElementIds),h)}})}else t.setState(function(e){var t;return{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(t={},t[f.id]=!1,t))}});else t.setState(function(e){var t;return{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(t={},t[f.id]=!0,t))}});else t.setState(function(e){var n;return Cd({},Xn(Cd(Cd({},e),{},{selectedElementIds:(n={},n[f.id]=!0,n)}),t.scene.getElements()))});t.state.editingLinearElement||e.drag.hasOccurred||t.state.isResizing||!(f&&Br(f,t.state,e.origin.x,e.origin.y)||!f&&e.hit.hasHitCommonBoundingBoxOfSelectedElements)?(!c&&"draw"!==l&&o&&t.setState(function(e){var t;return{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(t={},t[o.id]=!0,t))}}),("selection"!==l||ga(t.scene.getElements(),t.state))&&Od.resumeRecording(),(e.drag.hasOccurred||s||u)&&(Eo(t.state)?Co:Ao)(va(t.scene.getElements(),t.state)),c||"draw"===l?t.setState({draggingElement:null,suggestedBindings:[]}):(Zt(),t.setState({draggingElement:null,suggestedBindings:[],elementType:"selection"}))):t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})}else t.actionManager.executeAction(Tl)})},t.prototype.maybeSuggestBindingForAll=function(e){var t,n,r=(t=e,n=new Set(t.map(function(e){return e.id})),t.flatMap(function(e){return Ye(e)?function(e){return[Ro(e,"start"),Ro(e,"end")].filter(function(e){return null!=e})}(e).filter(function(e){return!n.has(e.id)}):Xe(e)?Wo(e).filter(function(e){return!n.has(e[0].id)}):[]}));this.setState({suggestedBindings:r})},t.prototype.clearSelection=function(e){this.setState(function(t){return{selectedElementIds:{},selectedGroupIds:{},editingGroupId:t.editingGroupId&&null!=e&&Zn(e,t.editingGroupId)?t.editingGroupId:null}}),this.setState({selectedElementIds:{},previousSelectedElementIds:this.state.selectedElementIds})},t.prototype.getTextWysiwygSnappedToCenterPosition=function(e,t,n,r,o){var a=function(e,t,n){for(var r=null,o=e.length-1;o>=0;--o)if(!e[o].isDeleted){var a=it(e[o]),i=a[0],l=a[1],c=a[2],s=a[3];if(i<t&&t<c&&l<n&&n<s){r=e[o];break}}return r}(this.scene.getElementsIncludingDeleted().filter(function(e){return!Ge(e)}),e,t);if(a){var i=a.x+a.width/2,l=a.y+a.height/2;if(Math.hypot(e-i,t-l)<g.wZ){var c=en({sceneX:i,sceneY:l},n);return{viewportX:c.x,viewportY:c.y,elementCenterX:i,elementCenterY:l}}}},t.prototype.getCanvasOffsets=function(e){var t,n;if("number"==typeof(null==e?void 0:e.offsetLeft)&&"number"==typeof(null==e?void 0:e.offsetTop))return{offsetLeft:e.offsetLeft,offsetTop:e.offsetTop};if(null!==(t=this.excalidrawContainerRef)&&void 0!==t&&null!==(n=t.current)&&void 0!==n&&n.parentElement){var r=this.excalidrawContainerRef.current.parentElement.getBoundingClientRect(),o=r.left,a=r.top;return{offsetLeft:"number"==typeof(null==e?void 0:e.offsetLeft)?e.offsetLeft:o,offsetTop:"number"==typeof(null==e?void 0:e.offsetTop)?e.offsetTop:a}}return{offsetLeft:"number"==typeof(null==e?void 0:e.offsetLeft)?e.offsetLeft:0,offsetTop:"number"==typeof(null==e?void 0:e.offsetTop)?e.offsetTop:0}},t.prototype.updateLanguage=function(){var e=this;return y()(function(){var t;return Ed(this,function(n){switch(n.label){case 0:return t=S.find(function(t){return t.code===e.props.langCode})||E,[4,P(t)];case 1:return n.sent(),e.setAppState({}),[2]}})})()},t}(m().Component);Nd.defaultProps={width:window.innerWidth,height:window.innerHeight};var Rd=function(){var e,t=this;this.canvas=null,this.rc=null,this.unmounted=!1,this.excalidrawContainerRef=m().createRef(),this.getSceneElementsIncludingDeleted=function(){return t.scene.getElementsIncludingDeleted()},this.getSceneElements=function(){return t.scene.getElements()},this.syncActionResult=ln(function(e){if(!t.unmounted&&!1!==e){var n=null;if(e.elements&&(e.elements.forEach(function(e){var r;(null===(r=t.state.editingElement)||void 0===r?void 0:r.id)===e.id&&t.state.editingElement!==e&&fa(e)&&(n=e)}),t.scene.replaceAllElements(e.elements),e.commitToHistory&&Od.resumeRecording()),e.appState||n){var r,o,a;e.commitToHistory&&Od.resumeRecording();var i=(null==e||null===(r=e.appState)||void 0===r?void 0:r.viewModeEnabled)||!1,l=(null==e||null===(o=e.appState)||void 0===o?void 0:o.zenModeEnabled)||!1,c=(null==e||null===(a=e.appState)||void 0===a?void 0:a.gridSize)||null;void 0!==t.props.viewModeEnabled&&(i=t.props.viewModeEnabled),void 0!==t.props.zenModeEnabled&&(l=t.props.zenModeEnabled),void 0!==t.props.gridModeEnabled&&(c=t.props.gridModeEnabled?g.k:null),t.setState(function(t){var r;return Cd(Cd({},e.appState),{},{editingElement:n||(null===(r=e.appState)||void 0===r?void 0:r.editingElement)||null,width:t.width,height:t.height,offsetTop:t.offsetTop,offsetLeft:t.offsetLeft,viewModeEnabled:i,zenModeEnabled:l,gridSize:c})},function(){e.syncHistory&&Od.setCurrentState(t.state,t.scene.getElementsIncludingDeleted())})}}}),this.onBlur=ln(function(){Ad=!1,t.setState({isBindingEnabled:!0})}),this.onUnload=function(){t.onBlur()},this.disableEvent=function(e){e.preventDefault()},this.onFontLoaded=function(){t.scene.getElementsIncludingDeleted().forEach(function(e){Ge(e)&&En(e)}),t.onSceneUpdated()},this.importLibraryFromUrl=(e=y()(function(e){var n,r,o,a,i;return Ed(this,function(l){switch(l.label){case 0:window.history.replaceState({},g.iC,window.location.origin),l.label=1;case 1:return l.trys.push([1,7,,8]),[4,fetch(e)];case 2:return[4,l.sent().blob()];case 3:return n=l.sent(),a=(o=JSON).parse,[4,n.text()];case 4:if(!function(e){return"object"==k(e)&&e&&"excalidrawlib"===e.type&&1===e.version}(r=a.apply(o,[l.sent()])))throw new Error;return window.confirm(_("alerts.confirmAddLibrary",{numShapes:r.library.length}))?[4,qc.importLibrary(n)]:[3,6];case 5:l.sent(),t.setState({isLibraryOpen:!0}),l.label=6;case 6:return[3,8];case 7:return i=l.sent(),window.alert(_("alerts.errorLoadingLibrary")),console.error(i),[3,8];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}),this.resetHistory=function(){Od.clear()},this.resetScene=ln(function(e){t.scene.replaceAllElements([]),t.setState(function(n){return Cd(Cd({},un()),{},{isLoading:(null==e||!e.resetLoadingState)&&n.isLoading,appearance:t.state.appearance})}),t.resetHistory()}),this.initializeScene=y()(function(){var e,n,r,o,a;return Ed(this,function(i){switch(i.label){case 0:t.props.initialData&&"string"==typeof t.props.initialData&&(n=new Blob([t.props.initialData],{type:"image/svg+xml"}),Ac(n,t.state).then(function(e){var n=e.elements,r=e.appState;return t.syncActionResult({elements:n,appState:Cd(Cd({},r||t.state),{},{isLoading:!1}),commitToHistory:!0})}).catch(function(e){t.setState({isLoading:!1,errorMessage:e.message})})),t.state.isLoading||t.setState({isLoading:!0}),r=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.props.initialData];case 2:return r=i.sent()||null,[3,4];case 3:return o=i.sent(),console.error(o),[3,4];case 4:return(a=Cc(r,null)).appState=Cd(Cd({},a.appState),{},{isLoading:!1}),null!==(e=r)&&void 0!==e&&e.scrollToCenter&&(a.appState=Cd(Cd({},a.appState),wa(a.elements,Cd(Cd({},a.appState),{},{width:t.state.width,height:t.state.height,offsetTop:t.state.offsetTop,offsetLeft:t.state.offsetLeft})))),t.resetHistory(),t.syncActionResult(Cd(Cd({},a),{},{commitToHistory:!0})),[2]}})}),this.onResize=ln(function(){t.scene.getElementsIncludingDeleted().forEach(function(e){return En(e)}),t.setState({})}),this.onScroll=Kt(function(){t.setState(Cd({},t.getCanvasOffsets()))},g.HM),this.onCut=ln(function(e){Ft(e.target)||(t.cutAll(),e.preventDefault())}),this.onCopy=ln(function(e){Ft(e.target)||(t.copyAll(),e.preventDefault())}),this.cutAll=function(){t.copyAll(),t.actionManager.executeAction(_i)},this.copyAll=function(){Fc(t.scene.getElements(),t.state)},this.onTapStart=function(e){if(!Md)return Md=!0,clearTimeout(Id),void(Id=window.setTimeout(Nd.resetTapTwice,g.Gj));if(Md&&1===e.touches.length){var n=e.touches[0];t.handleCanvasDoubleClick({clientX:n.clientX,clientY:n.clientY}),Md=!1,clearTimeout(Id)}e.preventDefault(),2===e.touches.length&&t.setState({selectedElementIds:{}})},this.onTapEnd=function(e){e.preventDefault(),e.touches.length>0&&t.setState({previousSelectedElementIds:{},selectedElementIds:t.state.previousSelectedElementIds})},this.pasteFromClipboard=ln(function(){var e=y()(function(e){var n,r,o;return Ed(this,function(a){switch(a.label){case 0:return n=document.activeElement,r=document.elementFromPoint(Pd,Td),!e||r instanceof HTMLCanvasElement&&!Ft(n)?[4,Vc(e)]:[2];case 1:return(o=a.sent()).errorMessage?t.setState({errorMessage:o.errorMessage}):o.spreadsheet?t.setState({pasteDialog:{data:o.spreadsheet,shown:!0}}):o.elements?t.addElementsFromPasteOrLibrary(o.elements):o.text&&t.addTextFromPaste(o.text),t.selectShapeTool("selection"),null==e||e.preventDefault(),[2]}})});return function(t){return e.apply(this,arguments)}}()),this.addElementsFromPasteOrLibrary=function(e,n,r){void 0===n&&(n=Pd),void 0===r&&(r=Td);var o=dt(e),a=o[0],i=o[1],l=o[2],c=o[3],s=Xt(a,l)/2,u=Xt(i,c)/2,d=Jt({clientX:n,clientY:r},t.state),p=d.x-s,f=d.y-u,h=new Map,m=ot(p,f,t.state.gridSize),g=m[0],v=m[1],b=new Map,y=e.map(function(e){var n=ir(t.state.editingGroupId,h,e,{x:e.x+g-a,y:e.y+v-i});return b.set(e.id,n.id),n}),w=kd(kd([],t.scene.getElementsIncludingDeleted()),y);Vo(w,e,b),t.scene.replaceAllElements(w),Od.resumeRecording(),t.setState(Xn(Cd(Cd({},t.state),{},{isLibraryOpen:!1,selectedElementIds:y.reduce(function(e,t){return e[t.id]=!0,e},{}),selectedGroupIds:{}}),t.scene.getElements()))},this.setAppState=function(e){t.setState(e)},this.removePointer=function(e){"touch"===e.pointerType&&jd&&(clearTimeout(jd),jd=0,zd=!1),Hd.pointers.delete(e.pointerId)},this.toggleLock=function(){t.setState(function(e){return{elementLocked:!e.elementLocked,elementType:e.elementLocked?"selection":e.elementType}})},this.toggleZenMode=function(){t.actionManager.executeAction(tu)},this.toggleStats=function(){t.state.showStats||Al("dialog","stats"),t.actionManager.executeAction(ou)},this.setScrollToCenter=function(e){t.setState(Cd({},wa(pa(e),t.state,t.canvas)))},this.clearToast=function(){t.setState({toastMessage:null})},this.updateScene=ln(function(e){var n;e.commitToHistory&&Od.resumeRecording(),null!==(n=e.appState)&&void 0!==n&&n.viewBackgroundColor&&t.setState({viewBackgroundColor:e.appState.viewBackgroundColor}),e.elements&&t.scene.replaceAllElements(e.elements),e.collaborators&&t.setState({collaborators:e.collaborators})}),this.onSceneUpdated=function(){t.setState({})},this.updateCurrentCursorPosition=ln(function(e){Pd=e.x,Td=e.y}),this.onKeyDown=ln(function(e){var n;if(!("Proxy"in window&&(!e.shiftKey&&/^[A-Z]$/.test(e.key)||e.shiftKey&&/^[a-z]$/.test(e.key))&&(e=new Proxy(e,{get:function(t,n){var r=t[n];return"function"==typeof r?r.bind(t):"key"===n?e.shiftKey?t.key.toUpperCase():t.key.toLowerCase():r}})),Ft(e.target)&&e.key!==Tt||Dt(e.key)&&(n=e.target,n instanceof HTMLElement&&"wysiwyg"===n.dataset.type||n instanceof HTMLBRElement||n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)||("?"===e.key&&t.setState({showHelpDialog:!0}),t.actionManager.handleKeyDown(e)||t.state.viewModeEnabled))){if(e[It]&&t.setState({isBindingEnabled:!1}),"Digit9"===e.code&&t.setState({isLibraryOpen:!t.state.isLibraryOpen}),Dt(e.key)){var r=t.state.gridSize&&(e.shiftKey?g.$e:t.state.gridSize)||(e.shiftKey?g.Iw:g.$e),o=t.scene.getElements().filter(function(e){return t.state.selectedElementIds[e.id]}),a=0,i=0;e.key===Ct?a=-r:e.key===Ot?a=r:e.key===Mt?i=-r:e.key===St&&(i=r),o.forEach(function(e){Dn(e,{x:e.x+a,y:e.y+i}),jo(e,{simultaneouslyUpdated:o})}),t.maybeSuggestBindingForAll(o),e.preventDefault()}else if(e.key===Pt){var l=va(t.scene.getElements(),t.state);if(1===l.length&&Ve(l[0]))t.state.editingLinearElement&&t.state.editingLinearElement.elementId===l[0].id||(Od.resumeRecording(),t.setState({editingLinearElement:new yo(l[0],t.scene)}));else if(1===l.length&&!Ve(l[0])){var c=l[0];return t.startTextEditing({sceneX:c.x+c.width/2,sceneY:c.y+c.height/2}),void e.preventDefault()}}else if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&null===t.state.draggingElement){var s=function(e){var t=vu.find(function(t,n){return e===(n+1).toString()||("string"==typeof t.key?t.key===e:t.key.includes(e))});return(null==t?void 0:t.value)||null}(e.key);s?t.selectShapeTool(s):"q"===e.key&&t.toggleLock()}" "===e.key&&0===Hd.pointers.size&&(Ad=!0,document.documentElement.style.cursor=g.oc.GRABBING)}}),this.onKeyUp=ln(function(e){if(" "===e.key&&("selection"===t.state.elementType?Zt():(qt(t.state.elementType),t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})),Ad=!1),e[It]||t.state.isBindingEnabled||t.setState({isBindingEnabled:!0}),Dt(e.key)){var n=va(t.scene.getElements(),t.state);Eo(t.state)?Co(n):Ao(n),t.setState({suggestedBindings:[]})}}),this.onGestureStart=ln(function(e){e.preventDefault(),t.setState({selectedElementIds:{}}),Hd.initialScale=t.state.zoom.value}),this.onGestureChange=ln(function(e){if(e.preventDefault(),2!==Hd.pointers.size){var n=Hd.initialScale;n&&t.setState(function(t){var r=t.zoom,o=t.offsetLeft,a=t.offsetTop;return{zoom:Ma(Ia(n*e.scale),r,{left:o,top:a},{x:Pd,y:Td})}})}}),this.onGestureEnd=ln(function(e){e.preventDefault(),t.setState({previousSelectedElementIds:{},selectedElementIds:t.state.previousSelectedElementIds}),Hd.initialScale=null}),this.startTextEditing=function(e){var n=e.sceneX,r=e.sceneY,o=e.insertAtParentCenter,a=void 0===o||o,i=t.getTextElementAtPosition(n,r),l=a&&t.getTextWysiwygSnappedToCenterPosition(n,r,t.state,t.canvas,window.devicePixelRatio),c=i||rr({x:l?l.elementCenterX:n,y:l?l.elementCenterY:r,strokeColor:t.state.currentItemStrokeColor,backgroundColor:t.state.currentItemBackgroundColor,fillStyle:t.state.currentItemFillStyle,strokeWidth:t.state.currentItemStrokeWidth,strokeStyle:t.state.currentItemStrokeStyle,roughness:t.state.currentItemRoughness,opacity:t.state.currentItemOpacity,strokeSharpness:t.state.currentItemStrokeSharpness,text:"",fontSize:t.state.currentItemFontSize,fontFamily:t.state.currentItemFontFamily,textAlign:l?"center":t.state.currentItemTextAlign,verticalAlign:l?"middle":g.hs});t.setState({editingElement:c}),i?l&&"center"===c.textAlign||Dn(c,{verticalAlign:g.hs}):(t.scene.replaceAllElements(kd(kd([],t.scene.getElementsIncludingDeleted()),[c])),l||Dn(c,{y:c.y-c.baseline/2})),t.setState({editingElement:c}),t.handleTextWysiwyg(c,{isExistingElement:!!i})},this.handleCanvasDoubleClick=function(e){if(!t.state.multiElement&&"selection"===t.state.elementType){var n=va(t.scene.getElements(),t.state);if(1===n.length&&Ve(n[0]))t.state.editingLinearElement&&t.state.editingLinearElement.elementId===n[0].id||(Od.resumeRecording(),t.setState({editingLinearElement:new yo(n[0],t.scene)}));else{Zt();var r=Jt(e,t.state),o=r.x,a=r.y;if(Un(t.state).length>0){var i=t.getElementAtPosition(o,a),l=i&&function(e,t){return e.groupIds.find(function(e){return t[e]})}(i,t.state.selectedGroupIds);if(l)return void t.setState(function(e){var n;return Xn(Cd(Cd({},e),{},{editingGroupId:l,selectedElementIds:(n={},n[i.id]=!0,n),selectedGroupIds:{}}),t.scene.getElements())})}Zt(),e[It]||t.startTextEditing({sceneX:o,sceneY:a,insertAtParentCenter:!e.altKey})}}},this.handleCanvasPointerMove=function(e){t.savePointer(e.clientX,e.clientY,t.state.cursorButton),Hd.pointers.has(e.pointerId)&&Hd.pointers.set(e.pointerId,{x:e.clientX,y:e.clientY});var n=Hd.initialScale;if(2===Hd.pointers.size&&Hd.lastCenter&&n&&Hd.initialDistance){var r=su(Hd.pointers),o=r.x-Hd.lastCenter.x,a=r.y-Hd.lastCenter.y;Hd.lastCenter=r;var i=uu(Array.from(Hd.pointers.values()))/Hd.initialDistance;t.setState(function(e){var t=e.zoom,l=e.scrollX,c=e.scrollY,s=e.offsetLeft,u=e.offsetTop;return{scrollX:l+o/t.value,scrollY:c+a/t.value,zoom:Ma(Ia(n*i),t,{left:s,top:u},r),shouldCacheIgnoreZoom:!0}}),t.resetShouldCacheIgnoreZoomDebounced()}else Hd.lastCenter=Hd.initialDistance=Hd.initialScale=null;if(!(Ad||_d||Ld)){var l=ma(Dd,e.clientX-t.state.offsetLeft,e.clientY-t.state.offsetTop).isOverEither;t.state.draggingElement||t.state.multiElement||(l?Zt():qt(t.state.elementType));var c=Jt(e,t.state),s=c.x,u=c.y;if(t.state.editingLinearElement&&!t.state.editingLinearElement.isDragging){var d=yo.handlePointerMove(e,s,u,t.state.editingLinearElement,t.state.gridSize);d!==t.state.editingLinearElement&&t.setState({editingLinearElement:d}),null!=d.lastUncommittedPoint?t.maybeSuggestBindingAtCursor(c):t.setState({suggestedBindings:[]})}if(Ue(t.state.elementType)){var p=t.state.draggingElement;Ye(p)?t.maybeSuggestBindingForLinearElementAtCursor(p,"end",c,t.state.startBoundElement):t.maybeSuggestBindingAtCursor(c)}if(t.state.multiElement){var f=t.state.multiElement,h=f.x,m=f.y,v=f.points,b=f.lastCommittedPoint,y=v[v.length-1];return qt(t.state.elementType),void(y===b?$e(s-h,u-m,y[0],y[1])>=g.qx?Dn(f,{points:kd(kd([],v),[[s-h,u-m]])}):document.documentElement.style.cursor=g.oc.POINTER:v.length>2&&b&&$e(s-h,u-m,b[0],b[1])<g.qx?(document.documentElement.style.cursor=g.oc.POINTER,Dn(f,{points:v.slice(0,-1)})):(Je(v,t.state.zoom.value)&&(document.documentElement.style.cursor=g.oc.POINTER),Dn(f,{points:kd(kd([],v.slice(0,-1)),[[s-h,u-m]])})))}if(!(Boolean(e.buttons)||"selection"!==t.state.elementType&&"text"!==t.state.elementType)){var w=t.scene.getElements(),x=va(w,t.state);if(1!==x.length||l||t.state.editingLinearElement){if(x.length>1&&!l){var E=fo(dt(x),s,u,t.state.zoom,e.pointerType);if(E)return void(document.documentElement.style.cursor=mo({transformHandleType:E}))}}else{var k=po(w,t.state,s,u,t.state.zoom,e.pointerType);if(k&&k.transformHandleType)return void(document.documentElement.style.cursor=mo(k))}var S=t.getElementAtPosition(c.x,c.y);"text"===t.state.elementType?document.documentElement.style.cursor=Ge(S)?g.oc.TEXT:g.oc.CROSSHAIR:l?document.documentElement.style.cursor=g.oc.AUTO:S||t.isHittingCommonBoundingBoxOfSelectedElements(c,x)?document.documentElement.style.cursor=g.oc.MOVE:document.documentElement.style.cursor=g.oc.AUTO}}},this.handleTouchMove=function(e){zd=!0},this.handleCanvasPointerDown=function(e){if(e.persist(),t.maybeOpenContextMenuAfterPointerDownOnTouchDevices(e),t.maybeCleanupAfterMissingPointerUp(e),!_d&&(t.setState({lastPointerDownWith:e.pointerType,cursorButton:"down"}),t.savePointer(e.clientX,e.clientY,"down"),!t.handleCanvasPanUsingWheelOrSpaceDrag(e)&&!(e.button!==g.Oh.MAIN&&e.button!==g.Oh.TOUCH||(t.updateGestureOnPointerDown(e),e.preventDefault(),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),Hd.pointers.size>1)))){var n=t.initialPointerDownState(e);if(!t.handleDraggingScrollBar(e,n)&&(t.clearSelectionIfNotUsingSelection(),t.updateBindingEnabledOnPointerMove(e),!t.handleSelectionOnPointerDown(e,n)))if("text"!==t.state.elementType){"arrow"===t.state.elementType||"draw"===t.state.elementType||"line"===t.state.elementType?t.handleLinearElementOnPointerDown(e,t.state.elementType,n):t.createGenericElementOnPointerDown(t.state.elementType,n);var r=t.onPointerMoveFromPointerDownHandler(n),o=t.onPointerUpFromPointerDownHandler(n),a=t.onKeyDownFromPointerDownHandler(n),i=t.onKeyUpFromPointerDownHandler(n);Bd=o,t.state.viewModeEnabled||(window.addEventListener(g.Ks.POINTER_MOVE,r),window.addEventListener(g.Ks.POINTER_UP,o),window.addEventListener(g.Ks.KEYDOWN,a),window.addEventListener(g.Ks.KEYUP,i),n.eventListeners.onMove=r,n.eventListeners.onUp=o,n.eventListeners.onKeyUp=i,n.eventListeners.onKeyDown=a)}else t.handleTextOnPointerDown(e,n)}},this.maybeOpenContextMenuAfterPointerDownOnTouchDevices=function(e){"touch"===e.pointerType&&(zd=!1,jd?zd=!0:jd=window.setTimeout(function(){jd=0,zd||t.openContextMenu({clientX:e.clientX,clientY:e.clientY})},g.nM))},this.handleCanvasPanUsingWheelOrSpaceDrag=function(e){if(0!==Hd.pointers.size||!(e.button===g.Oh.WHEEL||e.button===g.Oh.MAIN&&Ad||t.state.viewModeEnabled))return!1;_d=!0;var n=!1,r=/Linux/.test(window.navigator.platform);document.documentElement.style.cursor=g.oc.GRABBING;var o=e.clientX,a=e.clientY,i=ln(function(e){var i=o-e.clientX,l=a-e.clientY;if(o=e.clientX,a=e.clientY,r&&!n&&(Math.abs(i)>1||Math.abs(l)>1)){n=!0;var c=function e(t){document.body.removeEventListener(g.Ks.PASTE,e),t.stopPropagation()};document.body.addEventListener(g.Ks.PASTE,c),window.addEventListener(g.Ks.POINTER_UP,function e(){setTimeout(function(){document.body.removeEventListener(g.Ks.PASTE,c),window.removeEventListener(g.Ks.POINTER_UP,e)},100)})}t.setState({scrollX:t.state.scrollX-i/t.state.zoom.value,scrollY:t.state.scrollY-l/t.state.zoom.value})}),l=ln(Bd=function(){Bd=null,_d=!1,Ad||qt(t.state.elementType),t.setState({cursorButton:"up"}),t.savePointer(e.clientX,e.clientY,"up"),window.removeEventListener(g.Ks.POINTER_MOVE,i),window.removeEventListener(g.Ks.POINTER_UP,l),window.removeEventListener(g.Ks.BLUR,l)});return window.addEventListener(g.Ks.BLUR,l),window.addEventListener(g.Ks.POINTER_MOVE,i,{passive:!0}),window.addEventListener(g.Ks.POINTER_UP,l),!0},this.clearSelectionIfNotUsingSelection=function(){"selection"!==t.state.elementType&&t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null})},this.handleSelectionOnPointerDown=function(e,n){if("selection"===t.state.elementType){var r=t.scene.getElements(),o=va(r,t.state);if(1!==o.length||t.state.editingLinearElement)o.length>1&&(n.resize.handleType=fo(dt(o),n.origin.x,n.origin.y,t.state.zoom,e.pointerType));else{var a=po(r,t.state,n.origin.x,n.origin.y,t.state.zoom,e.pointerType);null!=a&&(t.setState({resizingElement:a.element}),n.resize.handleType=a.transformHandleType)}if(n.resize.handleType)document.documentElement.style.cursor=mo({transformHandleType:n.resize.handleType}),n.resize.isResizing=!0,n.resize.offset=on(function(e,t,n,r){var o,a=1===t.length?it(t[0]):dt(t),i=a[0],l=a[1],c=a[2],s=a[3],u=(i+c)/2,d=(l+s)/2,p=1===t.length?t[0].angle:0;switch(n=(o=Ze(n,r,u,d,-p))[0],r=o[1],e){case"n":return Ze(n-(i+c)/2,r-l,0,0,p);case"s":return Ze(n-(i+c)/2,r-s,0,0,p);case"w":return Ze(n-i,r-(l+s)/2,0,0,p);case"e":return Ze(n-c,r-(l+s)/2,0,0,p);case"nw":return Ze(n-i,r-l,0,0,p);case"ne":return Ze(n-c,r-l,0,0,p);case"sw":return Ze(n-i,r-s,0,0,p);case"se":return Ze(n-c,r-s,0,0,p);default:return[0,0]}}(n.resize.handleType,o,n.origin.x,n.origin.y)),1===o.length&&Ve(o[0])&&2===o[0].points.length&&(n.resize.arrowDirection=(u=n.resize.handleType,p=(d=o[0].points[1])[0],f=d[1],"nw"===u&&(p<0||f<0)||"ne"===u&&p>=0||"sw"===u&&p<=0||"se"===u&&(p>0||f>0)?"end":"origin"));else{var i;if(t.state.editingLinearElement){var l=yo.handlePointerDown(e,t.state,function(e){return t.setState(e)},Od,n.origin);if(l.hitElement&&(n.hit.element=l.hitElement),l.didAddPoint)return!0}n.hit.element=null!==(i=n.hit.element)&&void 0!==i?i:t.getElementAtPosition(n.origin.x,n.origin.y),n.hit.allHitElements=t.getElementsAtPosition(n.origin.x,n.origin.y);var c=n.hit.element,s=n.hit.allHitElements.some(function(e){return t.isASelectedElement(e)});if(null!==c&&s||e.shiftKey||n.hit.hasHitCommonBoundingBoxOfSelectedElements||t.clearSelection(c),null!=c){if(e[It])return t.setState(function(e){return Cd(Cd({},function(e,t){var n;return Gn(Gn({},e),{},{editingGroupId:t.groupIds.length?t.groupIds[0]:null,selectedGroupIds:{},selectedElementIds:(n={},n[t.id]=!0,n)})}(e,c)),{},{previousSelectedElementIds:t.state.selectedElementIds})}),!1;t.state.selectedElementIds[c.id]||(t.state.editingGroupId&&!Zn(c,t.state.editingGroupId)&&t.setState({selectedElementIds:{},selectedGroupIds:{},editingGroupId:null}),s||n.hit.hasHitCommonBoundingBoxOfSelectedElements||(t.setState(function(e){var n;return Xn(Cd(Cd({},e),{},{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(n={},n[c.id]=!0,n))}),t.scene.getElements())}),n.hit.wasAddedToSelection=!0))}t.setState({previousSelectedElementIds:t.state.selectedElementIds})}}var u,d,p,f;return!1},this.handleTextOnPointerDown=function(e,n){var r;"text"!==(null===(r=t.state.editingElement)||void 0===r?void 0:r.type)&&(t.startTextEditing({sceneX:n.origin.x,sceneY:n.origin.y,insertAtParentCenter:!e.altKey}),Zt(),t.state.elementLocked||t.setState({elementType:"selection"}))},this.handleLinearElementOnPointerDown=function(e,n,r){if(t.state.multiElement){var o=t.state.multiElement;if("line"===o.type&&Je(o.points,t.state.zoom.value))return Dn(o,{lastCommittedPoint:o.points[o.points.length-1]}),void t.actionManager.executeAction(Tl);var a=o.x,i=o.y,l=o.lastCommittedPoint;if(o.points.length>1&&l&&$e(r.origin.x-a,r.origin.y-i,l[0],l[1])<g.qx)return void t.actionManager.executeAction(Tl);t.setState(function(e){var t;return{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(t={},t[o.id]=!0,t))}}),Dn(o,{lastCommittedPoint:o.points[o.points.length-1]}),document.documentElement.style.cursor=g.oc.POINTER}else{var c=ot(r.origin.x,r.origin.y,"draw"===n?null:t.state.gridSize),s=c[0],u=c[1],d=t.state,p=d.currentItemStartArrowhead,f=d.currentItemEndArrowhead,h="arrow"===n?[p,f]:[null,null],m=h[0],v=h[1],b=or({type:n,x:s,y:u,strokeColor:t.state.currentItemStrokeColor,backgroundColor:t.state.currentItemBackgroundColor,fillStyle:t.state.currentItemFillStyle,strokeWidth:t.state.currentItemStrokeWidth,strokeStyle:t.state.currentItemStrokeStyle,roughness:t.state.currentItemRoughness,opacity:t.state.currentItemOpacity,strokeSharpness:t.state.currentItemLinearStrokeSharpness,startArrowhead:m,endArrowhead:v});t.setState(function(e){var t;return{selectedElementIds:Cd(Cd({},e.selectedElementIds),{},(t={},t[b.id]=!1,t))}}),Dn(b,{points:kd(kd([],b.points),[[0,0]])});var y=Lo(r.origin,t.scene);t.scene.replaceAllElements(kd(kd([],t.scene.getElementsIncludingDeleted()),[b])),t.setState({draggingElement:b,editingElement:b,startBoundElement:y,suggestedBindings:[]})}},this.createGenericElementOnPointerDown=function(e,n){var r=ot(n.origin.x,n.origin.y,t.state.gridSize),o=r[0],a=r[1],i=tr({type:e,x:o,y:a,strokeColor:t.state.currentItemStrokeColor,backgroundColor:t.state.currentItemBackgroundColor,fillStyle:t.state.currentItemFillStyle,strokeWidth:t.state.currentItemStrokeWidth,strokeStyle:t.state.currentItemStrokeStyle,roughness:t.state.currentItemRoughness,opacity:t.state.currentItemOpacity,strokeSharpness:t.state.currentItemStrokeSharpness});"selection"===i.type?t.setState({selectionElement:i,draggingElement:i}):(t.scene.replaceAllElements(kd(kd([],t.scene.getElementsIncludingDeleted()),[i])),t.setState({multiElement:null,draggingElement:i,editingElement:i}))},this.updateBindingEnabledOnPointerMove=function(e){var n=!e[It];t.state.isBindingEnabled!==n&&t.setState({isBindingEnabled:n})},this.maybeSuggestBindingAtCursor=function(e){var n=Lo(e,t.scene);t.setState({suggestedBindings:null!=n?[n]:[]})},this.maybeSuggestBindingForLinearElementAtCursor=function(e,n,r,o){var a=Lo(r,t.scene);t.setState({suggestedBindings:null==a||To(e,null==o?void 0:o.id,a)?[]:[a]})},this.handleCanvasRef=function(e){var n,r,o;null!==e?(t.canvas=e,t.rc=He(t.canvas),t.canvas.addEventListener(g.Ks.WHEEL,t.handleWheel,{passive:!1}),t.canvas.addEventListener(g.Ks.TOUCH_START,t.onTapStart),t.canvas.addEventListener(g.Ks.TOUCH_END,t.onTapEnd)):(null===(n=t.canvas)||void 0===n||n.removeEventListener(g.Ks.WHEEL,t.handleWheel),null===(r=t.canvas)||void 0===r||r.removeEventListener(g.Ks.TOUCH_START,t.onTapStart),null===(o=t.canvas)||void 0===o||o.removeEventListener(g.Ks.TOUCH_END,t.onTapEnd))},this.handleCanvasOnDrop=function(){var e=y()(function(e){var n,r,o,a,i,l,c,s,u,d,p;return Ed(this,function(f){switch(f.label){case 0:return f.trys.push([0,3,,4]),"image/png"!==(null==(r=e.dataTransfer.files[0])?void 0:r.type)&&"image/svg+xml"!==(null==r?void 0:r.type)?[3,2]:[4,Ac(r,t.state)];case 1:return o=f.sent(),a=o.elements,i=o.appState,t.syncActionResult({elements:a,appState:Cd(Cd({},i||t.state),{},{isLoading:!1}),commitToHistory:!0}),[2];case 2:return[3,4];case 3:return l=f.sent(),[2,t.setState({isLoading:!1,errorMessage:l.message})];case 4:if(""!==(c=e.dataTransfer.getData(g.LO.excalidrawlib)))return t.addElementsFromPasteOrLibrary(JSON.parse(c),e.clientX,e.clientY),[2];if(!("application/json"===(null==(s=null===(n=e.dataTransfer)||void 0===n?void 0:n.files[0])?void 0:s.type)||null!=s&&s.name.endsWith(".excalidraw")))return[3,9];if(t.setState({isLoading:!0}),!("chooseFileSystemEntries"in window||"showOpenFilePicker"in window))return[3,8];f.label=5;case 5:return f.trys.push([5,7,,8]),u=e.dataTransfer.items[0],d=s,[4,u.getAsFileSystemHandle()];case 6:return d.handle=f.sent(),[3,8];case 7:return p=f.sent(),console.warn(p.name,p.message),[3,8];case 8:return Ac(s,t.state).then(function(e){var n=e.elements,r=e.appState;return t.syncActionResult({elements:n,appState:Cd(Cd({},r||t.state),{},{isLoading:!1}),commitToHistory:!0})}).catch(function(e){t.setState({isLoading:!1,errorMessage:e.message})}),[3,10];case 9:(null==s?void 0:s.type)===g.LO.excalidrawlib||null!=s&&s.name.endsWith(".excalidrawlib")?qc.importLibrary(s).then(function(){t.setState({isLibraryOpen:!1})}).catch(function(e){return t.setState({isLoading:!1,errorMessage:e.message})}):t.setState({isLoading:!1,errorMessage:_("alerts.couldNotLoadInvalidFile")}),f.label=10;case 10:return[2]}})});return function(t){return e.apply(this,arguments)}}(),this.handleCanvasContextMenu=function(e){e.preventDefault(),t.openContextMenu(e)},this.maybeDragNewGenericElement=function(e,n){var r=t.state.draggingElement,o=e.lastCoords;if(r)if("selection"===r.type)na(r,t.state.elementType,e.origin.x,e.origin.y,o.x,o.y,Xt(e.origin.x,o.x),Xt(e.origin.y,o.y),zt(n),jt(n));else{var a=ot(o.x,o.y,t.state.gridSize),i=a[0],l=a[1];na(r,t.state.elementType,e.originInGrid.x,e.originInGrid.y,i,l,Xt(e.originInGrid.x,i),Xt(e.originInGrid.y,l),zt(n),jt(n)),t.maybeSuggestBindingForAll([r])}},this.maybeHandleResize=function(e,n){var r=va(t.scene.getElements(),t.state),o=e.resize.handleType;t.setState({isResizing:o&&"rotation"!==o,isRotating:"rotation"===o});var a=e.lastCoords,i=ot(a.x-e.resize.offset.x,a.y-e.resize.offset.y,t.state.gridSize),l=i[0],c=i[1];return!!function(e,t,n,r,o,a,i,l,c,s,u){if(1===n.length){var d=n[0];return"rotation"===t?($o(d,l,c,o),jo(d)):!Ve(d)||2!==d.points.length||"nw"!==t&&"ne"!==t&&"sw"!==t&&"se"!==t?!Ge(d)||"nw"!==t&&"ne"!==t&&"sw"!==t&&"se"!==t?t&&function(e,t,n,r,o,a,i){var l,c,s=pt(e,e.width,e.height),u=[s[0],s[1]],d=[s[2],s[3]],p=[((l=u)[0]+(c=d)[0])/2,(l[1]+c[1])/2],f=qe([a,i],p,-e.angle),h=pt(n,n.width,n.height),m=h[0],g=h[1],v=h[2]-m,b=h[3]-g,y=(d[0]-u[0])/v,w=(d[1]-u[1])/b;r.includes("e")&&(y=(f[0]-u[0])/v),r.includes("s")&&(w=(f[1]-u[1])/b),r.includes("w")&&(y=(d[0]-f[0])/v),r.includes("n")&&(w=(d[1]-f[1])/b);var x=e.width,E=e.height,k=n.width*y,S=n.height*w;if(o&&(k=2*k-x,S=2*S-E),t){var C=Math.abs(k)/x,O=Math.abs(S)/E;if(1===r.length&&(S*=C,k*=O),2===r.length){var M=Math.max(C,O);k=x*M*Math.sign(k),S=E*M*Math.sign(S)}}var I=pt(e,k,S),P=I[0],T=I[1],A=I[2]-P,_=I[3]-T,L=Xo([],u);if(["n","w","nw"].includes(r)&&(L=[d[0]-Math.abs(A),d[1]-Math.abs(_)]),"ne"===r){var D=[u[0],d[1]];L=[D[0],D[1]-Math.abs(_)]}if("sw"===r){var j=[d[0],u[1]];L=[j[0]-Math.abs(A),j[1]]}t&&(["s","n"].includes(r)&&(L[0]=p[0]-A/2),["e","w"].includes(r)&&(L[1]=p[1]-_/2)),k<0&&(r.includes("e")&&(L[0]-=Math.abs(A)),r.includes("w")&&(L[0]+=Math.abs(A))),S<0&&(r.includes("s")&&(L[1]-=Math.abs(_)),r.includes("n")&&(L[1]+=Math.abs(_))),o&&(L[0]=p[0]-Math.abs(A)/2,L[1]=p[1]-Math.abs(_)/2);var z=e.angle,B=qe(L,p,z),H=[L[0]+Math.abs(A)/2,L[1]+Math.abs(_)/2],N=qe(H,p,z);L=qe(B,N,-z);var R=Jo(e,k,S),F=Xo([],L);F[0]+=e.x-P,F[1]+=e.y-T;var W=qo({width:Math.abs(k),height:Math.abs(S),x:F[0],y:F[1]},R);0!==W.width&&0!==W.height&&Number.isFinite(W.x)&&Number.isFinite(W.y)&&(jo(n,{newSize:{width:W.width,height:W.height}}),Dn(n,W))}(e.originalElements.get(d.id),i,d,t,a,l,c):(function(e,t,n,r,o){var a,i=it(e),l=i[0],c=i[1],s=i[2],u=i[3],d=Ze(r,o,(l+s)/2,(c+u)/2,-e.angle),p=d[0],f=d[1];switch(t){case"se":a=Math.max((p-l)/(s-l),(f-c)/(u-c));break;case"nw":a=Math.max((s-p)/(s-l),(u-f)/(u-c));break;case"ne":a=Math.max((p-l)/(s-l),(u-f)/(u-c));break;case"sw":a=Math.max((s-p)/(s-l),(f-c)/(u-c))}if(a>0){var h=e.width*a,m=e.height*a,g=ea(e,h,m);if(null===g)return;var v=pt(e,h,m),b=(l-v[0])/2,y=(c-v[1])/2,w=(s-v[2])/2,x=(u-v[3])/2,E=Qe(function(e,t){return{n:/^(n|ne|nw)$/.test(e)||t&&/^(s|se|sw)$/.test(e),s:/^(s|se|sw)$/.test(e)||t&&/^(n|ne|nw)$/.test(e),w:/^(w|nw|sw)$/.test(e)||t&&/^(e|ne|se)$/.test(e),e:/^(e|ne|se)$/.test(e)||t&&/^(w|nw|sw)$/.test(e)}}(t,n),e.x,e.y,e.angle,b,y,w,x),k=E[0],S=E[1];Dn(e,{fontSize:g.size,width:h,height:m,baseline:g.baseline,x:k,y:S})}}(d,t,a,l,c),jo(d)):function(e,t,n,r,o){var a,i=it(e),l=i[0],c=i[1],s=i[2],u=i[3],d=Ze(r,o,(l+s)/2,(c+u)/2,-e.angle),p=d[0],f=d[1],h="end"===t?[p-e.x,f-e.y]:[e.x+e.points[1][0]-p,e.y+e.points[1][1]-f],m=h[0],g=h[1];n&&(m=(a=function(e,t,n,r){var o=Bn.apply(void 0,Xo([e],Ze(t,n,0,0,r)));return Ze(o.width,o.height,0,0,-r)}(e.type,m,g,e.angle))[0],g=a[1]);var v=Qe("end"===t?{s:!0,e:!0}:{n:!0,w:!0},e.x,e.y,e.angle,0,0,(e.points[1][0]-m)/2,(e.points[1][1]-g)/2),b=v[0],y=v[1];Dn(e,{x:b,y:y,points:[[0,0],[m,g]]})}(d,r,o,l,c),document.documentElement.style.cursor=mo({element:d,transformHandleType:t}),!0}if(n.length>1){if("rotation"===t)return ta(e,n,l,c,o,s,u),!0;if("nw"===t||"ne"===t||"sw"===t||"se"===t)return function(e,t,n,r){var o,a,i=dt(e),l=i[0],c=i[1],s=i[2],u=i[3];switch(t){case"se":o=Math.max((n-l)/(s-l),(r-c)/(u-c)),a=function(e,t,n){var r=t[0],a=t[1],i=n[0],s=n[1];return{x:e.x+(r-l)*(o-1)+r-i,y:e.y+(a-c)*(o-1)+a-s}};break;case"nw":o=Math.max((s-n)/(s-l),(u-r)/(u-c)),a=function(e,t,n){var r=t[2],a=t[3],i=n[2],l=n[3];return{x:e.x-(s-r)*(o-1)+r-i,y:e.y-(u-a)*(o-1)+a-l}};break;case"ne":o=Math.max((n-l)/(s-l),(u-r)/(u-c)),a=function(e,t,n){var r=t[0],a=t[3],i=n[0],c=n[3];return{x:e.x+(r-l)*(o-1)+r-i,y:e.y-(u-a)*(o-1)+a-c}};break;case"sw":o=Math.max((s-n)/(s-l),(r-c)/(u-c)),a=function(e,t,n){var r=t[1],a=t[2],i=n[1],l=n[2];return{x:e.x-(s-a)*(o-1)+a-l,y:e.y+(r-c)*(o-1)+r-i}}}if(o>0){var d=e.reduce(function(t,n){if(!t)return t;var r=n.width*o,i=n.height*o,l={};if("text"===n.type){var c=ea(n,r,i);if(null===c)return null;l={fontSize:c.size,baseline:c.baseline}}var s=it(n),u=Jo(n,r,i);jo(n,{newSize:{width:r,height:i},simultaneouslyUpdated:e});var d=pt(qo(qo({},n),u),r,i),p=a(n,s,d),f=p.x,h=p.y;return Xo(Xo([],t),[qo(qo({width:r,height:i,x:f,y:h},u),l)])},[]);d&&e.forEach(function(e,t){Dn(e,d[t])})}}(n,t,l,c),!0}return!1}(e,o,r,e.resize.arrowDirection,Bt(n),jt(n),zt(n),l,c,e.resize.center.x,e.resize.center.y)&&(t.maybeSuggestBindingForAll(r),!0)},this.openContextMenu=function(e){var n,r=e.clientX,o=e.clientY,a=Jt({clientX:r,clientY:o},t.state),i=a.x,l=a.y,c=Ss.contextItemPredicate(t.actionManager.getElementsIncludingDeleted(),t.actionManager.getAppState()),s=Cs.contextItemPredicate(t.actionManager.getElementsIncludingDeleted(),t.actionManager.getAppState()),u="separator",d=wl(),p=t.scene.getElements(),f=t.getElementAtPosition(i,l),h=[];if(Rc&&p.length>0&&h.push(Zs),Nc&&p.length>0&&h.push(Xs),f)t.state.selectedElementIds[f.id]||t.setState({selectedElementIds:(n={},n[f.id]=!0,n)}),t.state.viewModeEnabled?Eu({options:kd([navigator.clipboard&&Ys],h),top:o,left:r,actionManager:t.actionManager,appState:t.state}):Eu({options:kd(kd([d&&Us,d&&navigator.clipboard&&Ys,d&&navigator.clipboard&&{name:"paste",perform:function(e,n){return t.pasteFromClipboard(null),{commitToHistory:!1}},contextItemLabel:"labels.paste"},d&&u],h),[u,ms,gs,u,c&&Ss,s&&Cs,(c||s)&&u,Ts,u,Fi,Wi,Gi,Vi,u,Qi,_i]),top:o,left:r,actionManager:t.actionManager,appState:t.state});else{var m=kd(kd([],h),[void 0===t.props.gridModeEnabled&&$s,void 0===t.props.zenModeEnabled&&tu,void 0===t.props.viewModeEnabled&&wd,ou]);if(Eu({options:m,top:o,left:r,actionManager:t.actionManager,appState:t.state}),t.state.viewModeEnabled)return;Eu({options:[d&&navigator.clipboard&&{name:"paste",perform:function(e,n){return t.pasteFromClipboard(null),{commitToHistory:!1}},contextItemLabel:"labels.paste"},d&&navigator.clipboard&&u,Rc&&p.length>0&&Zs,Nc&&p.length>0&&Xs,(Rc&&p.length>0||Nc&&p.length>0)&&u,Ui,u,void 0===t.props.gridModeEnabled&&$s,void 0===t.props.zenModeEnabled&&tu,void 0===t.props.viewModeEnabled&&wd,ou],top:o,left:r,actionManager:t.actionManager,appState:t.state})}},this.handleWheel=ln(function(e){if(e.preventDefault(),!_d){var n=e.deltaX,r=e.deltaY,o=t.state,a=o.selectedElementIds,i=o.previousSelectedElementIds;if(e.metaKey||e.ctrlKey){var l=Math.sign(r),c=Math.abs(r);c>10&&(c=10),c*=l,0!==Object.keys(i).length&&setTimeout(function(){t.setState({selectedElementIds:i,previousSelectedElementIds:{}})},1e3);var s=t.state.zoom.value-c/100;return s+=Math.log10(Math.max(1,t.state.zoom.value))*-l,s=Math.round(s*g.V4*100)/(100*g.V4),t.setState(function(e){var t=e.zoom,n=e.offsetLeft,r=e.offsetTop;return{zoom:Ma(Ia(s),t,{left:n,top:r},{x:Pd,y:Td}),selectedElementIds:{},previousSelectedElementIds:0!==Object.keys(a).length?a:i,shouldCacheIgnoreZoom:!0}}),void t.resetShouldCacheIgnoreZoomDebounced()}e.shiftKey?t.setState(function(e){var t=e.zoom;return{scrollX:e.scrollX-(r||n)/t.value}}):t.setState(function(e){var t=e.zoom,o=e.scrollX,a=e.scrollY;return{scrollX:o-n/t.value,scrollY:a-r/t.value}})}}),this.savePointer=function(e,n,r){var o,a;if(e&&n){var i=Jt({clientX:e,clientY:n},t.state);isNaN(i.x)||isNaN(i.y),null===(o=(a=t.props).onPointerUpdate)||void 0===o||o.call(a,{pointer:i,button:r,pointersMap:Hd.pointers})}},this.resetShouldCacheIgnoreZoomDebounced=Kt(function(){t.unmounted||t.setState({shouldCacheIgnoreZoom:!1})},300)};"production"!==g.Vi.TEST&&"production"!==g.Vi.DEVELOPMENT||(window.h=window.h||{},Object.defineProperties(window.h,{elements:{configurable:!0,get:function(){return this.app.scene.getElementsIncludingDeleted()},set:function(e){return this.app.scene.replaceAllElements(e)}},history:{configurable:!0,get:function(){return Od}},library:{configurable:!0,value:qc}}));const Fd=Nd;a(8234),a(4651);var Wd=function(e){var t=e.width,n=e.height,r=e.offsetLeft,o=e.offsetTop,a=e.onChange,i=e.initialData,l=e.excalidrawRef,c=e.onCollabButtonClick,s=e.isCollaborating,u=e.onPointerUpdate,d=e.onExport,p=e.onExportToBackend,f=e.renderFooter,g=e.langCode,v=void 0===g?E.code:g,b=e.viewModeEnabled,y=e.zenModeEnabled,w=e.gridModeEnabled;return(0,h.useEffect)(function(){var e=function(e){"number"==typeof e.scale&&1!==e.scale&&e.preventDefault()};return document.addEventListener("touchmove",e,{passive:!1}),function(){document.removeEventListener("touchmove",e)}},[]),m().createElement(j,{langCode:v},m().createElement(yl,null,m().createElement(Fd,{width:t,height:n,offsetLeft:r,offsetTop:o,onChange:a,initialData:i,excalidrawRef:l,onCollabButtonClick:c,isCollaborating:s,onPointerUpdate:u,onExport:d,onExportToBackend:p,renderFooter:f,langCode:v,viewModeEnabled:b,zenModeEnabled:y,gridModeEnabled:w})))};Wd.defaultProps={lanCode:E.code};var Gd=(0,h.forwardRef)(function(e,t){return m().createElement(Wd,l()({},e,{excalidrawRef:t}))});const Vd=m().memo(Gd,function(e,t){e.initialData;var n=d()(e,["initialData"]),r=(t.initialData,d()(t,["initialData"])),o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every(function(e){return n[e]===r[e]})});a(6009);const Kd=Vd},4698:function(t){"use strict";t.exports=e},6207:function(e){"use strict";e.exports=r}},h={};function m(e){if(h[e])return h[e].exports;var t=h[e]={id:e,exports:{}};return d[e](t,t.exports,m),t.exports}return m.m=d,m.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return m.d(t,{a:t}),t},i=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},m.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==k(e)&&e){if(4&t&&e.__esModule)return e;if(16&t&&"function"==typeof e.then)return e}var n=Object.create(null);m.r(n);var r={};a=a||[null,i({}),i([]),i(i)];for(var o=2&t&&e;"object"==k(o)&&!~a.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach(function(t){return r[t]=function(){return e[t]}});return r.default=function(){return e},m.d(n,r),n},m.d=function(e,t){for(var n in t)m.o(t,n)&&!m.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},m.f={},m.e=function(e){return Promise.all(Object.keys(m.f).reduce(function(t,n){return m.f[n](e,t),t},[]))},m.u=function(e){return"excalidraw-assets/"+{9:"image",43:"i18n-de-DE-json",60:"i18n-ko-KR-json",62:"i18n-zh-TW-json",137:"i18n-ja-JP-json",149:"i18n-pt-PT-json",164:"i18n-kab-KAB-json",196:"i18n-nl-NL-json",213:"i18n-tr-TR-json",242:"i18n-my-MM-json",246:"i18n-nb-NO-json",262:"i18n-he-IL-json",280:"i18n-pa-IN-json",304:"i18n-zh-CN-json",317:"i18n-es-ES-json",351:"i18n-ca-ES-json",364:"i18n-fr-FR-json",381:"i18n-pt-BR-json",384:"i18n-bg-BG-json",401:"i18n-sk-SK-json",465:"i18n-it-IT-json",472:"i18n-fi-FI-json",491:"i18n-id-ID-json",526:"i18n-el-GR-json",558:"i18n-ar-SA-json",583:"i18n-uk-UA-json",661:"i18n-hu-HU-json",698:"i18n-sv-SE-json",710:"i18n-fa-IR-json",736:"vendor",752:"i18n-ro-RO-json",852:"i18n-pl-PL-json",869:"i18n-ru-RU-json",920:"i18n-nn-NO-json",933:"i18n-hi-IN-json"}[e]+"-"+{9:"4c2d5c85067885b645af",43:"6c9a6530390f264cca9c",60:"fcb7c4f67345da70f193",62:"5e6394067c80cf6257fc",137:"3ba3a33502526e73bb49",149:"00ee5ed49bb8a0be27b7",164:"0f48e0ea83ff24dfc18c",196:"c2ac46337fe0058749da",213:"c8788bf3cd5ae64f3934",242:"b5dd91fce02e82edc3fe",246:"c7ad17e87f386e94bc27",262:"9fe5759ecbe50cd3d98b",280:"5c1cea1ca05eebe7782e",304:"42894347f4a0a1cd3e2d",317:"c9151b33ff2bf05e0717",351:"d5a98babbbc2b19b5426",364:"a4b21ae9c3a79367f8ac",381:"b93e36d19e5188e46e2e",384:"dfdcd793fe2a0371d3e8",401:"90689b793169b7f3ac00",465:"bd83830cede1a946d86a",472:"753a78ab1bdf1fba2a81",491:"3a6bf4237351abb65468",526:"76b8149b40916ac9dbe5",558:"2c0b3393a63e5b331d23",583:"02b7843d840fee0c2401",661:"0079c31f82d348afcbad",698:"95857ca2878d8fe26649",710:"2d28643d4f5c290181c2",736:"01adc7078c1c9fa90f39",752:"c0798a444a39c820be7c",852:"a9ad2a5fc431005434fa",869:"073b37fd2b37e6fffbcb",920:"0eb63dbc270dff8049df",933:"e5d07e5068df8db9ae05"}[e]+".js"},m.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l={},c="Excalidraw:",m.l=function(e,t,n,r){if(l[e])l[e].push(t);else{var o,a;if(void 0!==n)for(var i=document.getElementsByTagName("script"),s=0;s<i.length;s++){var u=i[s];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==c+n){o=u;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,m.nc&&o.setAttribute("nonce",m.nc),o.setAttribute("data-webpack",c+n),o.src=e),l[e]=[t];var d=function(t,n){o.onerror=o.onload=null,clearTimeout(p);var r=l[e];if(delete l[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(function(e){return e(n)}),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),a&&document.head.appendChild(o)}},m.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},m.p="",function(){var e={163:0};m.f.j=function(t,n){var r=m.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise(function(n,o){r=e[t]=[n,o]});n.push(r[2]=o);var a=m.p+m.u(t),i=new Error;m.l(a,function(n){if(m.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",i.name="ChunkLoadError",i.type=o,i.request=a,r[1](i)}},"chunk-"+t,t)}};var t=function(t,n){for(var r,o,a=v(n,3),i=a[0],l=a[1],c=a[2],s=0,u=[];s<i.length;s++)o=i[s],m.o(e,o)&&e[o]&&u.push(e[o][0]),e[o]=0;for(r in l)m.o(l,r)&&(m.m[r]=l[r]);for(c&&c(m),t&&t(n);u.length;)u.shift()()},n=self.webpackChunkExcalidraw=self.webpackChunkExcalidraw||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),m(8835)}()});
},{"react":"AQ6k","react-dom":"AQ6k","process":"pBGv"}],"J0p0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Problem=void 0;var e=require("preact");exports.Problem=e.createContext("");
},{"preact":"aSor"}],"TSA1":[function(require,module,exports) {

},{}],"q3NO":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("preact"),i=require("preact/hooks"),n=e(require("@cpmdevops/whiteboard")),r=require("../context/problemContext");require("../styles/index.css");var o=function(e){var o=e.initialData,l=e.onExport,a=e.handleCancel,u=i.useContext(r.Problem),d=i.useState(!1),s=d[0],c=d[1],h=i.useRef(null),p=i.useRef(null),f=i.useState({width:void 0,height:void 0}),v=f[0],m=f[1];return i.useEffect(function(){var e,t;m({width:null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect().width,height:null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect().height});var i=function(){var e,t;m({width:null===(e=p.current)||void 0===e?void 0:e.getBoundingClientRect().width,height:null===(t=p.current)||void 0===t?void 0:t.getBoundingClientRect().height})};return window.addEventListener("resize",i),function(){return window.removeEventListener("resize",i)}},[p]),i.useEffect(function(){var e=document.getElementById("wrapper-body");return e&&(e.style.height="unset"),function(){return e.style.height="100%"}},[]),i.useEffect(function(){window.MathJax.Hub.Queue(["Typeset",window.MathJax.Hub],document.getElementById("problemInsideExcalidraw"))},[]),t.h("div",{className:"eWorkspace-excalidraw-modal",ref:p},t.h("div",{className:"eWorkspace-modal-problem-wrapper",style:{height:s?"100%":"initial"}},t.h("div",{id:"problemInsideExcalidraw",className:"problem",style:{display:s?"block":"none"},dangerouslySetInnerHTML:{__html:u}})),t.h("button",{className:"eWorkspace-btn eWorkspace-btn-default",onClick:function(){c(function(e){return!e})},style:{left:"4px",position:"absolute",top:"125px",zIndex:5}},s?"Hide Problem":"Show Problem"),t.h("i",{class:"fas fa-times eWorkspace-close-icon-modal",onClick:a}),t.h(n.default,{ref:h,width:v.width,height:v.height,initialData:o,onExport:l}))};exports.default=o;
},{"preact":"aSor","preact/hooks":"MwGB","@cpmdevops/whiteboard":"gOtw","../context/problemContext":"J0p0","../styles/index.css":"TSA1"}],"QOjW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.b64EncodeUnicode=void 0;var e=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,o){return String.fromCharCode("0x"+o)}))};exports.b64EncodeUnicode=e;
},{}],"VjIA":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("preact"),n=require("preact/hooks"),a=require("../eworkspace-plugin"),s=e(require("@cpmdevops/eworkspace-prosemirror")),c=e(require("./ExcalidrawModal")),r=require("../utils/b64encode"),i=function(e){var i,o=e.addEntry,l=e.entry,d=e.updateEntryLocally,u=l.createdAt,h=l.entryType,p=l.firstName,k=l.id,f=l.lastName,y=l.mediaContent,E=l.mediaContentType,m=l.submissionId,v=l.isArchived,b=n.useState(!1),S=b[0],W=b[1],A=n.useState(!1),T=A[0],x=A[1],R=n.useState(""),N=R[0],_=R[1],C=n.useState(""),g=C[0],I=C[1],D=n.useState(!1),O=D[0],P=D[1],M=n.useState(""),w=M[0],U=M[1],F=n.useRef(),q=function(){switch(x(!0),E){case"CANVAS":U(y.canvas);break;case"IMAGE_BASE64":I(y.data);break;case"JSON_PROSEMIRROR":_(y.doc);break;case"PLAIN_TEXT":_(y.text)}},L=function(){P(!1),x(!1),U(""),_(""),I("")},J=function(){a.eWorkspaceAPI.archiveEntry(k).then(function(e){e&&d(k)})},V=function(){var e;switch(E){case"CANVAS":e={version:"1.0",canvas:w};break;case"IMAGE_BASE64":e={data:g};break;case"JSON_PROSEMIRROR":case"PLAIN_TEXT":e={version:"1.0",doc:N}}a.eWorkspaceAPI.postEntry(m,E,e).then(function(e){o&&o(e,k)}).then(function(){U(""),_(""),I(""),x(!1),W(!1)})},X=function(){P(!0)},B=function(e){return'{"type":"doc","content":[{"type":"paragraph","content":[{"type":"text","text":"'+e+'"}]}]}'};return n.useEffect(function(){w&&F.current&&V()},[w]),t.h(t.Fragment,null,t.h("tr",{id:""+k,class:"eWorkspace-entry "+h+" "+E},t.h("td",null,(i=new Date(u),new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"}).format(i))),t.h("td",null,"STUDENT_ANSWER"===h?"Student Answer":"Teacher Feedback",v&&" (Archived)"),t.h("td",null,p," ",f),t.h("td",{id:"eWorkspace-table-chevron"},t.h("button",{class:"eWorkspace-icon-button",onClick:function(){W(function(e){return!e})}},t.h("i",{class:"fas fa-chevron-down","aria-hidden":"true"})))),S&&t.h("tr",{class:"eWorkspace-entry-content"},t.h("td",{colSpan:4},(T||O)&&"IMAGE_BASE64"!==E?t.h("div",{class:"eWorkspace-entry-inner"},t.h("div",{class:"eWorkspace-entry-inner-body"},T&&t.h(t.Fragment,null,"CANVAS"===E&&t.h(c.default,{initialData:y.canvas,handleCancel:L,onExport:function(e){return U(e),F.current=!0,e}}),"JSON_PROSEMIRROR"===E&&t.h(s.default,{setText:_,document:y.doc}),"PLAIN_TEXT"===E&&(y.text.includes('"type": "doc"')?t.h(s.default,{setText:_,document:y.text}):t.h(s.default,{setText:_,document:B(y.text)}))),O&&t.h(t.Fragment,null,"CANVAS"===E&&t.h("img",{src:"data:image/svg+xml;base64,"+r.b64EncodeUnicode(y.canvas),alt:"student answer"}),"JSON_PROSEMIRROR"===E&&t.h(s.default,{canEdit:!1,setText:_,document:y.doc}),"PLAIN_TEXT"===E&&(y.text.includes('"type": "doc"')?t.h(s.default,{canEdit:!1,setText:_,document:y.text}):t.h(s.default,{canEdit:!1,setText:_,document:B(y.text)}))),t.h("div",{class:"eWorkspace-entry-actions"},T&&t.h(t.Fragment,null,t.h("button",{class:"eWorkspace-btn eWorkspace-btn-default",onClick:L},"Cancel"),t.h("button",{class:"eWorkspace-btn eWorkspace-btn-primary",onClick:V},"Submit")),O&&t.h(t.Fragment,null,t.h("button",{class:"eWorkspace-btn eWorkspace-btn-default",onClick:L},"Cancel"),t.h("button",{class:"eWorkspace-btn eWorkspace-btn-delete",onClick:J},"Delete"))))):t.h(t.Fragment,null,"CANVAS"===E&&t.h("div",{class:"eWorkspace-entry-inner"},"STUDENT_ANSWER"===h&&!v&&t.h("div",{class:"eWorkspace-entry-inner-actions"},t.h("div",{style:{cursor:"pointer",marginRight:"16px"},onClick:q},t.h("i",{class:"fas fa-pen"}),t.h("span",{class:"inner-action"},"Edit")),t.h("div",{style:{cursor:"pointer"},onClick:X},t.h("i",{class:"fas fa-trash"}),t.h("span",{class:"inner-action"},"Delete"))),t.h("div",{class:"eWorkspace-entry-inner-body"},t.h("img",{src:"data:image/svg+xml;base64,"+r.b64EncodeUnicode(y.canvas),alt:"student answer"}))),"JSON_PROSEMIRROR"===E&&t.h("div",{class:"eWorkspace-entry-inner"},"STUDENT_ANSWER"===h&&!v&&t.h("div",{class:"eWorkspace-entry-inner-actions"},t.h("div",{style:{cursor:"pointer",marginRight:"16px"},onClick:q},t.h("i",{class:"fas fa-pen"}),t.h("span",{class:"inner-action"},"Edit")),t.h("div",{style:{cursor:"pointer"},onClick:X},t.h("i",{class:"fas fa-trash"}),t.h("span",{class:"inner-action"},"Delete"))),t.h("div",{class:"eWorkspace-entry-inner-body"},t.h(s.default,{canEdit:!1,setText:_,document:y.doc}))),"PLAIN_TEXT"===E&&t.h("div",{class:"eWorkspace-entry-inner"},"STUDENT_ANSWER"===h&&!v&&t.h("div",{class:"eWorkspace-entry-inner-actions"},t.h("div",{style:{cursor:"pointer",marginRight:"16px"},onClick:q},t.h("i",{class:"fas fa-pen"}),t.h("span",{class:"inner-action"},"Edit")),t.h("div",{style:{cursor:"pointer"},onClick:X},t.h("i",{class:"fas fa-trash"}),t.h("span",{class:"inner-action"},"Delete"))),t.h("div",{class:"eWorkspace-entry-inner-body"},y.text.includes('"type": "doc"')?t.h(s.default,{canEdit:!1,setText:_,document:y.text}):t.h(s.default,{canEdit:!1,setText:_,document:B(y.text)}))),"IMAGE_BASE64"===E&&t.h("div",{class:"eWorkspace-entry-inner"},"STUDENT_ANSWER"===h&&!v&&!O&&t.h("div",{class:"eWorkspace-entry-inner-action",onClick:X},t.h("i",{class:"fas fa-trash"}),t.h("span",{class:"inner-action"},"Delete")),t.h("div",{class:"eWorkspace-entry-inner-body"},t.h("img",{src:y.data.includes("data:image")?""+y.data:"data:image/png;base64,"+y.data}),"STUDENT_ANSWER"===h&&!v&&O&&t.h("div",{class:"eWorkspace-entry-actions"},t.h("button",{class:"eWorkspace-btn eWorkspace-btn-default",onClick:L},"Cancel"),t.h("button",{class:"eWorkspace-btn eWorkspace-btn-delete",onClick:J},"Delete"))))))))};exports.default=i;
},{"preact":"aSor","preact/hooks":"MwGB","../eworkspace-plugin":"rPlX","@cpmdevops/eworkspace-prosemirror":"jSb2","./ExcalidrawModal":"q3NO","../utils/b64encode":"QOjW"}],"J6vP":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("preact"),r=e(require("../components/Entry")),a=function(e){var a=e.addEntry,l=e.entries,s=e.updateEntryLocally;return t.h(t.Fragment,null,l&&l.length>0&&t.h("table",{class:"eWorkspace-entries table"},t.h("thead",null,t.h("tr",null,t.h("th",{class:"eWorkspace-table-header",scope:"col"},"Date"),t.h("th",{class:"eWorkspace-table-header",scope:"col"},"Type"),t.h("th",{class:"eWorkspace-table-header",scope:"col"},"Submitted By"),t.h("th",{scope:"col"}))),t.h("tbody",null,l&&l.map(function(e){return t.h(r.default,{addEntry:a,entry:e,key:e.id,updateEntryLocally:s})}))))};exports.default=a;
},{"preact":"aSor","../components/Entry":"VjIA"}],"rC9R":[function(require,module,exports) {
module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"changeHeightWidth",value:function(e,t,n,r,a,o){return n>r&&(e=Math.round(e*r/n),n=r),e>t&&(n=Math.round(n*t/e),e=t),a&&n<a&&(e=Math.round(e*a/n),n=a),o&&e<o&&(n=Math.round(n*o/e),e=o),{height:e,width:n}}},{key:"resizeAndRotateImage",value:function(e,t,n,r,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"jpeg",i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:100,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=i/100,c=document.createElement("canvas"),d=e.width,h=e.height,g=this.changeHeightWidth(h,n,d,t,r,a);!u||90!==u&&270!==u?(c.width=g.width,c.height=g.height):(c.width=g.height,c.height=g.width),d=g.width,h=g.height;var f=c.getContext("2d");return u&&(f.rotate(u*Math.PI/180),90===u?f.translate(0,-c.width):180===u?f.translate(-c.width,-c.height):270===u?f.translate(-c.height,0):0!==u&&360!==u||f.translate(0,0)),f.drawImage(e,0,0,d,h),c.toDataURL("image/".concat(o),l)}},{key:"b64toBlob",value:function(e,t){t=t||"image/jpeg";for(var n=atob(e.toString().replace(/^data:image\/(png|jpeg|jpg);base64,/,"")),r=[],a=0;a<n.length;a+=512){for(var o=n.slice(a,a+512),i=new Array(o.length),u=0;u<o.length;u++)i[u]=o.charCodeAt(u);var l=new Uint8Array(i);r.push(l)}return new Blob(r,{type:t})}},{key:"createResizedImage",value:function(t,n,r,a,o,i,u){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"base64",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,h=null,g=new FileReader;t?(g.readAsDataURL(t),g.onload=function(){var t=new Image;t.src=g.result,t.onload=function(){var g=e.resizeAndRotateImage(t,n,r,c,d,a,o,i);h=e.b64toBlob(g,"image/".concat(a)),u("blob"===l?h:g)}},g.onerror=function(e){u(e)}):u("File Not Found")}}],null&&r(t.prototype,null),n&&r(t,n),e}();t.default={imageFileResizer:function(e,t,n,r,o,i,u,l,c,d){return a.createResizedImage(e,t,n,r,o,i,u,l,c,d)}}}]);
},{}],"WcN3":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("preact"),a=require("preact/hooks"),i=require("../eworkspace-plugin"),o=n(require("@cpmdevops/eworkspace-prosemirror")),s=n(require("react-image-file-resizer")),c=n(require("./ExcalidrawModal")),u=function(n){var u=n.addEntry,l=n.addSubmission,f=n.closeEditor,p=n.lessonContentContainerId,h=n.submissionId,d=a.useState(!0),k=d[0],b=d[1],m=a.useState(!1),v=m[0],y=m[1],W=a.useState(!1),g=W[0],S=W[1],w=a.useState(""),C=w[0],_=w[1],x=a.useState(""),E=x[0],I=x[1],P=a.useState(!1),R=P[0],N=P[1],q=a.useState(""),A=q[0],O=q[1],T=a.useRef(),M=function(){var e,t;R&&(e="CANVAS",t={version:"1.0",canvas:A}),g&&(e="IMAGE_BASE64",t={data:E}),v&&(e="JSON_PROSEMIRROR",t={version:"1.0",doc:C}),l?i.eWorkspaceAPI.postSubmission(p,e,t).then(function(e){return l(e)}).then(function(){b(!0),y(!1),S(!1),O(""),_(""),I(""),G()}):i.eWorkspaceAPI.postEntry(h,e,t).then(function(e){u&&u(e)}).then(function(){b(!0),y(!1),S(!1),O(""),_(""),I(""),G()})},F=function(){b(!0),N(!1),y(!1),S(!1),O(""),I(""),_(""),T&&T.current&&(T.current.value="")},G=function(){f()},z=function(e){return new Promise(function(t){s.default.imageFileResizer(e,1024,786,"JPEG",70,0,function(e){return t(e)},"base64")})};return a.useEffect(function(){A&&M()},[A]),r.h(r.Fragment,null,k&&r.h("div",{className:"eWorkspace-editor"},r.h("i",{class:"fas fa-times eWorkspace-close-icon",onClick:G}),r.h("div",{className:"eWorkspace-selections"},r.h("div",{className:"eWorkspace-selection",onClick:function(){b(!1),N(!0)}},r.h("i",{class:"fas fa-edit eWorkspace-selection-icon"}),"Canvas"),r.h("div",null,"OR"),r.h("div",{className:"eWorkspace-selection",onClick:function(){b(!1),y(!0)}},r.h("i",{class:"fas fa-keyboard eWorkspace-selection-icon"}),"Text"),r.h("div",null,"OR"),r.h("div",{className:"eWorkspace-selection",onClick:function(){T&&T.current&&T.current.click()}},r.h("i",{class:"fas fa-file-image eWorkspace-selection-icon"}),"Upload Image",r.h("input",{type:"file",accept:"image/*",onInput:function(n){return e(void 0,void 0,Promise,function(){var e;return t(this,function(t){switch(t.label){case 0:return n.currentTarget.files&&n.currentTarget.files[0]?[4,z(n.currentTarget.files[0])]:[2];case 1:return e=t.sent(),I(e),b(!1),S(!0),[2]}})})},id:"eWorkspace-upload-image-input",ref:T})))),R&&r.h(c.default,{initialData:"",handleCancel:F,onExport:function(e){return O(e),e}}),v&&r.h(r.Fragment,null,r.h(o.default,{setText:_}),r.h("div",{class:"eWorkspace-entry-actions"},r.h("button",{class:"eWorkspace-btn eWorkspace-btn-default",onClick:F},"Cancel"),r.h("button",{class:"eWorkspace-btn eWorkspace-btn-primary",disabled:!C,onClick:M},"Submit"))),g&&r.h(r.Fragment,null,r.h("img",{class:"eWorkspace-editor-uploaded-image",src:E}),r.h("div",{class:"eWorkspace-entry-actions"},r.h("button",{class:"eWorkspace-btn eWorkspace-btn-default",onClick:F},"Cancel"),r.h("button",{class:"eWorkspace-btn eWorkspace-btn-primary",onClick:M},"Submit"))))};exports.default=u;
},{"preact":"aSor","preact/hooks":"MwGB","../eworkspace-plugin":"rPlX","@cpmdevops/eworkspace-prosemirror":"jSb2","react-image-file-resizer":"rC9R","./ExcalidrawModal":"q3NO"}],"XWf5":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArrays||function(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),i=0;for(r=0;r<t;r++)for(var s=arguments[r],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=require("preact"),n=require("preact/hooks"),i=require("../eworkspace-plugin"),s=r(require("./Entries")),a=r(require("./Editor")),o=function(r){var o=r.submission,u=r.lessonContentContainerId,c=o.entries,d=o.id,h=n.useState(c),l=h[0],f=h[1],p=n.useState(!1),v=p[0],k=p[1],y=n.useState(!1),g=y[0],A=y[1],E=function(r,t){t?i.eWorkspaceAPI.archiveEntry(t).then(function(n){if(n){var i=l.map(function(e){return e.id===t&&(e.isArchived=!0),e});f(e(i,[r]))}}):f(function(t){return e(t,[r])})},W=l.filter(function(e){return!e.isArchived}),_=l.filter(function(e){return e.isArchived}),m=_.length;return t.h(t.Fragment,null,t.h("div",{class:"eWorkspace-header-with-archive"},t.h("div",{class:"eWorkspace-header"},"eWorkspace"),_.length>0&&t.h("span",{class:"eWorkspace-archive-toggle",onClick:function(){A(function(e){return!e})}},g?"Hide Archived":"Archived ("+m+")")),l&&t.h(s.default,{addEntry:E,updateEntryLocally:function(e){var r=l.map(function(r){return r.id===e&&(r.isArchived=!0),r});f(r)},entries:g?l:W}),v?t.h(a.default,{addEntry:E,closeEditor:function(){k(!1)},lessonContentContainerId:u,submissionId:d}):t.h("div",{class:"eWorkspace-new"},t.h("button",{class:"eWorkspace-btn eWorkspace-btn-primary",onClick:function(){k(!0)}},"New Entry")))};exports.default=o;
},{"preact":"aSor","preact/hooks":"MwGB","../eworkspace-plugin":"rPlX","./Entries":"J6vP","./Editor":"WcN3"}],"LiKM":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("preact"),t=require("preact/hooks"),s=e(require("../components/Submission")),r=e(require("../components/Editor")),o=function(e){var o=e.containerSubmission,a=e.lessonContentContainerId,i=t.useState(o),u=i[0],c=i[1],l=t.useState(!1),d=l[0],p=l[1];return n.h("div",{class:"eWorkspace-container"},u?n.h(s.default,{lessonContentContainerId:a,submission:u}):d?n.h(n.Fragment,null,n.h("div",{class:"eWorkspace-header"},"eWorkspace"),n.h(r.default,{addSubmission:c,closeEditor:function(){p(!1)},lessonContentContainerId:a})):n.h(n.Fragment,null,n.h("div",{class:"eWorkspace-header-new"},"eWorkspace"),n.h("div",{class:"eWorkspace-new"},n.h("button",{class:"eWorkspace-btn eWorkspace-btn-primary",onClick:function(){p(!0)}},"New Entry"))))};exports.default=o;
},{"preact":"aSor","preact/hooks":"MwGB","../components/Submission":"XWf5","../components/Editor":"WcN3"}],"rPlX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eWorkspaceAPI=exports.EWORKSPACE_API_URL_BASE=exports.TEACHER_BASE=void 0;var e,t,n=require("preact"),o=require("./EWorkspaceApi"),r=c(require("./components/EworkspaceContainer")),s=require("./context/problemContext");function c(e){return e&&e.__esModule?e:{default:e}}exports.TEACHER_BASE=e,exports.EWORKSPACE_API_URL_BASE=t,"ebooks.cpm.org"===window.location.host?(exports.EWORKSPACE_API_URL_BASE=t="https://hermes.cpm.org/api",exports.TEACHER_BASE=e="https://ebooks.cpm.org/teacher-admin"):(exports.EWORKSPACE_API_URL_BASE=t="https://node-ms-test.cpm.org/api",exports.TEACHER_BASE=e="https://ebooks-test.cpm.org/teacher-admin");var a,i=function(e){return document.cookie.split("; ").find(function(t){return t.startsWith(e)}).split("=")[1]},d=function(e,t){var n=e.realm_access.classes.find(function(e){return e.books.find(function(e){return e.id===t})});return n&&n.eWorkspaceEnabled},p=function(e){var t=document.getElementsByClassName("contentContainerReference problem");t&&Object.keys(t).forEach(function(o){var c=t[o].getAttribute("container-id"),a=e.find(function(e){return e.lessonContentContainerId===c})||null,i=t[o].id,d=t[o].innerHTML,p=document.createElement("div"),u="eWorkspace-container-".concat(i);p.setAttribute("id",u),document.getElementById(i).appendChild(p),(0,n.render)((0,n.h)(s.Problem.Provider,{value:d},(0,n.h)(r.default,{containerSubmission:a,lessonContentContainerId:c})),document.getElementById(u))})};document.addEventListener("DOMContentLoaded",function(){var t=document.getElementsByClassName("c3po-metadata");if(t.length){var n=document.getElementById("contents"),r=t[0].getAttribute("data-book-id"),s=t[0].getAttribute("data-lesson-id"),c=jwt_decode(i("cpm-sso-token")),u=c&&c.realm_access&&c.realm_access.roles||[];if(d(c,r))if(u.includes("FACULTY")){if(s){var l=document.createElement("div"),m=document.createElement("a");m.href="".concat(e,"/lesson/").concat(s),m.target="_blank",m.rel="noreferrer noopener",m.innerText="Teacher Admin",l.appendChild(m),n.prepend(l)}}else u.includes("STUDENT")&&(exports.eWorkspaceAPI=a=new o.EWorkspaceAPI(r,s),a.getSubmissions().then(p,a))}}),exports.eWorkspaceAPI=a;
},{"preact":"aSor","./EWorkspaceApi":"wGr0","./components/EworkspaceContainer":"LiKM","./context/problemContext":"J0p0"}]},{},["rPlX"], null)